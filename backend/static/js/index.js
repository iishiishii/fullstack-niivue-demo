const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/lz4-BIGKWw27.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var F6=Object.defineProperty;var E2=e=>{throw TypeError(e)};var U6=(e,t,i)=>t in e?F6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var j=(e,t,i)=>U6(e,typeof t!="symbol"?t+"":t,i),Ed=(e,t,i)=>t.has(e)||E2("Cannot "+i);var O=(e,t,i)=>(Ed(e,t,"read from private field"),i?i.call(e):t.get(e)),$=(e,t,i)=>t.has(e)?E2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Y=(e,t,i,n)=>(Ed(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Ae=(e,t,i)=>(Ed(e,t,"access private method"),i);var ru=(e,t,i,n)=>({set _(s){Y(e,t,s,i)},get _(){return O(e,t,n)}});function B6(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function $1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var by={exports:{}},Cf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V6=Symbol.for("react.transitional.element"),P6=Symbol.for("react.fragment");function wy(e,t,i){var n=null;if(i!==void 0&&(n=""+i),t.key!==void 0&&(n=""+t.key),"key"in t){i={};for(var s in t)s!=="key"&&(i[s]=t[s])}else i=t;return t=i.ref,{$$typeof:V6,type:e,key:n,ref:t!==void 0?t:null,props:i}}Cf.Fragment=P6;Cf.jsx=wy;Cf.jsxs=wy;by.exports=Cf;var C=by.exports,Vo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_r=typeof window>"u"||"Deno"in globalThis;function jt(){}function O6(e,t){return typeof e=="function"?e(t):e}function nm(e){return typeof e=="number"&&e>=0&&e!==1/0}function Sy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ks(e,t){return typeof e=="function"?e(t):e}function Wi(e,t){return typeof e=="function"?e(t):e}function T2(e,t){const{type:i="all",exact:n,fetchStatus:s,predicate:r,queryKey:a,stale:o}=e;if(a){if(n){if(t.queryHash!==eg(a,t.options))return!1}else if(!Ql(t.queryKey,a))return!1}if(i!=="all"){const l=t.isActive();if(i==="active"&&!l||i==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||r&&!r(t))}function M2(e,t){const{exact:i,status:n,predicate:s,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(i){if(Gr(t.options.mutationKey)!==Gr(r))return!1}else if(!Ql(t.options.mutationKey,r))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function eg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Gr)(e)}function Gr(e){return JSON.stringify(e,(t,i)=>sm(i)?Object.keys(i).sort().reduce((n,s)=>(n[s]=i[s],n),{}):i)}function Ql(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(i=>Ql(e[i],t[i])):!1}function Cy(e,t){if(e===t)return e;const i=D2(e)&&D2(t);if(i||sm(e)&&sm(t)){const n=i?e:Object.keys(e),s=n.length,r=i?t:Object.keys(t),a=r.length,o=i?[]:{},l=new Set(n);let c=0;for(let u=0;u<a;u++){const h=i?u:r[u];(!i&&l.has(h)||i)&&e[h]===void 0&&t[h]===void 0?(o[h]=void 0,c++):(o[h]=Cy(e[h],t[h]),o[h]===e[h]&&e[h]!==void 0&&c++)}return s===a&&c===s?e:o}return t}function yh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}function D2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sm(e){if(!R2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!R2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function R2(e){return Object.prototype.toString.call(e)==="[object Object]"}function L6(e){return new Promise(t=>{setTimeout(t,e)})}function rm(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?Cy(e,t):t}function k6(e,t,i=0){const n=[...e,t];return i&&n.length>i?n.slice(1):n}function j6(e,t,i=0){const n=[t,...e];return i&&n.length>i?n.slice(0,-1):n}var tg=Symbol();function Ey(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===tg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ty(e,t){return typeof e=="function"?e(...t):!!e}var yr,Ss,eo,ly,z6=(ly=class extends Vo{constructor(){super();$(this,yr);$(this,Ss);$(this,eo);Y(this,eo,t=>{if(!_r&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){O(this,Ss)||this.setEventListener(O(this,eo))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Ss))==null||t.call(this),Y(this,Ss,void 0))}setEventListener(t){var i;Y(this,eo,t),(i=O(this,Ss))==null||i.call(this),Y(this,Ss,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){O(this,yr)!==t&&(Y(this,yr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof O(this,yr)=="boolean"?O(this,yr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yr=new WeakMap,Ss=new WeakMap,eo=new WeakMap,ly),ig=new z6,to,Cs,io,cy,_6=(cy=class extends Vo{constructor(){super();$(this,to,!0);$(this,Cs);$(this,io);Y(this,io,t=>{if(!_r&&window.addEventListener){const i=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",n)}}})}onSubscribe(){O(this,Cs)||this.setEventListener(O(this,io))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Cs))==null||t.call(this),Y(this,Cs,void 0))}setEventListener(t){var i;Y(this,io,t),(i=O(this,Cs))==null||i.call(this),Y(this,Cs,t(this.setOnline.bind(this)))}setOnline(t){O(this,to)!==t&&(Y(this,to,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return O(this,to)}},to=new WeakMap,Cs=new WeakMap,io=new WeakMap,cy),bh=new _6;function am(){let e,t;const i=new Promise((s,r)=>{e=s,t=r});i.status="pending",i.catch(()=>{});function n(s){Object.assign(i,s),delete i.resolve,delete i.reject}return i.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},i.reject=s=>{n({status:"rejected",reason:s}),t(s)},i}function G6(e){return Math.min(1e3*2**e,3e4)}function My(e){return(e??"online")==="online"?bh.isOnline():!0}var Dy=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Td(e){return e instanceof Dy}function Ry(e){let t=!1,i=0,n=!1,s;const r=am(),a=m=>{var A;n||(f(new Dy(m)),(A=e.abort)==null||A.call(e))},o=()=>{t=!0},l=()=>{t=!1},c=()=>ig.isFocused()&&(e.networkMode==="always"||bh.isOnline())&&e.canRun(),u=()=>My(e.networkMode)&&e.canRun(),h=m=>{var A;n||(n=!0,(A=e.onSuccess)==null||A.call(e,m),s==null||s(),r.resolve(m))},f=m=>{var A;n||(n=!0,(A=e.onError)==null||A.call(e,m),s==null||s(),r.reject(m))},d=()=>new Promise(m=>{var A;s=p=>{(n||c())&&m(p)},(A=e.onPause)==null||A.call(e)}).then(()=>{var m;s=void 0,n||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(n)return;let m;const A=i===0?e.initialPromise:void 0;try{m=A??e.fn()}catch(p){m=Promise.reject(p)}Promise.resolve(m).then(h).catch(p=>{var E;if(n)return;const v=e.retry??(_r?0:3),x=e.retryDelay??G6,y=typeof x=="function"?x(i,p):x,b=v===!0||typeof v=="number"&&i<v||typeof v=="function"&&v(i,p);if(t||!b){f(p);return}i++,(E=e.onFail)==null||E.call(e,i,p),L6(y).then(()=>c()?void 0:d()).then(()=>{t?f(p):g()})})};return{promise:r,cancel:a,continue:()=>(s==null||s(),r),cancelRetry:o,continueRetry:l,canStart:u,start:()=>(u()?g():d().then(g),r)}}var H6=e=>setTimeout(e,0);function Y6(){let e=[],t=0,i=o=>{o()},n=o=>{o()},s=H6;const r=o=>{t?e.push(o):s(()=>{i(o)})},a=()=>{const o=e;e=[],o.length&&s(()=>{n(()=>{o.forEach(l=>{i(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||a()}return l},batchCalls:o=>(...l)=>{r(()=>{o(...l)})},schedule:r,setNotifyFunction:o=>{i=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{s=o}}}var mt=Y6(),br,uy,Ny=(uy=class{constructor(){$(this,br)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nm(this.gcTime)&&Y(this,br,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_r?1/0:5*60*1e3))}clearGcTimeout(){O(this,br)&&(clearTimeout(O(this,br)),Y(this,br,void 0))}},br=new WeakMap,uy),no,wr,Ei,Sr,Ft,pc,Cr,Ki,Pn,hy,q6=(hy=class extends Ny{constructor(t){super();$(this,Ki);$(this,no);$(this,wr);$(this,Ei);$(this,Sr);$(this,Ft);$(this,pc);$(this,Cr);Y(this,Cr,!1),Y(this,pc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,Sr,t.client),Y(this,Ei,O(this,Sr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,no,K6(this.options)),this.state=t.state??O(this,no),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=O(this,Ft))==null?void 0:t.promise}setOptions(t){this.options={...O(this,pc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Ei).remove(this)}setData(t,i){const n=rm(this.state.data,t,this.options);return Ae(this,Ki,Pn).call(this,{data:n,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),n}setState(t,i){Ae(this,Ki,Pn).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var n,s;const i=(n=O(this,Ft))==null?void 0:n.promise;return(s=O(this,Ft))==null||s.cancel(t),i?i.then(jt).catch(jt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,no))}isActive(){return this.observers.some(t=>Wi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ks(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Sy(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=O(this,Ft))==null||i.continue()}onOnline(){var i;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=O(this,Ft))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),O(this,Ei).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(O(this,Ft)&&(O(this,Cr)?O(this,Ft).cancel({revert:!0}):O(this,Ft).cancelRetry()),this.scheduleGc()),O(this,Ei).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,Ki,Pn).call(this,{type:"invalidate"})}fetch(t,i){var c,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(O(this,Ft))return O(this,Ft).continueRetry(),O(this,Ft).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Y(this,Cr,!0),n.signal)})},r=()=>{const f=Ey(this.options,i),g=(()=>{const m={client:O(this,Sr),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return Y(this,Cr,!1),this.options.persister?this.options.persister(f,g,this):f(g)},o=(()=>{const f={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:O(this,Sr),state:this.state,fetchFn:r};return s(f),f})();(c=this.options.behavior)==null||c.onFetch(o,this),Y(this,wr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Ae(this,Ki,Pn).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=f=>{var d,g,m,A;Td(f)&&f.silent||Ae(this,Ki,Pn).call(this,{type:"error",error:f}),Td(f)||((g=(d=O(this,Ei).config).onError)==null||g.call(d,f,this),(A=(m=O(this,Ei).config).onSettled)==null||A.call(m,this.state.data,f,this)),this.scheduleGc()};return Y(this,Ft,Ry({initialPromise:i==null?void 0:i.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var d,g,m,A;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(p){l(p);return}(g=(d=O(this,Ei).config).onSuccess)==null||g.call(d,f,this),(A=(m=O(this,Ei).config).onSettled)==null||A.call(m,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,d)=>{Ae(this,Ki,Pn).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{Ae(this,Ki,Pn).call(this,{type:"pause"})},onContinue:()=>{Ae(this,Ki,Pn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),O(this,Ft).start()}},no=new WeakMap,wr=new WeakMap,Ei=new WeakMap,Sr=new WeakMap,Ft=new WeakMap,pc=new WeakMap,Cr=new WeakMap,Ki=new WeakSet,Pn=function(t){const i=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Iy(n.data,this.options),fetchMeta:t.meta??null};case"success":return Y(this,wr,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Td(s)&&s.revert&&O(this,wr)?{...O(this,wr),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=i(this.state),mt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),O(this,Ei).notify({query:this,type:"updated",action:t})})},hy);function Iy(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:My(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function K6(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,n=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var hn,fy,Fy=(fy=class extends Vo{constructor(t={}){super();$(this,hn);this.config=t,Y(this,hn,new Map)}build(t,i,n){const s=i.queryKey,r=i.queryHash??eg(s,i);let a=this.get(r);return a||(a=new q6({client:t,queryKey:s,queryHash:r,options:t.defaultQueryOptions(i),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){O(this,hn).has(t.queryHash)||(O(this,hn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=O(this,hn).get(t.queryHash);i&&(t.destroy(),i===t&&O(this,hn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){mt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return O(this,hn).get(t)}getAll(){return[...O(this,hn).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(n=>T2(i,n))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(n=>T2(t,n)):i}notify(t){mt.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){mt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){mt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hn=new WeakMap,fy),fn,Lt,Er,dn,fs,dy,Q6=(dy=class extends Ny{constructor(t){super();$(this,dn);$(this,fn);$(this,Lt);$(this,Er);this.mutationId=t.mutationId,Y(this,Lt,t.mutationCache),Y(this,fn,[]),this.state=t.state||Uy(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){O(this,fn).includes(t)||(O(this,fn).push(t),this.clearGcTimeout(),O(this,Lt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,fn,O(this,fn).filter(i=>i!==t)),this.scheduleGc(),O(this,Lt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){O(this,fn).length||(this.state.status==="pending"?this.scheduleGc():O(this,Lt).remove(this))}continue(){var t;return((t=O(this,Er))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var r,a,o,l,c,u,h,f,d,g,m,A,p,v,x,y,b,E,w,S;const i=()=>{Ae(this,dn,fs).call(this,{type:"continue"})};Y(this,Er,Ry({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,T)=>{Ae(this,dn,fs).call(this,{type:"failed",failureCount:M,error:T})},onPause:()=>{Ae(this,dn,fs).call(this,{type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Lt).canRun(this)}));const n=this.state.status==="pending",s=!O(this,Er).canStart();try{if(n)i();else{Ae(this,dn,fs).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(r=O(this,Lt).config).onMutate)==null?void 0:a.call(r,t,this));const T=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));T!==this.state.context&&Ae(this,dn,fs).call(this,{type:"pending",context:T,variables:t,isPaused:s})}const M=await O(this,Er).start();return await((u=(c=O(this,Lt).config).onSuccess)==null?void 0:u.call(c,M,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,M,t,this.state.context)),await((g=(d=O(this,Lt).config).onSettled)==null?void 0:g.call(d,M,null,this.state.variables,this.state.context,this)),await((A=(m=this.options).onSettled)==null?void 0:A.call(m,M,null,t,this.state.context)),Ae(this,dn,fs).call(this,{type:"success",data:M}),M}catch(M){try{throw await((v=(p=O(this,Lt).config).onError)==null?void 0:v.call(p,M,t,this.state.context,this)),await((y=(x=this.options).onError)==null?void 0:y.call(x,M,t,this.state.context)),await((E=(b=O(this,Lt).config).onSettled)==null?void 0:E.call(b,void 0,M,this.state.variables,this.state.context,this)),await((S=(w=this.options).onSettled)==null?void 0:S.call(w,void 0,M,t,this.state.context)),M}finally{Ae(this,dn,fs).call(this,{type:"error",error:M})}}finally{O(this,Lt).runNext(this)}}},fn=new WeakMap,Lt=new WeakMap,Er=new WeakMap,dn=new WeakSet,fs=function(t){const i=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),mt.batch(()=>{O(this,fn).forEach(n=>{n.onMutationUpdate(t)}),O(this,Lt).notify({mutation:this,type:"updated",action:t})})},dy);function Uy(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var On,Qi,vc,my,By=(my=class extends Vo{constructor(t={}){super();$(this,On);$(this,Qi);$(this,vc);this.config=t,Y(this,On,new Set),Y(this,Qi,new Map),Y(this,vc,0)}build(t,i,n){const s=new Q6({mutationCache:this,mutationId:++ru(this,vc)._,options:t.defaultMutationOptions(i),state:n});return this.add(s),s}add(t){O(this,On).add(t);const i=au(t);if(typeof i=="string"){const n=O(this,Qi).get(i);n?n.push(t):O(this,Qi).set(i,[t])}this.notify({type:"added",mutation:t})}remove(t){if(O(this,On).delete(t)){const i=au(t);if(typeof i=="string"){const n=O(this,Qi).get(i);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&O(this,Qi).delete(i)}}this.notify({type:"removed",mutation:t})}canRun(t){const i=au(t);if(typeof i=="string"){const n=O(this,Qi).get(i),s=n==null?void 0:n.find(r=>r.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const i=au(t);if(typeof i=="string"){const s=(n=O(this,Qi).get(i))==null?void 0:n.find(r=>r!==t&&r.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mt.batch(()=>{O(this,On).forEach(t=>{this.notify({type:"removed",mutation:t})}),O(this,On).clear(),O(this,Qi).clear()})}getAll(){return Array.from(O(this,On))}find(t){const i={exact:!0,...t};return this.getAll().find(n=>M2(i,n))}findAll(t={}){return this.getAll().filter(i=>M2(t,i))}notify(t){mt.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return mt.batch(()=>Promise.all(t.map(i=>i.continue().catch(jt))))}},On=new WeakMap,Qi=new WeakMap,vc=new WeakMap,my);function au(e){var t;return(t=e.options.scope)==null?void 0:t.id}function N2(e){return{onFetch:(t,i)=>{var u,h,f,d,g;const n=t.options,s=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,r=((d=t.state.data)==null?void 0:d.pages)||[],a=((g=t.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const A=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},p=Ey(t.options,t.fetchOptions),v=async(x,y,b)=>{if(m)return Promise.reject();if(y==null&&x.pages.length)return Promise.resolve(x);const w=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:y,direction:b?"backward":"forward",meta:t.options.meta};return A(R),R})(),S=await p(w),{maxPages:M}=t.options,T=b?j6:k6;return{pages:T(x.pages,S,M),pageParams:T(x.pageParams,y,M)}};if(s&&r.length){const x=s==="backward",y=x?X6:I2,b={pages:r,pageParams:a},E=y(n,b);o=await v(b,E,x)}else{const x=e??r.length;do{const y=l===0?a[0]??n.initialPageParam:I2(n,o);if(l>0&&y==null)break;o=await v(o,y),l++}while(l<x)}return o};t.options.persister?t.fetchFn=()=>{var m,A;return(A=(m=t.options).persister)==null?void 0:A.call(m,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=c}}}function I2(e,{pages:t,pageParams:i}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,i[n],i):void 0}function X6(e,{pages:t,pageParams:i}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,i[0],i):void 0}var nt,Es,Ts,so,ro,Ms,ao,oo,gy,W6=(gy=class{constructor(e={}){$(this,nt);$(this,Es);$(this,Ts);$(this,so);$(this,ro);$(this,Ms);$(this,ao);$(this,oo);Y(this,nt,e.queryCache||new Fy),Y(this,Es,e.mutationCache||new By),Y(this,Ts,e.defaultOptions||{}),Y(this,so,new Map),Y(this,ro,new Map),Y(this,Ms,0)}mount(){ru(this,Ms)._++,O(this,Ms)===1&&(Y(this,ao,ig.subscribe(async e=>{e&&(await this.resumePausedMutations(),O(this,nt).onFocus())})),Y(this,oo,bh.subscribe(async e=>{e&&(await this.resumePausedMutations(),O(this,nt).onOnline())})))}unmount(){var e,t;ru(this,Ms)._--,O(this,Ms)===0&&((e=O(this,ao))==null||e.call(this),Y(this,ao,void 0),(t=O(this,oo))==null||t.call(this),Y(this,oo,void 0))}isFetching(e){return O(this,nt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return O(this,Es).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=O(this,nt).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),i=O(this,nt).build(this,t),n=i.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(ks(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return O(this,nt).findAll(e).map(({queryKey:t,state:i})=>{const n=i.data;return[t,n]})}setQueryData(e,t,i){const n=this.defaultQueryOptions({queryKey:e}),s=O(this,nt).get(n.queryHash),r=s==null?void 0:s.state.data,a=O6(t,r);if(a!==void 0)return O(this,nt).build(this,n).setData(a,{...i,manual:!0})}setQueriesData(e,t,i){return mt.batch(()=>O(this,nt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=O(this,nt).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=O(this,nt);mt.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=O(this,nt);return mt.batch(()=>(i.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const i={revert:!0,...t},n=mt.batch(()=>O(this,nt).findAll(e).map(s=>s.cancel(i)));return Promise.all(n).then(jt).catch(jt)}invalidateQueries(e,t={}){return mt.batch(()=>(O(this,nt).findAll(e).forEach(i=>{i.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const i={...t,cancelRefetch:t.cancelRefetch??!0},n=mt.batch(()=>O(this,nt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let r=s.fetch(void 0,i);return i.throwOnError||(r=r.catch(jt)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(n).then(jt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=O(this,nt).build(this,t);return i.isStaleByTime(ks(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(jt).catch(jt)}fetchInfiniteQuery(e){return e.behavior=N2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(jt).catch(jt)}ensureInfiniteQueryData(e){return e.behavior=N2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bh.isOnline()?O(this,Es).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,nt)}getMutationCache(){return O(this,Es)}getDefaultOptions(){return O(this,Ts)}setDefaultOptions(e){Y(this,Ts,e)}setQueryDefaults(e,t){O(this,so).set(Gr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...O(this,so).values()],i={};return t.forEach(n=>{Ql(e,n.queryKey)&&Object.assign(i,n.defaultOptions)}),i}setMutationDefaults(e,t){O(this,ro).set(Gr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...O(this,ro).values()],i={};return t.forEach(n=>{Ql(e,n.mutationKey)&&Object.assign(i,n.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...O(this,Ts).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=eg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===tg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...O(this,Ts).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){O(this,nt).clear(),O(this,Es).clear()}},nt=new WeakMap,Es=new WeakMap,Ts=new WeakMap,so=new WeakMap,ro=new WeakMap,Ms=new WeakMap,ao=new WeakMap,oo=new WeakMap,gy),Xt,Re,Ac,kt,Tr,lo,Ds,Rs,xc,co,uo,Mr,Dr,Ns,ho,Pe,vl,om,lm,cm,um,hm,fm,dm,Vy,py,Z6=(py=class extends Vo{constructor(t,i){super();$(this,Pe);$(this,Xt);$(this,Re);$(this,Ac);$(this,kt);$(this,Tr);$(this,lo);$(this,Ds);$(this,Rs);$(this,xc);$(this,co);$(this,uo);$(this,Mr);$(this,Dr);$(this,Ns);$(this,ho,new Set);this.options=i,Y(this,Xt,t),Y(this,Rs,null),Y(this,Ds,am()),this.options.experimental_prefetchInRender||O(this,Ds).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,Re).addObserver(this),F2(O(this,Re),this.options)?Ae(this,Pe,vl).call(this):this.updateResult(),Ae(this,Pe,um).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mm(O(this,Re),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mm(O(this,Re),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,Pe,hm).call(this),Ae(this,Pe,fm).call(this),O(this,Re).removeObserver(this)}setOptions(t){const i=this.options,n=O(this,Re);if(this.options=O(this,Xt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wi(this.options.enabled,O(this,Re))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,Pe,dm).call(this),O(this,Re).setOptions(this.options),i._defaulted&&!yh(this.options,i)&&O(this,Xt).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,Re),observer:this});const s=this.hasListeners();s&&U2(O(this,Re),n,this.options,i)&&Ae(this,Pe,vl).call(this),this.updateResult(),s&&(O(this,Re)!==n||Wi(this.options.enabled,O(this,Re))!==Wi(i.enabled,O(this,Re))||ks(this.options.staleTime,O(this,Re))!==ks(i.staleTime,O(this,Re)))&&Ae(this,Pe,om).call(this);const r=Ae(this,Pe,lm).call(this);s&&(O(this,Re)!==n||Wi(this.options.enabled,O(this,Re))!==Wi(i.enabled,O(this,Re))||r!==O(this,Ns))&&Ae(this,Pe,cm).call(this,r)}getOptimisticResult(t){const i=O(this,Xt).getQueryCache().build(O(this,Xt),t),n=this.createResult(i,t);return $6(this,n)&&(Y(this,kt,n),Y(this,lo,this.options),Y(this,Tr,O(this,Re).state)),n}getCurrentResult(){return O(this,kt)}trackResult(t,i){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),i==null||i(s),Reflect.get(n,s))})}trackProp(t){O(this,ho).add(t)}getCurrentQuery(){return O(this,Re)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const i=O(this,Xt).defaultQueryOptions(t),n=O(this,Xt).getQueryCache().build(O(this,Xt),i);return n.fetch().then(()=>this.createResult(n,i))}fetch(t){return Ae(this,Pe,vl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,kt)))}createResult(t,i){var M;const n=O(this,Re),s=this.options,r=O(this,kt),a=O(this,Tr),o=O(this,lo),c=t!==n?t.state:O(this,Ac),{state:u}=t;let h={...u},f=!1,d;if(i._optimisticResults){const T=this.hasListeners(),R=!T&&F2(t,i),D=T&&U2(t,n,i,s);(R||D)&&(h={...h,...Iy(u.data,t.options)}),i._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:A}=h;d=h.data;let p=!1;if(i.placeholderData!==void 0&&d===void 0&&A==="pending"){let T;r!=null&&r.isPlaceholderData&&i.placeholderData===(o==null?void 0:o.placeholderData)?(T=r.data,p=!0):T=typeof i.placeholderData=="function"?i.placeholderData((M=O(this,uo))==null?void 0:M.state.data,O(this,uo)):i.placeholderData,T!==void 0&&(A="success",d=rm(r==null?void 0:r.data,T,i),f=!0)}if(i.select&&d!==void 0&&!p)if(r&&d===(a==null?void 0:a.data)&&i.select===O(this,xc))d=O(this,co);else try{Y(this,xc,i.select),d=i.select(d),d=rm(r==null?void 0:r.data,d,i),Y(this,co,d),Y(this,Rs,null)}catch(T){Y(this,Rs,T)}O(this,Rs)&&(g=O(this,Rs),d=O(this,co),m=Date.now(),A="error");const v=h.fetchStatus==="fetching",x=A==="pending",y=A==="error",b=x&&v,E=d!==void 0,S={status:A,fetchStatus:h.fetchStatus,isPending:x,isSuccess:A==="success",isError:y,isInitialLoading:b,isLoading:b,data:d,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:y&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:y&&E,isStale:ng(t,i),refetch:this.refetch,promise:O(this,Ds)};if(this.options.experimental_prefetchInRender){const T=I=>{S.status==="error"?I.reject(S.error):S.data!==void 0&&I.resolve(S.data)},R=()=>{const I=Y(this,Ds,S.promise=am());T(I)},D=O(this,Ds);switch(D.status){case"pending":t.queryHash===n.queryHash&&T(D);break;case"fulfilled":(S.status==="error"||S.data!==D.value)&&R();break;case"rejected":(S.status!=="error"||S.error!==D.reason)&&R();break}}return S}updateResult(){const t=O(this,kt),i=this.createResult(O(this,Re),this.options);if(Y(this,Tr,O(this,Re).state),Y(this,lo,this.options),O(this,Tr).data!==void 0&&Y(this,uo,O(this,Re)),yh(i,t))return;Y(this,kt,i);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!O(this,ho).size)return!0;const a=new Set(r??O(this,ho));return this.options.throwOnError&&a.add("error"),Object.keys(O(this,kt)).some(o=>{const l=o;return O(this,kt)[l]!==t[l]&&a.has(l)})};Ae(this,Pe,Vy).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,Pe,um).call(this)}},Xt=new WeakMap,Re=new WeakMap,Ac=new WeakMap,kt=new WeakMap,Tr=new WeakMap,lo=new WeakMap,Ds=new WeakMap,Rs=new WeakMap,xc=new WeakMap,co=new WeakMap,uo=new WeakMap,Mr=new WeakMap,Dr=new WeakMap,Ns=new WeakMap,ho=new WeakMap,Pe=new WeakSet,vl=function(t){Ae(this,Pe,dm).call(this);let i=O(this,Re).fetch(this.options,t);return t!=null&&t.throwOnError||(i=i.catch(jt)),i},om=function(){Ae(this,Pe,hm).call(this);const t=ks(this.options.staleTime,O(this,Re));if(_r||O(this,kt).isStale||!nm(t))return;const n=Sy(O(this,kt).dataUpdatedAt,t)+1;Y(this,Mr,setTimeout(()=>{O(this,kt).isStale||this.updateResult()},n))},lm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,Re)):this.options.refetchInterval)??!1},cm=function(t){Ae(this,Pe,fm).call(this),Y(this,Ns,t),!(_r||Wi(this.options.enabled,O(this,Re))===!1||!nm(O(this,Ns))||O(this,Ns)===0)&&Y(this,Dr,setInterval(()=>{(this.options.refetchIntervalInBackground||ig.isFocused())&&Ae(this,Pe,vl).call(this)},O(this,Ns)))},um=function(){Ae(this,Pe,om).call(this),Ae(this,Pe,cm).call(this,Ae(this,Pe,lm).call(this))},hm=function(){O(this,Mr)&&(clearTimeout(O(this,Mr)),Y(this,Mr,void 0))},fm=function(){O(this,Dr)&&(clearInterval(O(this,Dr)),Y(this,Dr,void 0))},dm=function(){const t=O(this,Xt).getQueryCache().build(O(this,Xt),this.options);if(t===O(this,Re))return;const i=O(this,Re);Y(this,Re,t),Y(this,Ac,t.state),this.hasListeners()&&(i==null||i.removeObserver(this),t.addObserver(this))},Vy=function(t){mt.batch(()=>{t.listeners&&this.listeners.forEach(i=>{i(O(this,kt))}),O(this,Xt).getQueryCache().notify({query:O(this,Re),type:"observerResultsUpdated"})})},py);function J6(e,t){return Wi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function F2(e,t){return J6(e,t)||e.state.data!==void 0&&mm(e,t,t.refetchOnMount)}function mm(e,t,i){if(Wi(t.enabled,e)!==!1&&ks(t.staleTime,e)!=="static"){const n=typeof i=="function"?i(e):i;return n==="always"||n!==!1&&ng(e,t)}return!1}function U2(e,t,i,n){return(e!==t||Wi(n.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&ng(e,i)}function ng(e,t){return Wi(t.enabled,e)!==!1&&e.isStaleByTime(ks(t.staleTime,e))}function $6(e,t){return!yh(e.getCurrentResult(),t)}var Is,Fs,Wt,Ln,Wn,Hu,gm,vy,eE=(vy=class extends Vo{constructor(i,n){super();$(this,Wn);$(this,Is);$(this,Fs);$(this,Wt);$(this,Ln);Y(this,Is,i),this.setOptions(n),this.bindMethods(),Ae(this,Wn,Hu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){var s;const n=this.options;this.options=O(this,Is).defaultMutationOptions(i),yh(this.options,n)||O(this,Is).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,Wt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Gr(n.mutationKey)!==Gr(this.options.mutationKey)?this.reset():((s=O(this,Wt))==null?void 0:s.state.status)==="pending"&&O(this,Wt).setOptions(this.options)}onUnsubscribe(){var i;this.hasListeners()||(i=O(this,Wt))==null||i.removeObserver(this)}onMutationUpdate(i){Ae(this,Wn,Hu).call(this),Ae(this,Wn,gm).call(this,i)}getCurrentResult(){return O(this,Fs)}reset(){var i;(i=O(this,Wt))==null||i.removeObserver(this),Y(this,Wt,void 0),Ae(this,Wn,Hu).call(this),Ae(this,Wn,gm).call(this)}mutate(i,n){var s;return Y(this,Ln,n),(s=O(this,Wt))==null||s.removeObserver(this),Y(this,Wt,O(this,Is).getMutationCache().build(O(this,Is),this.options)),O(this,Wt).addObserver(this),O(this,Wt).execute(i)}},Is=new WeakMap,Fs=new WeakMap,Wt=new WeakMap,Ln=new WeakMap,Wn=new WeakSet,Hu=function(){var n;const i=((n=O(this,Wt))==null?void 0:n.state)??Uy();Y(this,Fs,{...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset})},gm=function(i){mt.batch(()=>{var n,s,r,a,o,l,c,u;if(O(this,Ln)&&this.hasListeners()){const h=O(this,Fs).variables,f=O(this,Fs).context;(i==null?void 0:i.type)==="success"?((s=(n=O(this,Ln)).onSuccess)==null||s.call(n,i.data,h,f),(a=(r=O(this,Ln)).onSettled)==null||a.call(r,i.data,null,h,f)):(i==null?void 0:i.type)==="error"&&((l=(o=O(this,Ln)).onError)==null||l.call(o,i.error,h,f),(u=(c=O(this,Ln)).onSettled)==null||u.call(c,void 0,i.error,h,f))}this.listeners.forEach(h=>{h(O(this,Fs))})})},vy),Py={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=Symbol.for("react.transitional.element"),tE=Symbol.for("react.portal"),iE=Symbol.for("react.fragment"),nE=Symbol.for("react.strict_mode"),sE=Symbol.for("react.profiler"),rE=Symbol.for("react.consumer"),aE=Symbol.for("react.context"),oE=Symbol.for("react.forward_ref"),lE=Symbol.for("react.suspense"),cE=Symbol.for("react.memo"),Oy=Symbol.for("react.lazy"),B2=Symbol.iterator;function uE(e){return e===null||typeof e!="object"?null:(e=B2&&e[B2]||e["@@iterator"],typeof e=="function"?e:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ky=Object.assign,jy={};function Po(e,t,i){this.props=e,this.context=t,this.refs=jy,this.updater=i||Ly}Po.prototype.isReactComponent={};Po.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zy(){}zy.prototype=Po.prototype;function rg(e,t,i){this.props=e,this.context=t,this.refs=jy,this.updater=i||Ly}var ag=rg.prototype=new zy;ag.constructor=rg;ky(ag,Po.prototype);ag.isPureReactComponent=!0;var V2=Array.isArray,$e={H:null,A:null,T:null,S:null,V:null},_y=Object.prototype.hasOwnProperty;function og(e,t,i,n,s,r){return i=r.ref,{$$typeof:sg,type:e,key:t,ref:i!==void 0?i:null,props:r}}function hE(e,t){return og(e.type,t,void 0,void 0,void 0,e.props)}function lg(e){return typeof e=="object"&&e!==null&&e.$$typeof===sg}function fE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var P2=/\/+/g;function Md(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fE(""+e.key):t.toString(36)}function O2(){}function dE(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(O2,O2):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function xa(e,t,i,n,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case sg:case tE:a=!0;break;case Oy:return a=e._init,xa(a(e._payload),t,i,n,s)}}if(a)return s=s(e),a=n===""?"."+Md(e,0):n,V2(s)?(i="",a!=null&&(i=a.replace(P2,"$&/")+"/"),xa(s,t,i,"",function(c){return c})):s!=null&&(lg(s)&&(s=hE(s,i+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(P2,"$&/")+"/")+a)),t.push(s)),1;a=0;var o=n===""?".":n+":";if(V2(e))for(var l=0;l<e.length;l++)n=e[l],r=o+Md(n,l),a+=xa(n,t,i,r,s);else if(l=uE(e),typeof l=="function")for(e=l.call(e),l=0;!(n=e.next()).done;)n=n.value,r=o+Md(n,l++),a+=xa(n,t,i,r,s);else if(r==="object"){if(typeof e.then=="function")return xa(dE(e),t,i,n,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function ou(e,t,i){if(e==null)return e;var n=[],s=0;return xa(e,n,"","",function(r){return t.call(i,r,s++)}),n}function mE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var L2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function gE(){}ye.Children={map:ou,forEach:function(e,t,i){ou(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return ou(e,function(){t++}),t},toArray:function(e){return ou(e,function(t){return t})||[]},only:function(e){if(!lg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Po;ye.Fragment=iE;ye.Profiler=sE;ye.PureComponent=rg;ye.StrictMode=nE;ye.Suspense=lE;ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$e;ye.__COMPILER_RUNTIME={__proto__:null,c:function(e){return $e.H.useMemoCache(e)}};ye.cache=function(e){return function(){return e.apply(null,arguments)}};ye.cloneElement=function(e,t,i){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=ky({},e.props),s=e.key,r=void 0;if(t!=null)for(a in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!_y.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(n[a]=t[a]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];n.children=o}return og(e.type,s,void 0,void 0,r,n)};ye.createContext=function(e){return e={$$typeof:aE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:rE,_context:e},e};ye.createElement=function(e,t,i){var n,s={},r=null;if(t!=null)for(n in t.key!==void 0&&(r=""+t.key),t)_y.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=i;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return og(e,r,void 0,void 0,null,s)};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:oE,render:e}};ye.isValidElement=lg;ye.lazy=function(e){return{$$typeof:Oy,_payload:{_status:-1,_result:e},_init:mE}};ye.memo=function(e,t){return{$$typeof:cE,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=$e.T,i={};$e.T=i;try{var n=e(),s=$e.S;s!==null&&s(i,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(gE,L2)}catch(r){L2(r)}finally{$e.T=t}};ye.unstable_useCacheRefresh=function(){return $e.H.useCacheRefresh()};ye.use=function(e){return $e.H.use(e)};ye.useActionState=function(e,t,i){return $e.H.useActionState(e,t,i)};ye.useCallback=function(e,t){return $e.H.useCallback(e,t)};ye.useContext=function(e){return $e.H.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e,t){return $e.H.useDeferredValue(e,t)};ye.useEffect=function(e,t,i){var n=$e.H;if(typeof i=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)};ye.useId=function(){return $e.H.useId()};ye.useImperativeHandle=function(e,t,i){return $e.H.useImperativeHandle(e,t,i)};ye.useInsertionEffect=function(e,t){return $e.H.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return $e.H.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return $e.H.useMemo(e,t)};ye.useOptimistic=function(e,t){return $e.H.useOptimistic(e,t)};ye.useReducer=function(e,t,i){return $e.H.useReducer(e,t,i)};ye.useRef=function(e){return $e.H.useRef(e)};ye.useState=function(e){return $e.H.useState(e)};ye.useSyncExternalStore=function(e,t,i){return $e.H.useSyncExternalStore(e,t,i)};ye.useTransition=function(){return $e.H.useTransition()};ye.version="19.1.1";Py.exports=ye;var N=Py.exports;const Je=$1(N),Gy=B6({__proto__:null,default:Je},[N]);var Hy=N.createContext(void 0),Fc=e=>{const t=N.useContext(Hy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pE=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),C.jsx(Hy.Provider,{value:e,children:t})),Yy=N.createContext(!1),vE=()=>N.useContext(Yy);Yy.Provider;function AE(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var xE=N.createContext(AE()),yE=()=>N.useContext(xE),bE=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},wE=e=>{N.useEffect(()=>{e.clearReset()},[e])},SE=({result:e,errorResetBoundary:t,throwOnError:i,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||Ty(i,[e.error,n])),CE=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...n)=>t(i(...n)):t(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},EE=(e,t)=>e.isLoading&&e.isFetching&&!t,TE=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,k2=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function ME(e,t,i){var h,f,d,g,m;const n=vE(),s=yE(),r=Fc(),a=r.defaultQueryOptions(e);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=n?"isRestoring":"optimistic",CE(a),bE(a,s),wE(s);const o=!r.getQueryCache().get(a.queryHash),[l]=N.useState(()=>new t(r,a)),c=l.getOptimisticResult(a),u=!n&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(A=>{const p=u?l.subscribe(mt.batchCalls(A)):jt;return l.updateResult(),p},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),N.useEffect(()=>{l.setOptions(a)},[a,l]),TE(a,c))throw k2(a,l,s);if(SE({result:c,errorResetBoundary:s,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;if((g=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||g.call(d,a,c),a.experimental_prefetchInRender&&!_r&&EE(c,n)){const A=o?k2(a,l,s):(m=r.getQueryCache().get(a.queryHash))==null?void 0:m.promise;A==null||A.catch(jt).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?c:l.trackResult(c)}function qy(e,t){return ME(e,Z6)}function Ef(e,t){const i=Fc(),[n]=N.useState(()=>new eE(i,e));N.useEffect(()=>{n.setOptions(e)},[n,e]);const s=N.useSyncExternalStore(N.useCallback(a=>n.subscribe(mt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),r=N.useCallback((a,o)=>{n.mutate(a,o).catch(jt)},[n]);if(s.error&&Ty(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}var DE="Invariant failed";function Zn(e,t){if(!e)throw new Error(DE)}const za=new WeakMap,Yu=new WeakMap,wh={current:[]};let Dd=!1,Rl=0;const Al=new Set,lu=new Map;function Ky(e){const t=Array.from(e).sort((i,n)=>i instanceof _a&&i.options.deps.includes(n)?1:n instanceof _a&&n.options.deps.includes(i)?-1:0);for(const i of t){if(wh.current.includes(i))continue;wh.current.push(i),i.recompute();const n=Yu.get(i);if(n)for(const s of n){const r=za.get(s);r&&Ky(r)}}}function RE(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function NE(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function Qy(e){if(Rl>0&&!lu.has(e)&&lu.set(e,e.prevState),Al.add(e),!(Rl>0)&&!Dd)try{for(Dd=!0;Al.size>0;){const t=Array.from(Al);Al.clear();for(const i of t){const n=lu.get(i)??i.prevState;i.prevState=n,RE(i)}for(const i of t){const n=za.get(i);n&&(wh.current.push(i),Ky(n))}for(const i of t){const n=za.get(i);if(n)for(const s of n)NE(s)}}}finally{Dd=!1,wh.current=[],lu.clear()}}function j2(e){Rl++;try{e()}finally{if(Rl--,Rl===0){const t=Array.from(Al)[0];t&&Qy(t)}}}function IE(e){return typeof e=="function"}class pm{constructor(t,i){this.listeners=new Set,this.subscribe=n=>{var s,r;this.listeners.add(n);const a=(r=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:r.call(s,n,this);return()=>{this.listeners.delete(n),a==null||a()}},this.prevState=t,this.state=t,this.options=i}setState(t){var i,n,s;this.prevState=this.state,(i=this.options)!=null&&i.updateFn?this.state=this.options.updateFn(this.prevState)(t):IE(t)?this.state=t(this.prevState):this.state=t,(s=(n=this.options)==null?void 0:n.onUpdate)==null||s.call(n),Qy(this)}}class _a{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const i=[],n=[];for(const s of this.options.deps)i.push(s.prevState),n.push(s.state);return this.lastSeenDepValues=n,{prevDepVals:i,currDepVals:n,prevVal:this.prevState??void 0}},this.recompute=()=>{var i,n;this.prevState=this.state;const{prevDepVals:s,currDepVals:r,prevVal:a}=this.getDepVals();this.state=this.options.fn({prevDepVals:s,currDepVals:r,prevVal:a}),(n=(i=this.options).onUpdate)==null||n.call(i)},this.checkIfRecalculationNeededDeeply=()=>{for(const r of this.options.deps)r instanceof _a&&r.checkIfRecalculationNeededDeeply();let i=!1;const n=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let r=0;r<s.length;r++)if(s[r]!==n[r]){i=!0;break}i&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const i of this._subscriptions)i()}),this.subscribe=i=>{var n,s;this.listeners.add(i);const r=(s=(n=this.options).onSubscribe)==null?void 0:s.call(n,i,this);return()=>{this.listeners.delete(i),r==null||r()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const i of t)if(i instanceof _a)i.registerOnGraph(),this.registerOnGraph(i.options.deps);else if(i instanceof pm){let n=za.get(i);n||(n=new Set,za.set(i,n)),n.add(this);let s=Yu.get(this);s||(s=new Set,Yu.set(this,s)),s.add(i)}}unregisterFromGraph(t=this.options.deps){for(const i of t)if(i instanceof _a)this.unregisterFromGraph(i.options.deps);else if(i instanceof pm){const n=za.get(i);n&&n.delete(this);const s=Yu.get(this);s&&s.delete(i)}}}const js="__TSR_index",z2="popstate",_2="beforeunload";function Xy(e){let t=e.getLocation();const i=new Set,n=a=>{t=e.getLocation(),i.forEach(o=>o({location:t,action:a}))},s=a=>{e.notifyOnIndexChange??!0?n(a):t=e.getLocation()},r=async({task:a,navigateOpts:o,...l})=>{var c,u;if((o==null?void 0:o.ignoreBlocker)??!1){a();return}const f=((c=e.getBlockers)==null?void 0:c.call(e))??[],d=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&f.length&&d)for(const g of f){const m=Xl(l.path,l.state);if(await g.blockerFn({currentLocation:t,nextLocation:m,action:l.type})){(u=e.onBlocked)==null||u.call(e);return}}a()};return{get location(){return t},get length(){return e.getLength()},subscribers:i,subscribe:a=>(i.add(a),()=>{i.delete(a)}),push:(a,o,l)=>{const c=t.state[js];o=vm(c+1,o),r({task:()=>{e.pushState(a,o),n({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:a,state:o})},replace:(a,o,l)=>{const c=t.state[js];o=vm(c,o),r({task:()=>{e.replaceState(a,o),n({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:a,state:o})},go:(a,o)=>{r({task:()=>{e.go(a),s({type:"GO",index:a})},navigateOpts:o,type:"GO"})},back:a=>{r({task:()=>{e.back((a==null?void 0:a.ignoreBlocker)??!1),s({type:"BACK"})},navigateOpts:a,type:"BACK"})},forward:a=>{r({task:()=>{e.forward((a==null?void 0:a.ignoreBlocker)??!1),s({type:"FORWARD"})},navigateOpts:a,type:"FORWARD"})},canGoBack:()=>t.state[js]!==0,createHref:a=>e.createHref(a),block:a=>{var o;if(!e.setBlockers)return()=>{};const l=((o=e.getBlockers)==null?void 0:o.call(e))??[];return e.setBlockers([...l,a]),()=>{var c,u;const h=((c=e.getBlockers)==null?void 0:c.call(e))??[];(u=e.setBlockers)==null||u.call(e,h.filter(f=>f!==a))}},flush:()=>{var a;return(a=e.flush)==null?void 0:a.call(e)},destroy:()=>{var a;return(a=e.destroy)==null?void 0:a.call(e)},notify:n}}function vm(e,t){t||(t={});const i=cg();return{...t,key:i,__TSR_key:i,[js]:e}}function FE(e){var t,i;const n=typeof document<"u"?window:void 0,s=n.history.pushState,r=n.history.replaceState;let a=[];const o=()=>a,l=T=>a=T,c=T=>T,u=()=>Xl(`${n.location.pathname}${n.location.search}${n.location.hash}`,n.history.state);if(!((t=n.history.state)!=null&&t.__TSR_key)&&!((i=n.history.state)!=null&&i.key)){const T=cg();n.history.replaceState({[js]:0,key:T,__TSR_key:T},"")}let h=u(),f,d=!1,g=!1,m=!1,A=!1;const p=()=>h;let v,x;const y=()=>{v&&(M._ignoreSubscribers=!0,(v.isPush?n.history.pushState:n.history.replaceState)(v.state,"",v.href),M._ignoreSubscribers=!1,v=void 0,x=void 0,f=void 0)},b=(T,R,D)=>{const I=c(R);x||(f=h),h=Xl(R,D),v={href:I,state:D,isPush:(v==null?void 0:v.isPush)||T==="push"},x||(x=Promise.resolve().then(()=>y()))},E=T=>{h=u(),M.notify({type:T})},w=async()=>{if(g){g=!1;return}const T=u(),R=T.state[js]-h.state[js],D=R===1,I=R===-1,U=!D&&!I||d;d=!1;const L=U?"GO":I?"BACK":"FORWARD",V=U?{type:"GO",index:R}:{type:I?"BACK":"FORWARD"};if(m)m=!1;else{const k=o();if(typeof document<"u"&&k.length){for(const F of k)if(await F.blockerFn({currentLocation:h,nextLocation:T,action:L})){g=!0,n.history.go(1),M.notify(V);return}}}h=u(),M.notify(V)},S=T=>{if(A){A=!1;return}let R=!1;const D=o();if(typeof document<"u"&&D.length)for(const I of D){const U=I.enableBeforeUnload??!0;if(U===!0){R=!0;break}if(typeof U=="function"&&U()===!0){R=!0;break}}if(R)return T.preventDefault(),T.returnValue=""},M=Xy({getLocation:p,getLength:()=>n.history.length,pushState:(T,R)=>b("push",T,R),replaceState:(T,R)=>b("replace",T,R),back:T=>(T&&(m=!0),A=!0,n.history.back()),forward:T=>{T&&(m=!0),A=!0,n.history.forward()},go:T=>{d=!0,n.history.go(T)},createHref:T=>c(T),flush:y,destroy:()=>{n.history.pushState=s,n.history.replaceState=r,n.removeEventListener(_2,S,{capture:!0}),n.removeEventListener(z2,w)},onBlocked:()=>{f&&h!==f&&(h=f)},getBlockers:o,setBlockers:l,notifyOnIndexChange:!1});return n.addEventListener(_2,S,{capture:!0}),n.addEventListener(z2,w),n.history.pushState=function(...T){const R=s.apply(n.history,T);return M._ignoreSubscribers||E("PUSH"),R},n.history.replaceState=function(...T){const R=r.apply(n.history,T);return M._ignoreSubscribers||E("REPLACE"),R},M}function UE(e={initialEntries:["/"]}){const t=e.initialEntries;let i=e.initialIndex?Math.min(Math.max(e.initialIndex,0),t.length-1):t.length-1;const n=t.map((r,a)=>vm(a,void 0));return Xy({getLocation:()=>Xl(t[i],n[i]),getLength:()=>t.length,pushState:(r,a)=>{i<t.length-1&&(t.splice(i+1),n.splice(i+1)),n.push(a),t.push(r),i=Math.max(t.length-1,0)},replaceState:(r,a)=>{n[i]=a,t[i]=r},back:()=>{i=Math.max(i-1,0)},forward:()=>{i=Math.min(i+1,t.length-1)},go:r=>{i=Math.min(Math.max(i+r,0),t.length-1)},createHref:r=>r})}function Xl(e,t){const i=e.indexOf("#"),n=e.indexOf("?"),s=cg();return{href:e,pathname:e.substring(0,i>0?n>0?Math.min(i,n):i:n>0?n:e.length),hash:i>-1?e.substring(i):"",search:n>-1?e.slice(n,i===-1?void 0:i):"",state:t||{[js]:0,key:s,__TSR_key:s}}}function cg(){return(Math.random()+1).toString(36).substring(7)}function Am(e){return e[e.length-1]}function BE(e){return typeof e=="function"}function Nr(e,t){return BE(e)?e(t):e}function G2(e,t){return t.reduce((i,n)=>(i[n]=e[n],i),{})}function Ci(e,t){if(e===t)return e;const i=t,n=q2(e)&&q2(i);if(n||H2(e)&&H2(i)){const s=n?e:Object.keys(e).concat(Object.getOwnPropertySymbols(e)),r=s.length,a=n?i:Object.keys(i).concat(Object.getOwnPropertySymbols(i)),o=a.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:a[u];(!n&&s.includes(h)||n)&&e[h]===void 0&&i[h]===void 0?(l[h]=void 0,c++):(l[h]=Ci(e[h],i[h]),l[h]===e[h]&&e[h]!==void 0&&c++)}return r===o&&c===r?e:l}return i}function H2(e){return xm(e)&&Object.getOwnPropertyNames(e).length===Object.keys(e).length}function xm(e){if(!Y2(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const i=t.prototype;return!(!Y2(i)||!i.hasOwnProperty("isPrototypeOf"))}function Y2(e){return Object.prototype.toString.call(e)==="[object Object]"}function q2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function K2(e,t){let i=Object.keys(e);return t&&(i=i.filter(n=>e[n]!==void 0)),i}function Ga(e,t,i){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(xm(e)&&xm(t)){const n=(i==null?void 0:i.ignoreUndefined)??!0,s=K2(e,n),r=K2(t,n);return!(i!=null&&i.partial)&&s.length!==r.length?!1:r.every(a=>Ga(e[a],t[a],i))}return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:!e.some((n,s)=>!Ga(n,t[s],i)):!1}function ya(e){let t,i;const n=new Promise((s,r)=>{t=s,i=r});return n.status="pending",n.resolve=s=>{n.status="resolved",n.value=s,t(s),e==null||e(s)},n.reject=s=>{n.status="rejected",i(s)},n}const qn=0,Hr=1,Yr=2,po=3;function Kn(e){return ug(e.filter(t=>t!==void 0).join("/"))}function ug(e){return e.replace(/\/{2,}/g,"/")}function hg(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function vo(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Rd(e){return vo(hg(e))}function Sh(e,t){return e!=null&&e.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function VE(e,t,i){return Sh(e,i)===Sh(t,i)}function PE(e){const{type:t,value:i}=e;if(t===qn)return i;const{prefixSegment:n,suffixSegment:s}=e;if(t===Hr){const r=i.substring(1);if(n&&s)return`${n}{$${r}}${s}`;if(n)return`${n}{$${r}}`;if(s)return`{$${r}}${s}`}if(t===po){const r=i.substring(1);return n&&s?`${n}{-$${r}}${s}`:n?`${n}{-$${r}}`:s?`{-$${r}}${s}`:`{-$${r}}`}if(t===Yr){if(n&&s)return`${n}{$}${s}`;if(n)return`${n}{$}`;if(s)return`{$}${s}`}return i}function OE({basepath:e,base:t,to:i,trailingSlash:n="never",caseSensitive:s,parseCache:r}){var a;t=Ch(e,t,s),i=Ch(e,i,s);let o=Ao(t,r).slice();const l=Ao(i,r);o.length>1&&((a=Am(o))==null?void 0:a.value)==="/"&&o.pop();for(let h=0,f=l.length;h<f;h++){const d=l[h],g=d.value;g==="/"?h?h===f-1&&o.push(d):o=[d]:g===".."?o.pop():g==="."||o.push(d)}o.length>1&&(Am(o).value==="/"?n==="never"&&o.pop():n==="always"&&o.push({type:qn,value:"/"}));const c=o.map(PE);return Kn([e,...c])}const Ao=(e,t)=>{if(!e)return[];const i=t==null?void 0:t.get(e);if(i)return i;const n=GE(e);return t==null||t.set(e,n),n},LE=/^\$.{1,}$/,kE=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,jE=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,zE=/^\$$/,_E=/^(.*?)\{\$\}(.*)$/;function GE(e){e=ug(e);const t=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),t.push({type:qn,value:"/"})),!e)return t;const i=e.split("/").filter(Boolean);return t.push(...i.map(n=>{const s=n.match(_E);if(s){const o=s[1],l=s[2];return{type:Yr,value:"$",prefixSegment:o||void 0,suffixSegment:l||void 0}}const r=n.match(jE);if(r){const o=r[1],l=r[2],c=r[3];return{type:po,value:l,prefixSegment:o||void 0,suffixSegment:c||void 0}}const a=n.match(kE);if(a){const o=a[1],l=a[2],c=a[3];return{type:Hr,value:""+l,prefixSegment:o||void 0,suffixSegment:c||void 0}}if(LE.test(n)){const o=n.substring(1);return{type:Hr,value:"$"+o,prefixSegment:void 0,suffixSegment:void 0}}return zE.test(n)?{type:Yr,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:qn,value:n.includes("%25")?n.split("%25").map(o=>decodeURI(o)).join("%25"):decodeURI(n)}})),e.slice(-1)==="/"&&(e=e.substring(1),t.push({type:qn,value:"/"})),t}function cu({path:e,params:t,leaveWildcards:i,leaveParams:n,decodeCharMap:s,parseCache:r}){const a=Ao(e,r);function o(h){const f=t[h],d=typeof f=="string";return h==="*"||h==="_splat"?d?encodeURI(f):f:d?HE(f,s):f}let l=!1;const c={},u=Kn(a.map(h=>{if(h.type===qn)return h.value;if(h.type===Yr){c._splat=t._splat;const f=h.prefixSegment||"",d=h.suffixSegment||"";if(!("_splat"in t))return l=!0,i?`${f}${h.value}${d}`:f||d?`${f}${d}`:void 0;const g=o("_splat");return i?`${f}${h.value}${g??""}${d}`:`${f}${g}${d}`}if(h.type===Hr){const f=h.value.substring(1);!l&&!(f in t)&&(l=!0),c[f]=t[f];const d=h.prefixSegment||"",g=h.suffixSegment||"";if(n){const m=o(h.value);return`${d}${h.value}${m??""}${g}`}return`${d}${o(f)??"undefined"}${g}`}if(h.type===po){const f=h.value.substring(1),d=h.prefixSegment||"",g=h.suffixSegment||"";if(!(f in t)||t[f]==null)return i?`${d}${f}${g}`:d||g?`${d}${g}`:void 0;if(c[f]=t[f],n){const m=o(h.value);return`${d}${h.value}${m??""}${g}`}return i?`${d}${f}${o(f)??""}${g}`:`${d}${o(f)??""}${g}`}return h.value}));return{usedParams:c,interpolatedPath:u,isMissingParams:l}}function HE(e,t){let i=encodeURIComponent(e);if(t)for(const[n,s]of t)i=i.replaceAll(n,s);return i}function ym(e,t,i,n){const s=YE(e,t,i,n);if(!(i.to&&!s))return s??{}}function Ch(e,t,i=!1){const n=i?e:e.toLowerCase(),s=i?t:t.toLowerCase();switch(!0){case n==="/":return t;case s===n:return"";case t.length<e.length:return t;case s[n.length]!=="/":return t;case s.startsWith(n):return t.slice(e.length);default:return t}}function YE(e,t,{to:i,fuzzy:n,caseSensitive:s},r){if(e!=="/"&&!t.startsWith(e))return;t=Ch(e,t,s),i=Ch(e,`${i??"$"}`,s);const a=Ao(t.startsWith("/")?t:`/${t}`,r),o=Ao(i.startsWith("/")?i:`/${i}`,r),l={};return qE(a,o,l,n,s)?l:void 0}function qE(e,t,i,n,s){var r,a,o;let l=0,c=0;for(;l<e.length||c<t.length;){const u=e[l],h=t[c];if(h){if(h.type===Yr){const f=e.slice(l);let d;if(h.prefixSegment||h.suffixSegment){if(!u)return!1;const g=h.prefixSegment||"",m=h.suffixSegment||"",A=u.value;if("prefixSegment"in h&&!A.startsWith(g)||"suffixSegment"in h&&!((r=e[e.length-1])!=null&&r.value.endsWith(m)))return!1;let p=decodeURI(Kn(f.map(v=>v.value)));g&&p.startsWith(g)&&(p=p.slice(g.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),d=p}else d=decodeURI(Kn(f.map(g=>g.value)));return i["*"]=d,i._splat=d,!0}if(h.type===qn){if(h.value==="/"&&!(u!=null&&u.value)){c++;continue}if(u){if(s){if(h.value!==u.value)return!1}else if(h.value.toLowerCase()!==u.value.toLowerCase())return!1;l++,c++;continue}else return!1}if(h.type===Hr){if(!u||u.value==="/")return!1;let f="",d=!1;if(h.prefixSegment||h.suffixSegment){const g=h.prefixSegment||"",m=h.suffixSegment||"",A=u.value;if(g&&!A.startsWith(g)||m&&!A.endsWith(m))return!1;let p=A;g&&p.startsWith(g)&&(p=p.slice(g.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),f=decodeURIComponent(p),d=!0}else f=decodeURIComponent(u.value),d=!0;d&&(i[h.value.substring(1)]=f,l++),c++;continue}if(h.type===po){if(!u){c++;continue}if(u.value==="/"){c++;continue}let f="",d=!1;if(h.prefixSegment||h.suffixSegment){const g=h.prefixSegment||"",m=h.suffixSegment||"",A=u.value;if((!g||A.startsWith(g))&&(!m||A.endsWith(m))){let p=A;g&&p.startsWith(g)&&(p=p.slice(g.length)),m&&p.endsWith(m)&&(p=p.slice(0,p.length-m.length)),f=decodeURIComponent(p),d=!0}}else{let g=!0;for(let m=c+1;m<t.length;m++){const A=t[m];if((A==null?void 0:A.type)===qn&&A.value===u.value){g=!1;break}if((A==null?void 0:A.type)===Hr||(A==null?void 0:A.type)===Yr){e.length<t.length&&(g=!1);break}}g&&(f=decodeURIComponent(u.value),d=!0)}d&&(i[h.value.substring(1)]=f,l++),c++;continue}}if(l<e.length&&c>=t.length)return i["**"]=Kn(e.slice(l).map(f=>f.value)),!!n&&((a=t[t.length-1])==null?void 0:a.value)!=="/";if(c<t.length&&l>=e.length){for(let f=c;f<t.length;f++)if(((o=t[f])==null?void 0:o.type)!==po)return!1;break}break}return!0}function Ti(e){return!!(e!=null&&e.isNotFound)}function KE(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Eh="tsr-scroll-restoration-v1_3",QE=(e,t)=>{let i;return(...n)=>{i||(i=setTimeout(()=>{e(...n),i=null},t))}};function XE(){const e=KE();if(!e)return;const t=e.getItem(Eh);let i=t?JSON.parse(t):{};return{state:i,set:n=>(i=Nr(n,i)||i,e.setItem(Eh,JSON.stringify(i)))}}const Nd=XE(),bm=e=>e.state.__TSR_key||e.href;function WE(e){const t=[];let i;for(;i=e.parentNode;)t.unshift(`${e.tagName}:nth-child(${[].indexOf.call(i.children,e)+1})`),e=i;return`${t.join(" > ")}`.toLowerCase()}let Th=!1;function Wy({storageKey:e,key:t,behavior:i,shouldScrollRestoration:n,scrollToTopSelectors:s,location:r}){var a;let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(u){console.error(u);return}const l=t||((a=window.history.state)==null?void 0:a.key),c=o[l];Th=!0,(()=>{if(n&&c&&Object.keys(c).length>0){for(const h in c){const f=c[h];if(h==="window")window.scrollTo({top:f.scrollY,left:f.scrollX,behavior:i});else if(h){const d=document.querySelector(h);d&&(d.scrollLeft=f.scrollX,d.scrollTop=f.scrollY)}}return}const u=(r??window.location).hash.split("#")[1];if(u){const h=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(h){const f=document.getElementById(u);f&&f.scrollIntoView(h)}return}["window",...(s==null?void 0:s.filter(h=>h!=="window"))??[]].forEach(h=>{const f=h==="window"?window:typeof h=="function"?h():document.querySelector(h);f&&f.scrollTo({top:0,left:0,behavior:i})})})(),Th=!1}function ZE(e,t){if(Nd===void 0||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),typeof document>"u"||e.isScrollRestorationSetup))return;e.isScrollRestorationSetup=!0,Th=!1;const n=e.options.getScrollRestorationKey||bm;window.history.scrollRestoration="manual";const s=r=>{if(Th||!e.isScrollRestoring)return;let a="";if(r.target===document||r.target===window)a="window";else{const l=r.target.getAttribute("data-scroll-restoration-id");l?a=`[data-scroll-restoration-id="${l}"]`:a=WE(r.target)}const o=n(e.state.location);Nd.set(l=>{const c=l[o]=l[o]||{},u=c[a]=c[a]||{};if(a==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(a){const h=document.querySelector(a);h&&(u.scrollX=h.scrollLeft||0,u.scrollY=h.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",QE(s,100),!0),e.subscribe("onRendered",r=>{const a=n(r.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}Wy({storageKey:Eh,key:a,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&Nd.set(o=>(o[a]=o[a]||{},o))})}function JE(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const i=document.getElementById(e.state.location.hash);i&&i.scrollIntoView(t)}}}function $E(e,t){const i=Object.entries(e).flatMap(([s,r])=>Array.isArray(r)?r.map(a=>[s,String(a)]):[[s,String(r)]]);return""+new URLSearchParams(i).toString()}function Id(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function eT(e,t){const i=e;return[...new URLSearchParams(i).entries()].reduce((r,[a,o])=>{const l=r[a];return l==null?r[a]=Id(o):r[a]=Array.isArray(l)?[...l,Id(o)]:[l,Id(o)],r},{})}const tT=nT(JSON.parse),iT=sT(JSON.stringify,JSON.parse);function nT(e){return t=>{t.substring(0,1)==="?"&&(t=t.substring(1));const i=eT(t);for(const n in i){const s=i[n];if(typeof s=="string")try{i[n]=e(s)}catch{}}return i}}function sT(e,t){function i(n){if(typeof n=="object"&&n!==null)try{return e(n)}catch{}else if(typeof n=="string"&&typeof t=="function")try{return t(n),e(n)}catch{}return n}return n=>{n={...n},Object.keys(n).forEach(r=>{const a=n[r];typeof a>"u"||a===void 0?delete n[r]:n[r]=i(a)});const s=$E(n).toString();return s?`?${s}`:""}}const Di="__root__";function rT(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument)try{new URL(`${e.href}`),e.reloadDocument=!0}catch{}const t=new Headers(e.headers||{});e.href&&t.get("Location")===null&&t.set("Location",e.href);const i=new Response(null,{status:e.statusCode,headers:t});if(i.options=e,e.throw)throw i;return i}function on(e){return e instanceof Response&&!!e.options}function aT(e){const t=new Map;let i,n;const s=r=>{r.next&&(r.prev?(r.prev.next=r.next,r.next.prev=r.prev,r.next=void 0,n&&(n.next=r,r.prev=n)):(r.next.prev=void 0,i=r.next,r.next=void 0,n&&(r.prev=n,n.next=r)),n=r)};return{get(r){const a=t.get(r);if(a)return s(a),a.value},set(r,a){if(t.size>=e&&i){const l=i;t.delete(l.key),l.next&&(i=l.next,l.next.prev=void 0),l===n&&(n=void 0)}const o=t.get(r);if(o)o.value=a,s(o);else{const l={key:r,value:a,prev:n};n&&(n.next=l),n=l,i||(i=l),t.set(r,l)}}}}function Ir(e){const t=e.resolvedLocation,i=e.location,n=(t==null?void 0:t.pathname)!==i.pathname,s=(t==null?void 0:t.href)!==i.href,r=(t==null?void 0:t.hash)!==i.hash;return{fromLocation:t,toLocation:i,pathChanged:n,hrefChanged:s,hashChanged:r}}class oT{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=i=>i(),this.update=i=>{var n;i.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options;this.options={...this.options,...i},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(r=>[encodeURIComponent(r),r])):void 0,(!this.basepath||i.basepath&&i.basepath!==s.basepath)&&(i.basepath===void 0||i.basepath===""||i.basepath==="/"?this.basepath="/":this.basepath=`/${Rd(i.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?UE({initialEntries:[this.basepath||"/"]}):FE()),this.updateLatestLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new pm(cT(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}}),ZE(this)),typeof window<"u"&&"CSS"in window&&typeof((n=window.CSS)==null?void 0:n.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:i,routesByPath:n,flatRoutes:s}=pT({routeTree:this.routeTree,initRoute:(a,o)=>{a.init({originalIndex:o})}});this.routesById=i,this.routesByPath=n,this.flatRoutes=s;const r=this.options.notFoundRoute;r&&(r.init({originalIndex:99999999999}),this.routesById[r.id]=r)},this.subscribe=(i,n)=>{const s={eventType:i,fn:n};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=i=>{this.subscribers.forEach(n=>{n.eventType===i.type&&n.fn(i)})},this.parseLocation=(i,n)=>{const s=({pathname:l,search:c,hash:u,state:h})=>{const f=this.options.parseSearch(c),d=this.options.stringifySearch(f);return{pathname:l,searchStr:d,search:Ci(n==null?void 0:n.search,f),hash:u.split("#").reverse()[0]??"",href:`${l}${d}${u}`,state:Ci(n==null?void 0:n.state,h)}},r=s(i),{__tempLocation:a,__tempKey:o}=r.state;if(a&&(!o||o===this.tempLocationKey)){const l=s(a);return l.state.key=r.state.key,l.state.__TSR_key=r.state.__TSR_key,delete l.state.__tempLocation,{...l,maskedLocation:r}}return r},this.resolvePathWithBase=(i,n)=>OE({basepath:this.basepath,base:i,to:ug(n),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive,parseCache:this.parsePathnameCache}),this.matchRoutes=(i,n,s)=>typeof i=="string"?this.matchRoutesInternal({pathname:i,search:n},s):this.matchRoutesInternal(i,n),this.parsePathnameCache=aT(1e3),this.getMatchedRoutes=(i,n)=>vT({pathname:i,routePathname:n,basepath:this.basepath,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=i=>{const n=this.getMatch(i);n&&(n.abortController.abort(),n._nonReactive.pendingTimeout=void 0,clearTimeout(n._nonReactive.pendingTimeout))},this.cancelMatches=()=>{var i;(i=this.state.pendingMatches)==null||i.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=i=>{const n=(r={})=>{var a;const o=r._fromLocation||this.latestLocation,l=this.matchRoutes(o,{_buildLocation:!0}),c=Am(l);let u=c.fullPath;const h=r.to?this.resolvePathWithBase(u,`${r.to}`):this.resolvePathWithBase(u,"."),f=!!r.to&&!X2(r.to.toString(),u)&&!X2(h,u);r.unsafeRelative==="path"?u=o.pathname:f&&r.from&&(u=r.from);const d=c.search,g={...c.params},m=r.to?this.resolvePathWithBase(u,`${r.to}`):this.resolvePathWithBase(u,".");let A=r.params===!1||r.params===null?{}:(r.params??!0)===!0?g:{...g,...Nr(r.params,g)};const p=cu({path:m,params:A??{},parseCache:this.parsePathnameCache}).interpolatedPath,v=this.matchRoutes(p,void 0,{_buildLocation:!0}).map(M=>this.looseRoutesById[M.routeId]);Object.keys(A).length>0&&v.map(M=>{var T;return((T=M.options.params)==null?void 0:T.stringify)??M.options.stringifyParams}).filter(Boolean).forEach(M=>{A={...A,...M(A)}});const x=cu({path:m,params:A??{},leaveWildcards:!1,leaveParams:i.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let y=d;if(i._includeValidateSearch&&((a=this.options.search)!=null&&a.strict)){let M={};v.forEach(T=>{try{T.options.validateSearch&&(M={...M,...wm(T.options.validateSearch,{...M,...y})??{}})}catch{}}),y=M}y=AT({search:y,dest:r,destRoutes:v,_includeValidateSearch:i._includeValidateSearch}),y=Ci(d,y);const b=this.options.stringifySearch(y),E=r.hash===!0?o.hash:r.hash?Nr(r.hash,o.hash):void 0,w=E?`#${E}`:"";let S=r.state===!0?o.state:r.state?Nr(r.state,o.state):{};return S=Ci(o.state,S),{pathname:x,search:y,searchStr:b,state:S,hash:E??"",href:`${x}${b}${w}`,unmaskOnReload:r.unmaskOnReload}},s=(r={},a)=>{var o;const l=n(r);let c=a?n(a):void 0;if(!c){let u={};const h=(o=this.options.routeMasks)==null?void 0:o.find(f=>{const d=ym(this.basepath,l.pathname,{to:f.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return d?(u=d,!0):!1});if(h){const{from:f,...d}=h;a={...G2(i,["from"]),...d,params:u},c=n(a)}}if(c){const u=n(a);l.maskedLocation=u}return l};return i.mask?s(i,{...G2(i,["from"]),...i.mask}):s(i)},this.commitLocation=({viewTransition:i,ignoreBlocker:n,...s})=>{const r=()=>{const l=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];l.forEach(u=>{s.state[u]=this.latestLocation.state[u]});const c=Ga(s.state,this.latestLocation.state);return l.forEach(u=>{delete s.state[u]}),c},a=this.latestLocation.href===s.href,o=this.commitLocationPromise;if(this.commitLocationPromise=ya(()=>{o==null||o.resolve()}),a&&r())this.load();else{let{maskedLocation:l,hashScrollIntoView:c,...u}=s;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=c??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=i,this.history[s.replace?"replace":"push"](u.href,u.state,{ignoreBlocker:n})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:i,resetScroll:n,hashScrollIntoView:s,viewTransition:r,ignoreBlocker:a,href:o,...l}={})=>{if(o){const u=this.history.location.state.__TSR_index,h=Xl(o,{__TSR_index:i?u:u+1});l.to=h.pathname,l.search=this.options.parseSearch(h.search),l.hash=h.hash.slice(1)}const c=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...c,viewTransition:r,replace:i,resetScroll:n,hashScrollIntoView:s,ignoreBlocker:a})},this.navigate=({to:i,reloadDocument:n,href:s,...r})=>{if(!n&&s)try{new URL(`${s}`),n=!0}catch{}if(n){if(!s){const a=this.buildLocation({to:i,...r});s=this.history.createHref(a.href)}return r.replace?window.location.replace(s):window.location.href=s,Promise.resolve()}return this.buildAndCommitLocation({...r,href:s,to:i,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const n=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),s=r=>{try{return encodeURI(decodeURI(r))}catch{return r}};if(Rd(s(this.latestLocation.href))!==Rd(s(n.href)))throw rT({href:n.href})}const i=this.matchRoutes(this.latestLocation);this.__store.setState(n=>({...n,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:i,cachedMatches:n.cachedMatches.filter(s=>!i.some(r=>r.id===s.id))}))},this.load=async i=>{let n,s,r;for(r=new Promise(a=>{this.startTransition(async()=>{var o;try{this.beforeLoad();const l=this.latestLocation,c=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Ir({resolvedLocation:c,location:l})}),this.emit({type:"onBeforeLoad",...Ir({resolvedLocation:c,location:l})}),await this.loadMatches({sync:i==null?void 0:i.sync,matches:this.state.pendingMatches,location:l,onReady:async()=>{this.startViewTransition(async()=>{let u,h,f;j2(()=>{this.__store.setState(d=>{const g=d.matches,m=d.pendingMatches||d.matches;return u=g.filter(A=>!m.some(p=>p.id===A.id)),h=m.filter(A=>!g.some(p=>p.id===A.id)),f=g.filter(A=>m.some(p=>p.id===A.id)),{...d,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...d.cachedMatches,...u.filter(A=>A.status!=="error")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[h,"onEnter"],[f,"onStay"]].forEach(([d,g])=>{d.forEach(m=>{var A,p;(p=(A=this.looseRoutesById[m.routeId].options)[g])==null||p.call(A,m)})})})}})}catch(l){on(l)?(n=l,this.isServer||this.navigate({...n.options,replace:!0,ignoreBlocker:!0})):Ti(l)&&(s=l),this.__store.setState(c=>({...c,statusCode:n?n.status:s?404:c.matches.some(u=>u.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===r&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=r,await r;this.latestLoadPromise&&r!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(a=>({...a,statusCode:404}))},this.startViewTransition=i=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof n=="object"&&this.isViewTransitionTypesSupported){const r=this.latestLocation,a=this.state.resolvedLocation,o=typeof n.types=="function"?n.types(Ir({resolvedLocation:a,location:r})):n.types;s={update:i,types:o}}else s=i;document.startViewTransition(s)}else i()},this.updateMatch=(i,n)=>{var s;const r=(s=this.state.pendingMatches)!=null&&s.some(a=>a.id===i)?"pendingMatches":this.state.matches.some(a=>a.id===i)?"matches":this.state.cachedMatches.some(a=>a.id===i)?"cachedMatches":"";r&&this.__store.setState(a=>{var o;return{...a,[r]:(o=a[r])==null?void 0:o.map(l=>l.id===i?n(l):l)}})},this.getMatch=i=>{var n;const s=r=>r.id===i;return this.state.cachedMatches.find(s)??((n=this.state.pendingMatches)==null?void 0:n.find(s))??this.state.matches.find(s)},this.loadMatches=async({location:i,matches:n,preload:s,onReady:r,updateMatch:a=this.updateMatch,sync:o})=>{let l,c=!1;const u=async()=>{c||(c=!0,await(r==null?void 0:r()))},h=g=>!!(s&&!this.state.matches.some(m=>m.id===g));!this.isServer&&this.state.matches.some(g=>g._forcePending)&&u();const f=(g,m)=>{var A,p,v;if(on(m)||Ti(m)){if(on(m)&&m.redirectHandled&&!m.options.reloadDocument)throw m;if((A=g._nonReactive.beforeLoadPromise)==null||A.resolve(),(p=g._nonReactive.loaderPromise)==null||p.resolve(),g._nonReactive.beforeLoadPromise=void 0,g._nonReactive.loaderPromise=void 0,a(g.id,x=>({...x,status:on(m)?"redirected":Ti(m)?"notFound":"error",isFetching:!1,error:m})),m.routeId||(m.routeId=g.routeId),(v=g._nonReactive.loadPromise)==null||v.resolve(),on(m))throw c=!0,m.options._fromLocation=i,m.redirectHandled=!0,m=this.resolveRedirect(m),m;if(Ti(m))throw this._handleNotFound(n,m,{updateMatch:a}),m}},d=g=>{const m=this.getMatch(g);return!!(!this.isServer&&m._nonReactive.dehydrated||this.isServer&&m.ssr===!1)};try{await new Promise((g,m)=>{(async()=>{var A,p,v,x;try{const y=(w,S,M)=>{var T,R;const{id:D,routeId:I}=n[w],U=this.looseRoutesById[I];if(S instanceof Promise)throw S;S.routerCode=M,l=l??w,f(this.getMatch(D),S);try{(R=(T=U.options).onError)==null||R.call(T,S)}catch(L){S=L,f(this.getMatch(D),S)}a(D,L=>{var V,k;return(V=L._nonReactive.beforeLoadPromise)==null||V.resolve(),L._nonReactive.beforeLoadPromise=void 0,(k=L._nonReactive.loadPromise)==null||k.resolve(),{...L,error:S,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}})};for(const[w,{id:S,routeId:M}]of n.entries()){const T=this.getMatch(S),R=(A=n[w-1])==null?void 0:A.id,D=R?this.getMatch(R):void 0,I=this.looseRoutesById[M],U=I.options.pendingMs??this.options.defaultPendingMs;if(this.isServer){let F;if(this.isShell())F=S===Di;else{const z=this.options.defaultSsr??!0;if((D==null?void 0:D.ssr)===!1)F=!1;else{let G;if(I.options.ssr===void 0)G=z;else if(typeof I.options.ssr=="function"){let X=function(ie,me){return me?{status:"error",error:me}:{status:"success",value:ie}};const{search:le,params:oe}=this.getMatch(S),ne={search:X(le,T.searchError),params:X(oe,T.paramsError),location:i,matches:n.map(ie=>({index:ie.index,pathname:ie.pathname,fullPath:ie.fullPath,staticData:ie.staticData,id:ie.id,routeId:ie.routeId,search:X(ie.search,ie.searchError),params:X(ie.params,ie.paramsError),ssr:ie.ssr}))};G=await I.options.ssr(ne)??z}else G=I.options.ssr;G===!0&&(D==null?void 0:D.ssr)==="data-only"?F="data-only":F=G}}T.ssr=F}if(d(S))continue;const L=!!(r&&!this.isServer&&!h(S)&&(I.options.loader||I.options.beforeLoad||W2(I))&&typeof U=="number"&&U!==1/0&&(I.options.pendingComponent??((p=this.options)==null?void 0:p.defaultPendingComponent)));let V=!0;const k=()=>{const F=this.getMatch(S);if(L&&F._nonReactive.pendingTimeout===void 0){const z=setTimeout(()=>{try{u()}catch{}},U);F._nonReactive.pendingTimeout=z}};if(T._nonReactive.beforeLoadPromise||T._nonReactive.loaderPromise){k(),await T._nonReactive.beforeLoadPromise;const F=this.getMatch(S);F.status==="error"?V=!0:F.preload&&(F.status==="redirected"||F.status==="notFound")&&f(F,F.error)}if(V){try{const F=this.getMatch(S);F._nonReactive.beforeLoadPromise=ya();const z=F._nonReactive.loadPromise;F._nonReactive.loadPromise=ya(()=>{z==null||z.resolve()});const{paramsError:G,searchError:X}=this.getMatch(S);G&&y(w,G,"PARSE_PARAMS"),X&&y(w,X,"VALIDATE_SEARCH"),k();const le=new AbortController,oe=(D==null?void 0:D.context)??this.options.context??void 0;a(S,W=>({...W,isFetching:"beforeLoad",fetchCount:W.fetchCount+1,abortController:le,context:{...oe,...W.__routeContext}}));const{search:ne,params:ie,context:me,cause:K}=this.getMatch(S),te=h(S),he={search:ne,abortController:le,params:ie,preload:te,context:me,location:i,navigate:W=>this.navigate({...W,_fromLocation:i}),buildLocation:this.buildLocation,cause:te?"preload":K,matches:n},Z=await((x=(v=I.options).beforeLoad)==null?void 0:x.call(v,he));(on(Z)||Ti(Z))&&y(w,Z,"BEFORE_LOAD"),a(S,W=>({...W,__beforeLoadContext:Z,context:{...oe,...W.__routeContext,...Z},abortController:le}))}catch(F){y(w,F,"BEFORE_LOAD")}a(S,F=>{var z;return(z=F._nonReactive.beforeLoadPromise)==null||z.resolve(),F._nonReactive.beforeLoadPromise=void 0,{...F,isFetching:!1}})}}const b=n.slice(0,l),E=[];b.forEach(({id:w,routeId:S},M)=>{E.push((async()=>{var T,R;let D=!1,I=!1;const U=this.looseRoutesById[S],L=async()=>{var F,z,G,X,le,oe;const ne=this.getMatch(w);if(!ne)return;const ie={matches:n,match:ne,params:ne.params,loaderData:ne.loaderData},me=await((z=(F=U.options).head)==null?void 0:z.call(F,ie)),K=me==null?void 0:me.meta,te=me==null?void 0:me.links,he=me==null?void 0:me.scripts,Z=me==null?void 0:me.styles,W=await((X=(G=U.options).scripts)==null?void 0:X.call(G,ie)),ee=await((oe=(le=U.options).headers)==null?void 0:oe.call(le,ie));return{meta:K,links:te,headScripts:he,headers:ee,scripts:W,styles:Z}},V=async()=>{const F=this.getMatch(w);F._nonReactive.minPendingPromise&&await F._nonReactive.minPendingPromise},k=this.getMatch(w);if(d(w)){if(this.isServer){const F=await L();return a(w,z=>({...z,...F})),this.getMatch(w)}}else if(k._nonReactive.loaderPromise){if(k.status==="success"&&!o&&!k.preload)return this.getMatch(w);await k._nonReactive.loaderPromise;const F=this.getMatch(w);F.error&&f(F,F.error)}else{const F=E[M-1],z=()=>{const{params:te,loaderDeps:he,abortController:Z,context:W,cause:ee}=this.getMatch(w),Fe=h(w);return{params:te,deps:he,preload:!!Fe,parentMatchPromise:F,abortController:Z,context:W,location:i,navigate:Oe=>this.navigate({...Oe,_fromLocation:i}),cause:Fe?"preload":ee,route:U}},G=Date.now()-this.getMatch(w).updatedAt,X=h(w),le=X?U.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:U.options.staleTime??this.options.defaultStaleTime??0,oe=U.options.shouldReload,ne=typeof oe=="function"?oe(z()):oe;a(w,te=>(te._nonReactive.loaderPromise=ya(),{...te,preload:!!X&&!this.state.matches.some(he=>he.id===w)}));const ie=async()=>{var te,he,Z,W;try{try{(!this.isServer||this.isServer&&this.getMatch(w).ssr===!0)&&this.loadRouteChunk(U),a(w,Oe=>({...Oe,isFetching:"loader"}));const ee=await((he=(te=U.options).loader)==null?void 0:he.call(te,z()));f(this.getMatch(w),ee),a(w,Oe=>({...Oe,loaderData:ee})),await U._lazyPromise;const Fe=await L();await V(),await U._componentsPromise,a(w,Oe=>({...Oe,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...Fe}))}catch(ee){let Fe=ee;await V(),f(this.getMatch(w),ee);try{(W=(Z=U.options).onError)==null||W.call(Z,ee)}catch(li){Fe=li,f(this.getMatch(w),li)}const Oe=await L();a(w,li=>({...li,error:Fe,status:"error",isFetching:!1,...Oe}))}}catch(ee){const Fe=await L();a(w,Oe=>(Oe._nonReactive.loaderPromise=void 0,{...Oe,...Fe})),f(this.getMatch(w),ee)}},{status:me,invalid:K}=this.getMatch(w);if(D=me==="success"&&(K||(ne??G>le)),!(X&&U.options.preload===!1))if(D&&!o)I=!0,(async()=>{var te,he;try{await ie();const Z=this.getMatch(w);(te=Z._nonReactive.loaderPromise)==null||te.resolve(),(he=Z._nonReactive.loadPromise)==null||he.resolve(),Z._nonReactive.loaderPromise=void 0}catch(Z){on(Z)&&await this.navigate(Z.options)}})();else if(me!=="success"||D&&o)await ie();else{const te=await L();a(w,he=>({...he,...te}))}}if(!I){const F=this.getMatch(w);(T=F._nonReactive.loaderPromise)==null||T.resolve(),(R=F._nonReactive.loadPromise)==null||R.resolve()}return a(w,F=>(clearTimeout(F._nonReactive.pendingTimeout),F._nonReactive.pendingTimeout=void 0,I||(F._nonReactive.loaderPromise=void 0),F._nonReactive.dehydrated=void 0,{...F,isFetching:I?F.isFetching:!1,invalid:!1})),this.getMatch(w)})())}),await Promise.all(E),g()}catch(y){m(y)}})()}),await u()}catch(g){if(on(g)||Ti(g))throw Ti(g)&&!s&&await u(),g}return n},this.invalidate=i=>{const n=s=>{var r;return((r=i==null?void 0:i.filter)==null?void 0:r.call(i,s))??!0?{...s,invalid:!0,...i!=null&&i.forcePending||s.status==="error"?{status:"pending",error:void 0}:void 0}:s};return this.__store.setState(s=>{var r;return{...s,matches:s.matches.map(n),cachedMatches:s.cachedMatches.map(n),pendingMatches:(r=s.pendingMatches)==null?void 0:r.map(n)}}),this.shouldViewTransition=!1,this.load({sync:i==null?void 0:i.sync})},this.resolveRedirect=i=>(i.options.href||(i.options.href=this.buildLocation(i.options).href,i.headers.set("Location",i.options.href)),i.headers.get("Location")||i.headers.set("Location",i.options.href),i),this.clearCache=i=>{const n=i==null?void 0:i.filter;n!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(r=>!n(r))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const i=n=>{const s=this.looseRoutesById[n.routeId];if(!s.options.loader)return!0;const r=(n.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return n.status==="error"?!0:Date.now()-n.updatedAt>=r};this.clearCache({filter:i})},this.loadRouteChunk=i=>(i._lazyPromise===void 0&&(i.lazyFn?i._lazyPromise=i.lazyFn().then(n=>{const{id:s,...r}=n.options;Object.assign(i.options,r)}):i._lazyPromise=Promise.resolve()),i._componentsPromise===void 0&&(i._componentsPromise=i._lazyPromise.then(()=>Promise.all(Zy.map(async n=>{const s=i.options[n];s!=null&&s.preload&&await s.preload()})))),i._componentsPromise),this.preloadRoute=async i=>{const n=this.buildLocation(i);let s=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:i});const r=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(o=>o.id)),a=new Set([...r,...this.state.cachedMatches.map(o=>o.id)]);j2(()=>{s.forEach(o=>{a.has(o.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,o]}))})});try{return s=await this.loadMatches({matches:s,location:n,preload:!0,updateMatch:(o,l)=>{r.has(o)?s=s.map(c=>c.id===o?l(c):c):this.updateMatch(o,l)}}),s}catch(o){if(on(o))return o.options.reloadDocument?void 0:await this.preloadRoute({...o.options,_fromLocation:n});Ti(o)||console.error(o);return}},this.matchRoute=(i,n)=>{const s={...i,to:i.to?this.resolvePathWithBase(i.from||"",i.to):void 0,params:i.params||{},leaveParams:!0},r=this.buildLocation(s);if(n!=null&&n.pending&&this.state.status!=="pending")return!1;const o=((n==null?void 0:n.pending)===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=ym(this.basepath,o.pathname,{...n,to:r.pathname},this.parsePathnameCache);return!l||i.params&&!Ga(l,i.params,{partial:!0})?!1:l&&((n==null?void 0:n.includeSearch)??!0)?Ga(o.search,r.search,{partial:!0})?l:!1:l},this._handleNotFound=(i,n,{updateMatch:s=this.updateMatch}={})=>{var r;const a=this.routesById[n.routeId??""]??this.routeTree,o={};for(const c of i)o[c.routeId]=c;!a.options.notFoundComponent&&((r=this.options)!=null&&r.defaultNotFoundComponent)&&(a.options.notFoundComponent=this.options.defaultNotFoundComponent),Zn(a.options.notFoundComponent);const l=o[a.id];Zn(l,"Could not find match for route: "+a.id),s(l.id,c=>({...c,status:"notFound",error:n,isFetching:!1})),n.routerCode==="BEFORE_LOAD"&&a.parentRoute&&(n.routeId=a.parentRoute.id,this._handleNotFound(i,n,{updateMatch:s}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(i=>i.status==="notFound"||i.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??iT,parseSearch:t.parseSearch??tT}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,i){var n;const{foundRoute:s,matchedRoutes:r,routeParams:a}=this.getMatchedRoutes(t.pathname,(n=i==null?void 0:i.dest)==null?void 0:n.to);let o=!1;(s?s.path!=="/"&&a["**"]:vo(t.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let f=r.length-1;f>=0;f--){const d=r[f];if(d.children)return d.id}return Di}})(),c=r.map(f=>{var d;let g;const m=((d=f.options.params)==null?void 0:d.parse)??f.options.parseParams;if(m)try{const A=m(a);Object.assign(a,A)}catch(A){if(g=new lT(A.message,{cause:A}),i!=null&&i.throwOnError)throw g;return g}}),u=[],h=f=>(f==null?void 0:f.id)?f.context??this.options.context??void 0:this.options.context??void 0;return r.forEach((f,d)=>{var g,m;const A=u[d-1],[p,v,x]=(()=>{const U=(A==null?void 0:A.search)??t.search,L=(A==null?void 0:A._strictSearch)??void 0;try{const V=wm(f.options.validateSearch,{...U})??void 0;return[{...U,...V},{...L,...V},void 0]}catch(V){let k=V;if(V instanceof Mh||(k=new Mh(V.message,{cause:V})),i!=null&&i.throwOnError)throw k;return[U,{},k]}})(),y=((m=(g=f.options).loaderDeps)==null?void 0:m.call(g,{search:p}))??"",b=y?JSON.stringify(y):"",{usedParams:E,interpolatedPath:w}=cu({path:f.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),S=cu({path:f.id,params:a,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+b,M=this.getMatch(S),T=this.state.matches.find(U=>U.routeId===f.id),R=T?"stay":"enter";let D;if(M)D={...M,cause:R,params:T?Ci(T.params,a):a,_strictParams:E,search:Ci(T?T.search:M.search,p),_strictSearch:v};else{const U=f.options.loader||f.options.beforeLoad||f.lazyFn||W2(f)?"pending":"success";D={id:S,index:d,routeId:f.id,params:T?Ci(T.params,a):a,_strictParams:E,pathname:Kn([this.basepath,w]),updatedAt:Date.now(),search:T?Ci(T.search,p):p,_strictSearch:v,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:c[d],__routeContext:void 0,_nonReactive:{loadPromise:ya()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:R,loaderDeps:T?Ci(T.loaderDeps,y):y,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:f.options.staticData||{},fullPath:f.fullPath}}i!=null&&i.preload||(D.globalNotFound=l===f.id),D.searchError=x;const I=h(A);D.context={...I,...D.__routeContext,...D.__beforeLoadContext},u.push(D)}),u.forEach((f,d)=>{const g=this.looseRoutesById[f.routeId];if(!this.getMatch(f.id)&&(i==null?void 0:i._buildLocation)!==!0){const A=u[d-1],p=h(A);if(g.options.context){const v={deps:f.loaderDeps,params:f.params,context:p??{},location:t,navigate:x=>this.navigate({...x,_fromLocation:t}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:u};f.__routeContext=g.options.context(v)??void 0}f.context={...p,...f.__routeContext,...f.__beforeLoadContext}}}),u}}class Mh extends Error{}class lT extends Error{}const Q2=e=>e.endsWith("/")&&e.length>1?e.slice(0,-1):e;function X2(e,t){return Q2(e)===Q2(t)}function cT(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function wm(e,t){if(e==null)return{};if("~standard"in e){const i=e["~standard"].validate(t);if(i instanceof Promise)throw new Mh("Async validation not supported");if(i.issues)throw new Mh(JSON.stringify(i.issues,void 0,2),{cause:i});return i.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}const Zy=["component","errorComponent","pendingComponent","notFoundComponent"];function W2(e){var t;for(const i of Zy)if((t=e.options[i])!=null&&t.preload)return!0;return!1}const uT=.5,hT=.4,fT=.25,dT=.05,mT=.02,gT=.01,Z2=2e-4,J2=1e-4;function $2(e,t){return e.prefixSegment&&e.suffixSegment?t+dT+Z2*e.prefixSegment.length+J2*e.suffixSegment.length:e.prefixSegment?t+mT+Z2*e.prefixSegment.length:e.suffixSegment?t+gT+J2*e.suffixSegment.length:t}function pT({routeTree:e,initRoute:t}){const i={},n={},s=l=>{l.forEach((c,u)=>{t==null||t(c,u);const h=i[c.id];if(Zn(!h,`Duplicate routes found with id: ${String(c.id)}`),i[c.id]=c,!c.isRoot&&c.path){const d=vo(c.fullPath);(!n[d]||c.fullPath.endsWith("/"))&&(n[d]=c)}const f=c.children;f!=null&&f.length&&s(f)})};s([e]);const r=[];Object.values(i).forEach((l,c)=>{var u;if(l.isRoot||!l.path)return;const h=hg(l.fullPath);let f=Ao(h),d=0;for(;f.length>d+1&&((u=f[d])==null?void 0:u.value)==="/";)d++;d>0&&(f=f.slice(d));let g=0,m=!1;const A=f.map((p,v)=>{if(p.value==="/")return .75;let x;if(p.type===Hr?x=uT:p.type===po?(x=hT,g++):p.type===Yr&&(x=fT),x){for(let y=v+1;y<f.length;y++){const b=f[y];if(b.type===qn&&b.value!=="/")return m=!0,$2(p,x+.2)}return $2(p,x)}return 1});r.push({child:l,trimmed:h,parsed:f,index:c,scores:A,optionalParamCount:g,hasStaticAfter:m})});const o=r.sort((l,c)=>{const u=Math.min(l.scores.length,c.scores.length);for(let h=0;h<u;h++)if(l.scores[h]!==c.scores[h])return c.scores[h]-l.scores[h];if(l.scores.length!==c.scores.length){if(l.optionalParamCount!==c.optionalParamCount){if(l.hasStaticAfter===c.hasStaticAfter)return l.optionalParamCount-c.optionalParamCount;if(l.hasStaticAfter&&!c.hasStaticAfter)return-1;if(!l.hasStaticAfter&&c.hasStaticAfter)return 1}return c.scores.length-l.scores.length}for(let h=0;h<u;h++)if(l.parsed[h].value!==c.parsed[h].value)return l.parsed[h].value>c.parsed[h].value?1:-1;return l.index-c.index}).map((l,c)=>(l.child.rank=c,l.child));return{routesById:i,routesByPath:n,flatRoutes:o}}function vT({pathname:e,routePathname:t,basepath:i,caseSensitive:n,routesByPath:s,routesById:r,flatRoutes:a,parseCache:o}){let l={};const c=vo(e),u=g=>{var m;return ym(i,c,{to:g.fullPath,caseSensitive:((m=g.options)==null?void 0:m.caseSensitive)??n,fuzzy:!0},o)};let h=t!==void 0?s[t]:void 0;if(h)l=u(h);else{let g;for(const m of a){const A=u(m);if(A)if(m.path!=="/"&&A["**"])g||(g={foundRoute:m,routeParams:A});else{h=m,l=A;break}}!h&&g&&(h=g.foundRoute,l=g.routeParams)}let f=h||r[Di];const d=[f];for(;f.parentRoute;)f=f.parentRoute,d.push(f);return d.reverse(),{matchedRoutes:d,routeParams:l,foundRoute:h}}function AT({search:e,dest:t,destRoutes:i,_includeValidateSearch:n}){const s=i.reduce((o,l)=>{var c;const u=[];if("search"in l.options)(c=l.options.search)!=null&&c.middlewares&&u.push(...l.options.search.middlewares);else if(l.options.preSearchFilters||l.options.postSearchFilters){const h=({search:f,next:d})=>{let g=f;"preSearchFilters"in l.options&&l.options.preSearchFilters&&(g=l.options.preSearchFilters.reduce((A,p)=>p(A),f));const m=d(g);return"postSearchFilters"in l.options&&l.options.postSearchFilters?l.options.postSearchFilters.reduce((A,p)=>p(A),m):m};u.push(h)}if(n&&l.options.validateSearch){const h=({search:f,next:d})=>{const g=d(f);try{return{...g,...wm(l.options.validateSearch,g)??void 0}}catch{return g}};u.push(h)}return o.concat(u)},[])??[],r=({search:o})=>t.search?t.search===!0?o:Nr(t.search,o):{};s.push(r);const a=(o,l)=>{if(o>=s.length)return l;const c=s[o];return c({search:l,next:h=>a(o+1,h)})};return a(0,e)}const xT="Error preloading route! ☝️";class Jy{constructor(t){if(this.init=i=>{var n,s;this.originalIndex=i.originalIndex;const r=this.options,a=!(r!=null&&r.path)&&!(r!=null&&r.id);this.parentRoute=(s=(n=this.options).getParentRoute)==null?void 0:s.call(n),a?this._path=Di:this.parentRoute||Zn(!1);let o=a?Di:r==null?void 0:r.path;o&&o!=="/"&&(o=hg(o));const l=(r==null?void 0:r.id)||o;let c=a?Di:Kn([this.parentRoute.id===Di?"":this.parentRoute.id,l]);o===Di&&(o="/"),c!==Di&&(c=Kn(["/",c]));const u=c===Di?"/":Kn([this.parentRoute.fullPath,o]);this._path=o,this._id=c,this._fullPath=u,this._to=u},this.clone=i=>{this._path=i._path,this._id=i._id,this._fullPath=i._fullPath,this._to=i._to,this.options.getParentRoute=i.options.getParentRoute,this.children=i.children},this.addChildren=i=>this._addFileChildren(i),this._addFileChildren=i=>(Array.isArray(i)&&(this.children=i),typeof i=="object"&&i!==null&&(this.children=Object.values(i)),this),this._addFileTypes=()=>this,this.updateLoader=i=>(Object.assign(this.options,i),this),this.update=i=>(Object.assign(this.options,i),this),this.lazy=i=>(this.lazyFn=i,this),this.options=t||{},this.isRoot=!(t!=null&&t.getParentRoute),t!=null&&t.id&&(t!=null&&t.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class yT extends Jy{constructor(t){super(t)}}function fg(e){const t=e.errorComponent??Tf;return C.jsx(bT,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:i,reset:n})=>i?N.createElement(t,{error:i,reset:n}):e.children})}class bT extends N.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,i){i.error&&i.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,i){this.props.onCatch&&this.props.onCatch(t,i)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Tf({error:e}){const[t,i]=N.useState(!1);return C.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[C.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),C.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>i(n=>!n),children:t?"Hide Error":"Show Error"})]}),C.jsx("div",{style:{height:".25rem"}}),t?C.jsx("div",{children:C.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?C.jsx("code",{children:e.message}):null})}):null]})}function wT({children:e,fallback:t=null}){return ST()?C.jsx(Je.Fragment,{children:e}):C.jsx(Je.Fragment,{children:t})}function ST(){return Je.useSyncExternalStore(CT,()=>!0,()=>!1)}function CT(){return()=>{}}var $y={exports:{}},eb={},tb={exports:{}},ib={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=N;function ET(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TT=typeof Object.is=="function"?Object.is:ET,MT=xo.useState,DT=xo.useEffect,RT=xo.useLayoutEffect,NT=xo.useDebugValue;function IT(e,t){var i=t(),n=MT({inst:{value:i,getSnapshot:t}}),s=n[0].inst,r=n[1];return RT(function(){s.value=i,s.getSnapshot=t,Fd(s)&&r({inst:s})},[e,i,t]),DT(function(){return Fd(s)&&r({inst:s}),e(function(){Fd(s)&&r({inst:s})})},[e]),NT(i),i}function Fd(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!TT(e,i)}catch{return!0}}function FT(e,t){return t()}var UT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FT:IT;ib.useSyncExternalStore=xo.useSyncExternalStore!==void 0?xo.useSyncExternalStore:UT;tb.exports=ib;var BT=tb.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf=N,VT=BT;function PT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OT=typeof Object.is=="function"?Object.is:PT,LT=VT.useSyncExternalStore,kT=Mf.useRef,jT=Mf.useEffect,zT=Mf.useMemo,_T=Mf.useDebugValue;eb.useSyncExternalStoreWithSelector=function(e,t,i,n,s){var r=kT(null);if(r.current===null){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=zT(function(){function l(d){if(!c){if(c=!0,u=d,d=n(d),s!==void 0&&a.hasValue){var g=a.value;if(s(g,d))return h=g}return h=d}if(g=h,OT(u,d))return g;var m=n(d);return s!==void 0&&s(g,m)?(u=d,g):(u=d,h=m)}var c=!1,u,h,f=i===void 0?null:i;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,i,n,s]);var o=LT(e,r[0],r[1]);return jT(function(){a.hasValue=!0,a.value=o},[o]),_T(o),o};$y.exports=eb;var GT=$y.exports;function HT(e,t=i=>i){return GT.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,YT)}function YT(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!t.has(n)||!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(t,i[n])||!Object.is(e[i[n]],t[i[n]]))return!1;return!0}const Ud=N.createContext(null);function nb(){return typeof document>"u"?Ud:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ud,Ud)}function zi(e){const t=N.useContext(nb());return e==null||e.warn,t}function ii(e){const t=zi({warn:(e==null?void 0:e.router)===void 0}),i=(e==null?void 0:e.router)||t,n=N.useRef(void 0);return HT(i.__store,s=>{if(e!=null&&e.select){if(e.structuralSharing??i.options.defaultStructuralSharing){const r=Ci(n.current,e.select(s));return n.current=r,r}return e.select(s)}return s})}const Df=N.createContext(void 0),qT=N.createContext(void 0);function Oi(e){const t=N.useContext(e.from?qT:Df);return ii({select:n=>{const s=n.matches.find(r=>e.from?e.from===r.routeId:r.id===t);if(Zn(!((e.shouldThrow??!0)&&!s),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),s!==void 0)return e.select?e.select(s):s},structuralSharing:e.structuralSharing})}function dg(e){return Oi({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function mg(e){const{select:t,...i}=e;return Oi({...i,select:n=>t?t(n.loaderDeps):n.loaderDeps})}function gg(e){return Oi({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.params):t.params})}function pg(e){return Oi({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function vg(e){const{navigate:t,state:i}=zi(),n=Oi({strict:!1,select:s=>s.index});return N.useCallback(s=>{const r=s.from??(e==null?void 0:e.from)??i.matches[n].fullPath;return t({...s,from:r})},[e==null?void 0:e.from,t])}var sb={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=N;function rb(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function as(){}var Ht={d:{f:as,r:function(){throw Error(rb(522))},D:as,C:as,L:as,m:as,X:as,S:as,M:as},p:0,findDOMNode:null},QT=Symbol.for("react.portal");function XT(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:QT,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}var Nl=KT.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rf(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ht;qt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(rb(299));return XT(e,t,null,i)};qt.flushSync=function(e){var t=Nl.T,i=Ht.p;try{if(Nl.T=null,Ht.p=2,e)return e()}finally{Nl.T=t,Ht.p=i,Ht.d.f()}};qt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ht.d.C(e,t))};qt.prefetchDNS=function(e){typeof e=="string"&&Ht.d.D(e)};qt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var i=t.as,n=Rf(i,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;i==="style"?Ht.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:r}):i==="script"&&Ht.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};qt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var i=Rf(t.as,t.crossOrigin);Ht.d.M(e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ht.d.M(e)};qt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var i=t.as,n=Rf(i,t.crossOrigin);Ht.d.L(e,i,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};qt.preloadModule=function(e,t){if(typeof e=="string")if(t){var i=Rf(t.as,t.crossOrigin);Ht.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ht.d.m(e)};qt.requestFormReset=function(e){Ht.d.r(e)};qt.unstable_batchedUpdates=function(e,t){return e(t)};qt.useFormState=function(e,t,i){return Nl.H.useFormState(e,t,i)};qt.useFormStatus=function(){return Nl.H.useHostTransitionStatus()};qt.version="19.1.1";function ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ab)}catch(e){console.error(e)}}ab(),sb.exports=qt;var na=sb.exports;const WT=$1(na),uu=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Bd(e){const t=N.useRef({value:e,prev:null}),i=t.current.value;return e!==i&&(t.current={value:e,prev:i}),t.current.prev}function ZT(e,t,i={},n={}){N.useEffect(()=>{if(!e.current||n.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([r])=>{t(r)},i);return s.observe(e.current),()=>{s.disconnect()}},[t,i,n.disabled,e])}function JT(e){const t=N.useRef(null);return N.useImperativeHandle(e,()=>t.current,[]),t}function $T(e,t){const i=zi(),[n,s]=N.useState(!1),r=N.useRef(!1),a=JT(t),{activeProps:o,inactiveProps:l,activeOptions:c,to:u,preload:h,preloadDelay:f,hashScrollIntoView:d,replace:g,startTransition:m,resetScroll:A,viewTransition:p,children:v,target:x,disabled:y,style:b,className:E,onClick:w,onFocus:S,onMouseEnter:M,onMouseLeave:T,onTouchStart:R,ignoreBlocker:D,params:I,search:U,hash:L,state:V,mask:k,reloadDocument:F,unsafeRelative:z,from:G,_fromLocation:X,...le}=e,oe=N.useMemo(()=>{try{return new URL(u),"external"}catch{}return"internal"},[u]),ne=ii({select:tt=>tt.location.search,structuralSharing:!0}),ie=Oi({strict:!1,select:tt=>e.from??tt.fullPath}),me=N.useMemo(()=>i.buildLocation({...e,from:ie}),[i,ne,e._fromLocation,ie,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),K=oe==="external",te=e.reloadDocument||K?!1:h??i.options.defaultPreload,he=f??i.options.defaultPreloadDelay??0,Z=ii({select:tt=>{if(K)return!1;if(c!=null&&c.exact){if(!VE(tt.location.pathname,me.pathname,i.basepath))return!1}else{const Kt=Sh(tt.location.pathname,i.basepath),rs=Sh(me.pathname,i.basepath);if(!(Kt.startsWith(rs)&&(Kt.length===rs.length||Kt[rs.length]==="/")))return!1}return((c==null?void 0:c.includeSearch)??!0)&&!Ga(tt.location.search,me.search,{partial:!(c!=null&&c.exact),ignoreUndefined:!(c!=null&&c.explicitUndefined)})?!1:c!=null&&c.includeHash?tt.location.hash===me.hash:!0}}),W=N.useCallback(()=>{i.preloadRoute({...e,from:ie}).catch(tt=>{console.warn(tt),console.warn(xT)})},[i,e.to,e._fromLocation,ie,e.search,e.hash,e.params,e.state,e.mask,e.unsafeRelative,e.hashScrollIntoView,e.href,e.ignoreBlocker,e.reloadDocument,e.replace,e.resetScroll,e.viewTransition]),ee=N.useCallback(tt=>{tt!=null&&tt.isIntersecting&&W()},[W]);if(ZT(a,ee,s8,{disabled:!!y||te!=="viewport"}),N.useEffect(()=>{r.current||!y&&te==="render"&&(W(),r.current=!0)},[y,W,te]),K)return{...le,ref:a,type:oe,href:u,...v&&{children:v},...x&&{target:x},...y&&{disabled:y},...b&&{style:b},...E&&{className:E},...w&&{onClick:w},...S&&{onFocus:S},...M&&{onMouseEnter:M},...T&&{onMouseLeave:T},...R&&{onTouchStart:R}};const Fe=tt=>{if(!y&&!r8(tt)&&!tt.defaultPrevented&&(!x||x==="_self")&&tt.button===0){tt.preventDefault(),na.flushSync(()=>{s(!0)});const Kt=i.subscribe("onResolved",()=>{Kt(),s(!1)});i.navigate({...e,from:ie,replace:g,resetScroll:A,hashScrollIntoView:d,startTransition:m,viewTransition:p,ignoreBlocker:D})}},Oe=tt=>{y||te&&W()},li=Oe,Nn=tt=>{if(!(y||!te))if(!he)W();else{const Kt=tt.target;if(Jo.has(Kt))return;const rs=setTimeout(()=>{Jo.delete(Kt),W()},he);Jo.set(Kt,rs)}},In=tt=>{if(y||!te||!he)return;const Kt=tt.target,rs=Jo.get(Kt);rs&&(clearTimeout(rs),Jo.delete(Kt))},or=Z?Nr(o,{})??e8:Vd,Gi=Z?Vd:Nr(l,{})??Vd,S2=[E,or.className,Gi.className].filter(Boolean).join(" "),C2=(b||or.style||Gi.style)&&{...b,...or.style,...Gi.style};return{...le,...or,...Gi,href:y?void 0:me.maskedLocation?i.history.createHref(me.maskedLocation.href):i.history.createHref(me.href),ref:a,onClick:$o([w,Fe]),onFocus:$o([S,Oe]),onMouseEnter:$o([M,Nn]),onMouseLeave:$o([T,In]),onTouchStart:$o([R,li]),disabled:!!y,target:x,...C2&&{style:C2},...S2&&{className:S2},...y&&t8,...Z&&i8,...n&&n8}}const Vd={},e8={className:"active"},t8={role:"link","aria-disabled":!0},i8={"data-status":"active","aria-current":"page"},n8={"data-transitioning":"transitioning"},Jo=new WeakMap,s8={rootMargin:"100px"},$o=e=>t=>{e.filter(Boolean).forEach(i=>{t.defaultPrevented||i(t)})},Ag=N.forwardRef((e,t)=>{const{_asChild:i,...n}=e,{type:s,ref:r,...a}=$T(n,t),o=typeof n.children=="function"?n.children({isActive:a["data-status"]==="active"}):n.children;return i===void 0&&delete a.disabled,N.createElement(i||"a",{...a,ref:r},o)});function r8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}let a8=class extends Jy{constructor(t){super(t),this.useMatch=i=>Oi({select:i==null?void 0:i.select,from:this.id,structuralSharing:i==null?void 0:i.structuralSharing}),this.useRouteContext=i=>Oi({...i,from:this.id,select:n=>i!=null&&i.select?i.select(n.context):n.context}),this.useSearch=i=>pg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.id}),this.useParams=i=>gg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.id}),this.useLoaderDeps=i=>mg({...i,from:this.id}),this.useLoaderData=i=>dg({...i,from:this.id}),this.useNavigate=()=>vg({from:this.fullPath}),this.Link=Je.forwardRef((i,n)=>C.jsx(Ag,{ref:n,from:this.fullPath,...i})),this.$$typeof=Symbol.for("react.memo")}};function o8(e){return new a8(e)}class l8 extends yT{constructor(t){super(t),this.useMatch=i=>Oi({select:i==null?void 0:i.select,from:this.id,structuralSharing:i==null?void 0:i.structuralSharing}),this.useRouteContext=i=>Oi({...i,from:this.id,select:n=>i!=null&&i.select?i.select(n.context):n.context}),this.useSearch=i=>pg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.id}),this.useParams=i=>gg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.id}),this.useLoaderDeps=i=>mg({...i,from:this.id}),this.useLoaderData=i=>dg({...i,from:this.id}),this.useNavigate=()=>vg({from:this.fullPath}),this.Link=Je.forwardRef((i,n)=>C.jsx(Ag,{ref:n,from:this.fullPath,...i})),this.$$typeof=Symbol.for("react.memo")}}function c8(e){return new l8(e)}function Dh(e){return typeof e=="object"?new ev(e,{silent:!0}).createRoute(e):new ev(e,{silent:!0}).createRoute}class ev{constructor(t,i){this.path=t,this.createRoute=n=>{this.silent;const s=o8(n);return s.isRoot=!1,s},this.silent=i==null?void 0:i.silent}}class tv{constructor(t){this.useMatch=i=>Oi({select:i==null?void 0:i.select,from:this.options.id,structuralSharing:i==null?void 0:i.structuralSharing}),this.useRouteContext=i=>Oi({from:this.options.id,select:n=>i!=null&&i.select?i.select(n.context):n.context}),this.useSearch=i=>pg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.options.id}),this.useParams=i=>gg({select:i==null?void 0:i.select,structuralSharing:i==null?void 0:i.structuralSharing,from:this.options.id}),this.useLoaderDeps=i=>mg({...i,from:this.options.id}),this.useLoaderData=i=>dg({...i,from:this.options.id}),this.useNavigate=()=>{const i=zi();return vg({from:i.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function iv(e){return typeof e=="object"?new tv(e):t=>new tv({id:e,...t})}function u8(){const e=zi(),t=N.useRef({router:e,mounted:!1}),[i,n]=N.useState(!1),{hasPendingMatches:s,isLoading:r}=ii({select:h=>({isLoading:h.isLoading,hasPendingMatches:h.matches.some(f=>f.status==="pending")}),structuralSharing:!0}),a=Bd(r),o=r||i||s,l=Bd(o),c=r||s,u=Bd(c);return e.startTransition=h=>{n(!0),N.startTransition(()=>{h(),n(!1)})},N.useEffect(()=>{const h=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return vo(e.latestLocation.href)!==vo(f.href)&&e.commitLocation({...f,replace:!0}),()=>{h()}},[e,e.history]),uu(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()},[e]),uu(()=>{a&&!r&&e.emit({type:"onLoad",...Ir(e.state)})},[a,e,r]),uu(()=>{u&&!c&&e.emit({type:"onBeforeRouteMount",...Ir(e.state)})},[c,u,e]),uu(()=>{l&&!o&&(e.emit({type:"onResolved",...Ir(e.state)}),e.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),JE(e))},[o,l,e]),null}function h8(e){const t=ii({select:i=>`not-found-${i.location.pathname}-${i.status}`});return C.jsx(fg,{getResetKey:()=>t,onCatch:(i,n)=>{var s;if(Ti(i))(s=e.onCatch)==null||s.call(e,i,n);else throw i},errorComponent:({error:i})=>{var n;if(Ti(i))return(n=e.fallback)==null?void 0:n.call(e,i);throw i},children:e.children})}function f8(){return C.jsx("p",{children:"Not Found"})}function ba(e){return C.jsx(C.Fragment,{children:e.children})}function ob(e,t,i){return t.options.notFoundComponent?C.jsx(t.options.notFoundComponent,{data:i}):e.options.defaultNotFoundComponent?C.jsx(e.options.defaultNotFoundComponent,{data:i}):C.jsx(f8,{})}function d8({children:e}){return typeof document<"u"?null:C.jsx("script",{className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)}})}function m8(){const e=zi(),i=(e.options.getScrollRestorationKey||bm)(e.latestLocation),n=i!==bm(e.latestLocation)?i:void 0;if(!e.isScrollRestoring||!e.isServer)return null;const s={storageKey:Eh,shouldScrollRestoration:!0};return n&&(s.key=n),C.jsx(d8,{children:`(${Wy.toString()})(${JSON.stringify(s)})`})}const lb=N.memo(function({matchId:t}){var i,n;const s=zi(),r=ii({select:x=>{const y=x.matches.find(b=>b.id===t);return Zn(y),{routeId:y.routeId,ssr:y.ssr,_displayPending:y._displayPending}},structuralSharing:!0}),a=s.routesById[r.routeId],o=a.options.pendingComponent??s.options.defaultPendingComponent,l=o?C.jsx(o,{}):null,c=a.options.errorComponent??s.options.defaultErrorComponent,u=a.options.onCatch??s.options.defaultOnCatch,h=a.isRoot?a.options.notFoundComponent??((i=s.options.notFoundRoute)==null?void 0:i.options.component):a.options.notFoundComponent,f=r.ssr===!1||r.ssr==="data-only",d=(!a.isRoot||a.options.wrapInSuspense||f)&&(a.options.wrapInSuspense??o??(((n=a.options.errorComponent)==null?void 0:n.preload)||f))?N.Suspense:ba,g=c?fg:ba,m=h?h8:ba,A=ii({select:x=>x.loadedAt}),p=ii({select:x=>{var y;const b=x.matches.findIndex(E=>E.id===t);return(y=x.matches[b-1])==null?void 0:y.routeId}}),v=a.isRoot?a.options.shellComponent??ba:ba;return C.jsxs(v,{children:[C.jsx(Df.Provider,{value:t,children:C.jsx(d,{fallback:l,children:C.jsx(g,{getResetKey:()=>A,errorComponent:c||Tf,onCatch:(x,y)=>{if(Ti(x))throw x;u==null||u(x,y)},children:C.jsx(m,{fallback:x=>{if(!h||x.routeId&&x.routeId!==r.routeId||!x.routeId&&!a.isRoot)throw x;return N.createElement(h,x)},children:f||r._displayPending?C.jsx(wT,{fallback:l,children:C.jsx(nv,{matchId:t})}):C.jsx(nv,{matchId:t})})})})}),p===Di&&s.options.scrollRestoration?C.jsxs(C.Fragment,{children:[C.jsx(g8,{}),C.jsx(m8,{})]}):null]})});function g8(){const e=zi(),t=N.useRef(void 0);return C.jsx("script",{suppressHydrationWarning:!0,ref:i=>{i&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...Ir(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const nv=N.memo(function({matchId:t}){var i,n,s,r;const a=zi(),{match:o,key:l,routeId:c}=ii({select:f=>{const d=f.matches.find(v=>v.id===t),g=d.routeId,m=a.routesById[g].options.remountDeps??a.options.defaultRemountDeps,A=m==null?void 0:m({routeId:g,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:A?JSON.stringify(A):void 0,routeId:g,match:{id:d.id,status:d.status,error:d.error,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),u=a.routesById[c],h=N.useMemo(()=>{const f=u.options.component??a.options.defaultComponent;return f?C.jsx(f,{},l):C.jsx(cb,{})},[l,u.options.component,a.options.defaultComponent]);if(o._displayPending)throw(i=a.getMatch(o.id))==null?void 0:i._nonReactive.displayPendingPromise;if(o._forcePending)throw(n=a.getMatch(o.id))==null?void 0:n._nonReactive.minPendingPromise;if(o.status==="pending"){const f=u.options.pendingMinMs??a.options.defaultPendingMinMs;if(f){const d=a.getMatch(o.id);if(d&&!d._nonReactive.minPendingPromise&&!a.isServer){const g=ya();Promise.resolve().then(()=>{d._nonReactive.minPendingPromise=g}),setTimeout(()=>{g.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw(s=a.getMatch(o.id))==null?void 0:s._nonReactive.loadPromise}if(o.status==="notFound")return Zn(Ti(o.error)),ob(a,u,o.error);if(o.status==="redirected")throw Zn(on(o.error)),(r=a.getMatch(o.id))==null?void 0:r._nonReactive.loadPromise;if(o.status==="error"){if(a.isServer){const f=(u.options.errorComponent??a.options.defaultErrorComponent)||Tf;return C.jsx(f,{error:o.error,reset:void 0,info:{componentStack:""}})}throw o.error}return h}),cb=N.memo(function(){const t=zi(),i=N.useContext(Df),n=ii({select:c=>{var u;return(u=c.matches.find(h=>h.id===i))==null?void 0:u.routeId}}),s=t.routesById[n],r=ii({select:c=>{const h=c.matches.find(f=>f.id===i);return Zn(h),h.globalNotFound}}),a=ii({select:c=>{var u;const h=c.matches,f=h.findIndex(d=>d.id===i);return(u=h[f+1])==null?void 0:u.id}}),o=t.options.defaultPendingComponent?C.jsx(t.options.defaultPendingComponent,{}):null;if(r)return ob(t,s,void 0);if(!a)return null;const l=C.jsx(lb,{matchId:a});return i===Di?C.jsx(N.Suspense,{fallback:o,children:l}):l});function p8(){const e=zi(),t=e.options.defaultPendingComponent?C.jsx(e.options.defaultPendingComponent,{}):null,i=e.isServer||typeof document<"u"&&e.ssr?ba:N.Suspense,n=C.jsxs(i,{fallback:t,children:[!e.isServer&&C.jsx(u8,{}),C.jsx(v8,{})]});return e.options.InnerWrap?C.jsx(e.options.InnerWrap,{children:n}):n}function v8(){const e=zi(),t=ii({select:s=>{var r;return(r=s.matches[0])==null?void 0:r.id}}),i=ii({select:s=>s.loadedAt}),n=t?C.jsx(lb,{matchId:t}):null;return C.jsx(Df.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?n:C.jsx(fg,{getResetKey:()=>i,errorComponent:Tf,onCatch:s=>{s.message||s.toString()},children:n})})}const A8=e=>new x8(e);class x8 extends oT{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=Dh,globalThis.createLazyFileRoute=iv):typeof window<"u"&&(window.createFileRoute=Dh,window.createFileRoute=iv);function y8({router:e,children:t,...i}){Object.keys(i).length>0&&e.update({...e.options,...i,context:{...e.options.context,...i.context}});const n=nb(),s=C.jsx(n.Provider,{value:e,children:t});return e.options.Wrap?C.jsx(e.options.Wrap,{children:s}):s}function b8({router:e,...t}){return C.jsx(y8,{router:e,...t,children:C.jsx(p8,{})})}var ub={exports:{}},Nf={},hb={exports:{}},fb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,k){var F=V.length;V.push(k);e:for(;0<F;){var z=F-1>>>1,G=V[z];if(0<s(G,k))V[z]=k,V[F]=G,F=z;else break e}}function i(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var k=V[0],F=V.pop();if(F!==k){V[0]=F;e:for(var z=0,G=V.length,X=G>>>1;z<X;){var le=2*(z+1)-1,oe=V[le],ne=le+1,ie=V[ne];if(0>s(oe,F))ne<G&&0>s(ie,oe)?(V[z]=ie,V[ne]=F,z=ne):(V[z]=oe,V[le]=F,z=le);else if(ne<G&&0>s(ie,F))V[z]=ie,V[ne]=F,z=ne;else break e}}return k}function s(V,k){var F=V.sortIndex-k.sortIndex;return F!==0?F:V.id-k.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,d=!1,g=!1,m=!1,A=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function y(V){for(var k=i(c);k!==null;){if(k.callback===null)n(c);else if(k.startTime<=V)n(c),k.sortIndex=k.expirationTime,t(l,k);else break;k=i(c)}}function b(V){if(m=!1,y(V),!g)if(i(l)!==null)g=!0,E||(E=!0,D());else{var k=i(c);k!==null&&L(b,k.startTime-V)}}var E=!1,w=-1,S=5,M=-1;function T(){return A?!0:!(e.unstable_now()-M<S)}function R(){if(A=!1,E){var V=e.unstable_now();M=V;var k=!0;try{e:{g=!1,m&&(m=!1,v(w),w=-1),d=!0;var F=f;try{t:{for(y(V),h=i(l);h!==null&&!(h.expirationTime>V&&T());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var G=z(h.expirationTime<=V);if(V=e.unstable_now(),typeof G=="function"){h.callback=G,y(V),k=!0;break t}h===i(l)&&n(l),y(V)}else n(l);h=i(l)}if(h!==null)k=!0;else{var X=i(c);X!==null&&L(b,X.startTime-V),k=!1}}break e}finally{h=null,f=F,d=!1}k=void 0}}finally{k?D():E=!1}}}var D;if(typeof x=="function")D=function(){x(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,U=I.port2;I.port1.onmessage=R,D=function(){U.postMessage(null)}}else D=function(){p(R,0)};function L(V,k){w=p(function(){V(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var F=f;f=k;try{return V()}finally{f=F}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(V,k){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var F=f;f=V;try{return k()}finally{f=F}},e.unstable_scheduleCallback=function(V,k,F){var z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?z+F:z):F=z,V){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=F+G,V={id:u++,callback:k,priorityLevel:V,startTime:F,expirationTime:G,sortIndex:-1},F>z?(V.sortIndex=F,t(c,V),i(l)===null&&V===i(c)&&(m?(v(w),w=-1):m=!0,L(b,F-z))):(V.sortIndex=G,t(l,V),g||d||(g=!0,E||(E=!0,D()))),V},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(V){var k=f;return function(){var F=f;f=k;try{return V.apply(this,arguments)}finally{f=F}}}})(fb);hb.exports=fb;var w8=hb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=w8,db=N,S8=na;function H(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function mb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function gb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sv(e){if(Uc(e)!==e)throw Error(H(188))}function C8(e){var t=e.alternate;if(!t){if(t=Uc(e),t===null)throw Error(H(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===i)return sv(s),e;if(r===n)return sv(s),t;r=r.sibling}throw Error(H(188))}if(i.return!==n.return)i=s,n=r;else{for(var a=!1,o=s.child;o;){if(o===i){a=!0,i=s,n=r;break}if(o===n){a=!0,n=s,i=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===i){a=!0,i=r,n=s;break}if(o===n){a=!0,n=r,i=s;break}o=o.sibling}if(!a)throw Error(H(189))}}if(i.alternate!==n)throw Error(H(190))}if(i.tag!==3)throw Error(H(188));return i.stateNode.current===i?e:t}function pb(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=pb(e),t!==null)return t;e=e.sibling}return null}var Qe=Object.assign,E8=Symbol.for("react.element"),hu=Symbol.for("react.transitional.element"),xl=Symbol.for("react.portal"),Da=Symbol.for("react.fragment"),vb=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),T8=Symbol.for("react.provider"),Ab=Symbol.for("react.consumer"),zn=Symbol.for("react.context"),xg=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),yg=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),Tm=Symbol.for("react.activity"),M8=Symbol.for("react.memo_cache_sentinel"),rv=Symbol.iterator;function el(e){return e===null||typeof e!="object"?null:(e=rv&&e[rv]||e["@@iterator"],typeof e=="function"?e:null)}var D8=Symbol.for("react.client.reference");function Mm(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D8?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Da:return"Fragment";case Sm:return"Profiler";case vb:return"StrictMode";case Cm:return"Suspense";case Em:return"SuspenseList";case Tm:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case xl:return"Portal";case zn:return(e.displayName||"Context")+".Provider";case Ab:return(e._context.displayName||"Context")+".Consumer";case xg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yg:return t=e.displayName||null,t!==null?t:Mm(e.type)||"Memo";case ps:t=e._payload,e=e._init;try{return Mm(e(t))}catch{}}return null}var yl=Array.isArray,ge=db.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be=S8.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fr={pending:!1,data:null,method:null,action:null},Dm=[],Ra=-1;function Tn(e){return{current:e}}function Ct(e){0>Ra||(e.current=Dm[Ra],Dm[Ra]=null,Ra--)}function et(e,t){Ra++,Dm[Ra]=e.current,e.current=t}var xn=Tn(null),Wl=Tn(null),zs=Tn(null),Rh=Tn(null);function Nh(e,t){switch(et(zs,t),et(Wl,e),et(xn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?uA(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=uA(t),e=V4(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ct(xn),et(xn,e)}function yo(){Ct(xn),Ct(Wl),Ct(zs)}function Rm(e){e.memoizedState!==null&&et(Rh,e);var t=xn.current,i=V4(t,e.type);t!==i&&(et(Wl,e),et(xn,i))}function Ih(e){Wl.current===e&&(Ct(xn),Ct(Wl)),Rh.current===e&&(Ct(Rh),ac._currentValue=Fr)}var Nm=Object.prototype.hasOwnProperty,bg=vt.unstable_scheduleCallback,Pd=vt.unstable_cancelCallback,R8=vt.unstable_shouldYield,N8=vt.unstable_requestPaint,yn=vt.unstable_now,I8=vt.unstable_getCurrentPriorityLevel,xb=vt.unstable_ImmediatePriority,yb=vt.unstable_UserBlockingPriority,Fh=vt.unstable_NormalPriority,F8=vt.unstable_LowPriority,bb=vt.unstable_IdlePriority,U8=vt.log,B8=vt.unstable_setDisableYieldValue,Bc=null,vi=null;function Bs(e){if(typeof U8=="function"&&B8(e),vi&&typeof vi.setStrictMode=="function")try{vi.setStrictMode(Bc,e)}catch{}}var Ai=Math.clz32?Math.clz32:O8,V8=Math.log,P8=Math.LN2;function O8(e){return e>>>=0,e===0?32:31-(V8(e)/P8|0)|0}var fu=256,du=4194304;function fr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function If(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=n&134217727;return o!==0?(n=o&~r,n!==0?s=fr(n):(a&=o,a!==0?s=fr(a):i||(i=o&~e,i!==0&&(s=fr(i))))):(o=n&~r,o!==0?s=fr(o):a!==0?s=fr(a):i||(i=n&~e,i!==0&&(s=fr(i)))),s===0?0:t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===32&&(i&4194048)!==0)?t:s}function Vc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function L8(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wb(){var e=fu;return fu<<=1,!(fu&4194048)&&(fu=256),e}function Sb(){var e=du;return du<<=1,!(du&62914560)&&(du=4194304),e}function Od(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Pc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function k8(e,t,i,n,s,r){var a=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=a&~i;0<i;){var u=31-Ai(i),h=1<<u;o[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var d=f[u];d!==null&&(d.lane&=-536870913)}i&=~h}n!==0&&Cb(e,n,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(a&~t))}function Cb(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Ai(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&4194090}function Eb(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-Ai(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function wg(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sg(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Tb(){var e=Be.p;return e!==0?e:(e=window.event,e===void 0?32:Y4(e.type))}function j8(e,t){var i=Be.p;try{return Be.p=e,t()}finally{Be.p=i}}var ir=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ir,ri="__reactProps$"+ir,Oo="__reactContainer$"+ir,Im="__reactEvents$"+ir,z8="__reactListeners$"+ir,_8="__reactHandles$"+ir,av="__reactResources$"+ir,Oc="__reactMarker$"+ir;function Cg(e){delete e[Vt],delete e[ri],delete e[Im],delete e[z8],delete e[_8]}function Na(e){var t=e[Vt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Oo]||i[Vt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=dA(e);e!==null;){if(i=e[Vt])return i;e=dA(e)}return t}e=i,i=e.parentNode}return null}function Lo(e){if(e=e[Vt]||e[Oo]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function bl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(H(33))}function Ha(e){var t=e[av];return t||(t=e[av]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[Oc]=!0}var Mb=new Set,Db={};function sa(e,t){bo(e,t),bo(e+"Capture",t)}function bo(e,t){for(Db[e]=t,e=0;e<t.length;e++)Mb.add(t[e])}var G8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ov={},lv={};function H8(e){return Nm.call(lv,e)?!0:Nm.call(ov,e)?!1:G8.test(e)?lv[e]=!0:(ov[e]=!0,!1)}function qu(e,t,i){if(H8(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function mu(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Fn(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}var Ld,cv;function wa(e){if(Ld===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ld=t&&t[1]||"",cv=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ld+e+cv}var kd=!1;function jd(e,t){if(!e||kd)return"";kd=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(d){var f=d}Reflect.construct(e,[],h)}else{try{h.call()}catch(d){f=d}e.call(h.prototype)}}else{try{throw Error()}catch(d){f=d}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(d){if(d&&f&&typeof d.stack=="string")return[d.stack,f.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===c.length)for(n=l.length-1,s=c.length-1;1<=n&&0<=s&&l[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==c[s]){if(n!==1||s!==1)do if(n--,s--,0>s||l[n]!==c[s]){var u=`
`+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=n&&0<=s);break}}}finally{kd=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?wa(i):""}function Y8(e){switch(e.tag){case 26:case 27:case 5:return wa(e.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 15:return jd(e.type,!1);case 11:return jd(e.type.render,!1);case 1:return jd(e.type,!0);case 31:return wa("Activity");default:return""}}function uv(e){try{var t="";do t+=Y8(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Ri(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q8(e){var t=Rb(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Uh(e){e._valueTracker||(e._valueTracker=q8(e))}function Nb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Rb(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function Bh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var K8=/[\n"\\]/g;function Ui(e){return e.replace(K8,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fm(e,t,i,n,s,r,a,o){e.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.type=a:e.removeAttribute("type"),t!=null?a==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ri(t)):e.value!==""+Ri(t)&&(e.value=""+Ri(t)):a!=="submit"&&a!=="reset"||e.removeAttribute("value"),t!=null?Um(e,a,Ri(t)):i!=null?Um(e,a,Ri(i)):n!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+Ri(o):e.removeAttribute("name")}function Ib(e,t,i,n,s,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||i!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;i=i!=null?""+Ri(i):"",t=t!=null?""+Ri(t):i,o||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.name=a)}function Um(e,t,i){t==="number"&&Bh(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ya(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Ri(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fb(e,t,i){if(t!=null&&(t=""+Ri(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Ri(i):""}function Ub(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(H(92));if(yl(n)){if(1<n.length)throw Error(H(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=Ri(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n)}function wo(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Q8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hv(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||Q8.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Bb(e,t,i){if(t!=null&&typeof t!="object")throw Error(H(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&hv(e,s,n)}else for(var r in t)t.hasOwnProperty(r)&&hv(e,r,t[r])}function Eg(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ku(e){return W8.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Bm=null;function Tg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,qa=null;function fv(e){var t=Lo(e);if(t&&(e=t.stateNode)){var i=e[ri]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fm(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ui(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[ri]||null;if(!s)throw Error(H(90));Fm(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&Nb(n)}break e;case"textarea":Fb(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ya(e,!!i.multiple,t,!1)}}}var zd=!1;function Vb(e,t,i){if(zd)return e(t,i);zd=!0;try{var n=e(t);return n}finally{if(zd=!1,(Ia!==null||qa!==null)&&(zf(),Ia&&(t=Ia,e=qa,qa=Ia=null,fv(t),e)))for(t=0;t<e.length;t++)fv(e[t])}}function Zl(e,t){var i=e.stateNode;if(i===null)return null;var n=i[ri]||null;if(n===null)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(H(231,t,typeof i));return i}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vm=!1;if(Jn)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Vm=!1}var Vs=null,Mg=null,Qu=null;function Pb(){if(Qu)return Qu;var e,t=Mg,i=t.length,n,s="value"in Vs?Vs.value:Vs.textContent,r=s.length;for(e=0;e<i&&t[e]===s[e];e++);var a=i-e;for(n=1;n<=a&&t[i-n]===s[r-n];n++);return Qu=s.slice(e,1<n?1-n:void 0)}function Xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gu(){return!0}function dv(){return!1}function ai(e){function t(i,n,s,r,a){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?gu:dv,this.isPropagationStopped=dv,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),t}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=ai(ra),Lc=Qe({},ra,{view:0,detail:0}),Z8=ai(Lc),_d,Gd,il,Uf=Qe({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==il&&(il&&e.type==="mousemove"?(_d=e.screenX-il.screenX,Gd=e.screenY-il.screenY):Gd=_d=0,il=e),_d)},movementY:function(e){return"movementY"in e?e.movementY:Gd}}),mv=ai(Uf),J8=Qe({},Uf,{dataTransfer:0}),$8=ai(J8),eM=Qe({},Lc,{relatedTarget:0}),Hd=ai(eM),tM=Qe({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),iM=ai(tM),nM=Qe({},ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sM=ai(nM),rM=Qe({},ra,{data:0}),gv=ai(rM),aM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lM[e])?!!t[e]:!1}function Dg(){return cM}var uM=Qe({},Lc,{key:function(e){if(e.key){var t=aM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dg,charCode:function(e){return e.type==="keypress"?Xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hM=ai(uM),fM=Qe({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pv=ai(fM),dM=Qe({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dg}),mM=ai(dM),gM=Qe({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),pM=ai(gM),vM=Qe({},Uf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AM=ai(vM),xM=Qe({},ra,{newState:0,oldState:0}),yM=ai(xM),bM=[9,13,27,32],Rg=Jn&&"CompositionEvent"in window,Il=null;Jn&&"documentMode"in document&&(Il=document.documentMode);var wM=Jn&&"TextEvent"in window&&!Il,Ob=Jn&&(!Rg||Il&&8<Il&&11>=Il),vv=" ",Av=!1;function Lb(e,t){switch(e){case"keyup":return bM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fa=!1;function SM(e,t){switch(e){case"compositionend":return kb(t);case"keypress":return t.which!==32?null:(Av=!0,vv);case"textInput":return e=t.data,e===vv&&Av?null:e;default:return null}}function CM(e,t){if(Fa)return e==="compositionend"||!Rg&&Lb(e,t)?(e=Pb(),Qu=Mg=Vs=null,Fa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ob&&t.locale!=="ko"?null:t.data;default:return null}}var EM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!EM[e.type]:t==="textarea"}function jb(e,t,i,n){Ia?qa?qa.push(n):qa=[n]:Ia=n,t=Jh(t,"onChange"),0<t.length&&(i=new Ff("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Fl=null,Jl=null;function TM(e){F4(e,0)}function Bf(e){var t=bl(e);if(Nb(t))return e}function yv(e,t){if(e==="change")return t}var zb=!1;if(Jn){var Yd;if(Jn){var qd="oninput"in document;if(!qd){var bv=document.createElement("div");bv.setAttribute("oninput","return;"),qd=typeof bv.oninput=="function"}Yd=qd}else Yd=!1;zb=Yd&&(!document.documentMode||9<document.documentMode)}function wv(){Fl&&(Fl.detachEvent("onpropertychange",_b),Jl=Fl=null)}function _b(e){if(e.propertyName==="value"&&Bf(Jl)){var t=[];jb(t,Jl,e,Tg(e)),Vb(TM,t)}}function MM(e,t,i){e==="focusin"?(wv(),Fl=t,Jl=i,Fl.attachEvent("onpropertychange",_b)):e==="focusout"&&wv()}function DM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bf(Jl)}function RM(e,t){if(e==="click")return Bf(t)}function NM(e,t){if(e==="input"||e==="change")return Bf(t)}function IM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wi=typeof Object.is=="function"?Object.is:IM;function $l(e,t){if(wi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!Nm.call(t,s)||!wi(e[s],t[s]))return!1}return!0}function Sv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cv(e,t){var i=Sv(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Sv(i)}}function Gb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hb(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Bh(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Bh(e.document)}return t}function Ng(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var FM=Jn&&"documentMode"in document&&11>=document.documentMode,Ua=null,Pm=null,Ul=null,Om=!1;function Ev(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Om||Ua==null||Ua!==Bh(n)||(n=Ua,"selectionStart"in n&&Ng(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ul&&$l(Ul,n)||(Ul=n,n=Jh(Pm,"onSelect"),0<n.length&&(t=new Ff("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=Ua)))}function lr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ba={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},Kd={},Yb={};Jn&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function aa(e){if(Kd[e])return Kd[e];if(!Ba[e])return e;var t=Ba[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Yb)return Kd[e]=t[i];return e}var qb=aa("animationend"),Kb=aa("animationiteration"),Qb=aa("animationstart"),UM=aa("transitionrun"),BM=aa("transitionstart"),VM=aa("transitioncancel"),Xb=aa("transitionend"),Wb=new Map,Lm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lm.push("scrollEnd");function tn(e,t){Wb.set(e,t),sa(t,[e])}var Tv=new WeakMap;function Bi(e,t){if(typeof e=="object"&&e!==null){var i=Tv.get(e);return i!==void 0?i:(t={value:e,source:t,stack:uv(t)},Tv.set(e,t),t)}return{value:e,source:t,stack:uv(t)}}var Mi=[],Va=0,Ig=0;function Vf(){for(var e=Va,t=Ig=Va=0;t<e;){var i=Mi[t];Mi[t++]=null;var n=Mi[t];Mi[t++]=null;var s=Mi[t];Mi[t++]=null;var r=Mi[t];if(Mi[t++]=null,n!==null&&s!==null){var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}r!==0&&Zb(i,s,r)}}function Pf(e,t,i,n){Mi[Va++]=e,Mi[Va++]=t,Mi[Va++]=i,Mi[Va++]=n,Ig|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Fg(e,t,i,n){return Pf(e,t,i,n),Vh(e)}function ko(e,t){return Pf(e,null,null,t),Vh(e)}function Zb(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var s=!1,r=e.return;r!==null;)r.childLanes|=i,n=r.alternate,n!==null&&(n.childLanes|=i),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,s&&t!==null&&(s=31-Ai(i),e=r.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=i|536870912),r):null}function Vh(e){if(50<Gl)throw Gl=0,r1=null,Error(H(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Pa={};function PM(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,i,n){return new PM(e,t,i,n)}function Ug(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qn(e,t){var i=e.alternate;return i===null?(i=gi(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Jb(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wu(e,t,i,n,s,r){var a=0;if(n=e,typeof e=="function")Ug(e)&&(a=1);else if(typeof e=="string")a=LD(e,i,xn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Tm:return e=gi(31,i,t,s),e.elementType=Tm,e.lanes=r,e;case Da:return Ur(i.children,s,r,t);case vb:a=8,s|=24;break;case Sm:return e=gi(12,i,t,s|2),e.elementType=Sm,e.lanes=r,e;case Cm:return e=gi(13,i,t,s),e.elementType=Cm,e.lanes=r,e;case Em:return e=gi(19,i,t,s),e.elementType=Em,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T8:case zn:a=10;break e;case Ab:a=9;break e;case xg:a=11;break e;case yg:a=14;break e;case ps:a=16,n=null;break e}a=29,i=Error(H(130,e===null?"null":typeof e,"")),n=null}return t=gi(a,i,t,s),t.elementType=e,t.type=n,t.lanes=r,t}function Ur(e,t,i,n){return e=gi(7,e,n,t),e.lanes=i,e}function Qd(e,t,i){return e=gi(6,e,null,t),e.lanes=i,e}function Xd(e,t,i){return t=gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oa=[],La=0,Ph=null,Oh=0,Ni=[],Ii=0,Br=null,_n=1,Gn="";function dr(e,t){Oa[La++]=Oh,Oa[La++]=Ph,Ph=e,Oh=t}function $b(e,t,i){Ni[Ii++]=_n,Ni[Ii++]=Gn,Ni[Ii++]=Br,Br=e;var n=_n;e=Gn;var s=32-Ai(n)-1;n&=~(1<<s),i+=1;var r=32-Ai(t)+s;if(30<r){var a=s-s%5;r=(n&(1<<a)-1).toString(32),n>>=a,s-=a,_n=1<<32-Ai(t)+s|i<<s|n,Gn=r+e}else _n=1<<r|i<<s|n,Gn=e}function Bg(e){e.return!==null&&(dr(e,1),$b(e,1,0))}function Vg(e){for(;e===Ph;)Ph=Oa[--La],Oa[La]=null,Oh=Oa[--La],Oa[La]=null;for(;e===Br;)Br=Ni[--Ii],Ni[Ii]=null,Gn=Ni[--Ii],Ni[Ii]=null,_n=Ni[--Ii],Ni[Ii]=null}var _t=null,st=null,Ue=!1,Vr=null,gn=!1,km=Error(H(519));function qr(e){var t=Error(H(418,""));throw ec(Bi(t,e)),km}function Mv(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Vt]=e,t[ri]=n,i){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(i=0;i<nc.length;i++)Ce(nc[i],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),Ib(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Uh(t);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),Ub(t,n.value,n.defaultValue,n.children),Uh(t)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||B4(t.textContent,i)?(n.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),n.onScroll!=null&&Ce("scroll",t),n.onScrollEnd!=null&&Ce("scrollend",t),n.onClick!=null&&(t.onclick=Hf),t=!0):t=!1,t||qr(e)}function Dv(e){for(_t=e.return;_t;)switch(_t.tag){case 5:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:_t=_t.return}}function nl(e){if(e!==_t)return!1;if(!Ue)return Dv(e),Ue=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||h1(e.type,e.memoizedProps)),i=!i),i&&st&&qr(e),Dv(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){st=Ji(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}st=null}}else t===27?(t=st,nr(e.type)?(e=m1,m1=null,st=e):st=t):st=_t?Ji(e.stateNode.nextSibling):null;return!0}function kc(){st=_t=null,Ue=!1}function Rv(){var e=Vr;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),Vr=null),e}function ec(e){Vr===null?Vr=[e]:Vr.push(e)}var jm=Tn(null),oa=null,Hn=null;function xs(e,t,i){et(jm,t._currentValue),t._currentValue=i}function Xn(e){e._currentValue=jm.current,Ct(jm)}function zm(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function _m(e,t,i,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=s;for(var l=0;l<t.length;l++)if(o.context===t[l]){r.lanes|=i,o=r.alternate,o!==null&&(o.lanes|=i),zm(r.return,i,e),n||(a=null);break e}r=o.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(H(341));a.lanes|=i,r=a.alternate,r!==null&&(r.lanes|=i),zm(a,i,e),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function jc(e,t,i,n){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var o=s.type;wi(s.pendingProps.value,a.value)||(e!==null?e.push(o):e=[o])}}else if(s===Rh.current){if(a=s.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(ac):e=[ac])}s=s.return}e!==null&&_m(t,e,i,n),t.flags|=262144}function Lh(e){for(e=e.firstContext;e!==null;){if(!wi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Kr(e){oa=e,Hn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pt(e){return e5(oa,e)}function pu(e,t){return oa===null&&Kr(e),e5(e,t)}function e5(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Hn===null){if(e===null)throw Error(H(308));Hn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hn=Hn.next=t;return i}var OM=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},LM=vt.unstable_scheduleCallback,kM=vt.unstable_NormalPriority,dt={$$typeof:zn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pg(){return{controller:new OM,data:new Map,refCount:0}}function zc(e){e.refCount--,e.refCount===0&&LM(kM,function(){e.controller.abort()})}var Bl=null,Gm=0,So=0,Ka=null;function jM(e,t){if(Bl===null){var i=Bl=[];Gm=0,So=rp(),Ka={status:"pending",value:void 0,then:function(n){i.push(n)}}}return Gm++,t.then(Nv,Nv),t}function Nv(){if(--Gm===0&&Bl!==null){Ka!==null&&(Ka.status="fulfilled");var e=Bl;Bl=null,So=0,Ka=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function zM(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),n}var Iv=ge.S;ge.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&jM(e,t),Iv!==null&&Iv(e,t)};var Pr=Tn(null);function Og(){var e=Pr.current;return e!==null?e:qe.pooledCache}function Zu(e,t){t===null?et(Pr,Pr.current):et(Pr,t.pool)}function t5(){var e=Og();return e===null?null:{parent:dt._currentValue,pool:e}}var _c=Error(H(460)),i5=Error(H(474)),Of=Error(H(542)),Hm={then:function(){}};function Fv(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vu(){}function n5(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(vu,vu),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bv(e),e;default:if(typeof t.status=="string")t.then(vu,vu);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(H(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bv(e),e}throw Vl=t,_c}}var Vl=null;function Uv(){if(Vl===null)throw Error(H(459));var e=Vl;return Vl=null,e}function Bv(e){if(e===_c||e===Of)throw Error(H(483))}var vs=!1;function Lg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _s(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ke&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Vh(e),Zb(e,null,i),t}return Pf(e,n,t,i),Vh(e)}function Pl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Eb(e,i)}}function Wd(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,r=null;if(i=i.firstBaseUpdate,i!==null){do{var a={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,i=i.next}while(i!==null);r===null?s=r=t:r=r.next=t}else s=r=t;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var qm=!1;function Ol(){if(qm){var e=Ka;if(e!==null)throw e}}function Ll(e,t,i,n){qm=!1;var s=e.updateQueue;vs=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;a=0,u=c=l=null,o=r;do{var f=o.lane&-536870913,d=f!==o.lane;if(d?(Ne&f)===f:(n&f)===f){f!==0&&f===So&&(qm=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;f=t;var A=i;switch(m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(A,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(A,h,f):g,f==null)break e;h=Qe({},h,f);break e;case 2:vs=!0}}f=o.callback,f!==null&&(e.flags|=64,d&&(e.flags|=8192),d=s.callbacks,d===null?s.callbacks=[f]:d.push(f))}else d={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=d,l=h):u=u.next=d,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;d=o,o=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,r===null&&(s.shared.lanes=0),$s|=a,e.lanes=a,e.memoizedState=h}}function s5(e,t){if(typeof e!="function")throw Error(H(191,e));e.call(t)}function r5(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)s5(i[e],t)}var Co=Tn(null),kh=Tn(0);function Vv(e,t){e=ts,et(kh,e),et(Co,t),ts=e|t.baseLanes}function Km(){et(kh,ts),et(Co,Co.current)}function kg(){ts=kh.current,Ct(Co),Ct(kh)}var Zs=0,we=null,ze=null,ct=null,jh=!1,Qa=!1,Qr=!1,zh=0,tc=0,Xa=null,_M=0;function at(){throw Error(H(321))}function jg(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!wi(e[i],t[i]))return!1;return!0}function zg(e,t,i,n,s,r){return Zs=r,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ge.H=e===null||e.memoizedState===null?P5:O5,Qr=!1,r=i(n,s),Qr=!1,Qa&&(r=o5(t,i,n,s)),a5(e),r}function a5(e){ge.H=_h;var t=ze!==null&&ze.next!==null;if(Zs=0,ct=ze=we=null,jh=!1,tc=0,Xa=null,t)throw Error(H(300));e===null||St||(e=e.dependencies,e!==null&&Lh(e)&&(St=!0))}function o5(e,t,i,n){we=e;var s=0;do{if(Qa&&(Xa=null),tc=0,Qa=!1,25<=s)throw Error(H(301));if(s+=1,ct=ze=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ge.H=XM,r=t(i,n)}while(Qa);return r}function GM(){var e=ge.H,t=e.useState()[0];return t=typeof t.then=="function"?Gc(t):t,e=e.useState()[0],(ze!==null?ze.memoizedState:null)!==e&&(we.flags|=1024),t}function _g(){var e=zh!==0;return zh=0,e}function Gg(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Hg(e){if(jh){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}jh=!1}Zs=0,ct=ze=we=null,Qa=!1,tc=zh=0,Xa=null}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?we.memoizedState=ct=e:ct=ct.next=e,ct}function ut(){if(ze===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=ct===null?we.memoizedState:ct.next;if(t!==null)ct=t,ze=e;else{if(e===null)throw we.alternate===null?Error(H(467)):Error(H(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},ct===null?we.memoizedState=ct=e:ct=ct.next=e}return ct}function Yg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gc(e){var t=tc;return tc+=1,Xa===null&&(Xa=[]),e=n5(Xa,e,t),t=we,(ct===null?t.memoizedState:ct.next)===null&&(t=t.alternate,ge.H=t===null||t.memoizedState===null?P5:O5),e}function Lf(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Gc(e);if(e.$$typeof===zn)return Pt(e)}throw Error(H(438,String(e)))}function qg(e){var t=null,i=we.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=we.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Yg(),we.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=M8;return t.index++,i}function $n(e,t){return typeof t=="function"?t(e):t}function Ju(e){var t=ut();return Kg(t,ze,e)}function Kg(e,t,i){var n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=i;var s=e.baseQueue,r=n.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,n.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var o=a=null,l=null,c=t,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(Ne&h)===h:(Zs&h)===h){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===So&&(u=!0);else if((Zs&f)===f){c=c.next,f===So&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,a=r):l=l.next=h,we.lanes|=f,$s|=f;h=c.action,Qr&&i(r,h),r=c.hasEagerState?c.eagerState:i(r,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=r):l=l.next=f,we.lanes|=h,$s|=h;c=c.next}while(c!==null&&c!==t);if(l===null?a=r:l.next=o,!wi(r,e.memoizedState)&&(St=!0,u&&(i=Ka,i!==null)))throw i;e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Zd(e){var t=ut(),i=t.queue;if(i===null)throw Error(H(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,r=t.memoizedState;if(s!==null){i.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);wi(r,t.memoizedState)||(St=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),i.lastRenderedState=r}return[r,n]}function l5(e,t,i){var n=we,s=ut(),r=Ue;if(r){if(i===void 0)throw Error(H(407));i=i()}else i=t();var a=!wi((ze||s).memoizedState,i);a&&(s.memoizedState=i,St=!0),s=s.queue;var o=h5.bind(null,n,s,e);if(Hc(2048,8,o,[e]),s.getSnapshot!==t||a||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Eo(9,kf(),u5.bind(null,n,s,i,t),null),qe===null)throw Error(H(349));r||Zs&124||c5(n,t,i)}return i}function c5(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=we.updateQueue,t===null?(t=Yg(),we.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function u5(e,t,i,n){t.value=i,t.getSnapshot=n,f5(t)&&d5(e)}function h5(e,t,i){return i(function(){f5(t)&&d5(e)})}function f5(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!wi(e,i)}catch{return!0}}function d5(e){var t=ko(e,2);t!==null&&yi(t,e,2)}function Qm(e){var t=Zt();if(typeof e=="function"){var i=e;if(e=i(),Qr){Bs(!0);try{i()}finally{Bs(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:e},t}function m5(e,t,i,n){return e.baseState=i,Kg(e,ze,typeof n=="function"?n:$n)}function HM(e,t,i,n,s){if(jf(e))throw Error(H(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ge.T!==null?i(!0):r.isTransition=!1,n(r),i=t.pending,i===null?(r.next=t.pending=r,g5(t,r)):(r.next=i.next,t.pending=i.next=r)}}function g5(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var r=ge.T,a={};ge.T=a;try{var o=i(s,n),l=ge.S;l!==null&&l(a,o),Pv(e,t,o)}catch(c){Xm(e,t,c)}finally{ge.T=r}}else try{r=i(s,n),Pv(e,t,r)}catch(c){Xm(e,t,c)}}function Pv(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){Ov(e,t,n)},function(n){return Xm(e,t,n)}):Ov(e,t,i)}function Ov(e,t,i){t.status="fulfilled",t.value=i,p5(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,g5(e,i)))}function Xm(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,p5(t),t=t.next;while(t!==n)}e.action=null}function p5(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function v5(e,t){return t}function Lv(e,t){if(Ue){var i=qe.formState;if(i!==null){e:{var n=we;if(Ue){if(st){t:{for(var s=st,r=gn;s.nodeType!==8;){if(!r){s=null;break t}if(s=Ji(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){st=Ji(s.nextSibling),n=s.data==="F!";break e}}qr(n)}n=!1}n&&(t=i[0])}}return i=Zt(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v5,lastRenderedState:t},i.queue=n,i=U5.bind(null,we,n),n.dispatch=i,n=Qm(!1),r=Zg.bind(null,we,!1,n.queue),n=Zt(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,i=HM.bind(null,we,s,r,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function kv(e){var t=ut();return A5(t,ze,e)}function A5(e,t,i){if(t=Kg(e,t,v5)[0],e=Ju($n)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Gc(t)}catch(a){throw a===_c?Of:a}else n=t;t=ut();var s=t.queue,r=s.dispatch;return i!==t.memoizedState&&(we.flags|=2048,Eo(9,kf(),YM.bind(null,s,i),null)),[n,r,e]}function YM(e,t){e.action=t}function jv(e){var t=ut(),i=ze;if(i!==null)return A5(t,i,e);ut(),t=t.memoizedState,i=ut();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Eo(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=we.updateQueue,t===null&&(t=Yg(),we.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function kf(){return{destroy:void 0,resource:void 0}}function x5(){return ut().memoizedState}function $u(e,t,i,n){var s=Zt();n=n===void 0?null:n,we.flags|=e,s.memoizedState=Eo(1|t,kf(),i,n)}function Hc(e,t,i,n){var s=ut();n=n===void 0?null:n;var r=s.memoizedState.inst;ze!==null&&n!==null&&jg(n,ze.memoizedState.deps)?s.memoizedState=Eo(t,r,i,n):(we.flags|=e,s.memoizedState=Eo(1|t,r,i,n))}function zv(e,t){$u(8390656,8,e,t)}function y5(e,t){Hc(2048,8,e,t)}function b5(e,t){return Hc(4,2,e,t)}function w5(e,t){return Hc(4,4,e,t)}function S5(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function C5(e,t,i){i=i!=null?i.concat([e]):null,Hc(4,4,S5.bind(null,t,e),i)}function Qg(){}function E5(e,t){var i=ut();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&jg(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function T5(e,t){var i=ut();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&jg(t,n[1]))return n[0];if(n=e(),Qr){Bs(!0);try{e()}finally{Bs(!1)}}return i.memoizedState=[n,t],n}function Xg(e,t,i){return i===void 0||Zs&1073741824?e.memoizedState=t:(e.memoizedState=i,e=p4(),we.lanes|=e,$s|=e,i)}function M5(e,t,i,n){return wi(i,t)?i:Co.current!==null?(e=Xg(e,i,n),wi(e,t)||(St=!0),e):Zs&42?(e=p4(),we.lanes|=e,$s|=e,t):(St=!0,e.memoizedState=i)}function D5(e,t,i,n,s){var r=Be.p;Be.p=r!==0&&8>r?r:8;var a=ge.T,o={};ge.T=o,Zg(e,!1,t,i);try{var l=s(),c=ge.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=zM(l,n);kl(e,t,u,xi(e))}else kl(e,t,n,xi(e))}catch(h){kl(e,t,{then:function(){},status:"rejected",reason:h},xi())}finally{Be.p=r,ge.T=a}}function qM(){}function Wm(e,t,i,n){if(e.tag!==5)throw Error(H(476));var s=R5(e).queue;D5(e,s,t,Fr,i===null?qM:function(){return N5(e),i(n)})}function R5(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Fr,baseState:Fr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:Fr},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function N5(e){var t=R5(e).next.queue;kl(e,t,{},xi())}function Wg(){return Pt(ac)}function I5(){return ut().memoizedState}function F5(){return ut().memoizedState}function KM(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=xi();e=_s(i);var n=Gs(t,e,i);n!==null&&(yi(n,t,i),Pl(n,t,i)),t={cache:Pg()},e.payload=t;return}t=t.return}}function QM(e,t,i){var n=xi();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},jf(e)?B5(t,i):(i=Fg(e,t,i,n),i!==null&&(yi(i,e,n),V5(i,t,n)))}function U5(e,t,i){var n=xi();kl(e,t,i,n)}function kl(e,t,i,n){var s={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(jf(e))B5(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,o=r(a,i);if(s.hasEagerState=!0,s.eagerState=o,wi(o,a))return Pf(e,t,s,0),qe===null&&Vf(),!1}catch{}finally{}if(i=Fg(e,t,s,n),i!==null)return yi(i,e,n),V5(i,t,n),!0}return!1}function Zg(e,t,i,n){if(n={lane:2,revertLane:rp(),action:n,hasEagerState:!1,eagerState:null,next:null},jf(e)){if(t)throw Error(H(479))}else t=Fg(e,i,n,2),t!==null&&yi(t,e,2)}function jf(e){var t=e.alternate;return e===we||t!==null&&t===we}function B5(e,t){Qa=jh=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function V5(e,t,i){if(i&4194048){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Eb(e,i)}}var _h={readContext:Pt,use:Lf,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at},P5={readContext:Pt,use:Lf,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:zv,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,$u(4194308,4,S5.bind(null,t,e),i)},useLayoutEffect:function(e,t){return $u(4194308,4,e,t)},useInsertionEffect:function(e,t){$u(4,2,e,t)},useMemo:function(e,t){var i=Zt();t=t===void 0?null:t;var n=e();if(Qr){Bs(!0);try{e()}finally{Bs(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=Zt();if(i!==void 0){var s=i(t);if(Qr){Bs(!0);try{i(t)}finally{Bs(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=QM.bind(null,we,e),[n.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:function(e){e=Qm(e);var t=e.queue,i=U5.bind(null,we,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Qg,useDeferredValue:function(e,t){var i=Zt();return Xg(i,e,t)},useTransition:function(){var e=Qm(!1);return e=D5.bind(null,we,e.queue,!0,!1),Zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=we,s=Zt();if(Ue){if(i===void 0)throw Error(H(407));i=i()}else{if(i=t(),qe===null)throw Error(H(349));Ne&124||c5(n,t,i)}s.memoizedState=i;var r={value:i,getSnapshot:t};return s.queue=r,zv(h5.bind(null,n,r,e),[e]),n.flags|=2048,Eo(9,kf(),u5.bind(null,n,r,i,t),null),i},useId:function(){var e=Zt(),t=qe.identifierPrefix;if(Ue){var i=Gn,n=_n;i=(n&~(1<<32-Ai(n)-1)).toString(32)+i,t="«"+t+"R"+i,i=zh++,0<i&&(t+="H"+i.toString(32)),t+="»"}else i=_M++,t="«"+t+"r"+i.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Wg,useFormState:Lv,useActionState:Lv,useOptimistic:function(e){var t=Zt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Zg.bind(null,we,!0,i),i.dispatch=t,[e,t]},useMemoCache:qg,useCacheRefresh:function(){return Zt().memoizedState=KM.bind(null,we)}},O5={readContext:Pt,use:Lf,useCallback:E5,useContext:Pt,useEffect:y5,useImperativeHandle:C5,useInsertionEffect:b5,useLayoutEffect:w5,useMemo:T5,useReducer:Ju,useRef:x5,useState:function(){return Ju($n)},useDebugValue:Qg,useDeferredValue:function(e,t){var i=ut();return M5(i,ze.memoizedState,e,t)},useTransition:function(){var e=Ju($n)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:Gc(e),t]},useSyncExternalStore:l5,useId:I5,useHostTransitionStatus:Wg,useFormState:kv,useActionState:kv,useOptimistic:function(e,t){var i=ut();return m5(i,ze,e,t)},useMemoCache:qg,useCacheRefresh:F5},XM={readContext:Pt,use:Lf,useCallback:E5,useContext:Pt,useEffect:y5,useImperativeHandle:C5,useInsertionEffect:b5,useLayoutEffect:w5,useMemo:T5,useReducer:Zd,useRef:x5,useState:function(){return Zd($n)},useDebugValue:Qg,useDeferredValue:function(e,t){var i=ut();return ze===null?Xg(i,e,t):M5(i,ze.memoizedState,e,t)},useTransition:function(){var e=Zd($n)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:Gc(e),t]},useSyncExternalStore:l5,useId:I5,useHostTransitionStatus:Wg,useFormState:jv,useActionState:jv,useOptimistic:function(e,t){var i=ut();return ze!==null?m5(i,ze,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:qg,useCacheRefresh:F5},Wa=null,ic=0;function Au(e){var t=ic;return ic+=1,Wa===null&&(Wa=[]),n5(Wa,e,t)}function sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xu(e,t){throw t.$$typeof===E8?Error(H(525)):(e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _v(e){var t=e._init;return t(e._payload)}function L5(e){function t(p,v){if(e){var x=p.deletions;x===null?(p.deletions=[v],p.flags|=16):x.push(v)}}function i(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p){for(var v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(p,v){return p=Qn(p,v),p.index=0,p.sibling=null,p}function r(p,v,x){return p.index=x,e?(x=p.alternate,x!==null?(x=x.index,x<v?(p.flags|=67108866,v):x):(p.flags|=67108866,v)):(p.flags|=1048576,v)}function a(p){return e&&p.alternate===null&&(p.flags|=67108866),p}function o(p,v,x,y){return v===null||v.tag!==6?(v=Qd(x,p.mode,y),v.return=p,v):(v=s(v,x),v.return=p,v)}function l(p,v,x,y){var b=x.type;return b===Da?u(p,v,x.props.children,y,x.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ps&&_v(b)===v.type)?(v=s(v,x.props),sl(v,x),v.return=p,v):(v=Wu(x.type,x.key,x.props,null,p.mode,y),sl(v,x),v.return=p,v)}function c(p,v,x,y){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Xd(x,p.mode,y),v.return=p,v):(v=s(v,x.children||[]),v.return=p,v)}function u(p,v,x,y,b){return v===null||v.tag!==7?(v=Ur(x,p.mode,y,b),v.return=p,v):(v=s(v,x),v.return=p,v)}function h(p,v,x){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Qd(""+v,p.mode,x),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hu:return x=Wu(v.type,v.key,v.props,null,p.mode,x),sl(x,v),x.return=p,x;case xl:return v=Xd(v,p.mode,x),v.return=p,v;case ps:var y=v._init;return v=y(v._payload),h(p,v,x)}if(yl(v)||el(v))return v=Ur(v,p.mode,x,null),v.return=p,v;if(typeof v.then=="function")return h(p,Au(v),x);if(v.$$typeof===zn)return h(p,pu(p,v),x);xu(p,v)}return null}function f(p,v,x,y){var b=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return b!==null?null:o(p,v,""+x,y);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hu:return x.key===b?l(p,v,x,y):null;case xl:return x.key===b?c(p,v,x,y):null;case ps:return b=x._init,x=b(x._payload),f(p,v,x,y)}if(yl(x)||el(x))return b!==null?null:u(p,v,x,y,null);if(typeof x.then=="function")return f(p,v,Au(x),y);if(x.$$typeof===zn)return f(p,v,pu(p,x),y);xu(p,x)}return null}function d(p,v,x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return p=p.get(x)||null,o(v,p,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hu:return p=p.get(y.key===null?x:y.key)||null,l(v,p,y,b);case xl:return p=p.get(y.key===null?x:y.key)||null,c(v,p,y,b);case ps:var E=y._init;return y=E(y._payload),d(p,v,x,y,b)}if(yl(y)||el(y))return p=p.get(x)||null,u(v,p,y,b,null);if(typeof y.then=="function")return d(p,v,x,Au(y),b);if(y.$$typeof===zn)return d(p,v,x,pu(v,y),b);xu(v,y)}return null}function g(p,v,x,y){for(var b=null,E=null,w=v,S=v=0,M=null;w!==null&&S<x.length;S++){w.index>S?(M=w,w=null):M=w.sibling;var T=f(p,w,x[S],y);if(T===null){w===null&&(w=M);break}e&&w&&T.alternate===null&&t(p,w),v=r(T,v,S),E===null?b=T:E.sibling=T,E=T,w=M}if(S===x.length)return i(p,w),Ue&&dr(p,S),b;if(w===null){for(;S<x.length;S++)w=h(p,x[S],y),w!==null&&(v=r(w,v,S),E===null?b=w:E.sibling=w,E=w);return Ue&&dr(p,S),b}for(w=n(w);S<x.length;S++)M=d(w,p,S,x[S],y),M!==null&&(e&&M.alternate!==null&&w.delete(M.key===null?S:M.key),v=r(M,v,S),E===null?b=M:E.sibling=M,E=M);return e&&w.forEach(function(R){return t(p,R)}),Ue&&dr(p,S),b}function m(p,v,x,y){if(x==null)throw Error(H(151));for(var b=null,E=null,w=v,S=v=0,M=null,T=x.next();w!==null&&!T.done;S++,T=x.next()){w.index>S?(M=w,w=null):M=w.sibling;var R=f(p,w,T.value,y);if(R===null){w===null&&(w=M);break}e&&w&&R.alternate===null&&t(p,w),v=r(R,v,S),E===null?b=R:E.sibling=R,E=R,w=M}if(T.done)return i(p,w),Ue&&dr(p,S),b;if(w===null){for(;!T.done;S++,T=x.next())T=h(p,T.value,y),T!==null&&(v=r(T,v,S),E===null?b=T:E.sibling=T,E=T);return Ue&&dr(p,S),b}for(w=n(w);!T.done;S++,T=x.next())T=d(w,p,S,T.value,y),T!==null&&(e&&T.alternate!==null&&w.delete(T.key===null?S:T.key),v=r(T,v,S),E===null?b=T:E.sibling=T,E=T);return e&&w.forEach(function(D){return t(p,D)}),Ue&&dr(p,S),b}function A(p,v,x,y){if(typeof x=="object"&&x!==null&&x.type===Da&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case hu:e:{for(var b=x.key;v!==null;){if(v.key===b){if(b=x.type,b===Da){if(v.tag===7){i(p,v.sibling),y=s(v,x.props.children),y.return=p,p=y;break e}}else if(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ps&&_v(b)===v.type){i(p,v.sibling),y=s(v,x.props),sl(y,x),y.return=p,p=y;break e}i(p,v);break}else t(p,v);v=v.sibling}x.type===Da?(y=Ur(x.props.children,p.mode,y,x.key),y.return=p,p=y):(y=Wu(x.type,x.key,x.props,null,p.mode,y),sl(y,x),y.return=p,p=y)}return a(p);case xl:e:{for(b=x.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){i(p,v.sibling),y=s(v,x.children||[]),y.return=p,p=y;break e}else{i(p,v);break}else t(p,v);v=v.sibling}y=Xd(x,p.mode,y),y.return=p,p=y}return a(p);case ps:return b=x._init,x=b(x._payload),A(p,v,x,y)}if(yl(x))return g(p,v,x,y);if(el(x)){if(b=el(x),typeof b!="function")throw Error(H(150));return x=b.call(x),m(p,v,x,y)}if(typeof x.then=="function")return A(p,v,Au(x),y);if(x.$$typeof===zn)return A(p,v,pu(p,x),y);xu(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,v!==null&&v.tag===6?(i(p,v.sibling),y=s(v,x),y.return=p,p=y):(i(p,v),y=Qd(x,p.mode,y),y.return=p,p=y),a(p)):i(p,v)}return function(p,v,x,y){try{ic=0;var b=A(p,v,x,y);return Wa=null,b}catch(w){if(w===_c||w===Of)throw w;var E=gi(29,w,null,p.mode);return E.lanes=y,E.return=p,E}finally{}}}var To=L5(!0),k5=L5(!1),Li=Tn(null),bn=null;function ys(e){var t=e.alternate;et(gt,gt.current&1),et(Li,e),bn===null&&(t===null||Co.current!==null||t.memoizedState!==null)&&(bn=e)}function j5(e){if(e.tag===22){if(et(gt,gt.current),et(Li,e),bn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(bn=e)}}else bs()}function bs(){et(gt,gt.current),et(Li,Li.current)}function Yn(e){Ct(Li),bn===e&&(bn=null),Ct(gt)}var gt=Tn(0);function Gh(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||d1(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Jd(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Qe({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Zm={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=xi(),s=_s(n);s.payload=t,i!=null&&(s.callback=i),t=Gs(e,s,n),t!==null&&(yi(t,e,n),Pl(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=xi(),s=_s(n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=Gs(e,s,n),t!==null&&(yi(t,e,n),Pl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=xi(),n=_s(i);n.tag=2,t!=null&&(n.callback=t),t=Gs(e,n,i),t!==null&&(yi(t,e,i),Pl(t,e,i))}};function Gv(e,t,i,n,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,a):t.prototype&&t.prototype.isPureReactComponent?!$l(i,n)||!$l(s,r):!0}function Hv(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Zm.enqueueReplaceState(t,t.state,null)}function Xr(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=Qe({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}var Hh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function z5(e){Hh(e)}function _5(e){console.error(e)}function G5(e){Hh(e)}function Yh(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Yv(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Jm(e,t,i){return i=_s(i),i.tag=3,i.payload={element:null},i.callback=function(){Yh(e,t)},i}function H5(e){return e=_s(e),e.tag=3,e}function Y5(e,t,i,n){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var r=n.value;e.payload=function(){return s(r)},e.callback=function(){Yv(t,i,n)}}var a=i.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){Yv(t,i,n),typeof s!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})})}function WM(e,t,i,n,s){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&jc(t,i,s,!0),i=Li.current,i!==null){switch(i.tag){case 13:return bn===null?a1():i.alternate===null&&rt===0&&(rt=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===Hm?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),c0(e,n,s)),!1;case 22:return i.flags|=65536,n===Hm?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),c0(e,n,s)),!1}throw Error(H(435,i.tag))}return c0(e,n,s),a1(),!1}if(Ue)return t=Li.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==km&&(e=Error(H(422),{cause:n}),ec(Bi(e,i)))):(n!==km&&(t=Error(H(423),{cause:n}),ec(Bi(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Bi(n,i),s=Jm(e.stateNode,n,s),Wd(e,s),rt!==4&&(rt=2)),!1;var r=Error(H(520),{cause:n});if(r=Bi(r,i),_l===null?_l=[r]:_l.push(r),rt!==4&&(rt=2),t===null)return!0;n=Bi(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=Jm(i.stateNode,n,e),Wd(i,e),!1;case 1:if(t=i.type,r=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Hs===null||!Hs.has(r))))return i.flags|=65536,s&=-s,i.lanes|=s,s=H5(s),Y5(s,e,i,n),Wd(i,s),!1}i=i.return}while(i!==null);return!1}var q5=Error(H(461)),St=!1;function Mt(e,t,i,n){t.child=e===null?k5(t,null,i,n):To(t,e.child,i,n)}function qv(e,t,i,n,s){i=i.render;var r=t.ref;if("ref"in n){var a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}else a=n;return Kr(t),n=zg(e,t,i,a,r,s),o=_g(),e!==null&&!St?(Gg(e,t,s),es(e,t,s)):(Ue&&o&&Bg(t),t.flags|=1,Mt(e,t,n,s),t.child)}function Kv(e,t,i,n,s){if(e===null){var r=i.type;return typeof r=="function"&&!Ug(r)&&r.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=r,K5(e,t,r,n,s)):(e=Wu(i.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Jg(e,s)){var a=r.memoizedProps;if(i=i.compare,i=i!==null?i:$l,i(a,n)&&e.ref===t.ref)return es(e,t,s)}return t.flags|=1,e=Qn(r,n),e.ref=t.ref,e.return=t,t.child=e}function K5(e,t,i,n,s){if(e!==null){var r=e.memoizedProps;if($l(r,n)&&e.ref===t.ref)if(St=!1,t.pendingProps=n=r,Jg(e,s))e.flags&131072&&(St=!0);else return t.lanes=e.lanes,es(e,t,s)}return $m(e,t,i,n,s)}function Q5(e,t,i){var n=t.pendingProps,s=n.children,r=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if(t.flags&128){if(n=r!==null?r.baseLanes|i:i,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~n}else t.childLanes=0,t.child=null;return Qv(e,t,n,i)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zu(t,r!==null?r.cachePool:null),r!==null?Vv(t,r):Km(),j5(t);else return t.lanes=t.childLanes=536870912,Qv(e,t,r!==null?r.baseLanes|i:i,i)}else r!==null?(Zu(t,r.cachePool),Vv(t,r),bs(),t.memoizedState=null):(e!==null&&Zu(t,null),Km(),bs());return Mt(e,t,s,i),t.child}function Qv(e,t,i,n){var s=Og();return s=s===null?null:{parent:dt._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},e!==null&&Zu(t,null),Km(),j5(t),e!==null&&jc(e,t,n,!0),null}function eh(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(H(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function $m(e,t,i,n,s){return Kr(t),i=zg(e,t,i,n,void 0,s),n=_g(),e!==null&&!St?(Gg(e,t,s),es(e,t,s)):(Ue&&n&&Bg(t),t.flags|=1,Mt(e,t,i,s),t.child)}function Xv(e,t,i,n,s,r){return Kr(t),t.updateQueue=null,i=o5(t,n,i,s),a5(e),n=_g(),e!==null&&!St?(Gg(e,t,r),es(e,t,r)):(Ue&&n&&Bg(t),t.flags|=1,Mt(e,t,i,r),t.child)}function Wv(e,t,i,n,s){if(Kr(t),t.stateNode===null){var r=Pa,a=i.contextType;typeof a=="object"&&a!==null&&(r=Pt(a)),r=new i(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zm,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},Lg(t),a=i.contextType,r.context=typeof a=="object"&&a!==null?Pt(a):Pa,r.state=t.memoizedState,a=i.getDerivedStateFromProps,typeof a=="function"&&(Jd(t,i,a,n),r.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Zm.enqueueReplaceState(r,r.state,null),Ll(t,n,r,s),Ol(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var o=t.memoizedProps,l=Xr(i,o);r.props=l;var c=r.context,u=i.contextType;a=Pa,typeof u=="object"&&u!==null&&(a=Pt(u));var h=i.getDerivedStateFromProps;u=typeof h=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||c!==a)&&Hv(t,r,n,a),vs=!1;var f=t.memoizedState;r.state=f,Ll(t,n,r,s),Ol(),c=t.memoizedState,o||f!==c||vs?(typeof h=="function"&&(Jd(t,i,h,n),c=t.memoizedState),(l=vs||Gv(t,i,l,n,f,c,a))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),r.props=n,r.state=c,r.context=a,n=l):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Ym(e,t),a=t.memoizedProps,u=Xr(i,a),r.props=u,h=t.pendingProps,f=r.context,c=i.contextType,l=Pa,typeof c=="object"&&c!==null&&(l=Pt(c)),o=i.getDerivedStateFromProps,(c=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Hv(t,r,n,l),vs=!1,f=t.memoizedState,r.state=f,Ll(t,n,r,s),Ol();var d=t.memoizedState;a!==h||f!==d||vs||e!==null&&e.dependencies!==null&&Lh(e.dependencies)?(typeof o=="function"&&(Jd(t,i,o,n),d=t.memoizedState),(u=vs||Gv(t,i,u,n,f,d,l)||e!==null&&e.dependencies!==null&&Lh(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,d,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,d,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),r.props=n,r.state=d,r.context=l,n=u):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,eh(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=To(t,e.child,null,s),t.child=To(t,null,i,s)):Mt(e,t,i,s),t.memoizedState=r.state,e=t.child):e=es(e,t,s),e}function Zv(e,t,i,n){return kc(),t.flags|=256,Mt(e,t,i,n),t.child}var $d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e0(e){return{baseLanes:e,cachePool:t5()}}function t0(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Pi),e}function X5(e,t,i){var n=t.pendingProps,s=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),a&&(s=!0,t.flags&=-129),a=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ue){if(s?ys(t):bs(),Ue){var o=st,l;if(l=o){e:{for(l=o,o=gn;l.nodeType!==8;){if(!o){o=null;break e}if(l=Ji(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(t.memoizedState={dehydrated:o,treeContext:Br!==null?{id:_n,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},l=gi(18,null,null,0),l.stateNode=o,l.return=t,t.child=l,_t=t,st=null,l=!0):l=!1}l||qr(t)}if(o=t.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return d1(o)?t.lanes=32:t.lanes=536870912,null;Yn(t)}return o=n.children,n=n.fallback,s?(bs(),s=t.mode,o=qh({mode:"hidden",children:o},s),n=Ur(n,s,i,null),o.return=t,n.return=t,o.sibling=n,t.child=o,s=t.child,s.memoizedState=e0(i),s.childLanes=t0(e,a,i),t.memoizedState=$d,n):(ys(t),e1(t,o))}if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(r)t.flags&256?(ys(t),t.flags&=-257,t=i0(e,t,i)):t.memoizedState!==null?(bs(),t.child=e.child,t.flags|=128,t=null):(bs(),s=n.fallback,o=t.mode,n=qh({mode:"visible",children:n.children},o),s=Ur(s,o,i,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,To(t,e.child,null,i),n=t.child,n.memoizedState=e0(i),n.childLanes=t0(e,a,i),t.memoizedState=$d,t=s);else if(ys(t),d1(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,n=Error(H(419)),n.stack="",n.digest=a,ec({value:n,source:null,stack:null}),t=i0(e,t,i)}else if(St||jc(e,t,i,!1),a=(i&e.childLanes)!==0,St||a){if(a=qe,a!==null&&(n=i&-i,n=n&42?1:wg(n),n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane))throw l.retryLane=n,ko(e,n),yi(a,e,n),q5;o.data==="$?"||a1(),t=i0(e,t,i)}else o.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,st=Ji(o.nextSibling),_t=t,Ue=!0,Vr=null,gn=!1,e!==null&&(Ni[Ii++]=_n,Ni[Ii++]=Gn,Ni[Ii++]=Br,_n=e.id,Gn=e.overflow,Br=t),t=e1(t,n.children),t.flags|=4096);return t}return s?(bs(),s=n.fallback,o=t.mode,l=e.child,c=l.sibling,n=Qn(l,{mode:"hidden",children:n.children}),n.subtreeFlags=l.subtreeFlags&65011712,c!==null?s=Qn(c,s):(s=Ur(s,o,i,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o===null?o=e0(i):(l=o.cachePool,l!==null?(c=dt._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=t5(),o={baseLanes:o.baseLanes|i,cachePool:l}),s.memoizedState=o,s.childLanes=t0(e,a,i),t.memoizedState=$d,n):(ys(t),i=e.child,e=i.sibling,i=Qn(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=i,t.memoizedState=null,i)}function e1(e,t){return t=qh({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qh(e,t){return e=gi(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function i0(e,t,i){return To(t,e.child,null,i),e=e1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jv(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zm(e.return,t,i)}function n0(e,t,i,n,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s)}function W5(e,t,i){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(Mt(e,t,n.children,i),n=gt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jv(e,i,t);else if(e.tag===19)Jv(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(et(gt,n),s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Gh(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),n0(t,!1,s,i,r);break;case"backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gh(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}n0(t,!0,i,null,r);break;case"together":n0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function es(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),$s|=t.lanes,!(i&t.childLanes))if(e!==null){if(jc(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,i=Qn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Qn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Jg(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Lh(e)))}function ZM(e,t,i){switch(t.tag){case 3:Nh(t,t.stateNode.containerInfo),xs(t,dt,e.memoizedState.cache),kc();break;case 27:case 5:Rm(t);break;case 4:Nh(t,t.stateNode.containerInfo);break;case 10:xs(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(ys(t),t.flags|=128,null):i&t.child.childLanes?X5(e,t,i):(ys(t),e=es(e,t,i),e!==null?e.sibling:null);ys(t);break;case 19:var s=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(jc(e,t,i,!1),n=(i&t.childLanes)!==0),s){if(n)return W5(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(gt,gt.current),n)break;return null;case 22:case 23:return t.lanes=0,Q5(e,t,i);case 24:xs(t,dt,e.memoizedState.cache)}return es(e,t,i)}function Z5(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!Jg(e,i)&&!(t.flags&128))return St=!1,ZM(e,t,i);St=!!(e.flags&131072)}else St=!1,Ue&&t.flags&1048576&&$b(t,Oh,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,typeof n=="function")Ug(n)?(e=Xr(n,e),t.tag=1,t=Wv(null,t,n,e,i)):(t.tag=0,t=$m(null,t,n,e,i));else{if(n!=null){if(s=n.$$typeof,s===xg){t.tag=11,t=qv(null,t,n,e,i);break e}else if(s===yg){t.tag=14,t=Kv(null,t,n,e,i);break e}}throw t=Mm(n)||n,Error(H(306,t,""))}}return t;case 0:return $m(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,s=Xr(n,t.pendingProps),Wv(e,t,n,s,i);case 3:e:{if(Nh(t,t.stateNode.containerInfo),e===null)throw Error(H(387));n=t.pendingProps;var r=t.memoizedState;s=r.element,Ym(e,t),Ll(t,n,null,i);var a=t.memoizedState;if(n=a.cache,xs(t,dt,n),n!==r.cache&&_m(t,[dt],i,!0),Ol(),n=a.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Zv(e,t,n,i);break e}else if(n!==s){s=Bi(Error(H(424)),t),ec(s),t=Zv(e,t,n,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(st=Ji(e.firstChild),_t=t,Ue=!0,Vr=null,gn=!0,i=k5(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(kc(),n===s){t=es(e,t,i);break e}Mt(e,t,n,i)}t=t.child}return t;case 26:return eh(e,t),e===null?(i=gA(t.type,null,t.pendingProps,null))?t.memoizedState=i:Ue||(i=t.type,e=t.pendingProps,n=$h(zs.current).createElement(i),n[Vt]=t,n[ri]=e,Rt(n,i,e),yt(n),t.stateNode=n):t.memoizedState=gA(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Rm(t),e===null&&Ue&&(n=t.stateNode=O4(t.type,t.pendingProps,zs.current),_t=t,gn=!0,s=st,nr(t.type)?(m1=s,st=Ji(n.firstChild)):st=s),Mt(e,t,t.pendingProps.children,i),eh(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ue&&((s=n=st)&&(n=ED(n,t.type,t.pendingProps,gn),n!==null?(t.stateNode=n,_t=t,st=Ji(n.firstChild),gn=!1,s=!0):s=!1),s||qr(t)),Rm(t),s=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,n=r.children,h1(s,r)?n=null:a!==null&&h1(s,a)&&(t.flags|=32),t.memoizedState!==null&&(s=zg(e,t,GM,null,null,i),ac._currentValue=s),eh(e,t),Mt(e,t,n,i),t.child;case 6:return e===null&&Ue&&((e=i=st)&&(i=TD(i,t.pendingProps,gn),i!==null?(t.stateNode=i,_t=t,st=null,e=!0):e=!1),e||qr(t)),null;case 13:return X5(e,t,i);case 4:return Nh(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=To(t,null,n,i):Mt(e,t,n,i),t.child;case 11:return qv(e,t,t.type,t.pendingProps,i);case 7:return Mt(e,t,t.pendingProps,i),t.child;case 8:return Mt(e,t,t.pendingProps.children,i),t.child;case 12:return Mt(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,xs(t,t.type,n.value),Mt(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Kr(t),s=Pt(s),n=n(s),t.flags|=1,Mt(e,t,n,i),t.child;case 14:return Kv(e,t,t.type,t.pendingProps,i);case 15:return K5(e,t,t.type,t.pendingProps,i);case 19:return W5(e,t,i);case 31:return n=t.pendingProps,i=t.mode,n={mode:n.mode,children:n.children},e===null?(i=qh(n,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=Qn(e.child,n),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Q5(e,t,i);case 24:return Kr(t),n=Pt(dt),e===null?(s=Og(),s===null&&(s=qe,r=Pg(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=i),s=r),t.memoizedState={parent:n,cache:s},Lg(t),xs(t,dt,s)):(e.lanes&i&&(Ym(e,t),Ll(t,null,null,i),Ol()),s=e.memoizedState,r=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),xs(t,dt,n)):(n=r.cache,xs(t,dt,n),n!==s.cache&&_m(t,[dt],i,!0))),Mt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(H(156,t.tag))}function Un(e){e.flags|=4}function $v(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!j4(t)){if(t=Li.current,t!==null&&((Ne&4194048)===Ne?bn!==null:(Ne&62914560)!==Ne&&!(Ne&536870912)||t!==bn))throw Vl=Hm,i5;e.flags|=8192}}function yu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Sb():536870912,e.lanes|=t,Mo|=t)}function rl(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function JM(e,t,i){var n=t.pendingProps;switch(Vg(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return it(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Xn(dt),yo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(nl(t)?Un(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rv())),it(t),null;case 26:return i=t.memoizedState,e===null?(Un(t),i!==null?(it(t),$v(t,i)):(it(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Un(t),it(t),$v(t,i)):(it(t),t.flags&=-16777217):(e.memoizedProps!==n&&Un(t),it(t),t.flags&=-16777217),null;case 27:Ih(t),i=zs.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Un(t);else{if(!n){if(t.stateNode===null)throw Error(H(166));return it(t),null}e=xn.current,nl(t)?Mv(t):(e=O4(s,n,i),t.stateNode=e,Un(t))}return it(t),null;case 5:if(Ih(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Un(t);else{if(!n){if(t.stateNode===null)throw Error(H(166));return it(t),null}if(e=xn.current,nl(t))Mv(t);else{switch(s=$h(zs.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?s.createElement(i,{is:n.is}):s.createElement(i)}}e[Vt]=t,e[ri]=n;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Rt(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Un(t)}}return it(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Un(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(e=zs.current,nl(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,s=_t,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Vt]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||B4(e.nodeValue,i)),e||qr(t)}else e=$h(e).createTextNode(n),e[Vt]=t,t.stateNode=e}return it(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=nl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(H(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Vt]=t}else kc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),s=!1}else s=Rv(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Yn(t),t):(Yn(t),null)}if(Yn(t),t.flags&128)return t.lanes=i,t;if(i=n!==null,e=e!==null&&e.memoizedState!==null,i){n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var r=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),yu(t,t.updateQueue),it(t),null;case 4:return yo(),e===null&&ap(t.stateNode.containerInfo),it(t),null;case 10:return Xn(t.type),it(t),null;case 19:if(Ct(gt),s=t.memoizedState,s===null)return it(t),null;if(n=(t.flags&128)!==0,r=s.rendering,r===null)if(n)rl(s,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Gh(e),r!==null){for(t.flags|=128,rl(s,!1),e=r.updateQueue,t.updateQueue=e,yu(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Jb(i,e),i=i.sibling;return et(gt,gt.current&1|2),t.child}e=e.sibling}s.tail!==null&&yn()>Qh&&(t.flags|=128,n=!0,rl(s,!1),t.lanes=4194304)}else{if(!n)if(e=Gh(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,yu(t,e),rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Ue)return it(t),null}else 2*yn()-s.renderingStartTime>Qh&&i!==536870912&&(t.flags|=128,n=!0,rl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=yn(),t.sibling=null,e=gt.current,et(gt,n?e&1|2:e&1),t):(it(t),null);case 22:case 23:return Yn(t),kg(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?i&536870912&&!(t.flags&128)&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),i=t.updateQueue,i!==null&&yu(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&Ct(Pr),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Xn(dt),it(t),null;case 25:return null;case 30:return null}throw Error(H(156,t.tag))}function $M(e,t){switch(Vg(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(dt),yo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ih(t),null;case 13:if(Yn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));kc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ct(gt),null;case 4:return yo(),null;case 10:return Xn(t.type),null;case 22:case 23:return Yn(t),kg(),e!==null&&Ct(Pr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xn(dt),null;case 25:return null;default:return null}}function J5(e,t){switch(Vg(t),t.tag){case 3:Xn(dt),yo();break;case 26:case 27:case 5:Ih(t);break;case 4:yo();break;case 13:Yn(t);break;case 19:Ct(gt);break;case 10:Xn(t.type);break;case 22:case 23:Yn(t),kg(),e!==null&&Ct(Pr);break;case 24:Xn(dt)}}function Yc(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var r=i.create,a=i.inst;n=r(),a.destroy=n}i=i.next}while(i!==s)}}catch(o){Ge(t,t.return,o)}}function Js(e,t,i){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&e)===e){var a=n.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,s=t;var l=i,c=o;try{c()}catch(u){Ge(s,l,u)}}}n=n.next}while(n!==r)}}catch(u){Ge(t,t.return,u)}}function $5(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{r5(t,i)}catch(n){Ge(e,e.return,n)}}}function e4(e,t,i){i.props=Xr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){Ge(e,t,n)}}function jl(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(s){Ge(e,t,s)}}function vn(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(s){Ge(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){Ge(e,t,s)}else i.current=null}function t4(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){Ge(e,e.return,s)}}function s0(e,t,i){try{var n=e.stateNode;yD(n,e.type,i,t),n[ri]=t}catch(s){Ge(e,e.return,s)}}function i4(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nr(e.type)||e.tag===4}function r0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function t1(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Hf));else if(n!==4&&(n===27&&nr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(t1(e,t,i),e=e.sibling;e!==null;)t1(e,t,i),e=e.sibling}function Kh(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&nr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Kh(e,t,i),e=e.sibling;e!==null;)Kh(e,t,i),e=e.sibling}function n4(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Rt(t,n,i),t[Vt]=e,t[ri]=i}catch(r){Ge(e,e.return,r)}}var kn=!1,lt=!1,a0=!1,eA=typeof WeakSet=="function"?WeakSet:Set,xt=null;function eD(e,t){if(e=e.containerInfo,c1=sf,e=Hb(e),Ng(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{i.nodeType,r.nodeType}catch{i=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var d;h!==i||s!==0&&h.nodeType!==3||(o=a+s),h!==r||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===e)break t;if(f===i&&++c===s&&(o=a),f===r&&++u===n&&(l=a),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}i=o===-1||l===-1?null:{start:o,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(u1={focusedElem:e,selectionRange:i},sf=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){switch(t=xt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,i=t,s=r.memoizedProps,r=r.memoizedState,n=i.stateNode;try{var g=Xr(i.type,s,i.elementType===i.type);e=n.getSnapshotBeforeUpdate(g,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(m){Ge(i,i.return,m)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)f1(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":f1(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(H(163))}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}}function s4(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:os(e,i),n&4&&Yc(5,i);break;case 1:if(os(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(a){Ge(i,i.return,a)}else{var s=Xr(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ge(i,i.return,a)}}n&64&&$5(i),n&512&&jl(i,i.return);break;case 3:if(os(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{r5(e,t)}catch(a){Ge(i,i.return,a)}}break;case 27:t===null&&n&4&&n4(i);case 26:case 5:os(e,i),t===null&&n&4&&t4(i),n&512&&jl(i,i.return);break;case 12:os(e,i);break;case 13:os(e,i),n&4&&o4(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=cD.bind(null,i),MD(e,i))));break;case 22:if(n=i.memoizedState!==null||kn,!n){t=t!==null&&t.memoizedState!==null||lt,s=kn;var r=lt;kn=n,(lt=t)&&!r?ds(e,i,(i.subtreeFlags&8772)!==0):os(e,i),kn=s,lt=r}break;case 30:break;default:os(e,i)}}function r4(e){var t=e.alternate;t!==null&&(e.alternate=null,r4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cg(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Jt=!1;function Bn(e,t,i){for(i=i.child;i!==null;)a4(e,t,i),i=i.sibling}function a4(e,t,i){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(Bc,i)}catch{}switch(i.tag){case 26:lt||vn(i,t),Bn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:lt||vn(i,t);var n=Ze,s=Jt;nr(i.type)&&(Ze=i.stateNode,Jt=!1),Bn(e,t,i),Hl(i.stateNode),Ze=n,Jt=s;break;case 5:lt||vn(i,t);case 6:if(n=Ze,s=Jt,Ze=null,Bn(e,t,i),Ze=n,Jt=s,Ze!==null)if(Jt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(i.stateNode)}catch(r){Ge(i,t,r)}else try{Ze.removeChild(i.stateNode)}catch(r){Ge(i,t,r)}break;case 18:Ze!==null&&(Jt?(e=Ze,fA(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),cc(e)):fA(Ze,i.stateNode));break;case 4:n=Ze,s=Jt,Ze=i.stateNode.containerInfo,Jt=!0,Bn(e,t,i),Ze=n,Jt=s;break;case 0:case 11:case 14:case 15:lt||Js(2,i,t),lt||Js(4,i,t),Bn(e,t,i);break;case 1:lt||(vn(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&e4(i,t,n)),Bn(e,t,i);break;case 21:Bn(e,t,i);break;case 22:lt=(n=lt)||i.memoizedState!==null,Bn(e,t,i),lt=n;break;default:Bn(e,t,i)}}function o4(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cc(e)}catch(i){Ge(t,t.return,i)}}function tD(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new eA),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new eA),t;default:throw Error(H(435,e.tag))}}function o0(e,t){var i=tD(e);t.forEach(function(n){var s=uD.bind(null,e,n);i.has(n)||(i.add(n),n.then(s,s))})}function ci(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n],r=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(nr(o.type)){Ze=o.stateNode,Jt=!1;break e}break;case 5:Ze=o.stateNode,Jt=!1;break e;case 3:case 4:Ze=o.stateNode.containerInfo,Jt=!0;break e}o=o.return}if(Ze===null)throw Error(H(160));a4(r,a,s),Ze=null,Jt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)l4(t,e),t=t.sibling}var Xi=null;function l4(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ci(t,e),ui(e),n&4&&(Js(3,e,e.return),Yc(3,e),Js(5,e,e.return));break;case 1:ci(t,e),ui(e),n&512&&(lt||i===null||vn(i,i.return)),n&64&&kn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var s=Xi;if(ci(t,e),ui(e),n&512&&(lt||i===null||vn(i,i.return)),n&4){var r=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){e:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Oc]||r[Vt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Rt(r,n,i),r[Vt]=e,yt(r),n=r;break e;case"link":var a=vA("link","href",s).get(n+(i.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&r.getAttribute("rel")===(i.rel==null?null:i.rel)&&r.getAttribute("title")===(i.title==null?null:i.title)&&r.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){a.splice(o,1);break t}}r=s.createElement(n),Rt(r,n,i),s.head.appendChild(r);break;case"meta":if(a=vA("meta","content",s).get(n+(i.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(i.content==null?null:""+i.content)&&r.getAttribute("name")===(i.name==null?null:i.name)&&r.getAttribute("property")===(i.property==null?null:i.property)&&r.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&r.getAttribute("charset")===(i.charSet==null?null:i.charSet)){a.splice(o,1);break t}}r=s.createElement(n),Rt(r,n,i),s.head.appendChild(r);break;default:throw Error(H(468,n))}r[Vt]=e,yt(r),n=r}e.stateNode=n}else AA(s,e.type,e.stateNode);else e.stateNode=pA(s,n,e.memoizedProps);else r!==n?(r===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):r.count--,n===null?AA(s,e.type,e.stateNode):pA(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&s0(e,e.memoizedProps,i.memoizedProps)}break;case 27:ci(t,e),ui(e),n&512&&(lt||i===null||vn(i,i.return)),i!==null&&n&4&&s0(e,e.memoizedProps,i.memoizedProps);break;case 5:if(ci(t,e),ui(e),n&512&&(lt||i===null||vn(i,i.return)),e.flags&32){s=e.stateNode;try{wo(s,"")}catch(d){Ge(e,e.return,d)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,s0(e,s,i!==null?i.memoizedProps:s)),n&1024&&(a0=!0);break;case 6:if(ci(t,e),ui(e),n&4){if(e.stateNode===null)throw Error(H(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(d){Ge(e,e.return,d)}}break;case 3:if(nh=null,s=Xi,Xi=ef(t.containerInfo),ci(t,e),Xi=s,ui(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{cc(t.containerInfo)}catch(d){Ge(e,e.return,d)}a0&&(a0=!1,c4(e));break;case 4:n=Xi,Xi=ef(e.stateNode.containerInfo),ci(t,e),ui(e),Xi=n;break;case 12:ci(t,e),ui(e);break;case 13:ci(t,e),ui(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(np=yn()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,o0(e,n)));break;case 22:s=e.memoizedState!==null;var l=i!==null&&i.memoizedState!==null,c=kn,u=lt;if(kn=c||s,lt=u||l,ci(t,e),lt=u,kn=c,ui(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||l||kn||lt||mr(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){l=i=t;try{if(r=l.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var h=l.memoizedProps.style,f=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(d){Ge(l,l.return,d)}}}else if(t.tag===6){if(i===null){l=t;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(d){Ge(l,l.return,d)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,o0(e,i))));break;case 19:ci(t,e),ui(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,o0(e,n)));break;case 30:break;case 21:break;default:ci(t,e),ui(e)}}function ui(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(i4(n)){i=n;break}n=n.return}if(i==null)throw Error(H(160));switch(i.tag){case 27:var s=i.stateNode,r=r0(e);Kh(e,r,s);break;case 5:var a=i.stateNode;i.flags&32&&(wo(a,""),i.flags&=-33);var o=r0(e);Kh(e,o,a);break;case 3:case 4:var l=i.stateNode.containerInfo,c=r0(e);t1(e,c,l);break;default:throw Error(H(161))}}catch(u){Ge(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c4(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;c4(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function os(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)s4(e,t.alternate,t),t=t.sibling}function mr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Js(4,t,t.return),mr(t);break;case 1:vn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&e4(t,t.return,i),mr(t);break;case 27:Hl(t.stateNode);case 26:case 5:vn(t,t.return),mr(t);break;case 22:t.memoizedState===null&&mr(t);break;case 30:mr(t);break;default:mr(t)}e=e.sibling}}function ds(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:ds(s,r,i),Yc(4,r);break;case 1:if(ds(s,r,i),n=r,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){Ge(n,n.return,c)}if(n=r,s=n.updateQueue,s!==null){var o=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)s5(l[s],o)}catch(c){Ge(n,n.return,c)}}i&&a&64&&$5(r),jl(r,r.return);break;case 27:n4(r);case 26:case 5:ds(s,r,i),i&&n===null&&a&4&&t4(r),jl(r,r.return);break;case 12:ds(s,r,i);break;case 13:ds(s,r,i),i&&a&4&&o4(s,r);break;case 22:r.memoizedState===null&&ds(s,r,i),jl(r,r.return);break;case 30:break;default:ds(s,r,i)}t=t.sibling}}function $g(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&zc(i))}function ep(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zc(e))}function rn(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)u4(e,t,i,n),t=t.sibling}function u4(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:rn(e,t,i,n),s&2048&&Yc(9,t);break;case 1:rn(e,t,i,n);break;case 3:rn(e,t,i,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zc(e)));break;case 12:if(s&2048){rn(e,t,i,n),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Ge(t,t.return,l)}}else rn(e,t,i,n);break;case 13:rn(e,t,i,n);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,t.memoizedState!==null?r._visibility&2?rn(e,t,i,n):zl(e,t):r._visibility&2?rn(e,t,i,n):(r._visibility|=2,Sa(e,t,i,n,(t.subtreeFlags&10256)!==0)),s&2048&&$g(a,t);break;case 24:rn(e,t,i,n),s&2048&&ep(t.alternate,t);break;default:rn(e,t,i,n)}}function Sa(e,t,i,n,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,a=t,o=i,l=n,c=a.flags;switch(a.tag){case 0:case 11:case 15:Sa(r,a,o,l,s),Yc(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?Sa(r,a,o,l,s):zl(r,a):(u._visibility|=2,Sa(r,a,o,l,s)),s&&c&2048&&$g(a.alternate,a);break;case 24:Sa(r,a,o,l,s),s&&c&2048&&ep(a.alternate,a);break;default:Sa(r,a,o,l,s)}t=t.sibling}}function zl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:zl(i,n),s&2048&&$g(n.alternate,n);break;case 24:zl(i,n),s&2048&&ep(n.alternate,n);break;default:zl(i,n)}t=t.sibling}}var wl=8192;function ca(e){if(e.subtreeFlags&wl)for(e=e.child;e!==null;)h4(e),e=e.sibling}function h4(e){switch(e.tag){case 26:ca(e),e.flags&wl&&e.memoizedState!==null&&jD(Xi,e.memoizedState,e.memoizedProps);break;case 5:ca(e);break;case 3:case 4:var t=Xi;Xi=ef(e.stateNode.containerInfo),ca(e),Xi=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=wl,wl=16777216,ca(e),wl=t):ca(e));break;default:ca(e)}}function f4(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function al(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];xt=n,m4(n,e)}f4(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)d4(e),e=e.sibling}function d4(e){switch(e.tag){case 0:case 11:case 15:al(e),e.flags&2048&&Js(9,e,e.return);break;case 3:al(e);break;case 12:al(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,th(e)):al(e);break;default:al(e)}}function th(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];xt=n,m4(n,e)}f4(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Js(8,t,t.return),th(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,th(t));break;default:th(t)}e=e.sibling}}function m4(e,t){for(;xt!==null;){var i=xt;switch(i.tag){case 0:case 11:case 15:Js(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:zc(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,xt=n;else e:for(i=e;xt!==null;){n=xt;var s=n.sibling,r=n.return;if(r4(n),n===i){xt=null;break e}if(s!==null){s.return=r,xt=s;break e}xt=r}}}var iD={getCacheForType:function(e){var t=Pt(dt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},nD=typeof WeakMap=="function"?WeakMap:Map,ke=0,qe=null,Ee=null,Ne=0,Le=0,fi=null,Ps=!1,jo=!1,tp=!1,ts=0,rt=0,$s=0,Or=0,ip=0,Pi=0,Mo=0,_l=null,$t=null,i1=!1,np=0,Qh=1/0,Xh=null,Hs=null,Dt=0,Ys=null,Do=null,Za=0,n1=0,s1=null,g4=null,Gl=0,r1=null;function xi(){if(ke&2&&Ne!==0)return Ne&-Ne;if(ge.T!==null){var e=So;return e!==0?e:rp()}return Tb()}function p4(){Pi===0&&(Pi=!(Ne&536870912)||Ue?wb():536870912);var e=Li.current;return e!==null&&(e.flags|=32),Pi}function yi(e,t,i){(e===qe&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(Ro(e,0),Os(e,Ne,Pi,!1)),Pc(e,i),(!(ke&2)||e!==qe)&&(e===qe&&(!(ke&2)&&(Or|=i),rt===4&&Os(e,Ne,Pi,!1)),Mn(e))}function v4(e,t,i){if(ke&6)throw Error(H(327));var n=!i&&(t&124)===0&&(t&e.expiredLanes)===0||Vc(e,t),s=n?aD(e,t):l0(e,t,!0),r=n;do{if(s===0){jo&&!n&&Os(e,t,0,!1);break}else{if(i=e.current.alternate,r&&!sD(i)){s=l0(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=e.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){t=a;e:{var o=e;s=_l;var l=o.current.memoizedState.isDehydrated;if(l&&(Ro(o,a).flags|=256),a=l0(o,a,!1),a!==2){if(tp&&!l){o.errorRecoveryDisabledLanes|=r,Or|=r,s=4;break e}r=$t,$t=s,r!==null&&($t===null?$t=r:$t.push.apply($t,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Ro(e,0),Os(e,t,0,!0);break}e:{switch(n=e,r=s,r){case 0:case 1:throw Error(H(345));case 4:if((t&4194048)!==t)break;case 6:Os(n,t,Pi,!Ps);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(H(329))}if((t&62914560)===t&&(s=np+300-yn(),10<s)){if(Os(n,t,Pi,!Ps),If(n,0,!0)!==0)break e;n.timeoutHandle=P4(tA.bind(null,n,i,$t,Xh,i1,t,Pi,Or,Mo,Ps,r,2,-0,0),s);break e}tA(n,i,$t,Xh,i1,t,Pi,Or,Mo,Ps,r,0,-0,0)}}break}while(!0);Mn(e)}function tA(e,t,i,n,s,r,a,o,l,c,u,h,f,d){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:kD},h4(t),h=zD(),h!==null)){e.cancelPendingCommit=h(nA.bind(null,e,t,r,i,n,s,a,o,l,u,1,f,d)),Os(e,r,a,!c);return}nA(e,t,r,i,n,s,a,o,l)}function sD(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!wi(r(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t,i,n){t&=~ip,t&=~Or,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var r=31-Ai(s),a=1<<r;n[r]=-1,s&=~a}i!==0&&Cb(e,i,t)}function zf(){return ke&6?!0:(qc(0),!1)}function sp(){if(Ee!==null){if(Le===0)var e=Ee.return;else e=Ee,Hn=oa=null,Hg(e),Wa=null,ic=0,e=Ee;for(;e!==null;)J5(e.alternate,e),e=e.return;Ee=null}}function Ro(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,wD(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),sp(),qe=e,Ee=i=Qn(e.current,null),Ne=t,Le=0,fi=null,Ps=!1,jo=Vc(e,t),tp=!1,Mo=Pi=ip=Or=$s=rt=0,$t=_l=null,i1=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-Ai(n),r=1<<s;t|=e[s],n&=~r}return ts=t,Vf(),i}function A4(e,t){we=null,ge.H=_h,t===_c||t===Of?(t=Uv(),Le=3):t===i5?(t=Uv(),Le=4):Le=t===q5?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fi=t,Ee===null&&(rt=1,Yh(e,Bi(t,e.current)))}function x4(){var e=ge.H;return ge.H=_h,e===null?_h:e}function y4(){var e=ge.A;return ge.A=iD,e}function a1(){rt=4,Ps||(Ne&4194048)!==Ne&&Li.current!==null||(jo=!0),!($s&134217727)&&!(Or&134217727)||qe===null||Os(qe,Ne,Pi,!1)}function l0(e,t,i){var n=ke;ke|=2;var s=x4(),r=y4();(qe!==e||Ne!==t)&&(Xh=null,Ro(e,t)),t=!1;var a=rt;e:do try{if(Le!==0&&Ee!==null){var o=Ee,l=fi;switch(Le){case 8:sp(),a=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(t=!0);var c=Le;if(Le=0,fi=null,ka(e,o,l,c),i&&jo){a=0;break e}break;default:c=Le,Le=0,fi=null,ka(e,o,l,c)}}rD(),a=rt;break}catch(u){A4(e,u)}while(!0);return t&&e.shellSuspendCounter++,Hn=oa=null,ke=n,ge.H=s,ge.A=r,Ee===null&&(qe=null,Ne=0,Vf()),a}function rD(){for(;Ee!==null;)b4(Ee)}function aD(e,t){var i=ke;ke|=2;var n=x4(),s=y4();qe!==e||Ne!==t?(Xh=null,Qh=yn()+500,Ro(e,t)):jo=Vc(e,t);e:do try{if(Le!==0&&Ee!==null){t=Ee;var r=fi;t:switch(Le){case 1:Le=0,fi=null,ka(e,t,r,1);break;case 2:case 9:if(Fv(r)){Le=0,fi=null,iA(t);break}t=function(){Le!==2&&Le!==9||qe!==e||(Le=7),Mn(e)},r.then(t,t);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Fv(r)?(Le=0,fi=null,iA(t)):(Le=0,fi=null,ka(e,t,r,7));break;case 5:var a=null;switch(Ee.tag){case 26:a=Ee.memoizedState;case 5:case 27:var o=Ee;if(!a||j4(a)){Le=0,fi=null;var l=o.sibling;if(l!==null)Ee=l;else{var c=o.return;c!==null?(Ee=c,_f(c)):Ee=null}break t}}Le=0,fi=null,ka(e,t,r,5);break;case 6:Le=0,fi=null,ka(e,t,r,6);break;case 8:sp(),rt=6;break e;default:throw Error(H(462))}}oD();break}catch(u){A4(e,u)}while(!0);return Hn=oa=null,ge.H=n,ge.A=s,ke=i,Ee!==null?0:(qe=null,Ne=0,Vf(),rt)}function oD(){for(;Ee!==null&&!R8();)b4(Ee)}function b4(e){var t=Z5(e.alternate,e,ts);e.memoizedProps=e.pendingProps,t===null?_f(e):Ee=t}function iA(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Xv(i,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=Xv(i,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:Hg(t);default:J5(i,t),t=Ee=Jb(t,ts),t=Z5(i,t,ts)}e.memoizedProps=e.pendingProps,t===null?_f(e):Ee=t}function ka(e,t,i,n){Hn=oa=null,Hg(t),Wa=null,ic=0;var s=t.return;try{if(WM(e,s,t,i,Ne)){rt=1,Yh(e,Bi(i,e.current)),Ee=null;return}}catch(r){if(s!==null)throw Ee=s,r;rt=1,Yh(e,Bi(i,e.current)),Ee=null;return}t.flags&32768?(Ue||n===1?e=!0:jo||Ne&536870912?e=!1:(Ps=e=!0,(n===2||n===9||n===3||n===6)&&(n=Li.current,n!==null&&n.tag===13&&(n.flags|=16384))),w4(t,e)):_f(t)}function _f(e){var t=e;do{if(t.flags&32768){w4(t,Ps);return}e=t.return;var i=JM(t.alternate,t,ts);if(i!==null){Ee=i;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);rt===0&&(rt=5)}function w4(e,t){do{var i=$M(e.alternate,e);if(i!==null){i.flags&=32767,Ee=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=i}while(e!==null);rt=6,Ee=null}function nA(e,t,i,n,s,r,a,o,l){e.cancelPendingCommit=null;do Gf();while(Dt!==0);if(ke&6)throw Error(H(327));if(t!==null){if(t===e.current)throw Error(H(177));if(r=t.lanes|t.childLanes,r|=Ig,k8(e,i,r,a,o,l),e===qe&&(Ee=qe=null,Ne=0),Do=t,Ys=e,Za=i,n1=r,s1=s,g4=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,hD(Fh,function(){return M4(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=ge.T,ge.T=null,s=Be.p,Be.p=2,a=ke,ke|=4;try{eD(e,t,i)}finally{ke=a,Be.p=s,ge.T=n}}Dt=1,S4(),C4(),E4()}}function S4(){if(Dt===1){Dt=0;var e=Ys,t=Do,i=(t.flags&13878)!==0;if(t.subtreeFlags&13878||i){i=ge.T,ge.T=null;var n=Be.p;Be.p=2;var s=ke;ke|=4;try{l4(t,e);var r=u1,a=Hb(e.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&Gb(o.ownerDocument.documentElement,o)){if(l!==null&&Ng(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,f=h&&h.defaultView||window;if(f.getSelection){var d=f.getSelection(),g=o.textContent.length,m=Math.min(l.start,g),A=l.end===void 0?m:Math.min(l.end,g);!d.extend&&m>A&&(a=A,A=m,m=a);var p=Cv(o,m),v=Cv(o,A);if(p&&v&&(d.rangeCount!==1||d.anchorNode!==p.node||d.anchorOffset!==p.offset||d.focusNode!==v.node||d.focusOffset!==v.offset)){var x=h.createRange();x.setStart(p.node,p.offset),d.removeAllRanges(),m>A?(d.addRange(x),d.extend(v.node,v.offset)):(x.setEnd(v.node,v.offset),d.addRange(x))}}}}for(h=[],d=o;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var y=h[o];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}sf=!!c1,u1=c1=null}finally{ke=s,Be.p=n,ge.T=i}}e.current=t,Dt=2}}function C4(){if(Dt===2){Dt=0;var e=Ys,t=Do,i=(t.flags&8772)!==0;if(t.subtreeFlags&8772||i){i=ge.T,ge.T=null;var n=Be.p;Be.p=2;var s=ke;ke|=4;try{s4(e,t.alternate,t)}finally{ke=s,Be.p=n,ge.T=i}}Dt=3}}function E4(){if(Dt===4||Dt===3){Dt=0,N8();var e=Ys,t=Do,i=Za,n=g4;t.subtreeFlags&10256||t.flags&10256?Dt=5:(Dt=0,Do=Ys=null,T4(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Hs=null),Sg(i),t=t.stateNode,vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(Bc,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=ge.T,s=Be.p,Be.p=2,ge.T=null;try{for(var r=e.onRecoverableError,a=0;a<n.length;a++){var o=n[a];r(o.value,{componentStack:o.stack})}}finally{ge.T=t,Be.p=s}}Za&3&&Gf(),Mn(e),s=e.pendingLanes,i&4194090&&s&42?e===r1?Gl++:(Gl=0,r1=e):Gl=0,qc(0)}}function T4(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zc(t)))}function Gf(e){return S4(),C4(),E4(),M4()}function M4(){if(Dt!==5)return!1;var e=Ys,t=n1;n1=0;var i=Sg(Za),n=ge.T,s=Be.p;try{Be.p=32>i?32:i,ge.T=null,i=s1,s1=null;var r=Ys,a=Za;if(Dt=0,Do=Ys=null,Za=0,ke&6)throw Error(H(331));var o=ke;if(ke|=4,d4(r.current),u4(r,r.current,a,i),ke=o,qc(0,!1),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(Bc,r)}catch{}return!0}finally{Be.p=s,ge.T=n,T4(e,t)}}function sA(e,t,i){t=Bi(i,t),t=Jm(e.stateNode,t,2),e=Gs(e,t,2),e!==null&&(Pc(e,2),Mn(e))}function Ge(e,t,i){if(e.tag===3)sA(e,e,i);else for(;t!==null;){if(t.tag===3){sA(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hs===null||!Hs.has(n))){e=Bi(i,e),i=H5(2),n=Gs(t,i,2),n!==null&&(Y5(i,n,t,e),Pc(n,2),Mn(n));break}}t=t.return}}function c0(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new nD;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(i)||(tp=!0,s.add(i),e=lD.bind(null,e,t,i),t.then(e,e))}function lD(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,qe===e&&(Ne&i)===i&&(rt===4||rt===3&&(Ne&62914560)===Ne&&300>yn()-np?!(ke&2)&&Ro(e,0):ip|=i,Mo===Ne&&(Mo=0)),Mn(e)}function D4(e,t){t===0&&(t=Sb()),e=ko(e,t),e!==null&&(Pc(e,t),Mn(e))}function cD(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),D4(e,i)}function uD(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(H(314))}n!==null&&n.delete(t),D4(e,i)}function hD(e,t){return bg(e,t)}var Wh=null,Ca=null,o1=!1,Zh=!1,u0=!1,Lr=0;function Mn(e){e!==Ca&&e.next===null&&(Ca===null?Wh=Ca=e:Ca=Ca.next=e),Zh=!0,o1||(o1=!0,dD())}function qc(e,t){if(!u0&&Zh){u0=!0;do for(var i=!1,n=Wh;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var r=0;else{var a=n.suspendedLanes,o=n.pingedLanes;r=(1<<31-Ai(42|e)+1)-1,r&=s&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(i=!0,rA(n,r))}else r=Ne,r=If(n,n===qe?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(r&3)||Vc(n,r)||(i=!0,rA(n,r));n=n.next}while(i);u0=!1}}function fD(){R4()}function R4(){Zh=o1=!1;var e=0;Lr!==0&&(bD()&&(e=Lr),Lr=0);for(var t=yn(),i=null,n=Wh;n!==null;){var s=n.next,r=N4(n,t);r===0?(n.next=null,i===null?Wh=s:i.next=s,s===null&&(Ca=i)):(i=n,(e!==0||r&3)&&(Zh=!0)),n=s}qc(e)}function N4(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var a=31-Ai(r),o=1<<a,l=s[a];l===-1?(!(o&i)||o&n)&&(s[a]=L8(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(t=qe,i=Ne,i=If(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Pd(n),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||Vc(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&Pd(n),Sg(i)){case 2:case 8:i=yb;break;case 32:i=Fh;break;case 268435456:i=bb;break;default:i=Fh}return n=I4.bind(null,e),i=bg(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&Pd(n),e.callbackPriority=2,e.callbackNode=null,2}function I4(e,t){if(Dt!==0&&Dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Gf()&&e.callbackNode!==i)return null;var n=Ne;return n=If(e,e===qe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(v4(e,n,t),N4(e,yn()),e.callbackNode!=null&&e.callbackNode===i?I4.bind(null,e):null)}function rA(e,t){if(Gf())return null;v4(e,t,!0)}function dD(){SD(function(){ke&6?bg(xb,fD):R4()})}function rp(){return Lr===0&&(Lr=wb()),Lr}function aA(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ku(""+e)}function oA(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function mD(e,t,i,n,s){if(t==="submit"&&i&&i.stateNode===s){var r=aA((s[ri]||null).action),a=n.submitter;a&&(t=(t=a[ri]||null)?aA(t.formAction):a.getAttribute("formAction"),t!==null&&(r=t,a=null));var o=new Ff("action","action",null,n,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Lr!==0){var l=a?oA(s,a):new FormData(s);Wm(i,{pending:!0,data:l,method:s.method,action:r},null,l)}}else typeof r=="function"&&(o.preventDefault(),l=a?oA(s,a):new FormData(s),Wm(i,{pending:!0,data:l,method:s.method,action:r},r,l))},currentTarget:s}]})}}for(var h0=0;h0<Lm.length;h0++){var f0=Lm[h0],gD=f0.toLowerCase(),pD=f0[0].toUpperCase()+f0.slice(1);tn(gD,"on"+pD)}tn(qb,"onAnimationEnd");tn(Kb,"onAnimationIteration");tn(Qb,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(UM,"onTransitionRun");tn(BM,"onTransitionStart");tn(VM,"onTransitionCancel");tn(Xb,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function F4(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(u){Hh(u)}s.currentTarget=null,r=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(u){Hh(u)}s.currentTarget=null,r=l}}}}function Ce(e,t){var i=t[Im];i===void 0&&(i=t[Im]=new Set);var n=e+"__bubble";i.has(n)||(U4(t,e,2,!1),i.add(n))}function d0(e,t,i){var n=0;t&&(n|=4),U4(i,e,n,t)}var bu="_reactListening"+Math.random().toString(36).slice(2);function ap(e){if(!e[bu]){e[bu]=!0,Mb.forEach(function(i){i!=="selectionchange"&&(vD.has(i)||d0(i,!1,e),d0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bu]||(t[bu]=!0,d0("selectionchange",!1,t))}}function U4(e,t,i,n){switch(Y4(t)){case 2:var s=HD;break;case 8:s=YD;break;default:s=up}i=s.bind(null,t,i,e),s=void 0,!Vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function m0(e,t,i,n,s){var r=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;o!==null;){if(a=Na(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){n=r=a;continue e}o=o.parentNode}}n=n.return}Vb(function(){var c=r,u=Tg(i),h=[];e:{var f=Wb.get(e);if(f!==void 0){var d=Ff,g=e;switch(e){case"keypress":if(Xu(i)===0)break e;case"keydown":case"keyup":d=hM;break;case"focusin":g="focus",d=Hd;break;case"focusout":g="blur",d=Hd;break;case"beforeblur":case"afterblur":d=Hd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=$8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=mM;break;case qb:case Kb:case Qb:d=iM;break;case Xb:d=pM;break;case"scroll":case"scrollend":d=Z8;break;case"wheel":d=AM;break;case"copy":case"cut":case"paste":d=sM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=pv;break;case"toggle":case"beforetoggle":d=yM}var m=(t&4)!==0,A=!m&&(e==="scroll"||e==="scrollend"),p=m?f!==null?f+"Capture":null:f;m=[];for(var v=c,x;v!==null;){var y=v;if(x=y.stateNode,y=y.tag,y!==5&&y!==26&&y!==27||x===null||p===null||(y=Zl(v,p),y!=null&&m.push(sc(v,y,x))),A)break;v=v.return}0<m.length&&(f=new d(f,g,null,i,u),h.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",f&&i!==Bm&&(g=i.relatedTarget||i.fromElement)&&(Na(g)||g[Oo]))break e;if((d||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,d?(g=i.relatedTarget||i.toElement,d=c,g=g?Na(g):null,g!==null&&(A=Uc(g),m=g.tag,g!==A||m!==5&&m!==27&&m!==6)&&(g=null)):(d=null,g=c),d!==g)){if(m=mv,y="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=pv,y="onPointerLeave",p="onPointerEnter",v="pointer"),A=d==null?f:bl(d),x=g==null?f:bl(g),f=new m(y,v+"leave",d,i,u),f.target=A,f.relatedTarget=x,y=null,Na(u)===c&&(m=new m(p,v+"enter",g,i,u),m.target=x,m.relatedTarget=A,y=m),A=y,d&&g)t:{for(m=d,p=g,v=0,x=m;x;x=ua(x))v++;for(x=0,y=p;y;y=ua(y))x++;for(;0<v-x;)m=ua(m),v--;for(;0<x-v;)p=ua(p),x--;for(;v--;){if(m===p||p!==null&&m===p.alternate)break t;m=ua(m),p=ua(p)}m=null}else m=null;d!==null&&lA(h,f,d,m,!1),g!==null&&A!==null&&lA(h,A,g,m,!0)}}e:{if(f=c?bl(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var b=yv;else if(xv(f))if(zb)b=NM;else{b=DM;var E=MM}else d=f.nodeName,!d||d.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Eg(c.elementType)&&(b=yv):b=RM;if(b&&(b=b(e,c))){jb(h,b,i,u);break e}E&&E(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&Um(f,"number",f.value)}switch(E=c?bl(c):window,e){case"focusin":(xv(E)||E.contentEditable==="true")&&(Ua=E,Pm=c,Ul=null);break;case"focusout":Ul=Pm=Ua=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,Ev(h,i,u);break;case"selectionchange":if(FM)break;case"keydown":case"keyup":Ev(h,i,u)}var w;if(Rg)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Fa?Lb(e,i)&&(S="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(S="onCompositionStart");S&&(Ob&&i.locale!=="ko"&&(Fa||S!=="onCompositionStart"?S==="onCompositionEnd"&&Fa&&(w=Pb()):(Vs=u,Mg="value"in Vs?Vs.value:Vs.textContent,Fa=!0)),E=Jh(c,S),0<E.length&&(S=new gv(S,e,null,i,u),h.push({event:S,listeners:E}),w?S.data=w:(w=kb(i),w!==null&&(S.data=w)))),(w=wM?SM(e,i):CM(e,i))&&(S=Jh(c,"onBeforeInput"),0<S.length&&(E=new gv("onBeforeInput","beforeinput",null,i,u),h.push({event:E,listeners:S}),E.data=w)),mD(h,e,c,i,u)}F4(h,t)})}function sc(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Jh(e,t){for(var i=t+"Capture",n=[];e!==null;){var s=e,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Zl(e,i),s!=null&&n.unshift(sc(e,s,r)),s=Zl(e,t),s!=null&&n.push(sc(e,s,r))),e.tag===3)return n;e=e.return}return[]}function ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lA(e,t,i,n,s){for(var r=t._reactName,a=[];i!==null&&i!==n;){var o=i,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===n)break;o!==5&&o!==26&&o!==27||c===null||(l=c,s?(c=Zl(i,r),c!=null&&a.unshift(sc(i,c,l))):s||(c=Zl(i,r),c!=null&&a.push(sc(i,c,l)))),i=i.return}a.length!==0&&e.push({event:t,listeners:a})}var AD=/\r\n?/g,xD=/\u0000|\uFFFD/g;function cA(e){return(typeof e=="string"?e:""+e).replace(AD,`
`).replace(xD,"")}function B4(e,t){return t=cA(t),cA(e)===t}function Hf(){}function je(e,t,i,n,s,r){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||wo(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&wo(e,""+n);break;case"className":mu(e,"class",n);break;case"tabIndex":mu(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":mu(e,i,n);break;case"style":Bb(e,n,r);break;case"data":if(t!=="object"){mu(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Ku(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(i==="formAction"?(t!=="input"&&je(e,t,"name",s.name,s,null),je(e,t,"formEncType",s.formEncType,s,null),je(e,t,"formMethod",s.formMethod,s,null),je(e,t,"formTarget",s.formTarget,s,null)):(je(e,t,"encType",s.encType,s,null),je(e,t,"method",s.method,s,null),je(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Ku(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=Hf);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(H(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(H(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=Ku(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),qu(e,"popover",n);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":qu(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=X8.get(i)||i,qu(e,i,n))}}function l1(e,t,i,n,s,r){switch(i){case"style":Bb(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(H(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(H(60));e.innerHTML=i}}break;case"children":typeof n=="string"?wo(e,n):(typeof n=="number"||typeof n=="bigint")&&wo(e,""+n);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Hf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Db.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),r=e[ri]||null,r=r!=null?r[i]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof n=="function")){typeof r!="function"&&r!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s);break e}i in e?e[i]=n:n===!0?e.setAttribute(i,""):qu(e,i,n)}}}function Rt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var n=!1,s=!1,r;for(r in i)if(i.hasOwnProperty(r)){var a=i[r];if(a!=null)switch(r){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,t));default:je(e,t,r,a,i,null)}}s&&je(e,t,"srcSet",i.srcSet,i,null),n&&je(e,t,"src",i.src,i,null);return;case"input":Ce("invalid",e);var o=r=a=s=null,l=null,c=null;for(n in i)if(i.hasOwnProperty(n)){var u=i[n];if(u!=null)switch(n){case"name":s=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(H(137,t));break;default:je(e,t,n,u,i,null)}}Ib(e,r,o,l,c,a,s,!1),Uh(e);return;case"select":Ce("invalid",e),n=a=r=null;for(s in i)if(i.hasOwnProperty(s)&&(o=i[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":n=o;default:je(e,t,s,o,i,null)}t=r,i=a,e.multiple=!!n,t!=null?Ya(e,!!n,t,!1):i!=null&&Ya(e,!!n,i,!0);return;case"textarea":Ce("invalid",e),r=s=n=null;for(a in i)if(i.hasOwnProperty(a)&&(o=i[a],o!=null))switch(a){case"value":n=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(H(91));break;default:je(e,t,a,o,i,null)}Ub(e,n,s,r),Uh(e);return;case"option":for(l in i)if(i.hasOwnProperty(l)&&(n=i[l],n!=null))switch(l){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:je(e,t,l,n,i,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(n=0;n<nc.length;n++)Ce(nc[n],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&(n=i[c],n!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,t));default:je(e,t,c,n,i,null)}return;default:if(Eg(t)){for(u in i)i.hasOwnProperty(u)&&(n=i[u],n!==void 0&&l1(e,t,u,n,i,void 0));return}}for(o in i)i.hasOwnProperty(o)&&(n=i[o],n!=null&&je(e,t,o,n,i,null))}function yD(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,o=null,l=null,c=null,u=null;for(d in i){var h=i[d];if(i.hasOwnProperty(d)&&h!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":l=h;default:n.hasOwnProperty(d)||je(e,t,d,null,n,h)}}for(var f in n){var d=n[f];if(h=i[f],n.hasOwnProperty(f)&&(d!=null||h!=null))switch(f){case"type":r=d;break;case"name":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(H(137,t));break;default:d!==h&&je(e,t,f,d,n,h)}}Fm(e,a,o,l,c,u,r,s);return;case"select":d=a=o=f=null;for(r in i)if(l=i[r],i.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":d=l;default:n.hasOwnProperty(r)||je(e,t,r,null,n,l)}for(s in n)if(r=n[s],l=i[s],n.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":f=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==l&&je(e,t,s,r,n,l)}t=o,i=a,n=d,f!=null?Ya(e,!!i,f,!1):!!n!=!!i&&(t!=null?Ya(e,!!i,t,!0):Ya(e,!!i,i?[]:"",!1));return;case"textarea":d=f=null;for(o in i)if(s=i[o],i.hasOwnProperty(o)&&s!=null&&!n.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:je(e,t,o,null,n,s)}for(a in n)if(s=n[a],r=i[a],n.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":f=s;break;case"defaultValue":d=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(H(91));break;default:s!==r&&je(e,t,a,s,n,r)}Fb(e,f,d);return;case"option":for(var g in i)if(f=i[g],i.hasOwnProperty(g)&&f!=null&&!n.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:je(e,t,g,null,n,f)}for(l in n)if(f=n[l],d=i[l],n.hasOwnProperty(l)&&f!==d&&(f!=null||d!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:je(e,t,l,f,n,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in i)f=i[m],i.hasOwnProperty(m)&&f!=null&&!n.hasOwnProperty(m)&&je(e,t,m,null,n,f);for(c in n)if(f=n[c],d=i[c],n.hasOwnProperty(c)&&f!==d&&(f!=null||d!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,t));break;default:je(e,t,c,f,n,d)}return;default:if(Eg(t)){for(var A in i)f=i[A],i.hasOwnProperty(A)&&f!==void 0&&!n.hasOwnProperty(A)&&l1(e,t,A,void 0,n,f);for(u in n)f=n[u],d=i[u],!n.hasOwnProperty(u)||f===d||f===void 0&&d===void 0||l1(e,t,u,f,n,d);return}}for(var p in i)f=i[p],i.hasOwnProperty(p)&&f!=null&&!n.hasOwnProperty(p)&&je(e,t,p,null,n,f);for(h in n)f=n[h],d=i[h],!n.hasOwnProperty(h)||f===d||f==null&&d==null||je(e,t,h,f,n,d)}var c1=null,u1=null;function $h(e){return e.nodeType===9?e:e.ownerDocument}function uA(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V4(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function h1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var g0=null;function bD(){var e=window.event;return e&&e.type==="popstate"?e===g0?!1:(g0=e,!0):(g0=null,!1)}var P4=typeof setTimeout=="function"?setTimeout:void 0,wD=typeof clearTimeout=="function"?clearTimeout:void 0,hA=typeof Promise=="function"?Promise:void 0,SD=typeof queueMicrotask=="function"?queueMicrotask:typeof hA<"u"?function(e){return hA.resolve(null).then(e).catch(CD)}:P4;function CD(e){setTimeout(function(){throw e})}function nr(e){return e==="head"}function fA(e,t){var i=t,n=0,s=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(0<n&&8>n){i=n;var a=e.ownerDocument;if(i&1&&Hl(a.documentElement),i&2&&Hl(a.body),i&4)for(i=a.head,Hl(i),a=i.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Oc]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||i.removeChild(a),a=o}}if(s===0){e.removeChild(r),cc(t);return}s--}else i==="$"||i==="$?"||i==="$!"?s++:n=i.charCodeAt(0)-48;else n=0;i=r}while(i);cc(t)}function f1(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":f1(i),Cg(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function ED(e,t,i,n){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Oc])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Ji(e.nextSibling),e===null)break}return null}function TD(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Ji(e.nextSibling),e===null))return null;return e}function d1(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function MD(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ji(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var m1=null;function dA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function O4(e,t,i){switch(t=$h(i),e){case"html":if(e=t.documentElement,!e)throw Error(H(452));return e;case"head":if(e=t.head,!e)throw Error(H(453));return e;case"body":if(e=t.body,!e)throw Error(H(454));return e;default:throw Error(H(451))}}function Hl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cg(e)}var ki=new Map,mA=new Set;function ef(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ss=Be.d;Be.d={f:DD,r:RD,D:ND,C:ID,L:FD,m:UD,X:VD,S:BD,M:PD};function DD(){var e=ss.f(),t=zf();return e||t}function RD(e){var t=Lo(e);t!==null&&t.tag===5&&t.type==="form"?N5(t):ss.r(e)}var zo=typeof document>"u"?null:document;function L4(e,t,i){var n=zo;if(n&&typeof t=="string"&&t){var s=Ui(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),mA.has(s)||(mA.add(s),e={rel:e,crossOrigin:i,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Rt(t,"link",e),yt(t),n.head.appendChild(t)))}}function ND(e){ss.D(e),L4("dns-prefetch",e,null)}function ID(e,t){ss.C(e,t),L4("preconnect",e,t)}function FD(e,t,i){ss.L(e,t,i);var n=zo;if(n&&e&&t){var s='link[rel="preload"][as="'+Ui(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+Ui(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+Ui(i.imageSizes)+'"]')):s+='[href="'+Ui(e)+'"]';var r=s;switch(t){case"style":r=No(e);break;case"script":r=_o(e)}ki.has(r)||(e=Qe({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ki.set(r,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(Kc(r))||t==="script"&&n.querySelector(Qc(r))||(t=n.createElement("link"),Rt(t,"link",e),yt(t),n.head.appendChild(t)))}}function UD(e,t){ss.m(e,t);var i=zo;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Ui(n)+'"][href="'+Ui(e)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=_o(e)}if(!ki.has(r)&&(e=Qe({rel:"modulepreload",href:e},t),ki.set(r,e),i.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Qc(r)))return}n=i.createElement("link"),Rt(n,"link",e),yt(n),i.head.appendChild(n)}}}function BD(e,t,i){ss.S(e,t,i);var n=zo;if(n&&e){var s=Ha(n).hoistableStyles,r=No(e);t=t||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=n.querySelector(Kc(r)))o.loading=5;else{e=Qe({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ki.get(r))&&op(e,i);var l=a=n.createElement("link");yt(l),Rt(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ih(a,t,n)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}}function VD(e,t){ss.X(e,t);var i=zo;if(i&&e){var n=Ha(i).hoistableScripts,s=_o(e),r=n.get(s);r||(r=i.querySelector(Qc(s)),r||(e=Qe({src:e,async:!0},t),(t=ki.get(s))&&lp(e,t),r=i.createElement("script"),yt(r),Rt(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function PD(e,t){ss.M(e,t);var i=zo;if(i&&e){var n=Ha(i).hoistableScripts,s=_o(e),r=n.get(s);r||(r=i.querySelector(Qc(s)),r||(e=Qe({src:e,async:!0,type:"module"},t),(t=ki.get(s))&&lp(e,t),r=i.createElement("script"),yt(r),Rt(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}function gA(e,t,i,n){var s=(s=zs.current)?ef(s):null;if(!s)throw Error(H(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=No(i.href),i=Ha(s).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=No(i.href);var r=Ha(s).hoistableStyles,a=r.get(e);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,a),(r=s.querySelector(Kc(e)))&&!r._p&&(a.instance=r,a.state.loading=5),ki.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ki.set(e,i),r||OD(s,e,i,a.state))),t&&n===null)throw Error(H(528,""));return a}if(t&&n!==null)throw Error(H(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_o(i),i=Ha(s).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,e))}}function No(e){return'href="'+Ui(e)+'"'}function Kc(e){return'link[rel="stylesheet"]['+e+"]"}function k4(e){return Qe({},e,{"data-precedence":e.precedence,precedence:null})}function OD(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Rt(t,"link",i),yt(t),e.head.appendChild(t))}function _o(e){return'[src="'+Ui(e)+'"]'}function Qc(e){return"script[async]"+e}function pA(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Ui(i.href)+'"]');if(n)return t.instance=n,yt(n),n;var s=Qe({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),yt(n),Rt(n,"style",s),ih(n,i.precedence,e),t.instance=n;case"stylesheet":s=No(i.href);var r=e.querySelector(Kc(s));if(r)return t.state.loading|=4,t.instance=r,yt(r),r;n=k4(i),(s=ki.get(s))&&op(n,s),r=(e.ownerDocument||e).createElement("link"),yt(r);var a=r;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Rt(r,"link",n),t.state.loading|=4,ih(r,i.precedence,e),t.instance=r;case"script":return r=_o(i.src),(s=e.querySelector(Qc(r)))?(t.instance=s,yt(s),s):(n=i,(s=ki.get(r))&&(n=Qe({},i),lp(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),yt(s),Rt(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(H(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,ih(n,i.precedence,e));return t.instance}function ih(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,a=0;a<n.length;a++){var o=n[a];if(o.dataset.precedence===t)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function op(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function lp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var nh=null;function vA(e,t,i){if(nh===null){var n=new Map,s=nh=new Map;s.set(i,n)}else s=nh,n=s.get(i),n||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var r=i[s];if(!(r[Oc]||r[Vt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(t)||"";a=e+a;var o=n.get(a);o?o.push(r):n.set(a,[r])}}return n}function AA(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function LD(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function j4(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var rc=null;function kD(){}function jD(e,t,i){if(rc===null)throw Error(H(475));var n=rc;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=No(i.href),r=e.querySelector(Kc(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=tf.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=r,yt(r);return}r=e.ownerDocument||e,i=k4(i),(s=ki.get(s))&&op(i,s),r=r.createElement("link"),yt(r);var a=r;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Rt(r,"link",i),t.instance=r}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=tf.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function zD(){if(rc===null)throw Error(H(475));var e=rc;return e.stylesheets&&e.count===0&&g1(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&g1(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function tf(){if(this.count--,this.count===0){if(this.stylesheets)g1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var nf=null;function g1(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,nf=new Map,t.forEach(_D,e),nf=null,tf.call(e))}function _D(e,t){if(!(t.state.loading&4)){var i=nf.get(e);if(i)var n=i.get(null);else{i=new Map,nf.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(i.set(a.dataset.precedence,a),n=a)}n&&i.set(null,n)}s=t.instance,a=s.getAttribute("data-precedence"),r=i.get(a)||n,r===n&&i.set(null,s),i.set(a,s),this.count++,n=tf.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var ac={$$typeof:zn,Provider:null,Consumer:null,_currentValue:Fr,_currentValue2:Fr,_threadCount:0};function GD(e,t,i,n,s,r,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Od(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Od(0),this.hiddenUpdates=Od(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function z4(e,t,i,n,s,r,a,o,l,c,u,h){return e=new GD(e,t,i,a,o,l,c,h),t=1,r===!0&&(t|=24),r=gi(3,null,null,t),e.current=r,r.stateNode=e,t=Pg(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:i,cache:t},Lg(r),e}function _4(e){return e?(e=Pa,e):Pa}function G4(e,t,i,n,s,r){s=_4(s),n.context===null?n.context=s:n.pendingContext=s,n=_s(t),n.payload={element:i},r=r===void 0?null:r,r!==null&&(n.callback=r),i=Gs(e,n,t),i!==null&&(yi(i,e,t),Pl(i,e,t))}function xA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function cp(e,t){xA(e,t),(e=e.alternate)&&xA(e,t)}function H4(e){if(e.tag===13){var t=ko(e,67108864);t!==null&&yi(t,e,67108864),cp(e,67108864)}}var sf=!0;function HD(e,t,i,n){var s=ge.T;ge.T=null;var r=Be.p;try{Be.p=2,up(e,t,i,n)}finally{Be.p=r,ge.T=s}}function YD(e,t,i,n){var s=ge.T;ge.T=null;var r=Be.p;try{Be.p=8,up(e,t,i,n)}finally{Be.p=r,ge.T=s}}function up(e,t,i,n){if(sf){var s=p1(n);if(s===null)m0(e,t,n,rf,i),yA(e,n);else if(KD(s,e,t,i,n))n.stopPropagation();else if(yA(e,n),t&4&&-1<qD.indexOf(e)){for(;s!==null;){var r=Lo(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=fr(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Ai(a);o.entanglements[1]|=l,a&=~l}Mn(r),!(ke&6)&&(Qh=yn()+500,qc(0))}}break;case 13:o=ko(r,2),o!==null&&yi(o,r,2),zf(),cp(r,2)}if(r=p1(n),r===null&&m0(e,t,n,rf,i),r===s)break;s=r}s!==null&&n.stopPropagation()}else m0(e,t,n,null,i)}}function p1(e){return e=Tg(e),hp(e)}var rf=null;function hp(e){if(rf=null,e=Na(e),e!==null){var t=Uc(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=gb(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rf=e,null}function Y4(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(I8()){case xb:return 2;case yb:return 8;case Fh:case F8:return 32;case bb:return 268435456;default:return 32}default:return 32}}var v1=!1,qs=null,Ks=null,Qs=null,oc=new Map,lc=new Map,ws=[],qD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yA(e,t){switch(e){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":oc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(t.pointerId)}}function ol(e,t,i,n,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Lo(t),t!==null&&H4(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function KD(e,t,i,n,s){switch(t){case"focusin":return qs=ol(qs,e,t,i,n,s),!0;case"dragenter":return Ks=ol(Ks,e,t,i,n,s),!0;case"mouseover":return Qs=ol(Qs,e,t,i,n,s),!0;case"pointerover":var r=s.pointerId;return oc.set(r,ol(oc.get(r)||null,e,t,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,lc.set(r,ol(lc.get(r)||null,e,t,i,n,s)),!0}return!1}function q4(e){var t=Na(e.target);if(t!==null){var i=Uc(t);if(i!==null){if(t=i.tag,t===13){if(t=gb(i),t!==null){e.blockedOn=t,j8(e.priority,function(){if(i.tag===13){var n=xi();n=wg(n);var s=ko(i,n);s!==null&&yi(s,i,n),cp(i,n)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=p1(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Bm=n,i.target.dispatchEvent(n),Bm=null}else return t=Lo(i),t!==null&&H4(t),e.blockedOn=i,!1;t.shift()}return!0}function bA(e,t,i){sh(e)&&i.delete(t)}function QD(){v1=!1,qs!==null&&sh(qs)&&(qs=null),Ks!==null&&sh(Ks)&&(Ks=null),Qs!==null&&sh(Qs)&&(Qs=null),oc.forEach(bA),lc.forEach(bA)}function wu(e,t){e.blockedOn===t&&(e.blockedOn=null,v1||(v1=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,QD)))}var Su=null;function wA(e){Su!==e&&(Su=e,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,function(){Su===e&&(Su=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(hp(n||i)===null)continue;break}var r=Lo(i);r!==null&&(e.splice(t,3),t-=3,Wm(r,{pending:!0,data:s,method:i.method,action:n},n,s))}}))}function cc(e){function t(l){return wu(l,e)}qs!==null&&wu(qs,e),Ks!==null&&wu(Ks,e),Qs!==null&&wu(Qs,e),oc.forEach(t),lc.forEach(t);for(var i=0;i<ws.length;i++){var n=ws[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ws.length&&(i=ws[0],i.blockedOn===null);)q4(i),i.blockedOn===null&&ws.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var s=i[n],r=i[n+1],a=s[ri]||null;if(typeof r=="function")a||wA(i);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[ri]||null)o=a.formAction;else if(hp(s)!==null)continue}else o=a.action;typeof o=="function"?i[n+1]=o:(i.splice(n,3),n-=3),wA(i)}}}function fp(e){this._internalRoot=e}Yf.prototype.render=fp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));var i=t.current,n=xi();G4(i,n,e,t,null,null)};Yf.prototype.unmount=fp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;G4(e.current,2,null,e,null,null),zf(),t[Oo]=null}};function Yf(e){this._internalRoot=e}Yf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tb();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ws.length&&t!==0&&t<ws[i].priority;i++);ws.splice(i,0,e),i===0&&q4(e)}};var SA=db.version;if(SA!=="19.1.1")throw Error(H(527,SA,"19.1.1"));Be.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=C8(t),e=e!==null?pb(e):null,e=e===null?null:e.stateNode,e};var XD={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Bc=Cu.inject(XD),vi=Cu}catch{}}Nf.createRoot=function(e,t){if(!mb(e))throw Error(H(299));var i=!1,n="",s=z5,r=_5,a=G5,o=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(a=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(o=t.unstable_transitionCallbacks)),t=z4(e,1,!1,null,null,i,n,s,r,a,o,null),e[Oo]=t.current,ap(e),new fp(t)};Nf.hydrateRoot=function(e,t,i){if(!mb(e))throw Error(H(299));var n=!1,s="",r=z5,a=_5,o=G5,l=null,c=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(r=i.onUncaughtError),i.onCaughtError!==void 0&&(a=i.onCaughtError),i.onRecoverableError!==void 0&&(o=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(l=i.unstable_transitionCallbacks),i.formState!==void 0&&(c=i.formState)),t=z4(e,1,!0,t,i??null,n,s,r,a,o,l,c),t.context=_4(null),i=t.current,n=xi(),n=wg(n),s=_s(n),s.callback=null,Gs(i,s,n),i=n,t.current.lanes=i,Pc(t,i),Mn(t),e[Oo]=t.current,ap(e),new Yf(t)};Nf.version="19.1.1";function K4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K4)}catch(e){console.error(e)}}K4(),ub.exports=Nf;var WD=ub.exports;class A1 extends Error{constructor(i,n,s){super(s);j(this,"url");j(this,"status");j(this,"statusText");j(this,"body");j(this,"request");this.name="ApiError",this.url=n.url,this.status=n.status,this.statusText=n.statusText,this.body=n.body,this.request=i}}class ZD extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}}class JD{constructor(t){j(this,"_isResolved");j(this,"_isRejected");j(this,"_isCancelled");j(this,"cancelHandlers");j(this,"promise");j(this,"_resolve");j(this,"_reject");this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this.cancelHandlers=[],this.promise=new Promise((i,n)=>{this._resolve=i,this._reject=n;const s=o=>{this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,this._resolve&&this._resolve(o))},r=o=>{this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,this._reject&&this._reject(o))},a=o=>{this._isResolved||this._isRejected||this._isCancelled||this.cancelHandlers.push(o)};return Object.defineProperty(a,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(a,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(a,"isCancelled",{get:()=>this._isCancelled}),t(s,r,a)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(t,i){return this.promise.then(t,i)}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}cancel(){if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this.cancelHandlers.length)try{for(const t of this.cancelHandlers)t()}catch(t){console.warn("Cancellation threw an error",t);return}this.cancelHandlers.length=0,this._reject&&this._reject(new ZD("Request aborted"))}}get isCancelled(){return this._isCancelled}}class CA{constructor(){j(this,"_fns");this._fns=[]}eject(t){const i=this._fns.indexOf(t);i!==-1&&(this._fns=[...this._fns.slice(0,i),...this._fns.slice(i+1)])}use(t){this._fns=[...this._fns,t]}}const Fi={BASE:"",CREDENTIALS:"include",ENCODE_PATH:void 0,HEADERS:void 0,PASSWORD:void 0,TOKEN:void 0,USERNAME:void 0,VERSION:"0.1.0",WITH_CREDENTIALS:!1,interceptors:{request:new CA,response:new CA}};function Q4(e,t){return function(){return e.apply(t,arguments)}}const{toString:$D}=Object.prototype,{getPrototypeOf:dp}=Object,{iterator:qf,toStringTag:X4}=Symbol,Kf=(e=>t=>{const i=$D.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),nn=e=>(e=e.toLowerCase(),t=>Kf(t)===e),Qf=e=>t=>typeof t===e,{isArray:Go}=Array,uc=Qf("undefined");function eR(e){return e!==null&&!uc(e)&&e.constructor!==null&&!uc(e.constructor)&&ni(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const W4=nn("ArrayBuffer");function tR(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&W4(e.buffer),t}const iR=Qf("string"),ni=Qf("function"),Z4=Qf("number"),Xf=e=>e!==null&&typeof e=="object",nR=e=>e===!0||e===!1,rh=e=>{if(Kf(e)!=="object")return!1;const t=dp(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(X4 in e)&&!(qf in e)},sR=nn("Date"),rR=nn("File"),aR=nn("Blob"),oR=nn("FileList"),lR=e=>Xf(e)&&ni(e.pipe),cR=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ni(e.append)&&((t=Kf(e))==="formdata"||t==="object"&&ni(e.toString)&&e.toString()==="[object FormData]"))},uR=nn("URLSearchParams"),[hR,fR,dR,mR]=["ReadableStream","Request","Response","Headers"].map(nn),gR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xc(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Go(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let o;for(n=0;n<a;n++)o=r[n],t.call(null,e[o],o,e)}}function J4(e,t){t=t.toLowerCase();const i=Object.keys(e);let n=i.length,s;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}const pr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$4=e=>!uc(e)&&e!==pr;function x1(){const{caseless:e}=$4(this)&&this||{},t={},i=(n,s)=>{const r=e&&J4(t,s)||s;rh(t[r])&&rh(n)?t[r]=x1(t[r],n):rh(n)?t[r]=x1({},n):Go(n)?t[r]=n.slice():t[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Xc(arguments[n],i);return t}const pR=(e,t,i,{allOwnKeys:n}={})=>(Xc(t,(s,r)=>{i&&ni(s)?e[r]=Q4(s,i):e[r]=s},{allOwnKeys:n}),e),vR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),AR=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},xR=(e,t,i,n)=>{let s,r,a;const o={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)a=s[r],(!n||n(a,e,t))&&!o[a]&&(t[a]=e[a],o[a]=!0);e=i!==!1&&dp(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},yR=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},bR=e=>{if(!e)return null;if(Go(e))return e;let t=e.length;if(!Z4(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},wR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dp(Uint8Array)),SR=(e,t)=>{const n=(e&&e[qf]).call(e);let s;for(;(s=n.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},CR=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},ER=nn("HTMLFormElement"),TR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,s){return n.toUpperCase()+s}),EA=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),MR=nn("RegExp"),e3=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};Xc(i,(s,r)=>{let a;(a=t(s,r,e))!==!1&&(n[r]=a||s)}),Object.defineProperties(e,n)},DR=e=>{e3(e,(t,i)=>{if(ni(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(ni(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},RR=(e,t)=>{const i={},n=s=>{s.forEach(r=>{i[r]=!0})};return Go(e)?n(e):n(String(e).split(t)),i},NR=()=>{},IR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function FR(e){return!!(e&&ni(e.append)&&e[X4]==="FormData"&&e[qf])}const UR=e=>{const t=new Array(10),i=(n,s)=>{if(Xf(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const r=Go(n)?[]:{};return Xc(n,(a,o)=>{const l=i(a,s+1);!uc(l)&&(r[o]=l)}),t[s]=void 0,r}}return n};return i(e,0)},BR=nn("AsyncFunction"),VR=e=>e&&(Xf(e)||ni(e))&&ni(e.then)&&ni(e.catch),t3=((e,t)=>e?setImmediate:t?((i,n)=>(pr.addEventListener("message",({source:s,data:r})=>{s===pr&&r===i&&n.length&&n.shift()()},!1),s=>{n.push(s),pr.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",ni(pr.postMessage)),PR=typeof queueMicrotask<"u"?queueMicrotask.bind(pr):typeof process<"u"&&process.nextTick||t3,OR=e=>e!=null&&ni(e[qf]),_={isArray:Go,isArrayBuffer:W4,isBuffer:eR,isFormData:cR,isArrayBufferView:tR,isString:iR,isNumber:Z4,isBoolean:nR,isObject:Xf,isPlainObject:rh,isReadableStream:hR,isRequest:fR,isResponse:dR,isHeaders:mR,isUndefined:uc,isDate:sR,isFile:rR,isBlob:aR,isRegExp:MR,isFunction:ni,isStream:lR,isURLSearchParams:uR,isTypedArray:wR,isFileList:oR,forEach:Xc,merge:x1,extend:pR,trim:gR,stripBOM:vR,inherits:AR,toFlatObject:xR,kindOf:Kf,kindOfTest:nn,endsWith:yR,toArray:bR,forEachEntry:SR,matchAll:CR,isHTMLForm:ER,hasOwnProperty:EA,hasOwnProp:EA,reduceDescriptors:e3,freezeMethods:DR,toObjectSet:RR,toCamelCase:TR,noop:NR,toFiniteNumber:IR,findKey:J4,global:pr,isContextDefined:$4,isSpecCompliantForm:FR,toJSONObject:UR,isAsyncFn:BR,isThenable:VR,setImmediate:t3,asap:PR,isIterable:OR};function xe(e,t,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}_.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const i3=xe.prototype,n3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{n3[e]={value:e}});Object.defineProperties(xe,n3);Object.defineProperty(i3,"isAxiosError",{value:!0});xe.from=(e,t,i,n,s,r)=>{const a=Object.create(i3);return _.toFlatObject(e,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),xe.call(a,e.message,t,i,n,s),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const LR=null;function y1(e){return _.isPlainObject(e)||_.isArray(e)}function s3(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function TA(e,t,i){return e?e.concat(t).map(function(s,r){return s=s3(s),!i&&r?"["+s+"]":s}).join(i?".":""):t}function kR(e){return _.isArray(e)&&!e.some(y1)}const jR=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function Wf(e,t,i){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=_.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,A){return!_.isUndefined(A[m])});const n=i.metaTokens,s=i.visitor||u,r=i.dots,a=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(_.isBoolean(g))return g.toString();if(!l&&_.isBlob(g))throw new xe("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,A){let p=g;if(g&&!A&&typeof g=="object"){if(_.endsWith(m,"{}"))m=n?m:m.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&kR(g)||(_.isFileList(g)||_.endsWith(m,"[]"))&&(p=_.toArray(g)))return m=s3(m),p.forEach(function(x,y){!(_.isUndefined(x)||x===null)&&t.append(a===!0?TA([m],y,r):a===null?m:m+"[]",c(x))}),!1}return y1(g)?!0:(t.append(TA(A,m,r),c(g)),!1)}const h=[],f=Object.assign(jR,{defaultVisitor:u,convertValue:c,isVisitable:y1});function d(g,m){if(!_.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),_.forEach(g,function(p,v){(!(_.isUndefined(p)||p===null)&&s.call(t,p,_.isString(v)?v.trim():v,m,f))===!0&&d(p,m?m.concat(v):[v])}),h.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return d(e),t}function MA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function mp(e,t){this._pairs=[],e&&Wf(e,this,t)}const r3=mp.prototype;r3.append=function(t,i){this._pairs.push([t,i])};r3.toString=function(t){const i=t?function(n){return t.call(this,n,MA)}:MA;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function zR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function a3(e,t,i){if(!t)return e;const n=i&&i.encode||zR;_.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(s?r=s(t,i):r=_.isURLSearchParams(t)?t.toString():new mp(t,i).toString(n),r){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class DA{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(n){n!==null&&t(n)})}}const o3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_R=typeof URLSearchParams<"u"?URLSearchParams:mp,GR=typeof FormData<"u"?FormData:null,HR=typeof Blob<"u"?Blob:null,YR={isBrowser:!0,classes:{URLSearchParams:_R,FormData:GR,Blob:HR},protocols:["http","https","file","blob","url","data"]},gp=typeof window<"u"&&typeof document<"u",b1=typeof navigator=="object"&&navigator||void 0,qR=gp&&(!b1||["ReactNative","NativeScript","NS"].indexOf(b1.product)<0),KR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QR=gp&&window.location.href||"http://localhost",XR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gp,hasStandardBrowserEnv:qR,hasStandardBrowserWebWorkerEnv:KR,navigator:b1,origin:QR},Symbol.toStringTag,{value:"Module"})),Bt={...XR,...YR};function WR(e,t){return Wf(e,new Bt.classes.URLSearchParams,Object.assign({visitor:function(i,n,s,r){return Bt.isNode&&_.isBuffer(i)?(this.append(n,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function ZR(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JR(e){const t={},i=Object.keys(e);let n;const s=i.length;let r;for(n=0;n<s;n++)r=i[n],t[r]=e[r];return t}function l3(e){function t(i,n,s,r){let a=i[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=r>=i.length;return a=!a&&_.isArray(s)?s.length:a,l?(_.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!_.isObject(s[a]))&&(s[a]=[]),t(i,n,s[a],r)&&_.isArray(s[a])&&(s[a]=JR(s[a])),!o)}if(_.isFormData(e)&&_.isFunction(e.entries)){const i={};return _.forEachEntry(e,(n,s)=>{t(ZR(n),s,i,0)}),i}return null}function $R(e,t,i){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const Wc={transitional:o3,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",s=n.indexOf("application/json")>-1,r=_.isObject(t);if(r&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return s?JSON.stringify(l3(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return WR(t,this.formSerializer).toString();if((o=_.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Wf(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||s?(i.setContentType("application/json",!1),$R(t)):t}],transformResponse:[function(t){const i=this.transitional||Wc.transitional,n=i&&i.forcedJSONParsing,s=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(n&&!this.responseType||s)){const a=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?xe.from(o,xe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{Wc.headers[e]={}});const eN=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tN=e=>{const t={};let i,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),i=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!i||t[i]&&eN[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},RA=Symbol("internals");function ll(e){return e&&String(e).trim().toLowerCase()}function ah(e){return e===!1||e==null?e:_.isArray(e)?e.map(ah):String(e)}function iN(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const nN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function p0(e,t,i,n,s){if(_.isFunction(n))return n.call(this,t,i);if(s&&(t=i),!!_.isString(t)){if(_.isString(n))return t.indexOf(n)!==-1;if(_.isRegExp(n))return n.test(t)}}function sN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function rN(e,t){const i=_.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(s,r,a){return this[n].call(this,t,s,r,a)},configurable:!0})})}class si{constructor(t){t&&this.set(t)}set(t,i,n){const s=this;function r(o,l,c){const u=ll(l);if(!u)throw new Error("header name must be a non-empty string");const h=_.findKey(s,u);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=ah(o))}const a=(o,l)=>_.forEach(o,(c,u)=>r(c,u,l));if(_.isPlainObject(t)||t instanceof this.constructor)a(t,i);else if(_.isString(t)&&(t=t.trim())&&!nN(t))a(tN(t),i);else if(_.isObject(t)&&_.isIterable(t)){let o={},l,c;for(const u of t){if(!_.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?_.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,i)}else t!=null&&r(i,t,n);return this}get(t,i){if(t=ll(t),t){const n=_.findKey(this,t);if(n){const s=this[n];if(!i)return s;if(i===!0)return iN(s);if(_.isFunction(i))return i.call(this,s,n);if(_.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=ll(t),t){const n=_.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||p0(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let s=!1;function r(a){if(a=ll(a),a){const o=_.findKey(n,a);o&&(!i||p0(n,n[o],o,i))&&(delete n[o],s=!0)}}return _.isArray(t)?t.forEach(r):r(t),s}clear(t){const i=Object.keys(this);let n=i.length,s=!1;for(;n--;){const r=i[n];(!t||p0(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const i=this,n={};return _.forEach(this,(s,r)=>{const a=_.findKey(n,r);if(a){i[a]=ah(s),delete i[r];return}const o=t?sN(r):String(r).trim();o!==r&&delete i[r],i[o]=ah(s),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return _.forEach(this,(n,s)=>{n!=null&&n!==!1&&(i[s]=t&&_.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[RA]=this[RA]={accessors:{}}).accessors,s=this.prototype;function r(a){const o=ll(a);n[o]||(rN(s,a),n[o]=!0)}return _.isArray(t)?t.forEach(r):r(t),this}}si.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(si.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});_.freezeMethods(si);function v0(e,t){const i=this||Wc,n=t||i,s=si.from(n.headers);let r=n.data;return _.forEach(e,function(o){r=o.call(i,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function c3(e){return!!(e&&e.__CANCEL__)}function Ho(e,t,i){xe.call(this,e??"canceled",xe.ERR_CANCELED,t,i),this.name="CanceledError"}_.inherits(Ho,xe,{__CANCEL__:!0});function u3(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new xe("Request failed with status code "+i.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function aN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function oN(e,t){e=e||10;const i=new Array(e),n=new Array(e);let s=0,r=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[r];a||(a=c),i[s]=l,n[s]=c;let h=r,f=0;for(;h!==s;)f+=i[h++],h=h%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),c-a<t)return;const d=u&&c-u;return d?Math.round(f*1e3/d):void 0}}function lN(e,t){let i=0,n=1e3/t,s,r;const a=(c,u=Date.now())=>{i=u,s=null,r&&(clearTimeout(r),r=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-i;h>=n?a(c,u):(s=c,r||(r=setTimeout(()=>{r=null,a(s)},n-h)))},()=>s&&a(s)]}const af=(e,t,i=3)=>{let n=0;const s=oN(50,250);return lN(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,l=a-n,c=s(l),u=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:r,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},i)},NA=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},IA=e=>(...t)=>_.asap(()=>e(...t)),cN=Bt.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,Bt.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(Bt.origin),Bt.navigator&&/(msie|trident)/i.test(Bt.navigator.userAgent)):()=>!0,uN=Bt.hasStandardBrowserEnv?{write(e,t,i,n,s,r){const a=[e+"="+encodeURIComponent(t)];_.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),_.isString(n)&&a.push("path="+n),_.isString(s)&&a.push("domain="+s),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function h3(e,t,i){let n=!hN(t);return e&&(n||i==!1)?fN(e,t):t}const FA=e=>e instanceof si?{...e}:e;function Wr(e,t){t=t||{};const i={};function n(c,u,h,f){return _.isPlainObject(c)&&_.isPlainObject(u)?_.merge.call({caseless:f},c,u):_.isPlainObject(u)?_.merge({},u):_.isArray(u)?u.slice():u}function s(c,u,h,f){if(_.isUndefined(u)){if(!_.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function r(c,u){if(!_.isUndefined(u))return n(void 0,u)}function a(c,u){if(_.isUndefined(u)){if(!_.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function o(c,u,h){if(h in t)return n(c,u);if(h in e)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,h)=>s(FA(c),FA(u),h,!0)};return _.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||s,f=h(e[u],t[u],u);_.isUndefined(f)&&h!==o||(i[u]=f)}),i}const f3=e=>{const t=Wr({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:o}=t;t.headers=a=si.from(a),t.url=a3(h3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(_.isFormData(i)){if(Bt.hasStandardBrowserEnv||Bt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Bt.hasStandardBrowserEnv&&(n&&_.isFunction(n)&&(n=n(t)),n||n!==!1&&cN(t.url))){const c=s&&r&&uN.read(r);c&&a.set(s,c)}return t},dN=typeof XMLHttpRequest<"u",mN=dN&&function(e){return new Promise(function(i,n){const s=f3(e);let r=s.data;const a=si.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=s,u,h,f,d,g;function m(){d&&d(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function p(){if(!A)return;const x=si.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:x,config:e,request:A};u3(function(w){i(w),m()},function(w){n(w),m()},b),A=null}"onloadend"in A?A.onloadend=p:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(p)},A.onabort=function(){A&&(n(new xe("Request aborted",xe.ECONNABORTED,e,A)),A=null)},A.onerror=function(){n(new xe("Network Error",xe.ERR_NETWORK,e,A)),A=null},A.ontimeout=function(){let y=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||o3;s.timeoutErrorMessage&&(y=s.timeoutErrorMessage),n(new xe(y,b.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,A)),A=null},r===void 0&&a.setContentType(null),"setRequestHeader"in A&&_.forEach(a.toJSON(),function(y,b){A.setRequestHeader(b,y)}),_.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),o&&o!=="json"&&(A.responseType=s.responseType),c&&([f,g]=af(c,!0),A.addEventListener("progress",f)),l&&A.upload&&([h,d]=af(l),A.upload.addEventListener("progress",h),A.upload.addEventListener("loadend",d)),(s.cancelToken||s.signal)&&(u=x=>{A&&(n(!x||x.type?new Ho(null,e,A):x),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const v=aN(s.url);if(v&&Bt.protocols.indexOf(v)===-1){n(new xe("Unsupported protocol "+v+":",xe.ERR_BAD_REQUEST,e));return}A.send(r||null)})},gN=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let n=new AbortController,s;const r=function(c){if(!s){s=!0,o();const u=c instanceof Error?c:this.reason;n.abort(u instanceof xe?u:new Ho(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,r(new xe(`timeout ${t} of ms exceeded`,xe.ETIMEDOUT))},t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),e=null)};e.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>_.asap(o),l}},pN=function*(e,t){let i=e.byteLength;if(i<t){yield e;return}let n=0,s;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},vN=async function*(e,t){for await(const i of AN(e))yield*pN(i,t)},AN=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:i,value:n}=await t.read();if(i)break;yield n}}finally{await t.cancel()}},UA=(e,t,i,n)=>{const s=vN(e,t);let r=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){o(),l.close();return}let h=u.byteLength;if(i){let f=r+=h;i(f)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},Zf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",d3=Zf&&typeof ReadableStream=="function",xN=Zf&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),m3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},yN=d3&&m3(()=>{let e=!1;const t=new Request(Bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),BA=64*1024,w1=d3&&m3(()=>_.isReadableStream(new Response("").body)),of={stream:w1&&(e=>e.body)};Zf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!of[t]&&(of[t]=_.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new xe(`Response type '${t}' is not supported`,xe.ERR_NOT_SUPPORT,n)})})})(new Response);const bN=async e=>{if(e==null)return 0;if(_.isBlob(e))return e.size;if(_.isSpecCompliantForm(e))return(await new Request(Bt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(_.isArrayBufferView(e)||_.isArrayBuffer(e))return e.byteLength;if(_.isURLSearchParams(e)&&(e=e+""),_.isString(e))return(await xN(e)).byteLength},wN=async(e,t)=>{const i=_.toFiniteNumber(e.getContentLength());return i??bN(t)},SN=Zf&&(async e=>{let{url:t,method:i,data:n,signal:s,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=f3(e);c=c?(c+"").toLowerCase():"text";let d=gN([s,r&&r.toAbortSignal()],a),g;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let A;try{if(l&&yN&&i!=="get"&&i!=="head"&&(A=await wN(u,n))!==0){let b=new Request(t,{method:"POST",body:n,duplex:"half"}),E;if(_.isFormData(n)&&(E=b.headers.get("content-type"))&&u.setContentType(E),b.body){const[w,S]=NA(A,af(IA(l)));n=UA(b.body,BA,w,S)}}_.isString(h)||(h=h?"include":"omit");const p="credentials"in Request.prototype;g=new Request(t,{...f,signal:d,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:p?h:void 0});let v=await fetch(g,f);const x=w1&&(c==="stream"||c==="response");if(w1&&(o||x&&m)){const b={};["status","statusText","headers"].forEach(M=>{b[M]=v[M]});const E=_.toFiniteNumber(v.headers.get("content-length")),[w,S]=o&&NA(E,af(IA(o),!0))||[];v=new Response(UA(v.body,BA,w,()=>{S&&S(),m&&m()}),b)}c=c||"text";let y=await of[_.findKey(of,c)||"text"](v,e);return!x&&m&&m(),await new Promise((b,E)=>{u3(b,E,{data:y,headers:si.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:g})})}catch(p){throw m&&m(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,e,g),{cause:p.cause||p}):xe.from(p,p&&p.code,e,g)}}),S1={http:LR,xhr:mN,fetch:SN};_.forEach(S1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const VA=e=>`- ${e}`,CN=e=>_.isFunction(e)||e===null||e===!1,g3={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let i,n;const s={};for(let r=0;r<t;r++){i=e[r];let a;if(n=i,!CN(i)&&(n=S1[(a=String(i)).toLowerCase()],n===void 0))throw new xe(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+r]=n}if(!n){const r=Object.entries(s).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?r.length>1?`since :
`+r.map(VA).join(`
`):" "+VA(r[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:S1};function A0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ho(null,e)}function PA(e){return A0(e),e.headers=si.from(e.headers),e.data=v0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),g3.getAdapter(e.adapter||Wc.adapter)(e).then(function(n){return A0(e),n.data=v0.call(e,e.transformResponse,n),n.headers=si.from(n.headers),n},function(n){return c3(n)||(A0(e),n&&n.response&&(n.response.data=v0.call(e,e.transformResponse,n.response),n.response.headers=si.from(n.response.headers))),Promise.reject(n)})}const p3="1.10.0",Jf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jf[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const OA={};Jf.transitional=function(t,i,n){function s(r,a){return"[Axios v"+p3+"] Transitional option '"+r+"'"+a+(n?". "+n:"")}return(r,a,o)=>{if(t===!1)throw new xe(s(a," has been removed"+(i?" in "+i:"")),xe.ERR_DEPRECATED);return i&&!OA[a]&&(OA[a]=!0,console.warn(s(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(r,a,o):!0}};Jf.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function EN(e,t,i){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const r=n[s],a=t[r];if(a){const o=e[r],l=o===void 0||a(o,r,e);if(l!==!0)throw new xe("option "+r+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new xe("Unknown option "+r,xe.ERR_BAD_OPTION)}}const oh={assertOptions:EN,validators:Jf},an=oh.validators;class kr{constructor(t){this.defaults=t||{},this.interceptors={request:new DA,response:new DA}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Wr(this.defaults,i);const{transitional:n,paramsSerializer:s,headers:r}=i;n!==void 0&&oh.assertOptions(n,{silentJSONParsing:an.transitional(an.boolean),forcedJSONParsing:an.transitional(an.boolean),clarifyTimeoutError:an.transitional(an.boolean)},!1),s!=null&&(_.isFunction(s)?i.paramsSerializer={serialize:s}:oh.assertOptions(s,{encode:an.function,serialize:an.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),oh.assertOptions(i,{baseUrl:an.spelling("baseURL"),withXsrfToken:an.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let a=r&&_.merge(r.common,r[i.method]);r&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),i.headers=si.concat(a,r);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!l){const g=[PA.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,c),f=g.length,u=Promise.resolve(i);h<f;)u=u.then(g[h++],g[h++]);return u}f=o.length;let d=i;for(h=0;h<f;){const g=o[h++],m=o[h++];try{d=g(d)}catch(A){m.call(this,A);break}}try{u=PA.call(this,d)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=Wr(this.defaults,t);const i=h3(t.baseURL,t.url,t.allowAbsoluteUrls);return a3(i,t.params,t.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(t){kr.prototype[t]=function(i,n){return this.request(Wr(n||{},{method:t,url:i,data:(n||{}).data}))}});_.forEach(["post","put","patch"],function(t){function i(n){return function(r,a,o){return this.request(Wr(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}kr.prototype[t]=i(),kr.prototype[t+"Form"]=i(!0)});class pp{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const a=new Promise(o=>{n.subscribe(o),r=o}).then(s);return a.cancel=function(){n.unsubscribe(r)},a},t(function(r,a,o){n.reason||(n.reason=new Ho(r,a,o),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const t=new AbortController,i=n=>{t.abort(n)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new pp(function(s){t=s}),cancel:t}}}function TN(e){return function(i){return e.apply(null,i)}}function MN(e){return _.isObject(e)&&e.isAxiosError===!0}const C1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(C1).forEach(([e,t])=>{C1[t]=e});function v3(e){const t=new kr(e),i=Q4(kr.prototype.request,t);return _.extend(i,kr.prototype,t,{allOwnKeys:!0}),_.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return v3(Wr(e,s))},i}const ht=v3(Wc);ht.Axios=kr;ht.CanceledError=Ho;ht.CancelToken=pp;ht.isCancel=c3;ht.VERSION=p3;ht.toFormData=Wf;ht.AxiosError=xe;ht.Cancel=ht.CanceledError;ht.all=function(t){return Promise.all(t)};ht.spread=TN;ht.isAxiosError=MN;ht.mergeConfig=Wr;ht.AxiosHeaders=si;ht.formToJSON=e=>l3(_.isHTMLForm(e)?new FormData(e):e);ht.getAdapter=g3.getAdapter;ht.HttpStatusCode=C1;ht.default=ht;const $f=e=>typeof e=="string",x0=e=>$f(e)&&e!=="",A3=e=>e instanceof Blob,DN=e=>e instanceof FormData,LA=e=>e>=200&&e<300,RN=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},NN=e=>{const t=[],i=(s,r)=>{t.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(r))}`)},n=(s,r)=>{r!=null&&(r instanceof Date?i(s,r.toISOString()):Array.isArray(r)?r.forEach(a=>n(s,a)):typeof r=="object"?Object.entries(r).forEach(([a,o])=>n(`${s}[${a}]`,o)):i(s,r))};return Object.entries(e).forEach(([s,r])=>n(s,r)),t.length?`?${t.join("&")}`:""},IN=(e,t)=>{const i=encodeURI,n=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(r,a)=>{var o;return(o=t.path)!=null&&o.hasOwnProperty(a)?i(String(t.path[a])):r}),s=e.BASE+n;return t.query?s+NN(t.query):s},FN=e=>{if(e.formData){const t=new FormData,i=(n,s)=>{$f(s)||A3(s)?t.append(n,s):t.append(n,JSON.stringify(s))};return Object.entries(e.formData).filter(([,n])=>n!=null).forEach(([n,s])=>{Array.isArray(s)?s.forEach(r=>i(n,r)):i(n,s)}),t}},Eu=async(e,t)=>typeof t=="function"?t(e):t,UN=async(e,t)=>{const[i,n,s,r]=await Promise.all([Eu(t,e.TOKEN),Eu(t,e.USERNAME),Eu(t,e.PASSWORD),Eu(t,e.HEADERS)]),a=Object.entries({Accept:"application/json",...r,...t.headers}).filter(([,o])=>o!=null).reduce((o,[l,c])=>({...o,[l]:String(c)}),{});if(x0(i)&&(a.Authorization=`Bearer ${i}`),x0(n)&&x0(s)){const o=RN(`${n}:${s}`);a.Authorization=`Basic ${o}`}return t.body!==void 0?t.mediaType?a["Content-Type"]=t.mediaType:A3(t.body)?a["Content-Type"]=t.body.type||"application/octet-stream":$f(t.body)?a["Content-Type"]="text/plain":DN(t.body)||(a["Content-Type"]="application/json"):t.formData!==void 0&&t.mediaType&&(a["Content-Type"]=t.mediaType),a},BN=e=>{if(e.body)return e.body},VN=async(e,t,i,n,s,r,a,o)=>{const l=new AbortController;let c={data:n??s,headers:r,method:t.method,signal:l.signal,url:i,withCredentials:e.WITH_CREDENTIALS};a(()=>l.abort());for(const u of e.interceptors.request._fns)c=await u(c);try{return await o.request(c)}catch(u){const h=u;if(h.response)return h.response;throw u}},PN=(e,t)=>{if(t){const i=e.headers[t];if($f(i))return i}},ON=e=>{if(e.status!==204)return e.data},LN=(e,t)=>{const n={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"Im a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",...e.errors}[t.status];if(n)throw new A1(e,t,n);if(!t.ok){const s=t.status??"unknown",r=t.statusText??"unknown",a=(()=>{try{return JSON.stringify(t.body,null,2)}catch{return}})();throw new A1(e,t,`Generic Error: status: ${s}; status text: ${r}; body: ${a}`)}},mn=(e,t,i=ht)=>new JD(async(n,s,r)=>{try{const a=IN(e,t),o=FN(t),l=BN(t),c=await UN(e,t);if(!r.isCancelled){let u=await VN(e,t,a,l,o,c,r,i);for(const m of e.interceptors.response._fns)u=await m(u);const h=ON(u),f=PN(u,t.responseHeader);let d=h;t.responseTransformer&&LA(u.status)&&(d=await t.responseTransformer(h));const g={url:a,ok:LA(u.status),status:u.status,statusText:u.statusText,body:f??d};LN(t,g),n(g.body)}}catch(a){s(a)}});class Zc{static readScenes(t={}){return mn(Fi,{method:"GET",url:"/api/v1/scenes/",query:{status:t.status},errors:{422:"Validation Error"}})}static createScene(t){return mn(Fi,{method:"POST",url:"/api/v1/scenes/",body:t.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteAllScenes(){return mn(Fi,{method:"DELETE",url:"/api/v1/scenes/"})}static readScene(t){return mn(Fi,{method:"GET",url:"/api/v1/scenes/{id}",path:{id:t.id},errors:{422:"Validation Error"}})}static createAndProcessScene(t){return mn(Fi,{method:"PUT",url:"/api/v1/scenes/{id}",path:{id:t.id},body:t.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteScene(t){return mn(Fi,{method:"DELETE",url:"/api/v1/scenes/{id}",path:{id:t.id},errors:{422:"Validation Error"}})}}class kN{static listUploadedFiles(){return mn(Fi,{method:"GET",url:"/api/v1/upload/files"})}static uploadFiles(t){return mn(Fi,{method:"POST",url:"/api/v1/upload/files",formData:t.formData,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static createSceneWithUploadedFiles(t){return mn(Fi,{method:"POST",url:"/api/v1/upload/scene-with-files",formData:t.formData,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static deleteUploadedFile(t){return mn(Fi,{method:"DELETE",url:"/api/v1/upload/files/{filename}",path:{filename:t.filename},errors:{422:"Validation Error"}})}}const jN="modulepreload",zN=function(e){return"/"+e},kA={},y0=function(t,i,n){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(i.map(l=>{if(l=zN(l),l in kA)return;kA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":jN,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};function jA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function x3(...e){return t=>{let i=!1;const n=e.map(s=>{const r=jA(s,t);return!i&&typeof r=="function"&&(i=!0),r});if(i)return()=>{for(let s=0;s<n.length;s++){const r=n[s];typeof r=="function"?r():jA(e[s],null)}}}}function Me(...e){return N.useCallback(x3(...e),e)}function Io(e){const t=_N(e),i=N.forwardRef((n,s)=>{const{children:r,...a}=n,o=N.Children.toArray(r),l=o.find(HN);if(l){const c=l.props.children,u=o.map(h=>h===l?N.Children.count(c)>1?N.Children.only(null):N.isValidElement(c)?c.props.children:null:h);return C.jsx(t,{...a,ref:s,children:N.isValidElement(c)?N.cloneElement(c,void 0,u):null})}return C.jsx(t,{...a,ref:s,children:r})});return i.displayName=`${e}.Slot`,i}var y3=Io("Slot");function _N(e){const t=N.forwardRef((i,n)=>{const{children:s,...r}=i;if(N.isValidElement(s)){const a=qN(s),o=YN(r,s.props);return s.type!==N.Fragment&&(o.ref=n?x3(n,a):a),N.cloneElement(s,o)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var b3=Symbol("radix.slottable");function GN(e){const t=({children:i})=>C.jsx(C.Fragment,{children:i});return t.displayName=`${e}.Slottable`,t.__radixId=b3,t}function HN(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===b3}function YN(e,t){const i={...t};for(const n in t){const s=e[n],r=t[n];/^on[A-Z]/.test(n)?s&&r?i[n]=(...o)=>{const l=r(...o);return s(...o),l}:s&&(i[n]=s):n==="style"?i[n]={...s,...r}:n==="className"&&(i[n]=[s,r].filter(Boolean).join(" "))}return{...e,...i}}function qN(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function w3(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=w3(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function S3(){for(var e,t,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=w3(e))&&(n&&(n+=" "),n+=t);return n}const zA=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_A=S3,vp=(e,t)=>i=>{var n;if((t==null?void 0:t.variants)==null)return _A(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:s,defaultVariants:r}=t,a=Object.keys(s).map(c=>{const u=i==null?void 0:i[c],h=r==null?void 0:r[c];if(u===null)return null;const f=zA(u)||zA(h);return s[c][f]}),o=i&&Object.entries(i).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:f,...d}=u;return Object.entries(d).every(g=>{let[m,A]=g;return Array.isArray(A)?A.includes({...r,...o}[m]):{...r,...o}[m]===A})?[...c,h,f]:c},[]);return _A(e,a,l,i==null?void 0:i.class,i==null?void 0:i.className)},Ap="-",KN=e=>{const t=XN(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const o=a.split(Ap);return o[0]===""&&o.length!==1&&o.shift(),C3(o,t)||QN(a)},getConflictingClassGroupIds:(a,o)=>{const l=i[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},C3=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const i=e[0],n=t.nextPart.get(i),s=n?C3(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const r=e.join(Ap);return(a=t.validators.find(({validator:o})=>o(r)))==null?void 0:a.classGroupId},GA=/^\[(.+)\]$/,QN=e=>{if(GA.test(e)){const t=GA.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},XN=e=>{const{theme:t,classGroups:i}=e,n={nextPart:new Map,validators:[]};for(const s in i)E1(i[s],n,s,t);return n},E1=(e,t,i,n)=>{e.forEach(s=>{if(typeof s=="string"){const r=s===""?t:HA(t,s);r.classGroupId=i;return}if(typeof s=="function"){if(WN(s)){E1(s(n),t,i,n);return}t.validators.push({validator:s,classGroupId:i});return}Object.entries(s).forEach(([r,a])=>{E1(a,HA(t,r),i,n)})})},HA=(e,t)=>{let i=e;return t.split(Ap).forEach(n=>{i.nextPart.has(n)||i.nextPart.set(n,{nextPart:new Map,validators:[]}),i=i.nextPart.get(n)}),i},WN=e=>e.isThemeGetter,ZN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,n=new Map;const s=(r,a)=>{i.set(r,a),t++,t>e&&(t=0,n=i,i=new Map)};return{get(r){let a=i.get(r);if(a!==void 0)return a;if((a=n.get(r))!==void 0)return s(r,a),a},set(r,a){i.has(r)?i.set(r,a):s(r,a)}}},T1="!",M1=":",JN=M1.length,$N=e=>{const{prefix:t,experimentalParseClassName:i}=e;let n=s=>{const r=[];let a=0,o=0,l=0,c;for(let g=0;g<s.length;g++){let m=s[g];if(a===0&&o===0){if(m===M1){r.push(s.slice(l,g)),l=g+JN;continue}if(m==="/"){c=g;continue}}m==="["?a++:m==="]"?a--:m==="("?o++:m===")"&&o--}const u=r.length===0?s:s.substring(l),h=e7(u),f=h!==u,d=c&&c>l?c-l:void 0;return{modifiers:r,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:d}};if(t){const s=t+M1,r=n;n=a=>a.startsWith(s)?r(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(i){const s=n;n=r=>i({className:r,parseClassName:s})}return n},e7=e=>e.endsWith(T1)?e.substring(0,e.length-1):e.startsWith(T1)?e.substring(1):e,t7=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let r=[];return n.forEach(a=>{a[0]==="["||t[a]?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s}},i7=e=>({cache:ZN(e.cacheSize),parseClassName:$N(e),sortModifiers:t7(e),...KN(e)}),n7=/\s+/,s7=(e,t)=>{const{parseClassName:i,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:r}=t,a=[],o=e.trim().split(n7);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:h,modifiers:f,hasImportantModifier:d,baseClassName:g,maybePostfixModifierPosition:m}=i(u);if(h){l=u+(l.length>0?" "+l:l);continue}let A=!!m,p=n(A?g.substring(0,m):g);if(!p){if(!A){l=u+(l.length>0?" "+l:l);continue}if(p=n(g),!p){l=u+(l.length>0?" "+l:l);continue}A=!1}const v=r(f).join(":"),x=d?v+T1:v,y=x+p;if(a.includes(y))continue;a.push(y);const b=s(p,A);for(let E=0;E<b.length;++E){const w=b[E];a.push(x+w)}l=u+(l.length>0?" "+l:l)}return l};function r7(){let e=0,t,i,n="";for(;e<arguments.length;)(t=arguments[e++])&&(i=E3(t))&&(n&&(n+=" "),n+=i);return n}const E3=e=>{if(typeof e=="string")return e;let t,i="";for(let n=0;n<e.length;n++)e[n]&&(t=E3(e[n]))&&(i&&(i+=" "),i+=t);return i};function a7(e,...t){let i,n,s,r=a;function a(l){const c=t.reduce((u,h)=>h(u),e());return i=i7(c),n=i.cache.get,s=i.cache.set,r=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=s7(l,i);return s(l,u),u}return function(){return r(r7.apply(null,arguments))}}const ft=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},T3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,M3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,o7=/^\d+\/\d+$/,l7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,c7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,h7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ha=e=>o7.test(e),be=e=>!!e&&!Number.isNaN(Number(e)),ls=e=>!!e&&Number.isInteger(Number(e)),b0=e=>e.endsWith("%")&&be(e.slice(0,-1)),Vn=e=>l7.test(e),d7=()=>!0,m7=e=>c7.test(e)&&!u7.test(e),D3=()=>!1,g7=e=>h7.test(e),p7=e=>f7.test(e),v7=e=>!se(e)&&!re(e),A7=e=>Yo(e,I3,D3),se=e=>T3.test(e),cr=e=>Yo(e,F3,m7),w0=e=>Yo(e,S7,be),YA=e=>Yo(e,R3,D3),x7=e=>Yo(e,N3,p7),Tu=e=>Yo(e,U3,g7),re=e=>M3.test(e),cl=e=>qo(e,F3),y7=e=>qo(e,C7),qA=e=>qo(e,R3),b7=e=>qo(e,I3),w7=e=>qo(e,N3),Mu=e=>qo(e,U3,!0),Yo=(e,t,i)=>{const n=T3.exec(e);return n?n[1]?t(n[1]):i(n[2]):!1},qo=(e,t,i=!1)=>{const n=M3.exec(e);return n?n[1]?t(n[1]):i:!1},R3=e=>e==="position"||e==="percentage",N3=e=>e==="image"||e==="url",I3=e=>e==="length"||e==="size"||e==="bg-size",F3=e=>e==="length",S7=e=>e==="number",C7=e=>e==="family-name",U3=e=>e==="shadow",E7=()=>{const e=ft("color"),t=ft("font"),i=ft("text"),n=ft("font-weight"),s=ft("tracking"),r=ft("leading"),a=ft("breakpoint"),o=ft("container"),l=ft("spacing"),c=ft("radius"),u=ft("shadow"),h=ft("inset-shadow"),f=ft("text-shadow"),d=ft("drop-shadow"),g=ft("blur"),m=ft("perspective"),A=ft("aspect"),p=ft("ease"),v=ft("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...y(),re,se],E=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],S=()=>[re,se,l],M=()=>[ha,"full","auto",...S()],T=()=>[ls,"none","subgrid",re,se],R=()=>["auto",{span:["full",ls,re,se]},ls,re,se],D=()=>[ls,"auto",re,se],I=()=>["auto","min","max","fr",re,se],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...S()],k=()=>[ha,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],F=()=>[e,re,se],z=()=>[...y(),qA,YA,{position:[re,se]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",b7,A7,{size:[re,se]}],le=()=>[b0,cl,cr],oe=()=>["","none","full",c,re,se],ne=()=>["",be,cl,cr],ie=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[be,b0,qA,YA],te=()=>["","none",g,re,se],he=()=>["none",be,re,se],Z=()=>["none",be,re,se],W=()=>[be,re,se],ee=()=>[ha,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vn],breakpoint:[Vn],color:[d7],container:[Vn],"drop-shadow":[Vn],ease:["in","out","in-out"],font:[v7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vn],shadow:[Vn],spacing:["px",be],text:[Vn],"text-shadow":[Vn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ha,se,re,A]}],container:["container"],columns:[{columns:[be,se,re,o]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[ls,"auto",re,se]}],basis:[{basis:[ha,"full","auto",o,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[be,ha,"auto","initial","none",se]}],grow:[{grow:["",be,re,se]}],shrink:[{shrink:["",be,re,se]}],order:[{order:[ls,"first","last","none",re,se]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:k()}],w:[{w:[o,"screen",...k()]}],"min-w":[{"min-w":[o,"screen","none",...k()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...k()]}],h:[{h:["screen","lh",...k()]}],"min-h":[{"min-h":["screen","lh","none",...k()]}],"max-h":[{"max-h":["screen","lh",...k()]}],"font-size":[{text:["base",i,cl,cr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,re,w0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",b0,se]}],"font-family":[{font:[y7,se,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,re,se]}],"line-clamp":[{"line-clamp":[be,"none",re,w0]}],leading:[{leading:[r,...S()]}],"list-image":[{"list-image":["none",re,se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",re,se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[be,"from-font","auto",re,cr]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[be,"auto",re,se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re,se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re,se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ls,re,se],radial:["",re,se],conic:[ls,re,se]},w7,x7]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ie(),"hidden","none"]}],"divide-style":[{divide:[...ie(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[be,re,se]}],"outline-w":[{outline:["",be,cl,cr]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,Mu,Tu]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,Mu,Tu]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[be,cr]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",f,Mu,Tu]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[be,re,se]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[be]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[re,se]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":y()}],"mask-image-conic-pos":[{"mask-conic":[be]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",re,se]}],filter:[{filter:["","none",re,se]}],blur:[{blur:te()}],brightness:[{brightness:[be,re,se]}],contrast:[{contrast:[be,re,se]}],"drop-shadow":[{"drop-shadow":["","none",d,Mu,Tu]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",be,re,se]}],"hue-rotate":[{"hue-rotate":[be,re,se]}],invert:[{invert:["",be,re,se]}],saturate:[{saturate:[be,re,se]}],sepia:[{sepia:["",be,re,se]}],"backdrop-filter":[{"backdrop-filter":["","none",re,se]}],"backdrop-blur":[{"backdrop-blur":te()}],"backdrop-brightness":[{"backdrop-brightness":[be,re,se]}],"backdrop-contrast":[{"backdrop-contrast":[be,re,se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",be,re,se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[be,re,se]}],"backdrop-invert":[{"backdrop-invert":["",be,re,se]}],"backdrop-opacity":[{"backdrop-opacity":[be,re,se]}],"backdrop-saturate":[{"backdrop-saturate":[be,re,se]}],"backdrop-sepia":[{"backdrop-sepia":["",be,re,se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",re,se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[be,"initial",re,se]}],ease:[{ease:["linear","initial",p,re,se]}],delay:[{delay:[be,re,se]}],animate:[{animate:["none",v,re,se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,re,se]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:Z()}],"scale-x":[{"scale-x":Z()}],"scale-y":[{"scale-y":Z()}],"scale-z":[{"scale-z":Z()}],"scale-3d":["scale-3d"],skew:[{skew:W()}],"skew-x":[{"skew-x":W()}],"skew-y":[{"skew-y":W()}],transform:[{transform:[re,se,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ee()}],"translate-x":[{"translate-x":ee()}],"translate-y":[{"translate-y":ee()}],"translate-z":[{"translate-z":ee()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re,se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re,se]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[be,cl,cr,w0]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},T7=a7(E7);function Te(...e){return T7(S3(e))}const M7=vp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Yt({className:e,variant:t,size:i,asChild:n=!1,...s}){const r=n?y3:"button";return C.jsx(r,{"data-slot":"button",className:Te(M7({variant:t,size:i,className:e})),...s})}const D7=()=>C.jsxs("div",{style:{alignItems:"center",flexDirection:"column",zIndex:"1",justifySelf:"center"},className:"w-full h-full",children:["404 The page you are looking for was not found.",C.jsx(Ag,{to:"/",children:C.jsx(Yt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",children:"Go Back"})})]}),R7=()=>null,xp=c8({component:()=>C.jsxs(C.Fragment,{children:[C.jsx(cb,{}),C.jsx(N.Suspense,{children:C.jsx(R7,{})})]}),notFoundComponent:()=>C.jsx(D7,{})});/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,n)=>n?n.toUpperCase():i.toLowerCase()),KA=e=>{const t=I7(e);return t.charAt(0).toUpperCase()+t.slice(1)},B3=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim(),F7=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:s="",children:r,iconNode:a,...o},l)=>N.createElement("svg",{ref:l,...U7,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:B3("lucide",s),...!r&&!F7(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>N.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const i=N.forwardRef(({className:n,...s},r)=>N.createElement(B7,{ref:r,iconNode:t,className:B3(`lucide-${N7(KA(e))}`,`lucide-${e}`,n),...s}));return i.displayName=KA(e),i};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],P7=Xe("box",V7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V3=Xe("check",O7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yp=Xe("chevron-down",L7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],P3=Xe("chevron-up",k7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],z7=Xe("circle-check-big",j7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],G7=Xe("circle-check",_7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Y7=Xe("circle-x",H7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],K7=Xe("circle",q7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],S0=Xe("clock",Q7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],D1=Xe("download",X7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Z7=Xe("eye",W7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],$7=Xe("file",J7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],tI=Xe("grid-3x3",eI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],nI=Xe("hourglass",iI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],rI=Xe("image",sI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oI=Xe("info",aI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],cI=Xe("panel-left",lI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],hI=Xe("panel-right",uI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dI=Xe("plus",fI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],gI=Xe("refresh-ccw",mI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],C0=Xe("search",pI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],AI=Xe("send",vI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O3=Xe("trash-2",xI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],QA=Xe("upload",yI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L3=Xe("x",bI);function ue(e,t,{checkForDefaultPrevented:i=!0}={}){return function(s){if(e==null||e(s),i===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function wI(e,t){const i=N.createContext(t),n=r=>{const{children:a,...o}=r,l=N.useMemo(()=>o,Object.values(o));return C.jsx(i.Provider,{value:l,children:a})};n.displayName=e+"Provider";function s(r){const a=N.useContext(i);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}return[n,s]}function Si(e,t=[]){let i=[];function n(r,a){const o=N.createContext(a),l=i.length;i=[...i,a];const c=h=>{var p;const{scope:f,children:d,...g}=h,m=((p=f==null?void 0:f[e])==null?void 0:p[l])||o,A=N.useMemo(()=>g,Object.values(g));return C.jsx(m.Provider,{value:A,children:d})};c.displayName=r+"Provider";function u(h,f){var m;const d=((m=f==null?void 0:f[e])==null?void 0:m[l])||o,g=N.useContext(d);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${r}\``)}return[c,u]}const s=()=>{const r=i.map(a=>N.createContext(a));return function(o){const l=(o==null?void 0:o[e])||r;return N.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return s.scopeName=e,[n,SI(s,...t)]}function SI(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const h=l(r)[`__scope${c}`];return{...o,...h}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return i.scopeName=t.scopeName,i}function k3(e){const t=e+"CollectionProvider",[i,n]=Si(t),[s,r]=i(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:A,children:p}=m,v=Je.useRef(null),x=Je.useRef(new Map).current;return C.jsx(s,{scope:A,itemMap:x,collectionRef:v,children:p})};a.displayName=t;const o=e+"CollectionSlot",l=Io(o),c=Je.forwardRef((m,A)=>{const{scope:p,children:v}=m,x=r(o,p),y=Me(A,x.collectionRef);return C.jsx(l,{ref:y,children:v})});c.displayName=o;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Io(u),d=Je.forwardRef((m,A)=>{const{scope:p,children:v,...x}=m,y=Je.useRef(null),b=Me(A,y),E=r(u,p);return Je.useEffect(()=>(E.itemMap.set(y,{ref:y,...x}),()=>void E.itemMap.delete(y))),C.jsx(f,{[h]:"",ref:b,children:v})});d.displayName=u;function g(m){const A=r(e+"CollectionConsumer",m);return Je.useCallback(()=>{const v=A.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(A.itemMap.values()).sort((E,w)=>x.indexOf(E.ref.current)-x.indexOf(w.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},g,n]}var Et=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},CI=Gy[" useId ".trim().toString()]||(()=>{}),EI=0;function wn(e){const[t,i]=N.useState(CI());return Et(()=>{e||i(n=>n??String(EI++))},[e]),e||(t?`radix-${t}`:"")}var TI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=TI.reduce((e,t)=>{const i=Io(`Primitive.${t}`),n=N.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?i:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function MI(e,t){e&&na.flushSync(()=>e.dispatchEvent(t))}function Gt(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...i)=>{var n;return(n=t.current)==null?void 0:n.call(t,...i)},[])}var DI=Gy[" useInsertionEffect ".trim().toString()]||Et;function ji({prop:e,defaultProp:t,onChange:i=()=>{},caller:n}){const[s,r,a]=RI({defaultProp:t,onChange:i}),o=e!==void 0,l=o?e:s;{const u=N.useRef(e!==void 0);N.useEffect(()=>{const h=u.current;h!==o&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const c=N.useCallback(u=>{var h;if(o){const f=NI(u)?u(e):u;f!==e&&((h=a.current)==null||h.call(a,f))}else r(u)},[o,e,r,a]);return[l,c]}function RI({defaultProp:e,onChange:t}){const[i,n]=N.useState(e),s=N.useRef(i),r=N.useRef(t);return DI(()=>{r.current=t},[t]),N.useEffect(()=>{var a;s.current!==i&&((a=r.current)==null||a.call(r,i),s.current=i)},[i,s]),[i,n,r]}function NI(e){return typeof e=="function"}var II=N.createContext(void 0);function Ko(e){const t=N.useContext(II);return e||t||"ltr"}var E0="rovingFocusGroup.onEntryFocus",FI={bubbles:!1,cancelable:!0},Jc="RovingFocusGroup",[R1,j3,UI]=k3(Jc),[BI,Qo]=Si(Jc,[UI]),[VI,PI]=BI(Jc),z3=N.forwardRef((e,t)=>C.jsx(R1.Provider,{scope:e.__scopeRovingFocusGroup,children:C.jsx(R1.Slot,{scope:e.__scopeRovingFocusGroup,children:C.jsx(OI,{...e,ref:t})})}));z3.displayName=Jc;var OI=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:s=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=e,f=N.useRef(null),d=Me(t,f),g=Ko(r),[m,A]=ji({prop:a,defaultProp:o??null,onChange:l,caller:Jc}),[p,v]=N.useState(!1),x=Gt(c),y=j3(i),b=N.useRef(!1),[E,w]=N.useState(0);return N.useEffect(()=>{const S=f.current;if(S)return S.addEventListener(E0,x),()=>S.removeEventListener(E0,x)},[x]),C.jsx(VI,{scope:i,orientation:n,dir:g,loop:s,currentTabStopId:m,onItemFocus:N.useCallback(S=>A(S),[A]),onItemShiftTab:N.useCallback(()=>v(!0),[]),onFocusableItemAdd:N.useCallback(()=>w(S=>S+1),[]),onFocusableItemRemove:N.useCallback(()=>w(S=>S-1),[]),children:C.jsx(fe.div,{tabIndex:p||E===0?-1:0,"data-orientation":n,...h,ref:d,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{b.current=!0}),onFocus:ue(e.onFocus,S=>{const M=!b.current;if(S.target===S.currentTarget&&M&&!p){const T=new CustomEvent(E0,FI);if(S.currentTarget.dispatchEvent(T),!T.defaultPrevented){const R=y().filter(V=>V.focusable),D=R.find(V=>V.active),I=R.find(V=>V.id===m),L=[D,I,...R].filter(Boolean).map(V=>V.ref.current);H3(L,u)}}b.current=!1}),onBlur:ue(e.onBlur,()=>v(!1))})})}),_3="RovingFocusGroupItem",G3=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:s=!1,tabStopId:r,children:a,...o}=e,l=wn(),c=r||l,u=PI(_3,i),h=u.currentTabStopId===c,f=j3(i),{onFocusableItemAdd:d,onFocusableItemRemove:g,currentTabStopId:m}=u;return N.useEffect(()=>{if(n)return d(),()=>g()},[n,d,g]),C.jsx(R1.ItemSlot,{scope:i,id:c,focusable:n,active:s,children:C.jsx(fe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:ue(e.onMouseDown,A=>{n?u.onItemFocus(c):A.preventDefault()}),onFocus:ue(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:ue(e.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){u.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const p=jI(A,u.orientation,u.dir);if(p!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let x=f().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")x.reverse();else if(p==="prev"||p==="next"){p==="prev"&&x.reverse();const y=x.indexOf(A.currentTarget);x=u.loop?zI(x,y+1):x.slice(y+1)}setTimeout(()=>H3(x))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:m!=null}):a})})});G3.displayName=_3;var LI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function jI(e,t,i){const n=kI(e.key,i);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return LI[n]}function H3(e,t=!1){const i=document.activeElement;for(const n of e)if(n===i||(n.focus({preventScroll:t}),document.activeElement!==i))return}function zI(e,t){return e.map((i,n)=>e[(t+n)%e.length])}var bp=z3,wp=G3;function _I(e,t){return N.useReducer((i,n)=>t[i][n]??i,e)}var oi=e=>{const{present:t,children:i}=e,n=GI(t),s=typeof i=="function"?i({present:n.isPresent}):N.Children.only(i),r=Me(n.ref,HI(s));return typeof i=="function"||n.isPresent?N.cloneElement(s,{ref:r}):null};oi.displayName="Presence";function GI(e){const[t,i]=N.useState(),n=N.useRef(null),s=N.useRef(e),r=N.useRef("none"),a=e?"mounted":"unmounted",[o,l]=_I(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=Du(n.current);r.current=o==="mounted"?c:"none"},[o]),Et(()=>{const c=n.current,u=s.current;if(u!==e){const f=r.current,d=Du(c);e?l("MOUNT"):d==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==d?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Et(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=d=>{const m=Du(n.current).includes(d.animationName);if(d.target===t&&m&&(l("ANIMATION_END"),!s.current)){const A=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=A)})}},f=d=>{d.target===t&&(r.current=Du(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:N.useCallback(c=>{n.current=c?getComputedStyle(c):null,i(c)},[])}}function Du(e){return(e==null?void 0:e.animationName)||"none"}function HI(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var ed="Tabs",[YI,dz]=Si(ed,[Qo]),Y3=Qo(),[qI,Sp]=YI(ed),q3=N.forwardRef((e,t)=>{const{__scopeTabs:i,value:n,onValueChange:s,defaultValue:r,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=Ko(o),[h,f]=ji({prop:n,onChange:s,defaultProp:r??"",caller:ed});return C.jsx(qI,{scope:i,baseId:wn(),value:h,onValueChange:f,orientation:a,dir:u,activationMode:l,children:C.jsx(fe.div,{dir:u,"data-orientation":a,...c,ref:t})})});q3.displayName=ed;var K3="TabsList",Q3=N.forwardRef((e,t)=>{const{__scopeTabs:i,loop:n=!0,...s}=e,r=Sp(K3,i),a=Y3(i);return C.jsx(bp,{asChild:!0,...a,orientation:r.orientation,dir:r.dir,loop:n,children:C.jsx(fe.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:t})})});Q3.displayName=K3;var X3="TabsTrigger",W3=N.forwardRef((e,t)=>{const{__scopeTabs:i,value:n,disabled:s=!1,...r}=e,a=Sp(X3,i),o=Y3(i),l=$3(a.baseId,n),c=ew(a.baseId,n),u=n===a.value;return C.jsx(wp,{asChild:!0,...o,focusable:!s,active:u,children:C.jsx(fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:t,onMouseDown:ue(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:ue(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:ue(e.onFocus,()=>{const h=a.activationMode!=="manual";!u&&!s&&h&&a.onValueChange(n)})})})});W3.displayName=X3;var Z3="TabsContent",J3=N.forwardRef((e,t)=>{const{__scopeTabs:i,value:n,forceMount:s,children:r,...a}=e,o=Sp(Z3,i),l=$3(o.baseId,n),c=ew(o.baseId,n),u=n===o.value,h=N.useRef(u);return N.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),C.jsx(oi,{present:s||u,children:({present:f})=>C.jsx(fe.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&r})})});J3.displayName=Z3;function $3(e,t){return`${e}-trigger-${t}`}function ew(e,t){return`${e}-content-${t}`}var KI=q3,QI=Q3,XI=W3,WI=J3;function ZI({className:e,...t}){return C.jsx(KI,{"data-slot":"tabs",className:Te("flex flex-col gap-2",e),...t})}function JI({className:e,...t}){return C.jsx(QI,{"data-slot":"tabs-list",className:Te("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function T0({className:e,...t}){return C.jsx(XI,{"data-slot":"tabs-trigger",className:Te("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function M0({className:e,...t}){return C.jsx(WI,{"data-slot":"tabs-content",className:Te("flex-1 outline-none",e),...t})}function N1(e,[t,i]){return Math.min(i,Math.max(t,e))}function $I(e,t){return N.useReducer((i,n)=>t[i][n]??i,e)}var Cp="ScrollArea",[tw,mz]=Si(Cp),[eF,_i]=tw(Cp),iw=N.forwardRef((e,t)=>{const{__scopeScrollArea:i,type:n="hover",dir:s,scrollHideDelay:r=600,...a}=e,[o,l]=N.useState(null),[c,u]=N.useState(null),[h,f]=N.useState(null),[d,g]=N.useState(null),[m,A]=N.useState(null),[p,v]=N.useState(0),[x,y]=N.useState(0),[b,E]=N.useState(!1),[w,S]=N.useState(!1),M=Me(t,R=>l(R)),T=Ko(s);return C.jsx(eF,{scope:i,type:n,dir:T,scrollHideDelay:r,scrollArea:o,viewport:c,onViewportChange:u,content:h,onContentChange:f,scrollbarX:d,onScrollbarXChange:g,scrollbarXEnabled:b,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:A,scrollbarYEnabled:w,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:y,children:C.jsx(fe.div,{dir:T,...a,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});iw.displayName=Cp;var nw="ScrollAreaViewport",sw=N.forwardRef((e,t)=>{const{__scopeScrollArea:i,children:n,nonce:s,...r}=e,a=_i(nw,i),o=N.useRef(null),l=Me(t,o,a.onViewportChange);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),C.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...r,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:C.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});sw.displayName=nw;var Dn="ScrollAreaScrollbar",rw=N.forwardRef((e,t)=>{const{forceMount:i,...n}=e,s=_i(Dn,e.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:a}=s,o=e.orientation==="horizontal";return N.useEffect(()=>(o?r(!0):a(!0),()=>{o?r(!1):a(!1)}),[o,r,a]),s.type==="hover"?C.jsx(tF,{...n,ref:t,forceMount:i}):s.type==="scroll"?C.jsx(iF,{...n,ref:t,forceMount:i}):s.type==="auto"?C.jsx(aw,{...n,ref:t,forceMount:i}):s.type==="always"?C.jsx(Ep,{...n,ref:t}):null});rw.displayName=Dn;var tF=N.forwardRef((e,t)=>{const{forceMount:i,...n}=e,s=_i(Dn,e.__scopeScrollArea),[r,a]=N.useState(!1);return N.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),C.jsx(oi,{present:i||r,children:C.jsx(aw,{"data-state":r?"visible":"hidden",...n,ref:t})})}),iF=N.forwardRef((e,t)=>{const{forceMount:i,...n}=e,s=_i(Dn,e.__scopeScrollArea),r=e.orientation==="horizontal",a=id(()=>l("SCROLL_END"),100),[o,l]=$I("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,s.scrollHideDelay,l]),N.useEffect(()=>{const c=s.viewport,u=r?"scrollLeft":"scrollTop";if(c){let h=c[u];const f=()=>{const d=c[u];h!==d&&(l("SCROLL"),a()),h=d};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[s.viewport,r,l,a]),C.jsx(oi,{present:i||o!=="hidden",children:C.jsx(Ep,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ue(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ue(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),aw=N.forwardRef((e,t)=>{const i=_i(Dn,e.__scopeScrollArea),{forceMount:n,...s}=e,[r,a]=N.useState(!1),o=e.orientation==="horizontal",l=id(()=>{if(i.viewport){const c=i.viewport.offsetWidth<i.viewport.scrollWidth,u=i.viewport.offsetHeight<i.viewport.scrollHeight;a(o?c:u)}},10);return Fo(i.viewport,l),Fo(i.content,l),C.jsx(oi,{present:n||r,children:C.jsx(Ep,{"data-state":r?"visible":"hidden",...s,ref:t})})}),Ep=N.forwardRef((e,t)=>{const{orientation:i="vertical",...n}=e,s=_i(Dn,e.__scopeScrollArea),r=N.useRef(null),a=N.useRef(0),[o,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=hw(o.viewport,o.content),u={...n,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>r.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function h(f,d){return lF(f,a.current,o,d)}return i==="horizontal"?C.jsx(nF,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&r.current){const f=s.viewport.scrollLeft,d=XA(f,o,s.dir);r.current.style.transform=`translate3d(${d}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):i==="vertical"?C.jsx(sF,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&r.current){const f=s.viewport.scrollTop,d=XA(f,o);r.current.style.transform=`translate3d(0, ${d}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),nF=N.forwardRef((e,t)=>{const{sizes:i,onSizesChange:n,...s}=e,r=_i(Dn,e.__scopeScrollArea),[a,o]=N.useState(),l=N.useRef(null),c=Me(t,l,r.onScrollbarXChange);return N.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),C.jsx(lw,{"data-orientation":"horizontal",...s,ref:c,sizes:i,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":td(i)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(r.viewport){const f=r.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),dw(f,h)&&u.preventDefault()}},onResize:()=>{l.current&&r.viewport&&a&&n({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:cf(a.paddingLeft),paddingEnd:cf(a.paddingRight)}})}})}),sF=N.forwardRef((e,t)=>{const{sizes:i,onSizesChange:n,...s}=e,r=_i(Dn,e.__scopeScrollArea),[a,o]=N.useState(),l=N.useRef(null),c=Me(t,l,r.onScrollbarYChange);return N.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),C.jsx(lw,{"data-orientation":"vertical",...s,ref:c,sizes:i,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":td(i)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(r.viewport){const f=r.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),dw(f,h)&&u.preventDefault()}},onResize:()=>{l.current&&r.viewport&&a&&n({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:cf(a.paddingTop),paddingEnd:cf(a.paddingBottom)}})}})}),[rF,ow]=tw(Dn),lw=N.forwardRef((e,t)=>{const{__scopeScrollArea:i,sizes:n,hasThumb:s,onThumbChange:r,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:h,...f}=e,d=_i(Dn,i),[g,m]=N.useState(null),A=Me(t,M=>m(M)),p=N.useRef(null),v=N.useRef(""),x=d.viewport,y=n.content-n.viewport,b=Gt(u),E=Gt(l),w=id(h,10);function S(M){if(p.current){const T=M.clientX-p.current.left,R=M.clientY-p.current.top;c({x:T,y:R})}}return N.useEffect(()=>{const M=T=>{const R=T.target;(g==null?void 0:g.contains(R))&&b(T,y)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[x,g,y,b]),N.useEffect(E,[n,E]),Fo(g,w),Fo(d.content,w),C.jsx(rF,{scope:i,scrollbar:g,hasThumb:s,onThumbChange:Gt(r),onThumbPointerUp:Gt(a),onThumbPositionChange:E,onThumbPointerDown:Gt(o),children:C.jsx(fe.div,{...f,ref:A,style:{position:"absolute",...f.style},onPointerDown:ue(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),p.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",d.viewport&&(d.viewport.style.scrollBehavior="auto"),S(M))}),onPointerMove:ue(e.onPointerMove,S),onPointerUp:ue(e.onPointerUp,M=>{const T=M.target;T.hasPointerCapture(M.pointerId)&&T.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=v.current,d.viewport&&(d.viewport.style.scrollBehavior=""),p.current=null})})})}),lf="ScrollAreaThumb",cw=N.forwardRef((e,t)=>{const{forceMount:i,...n}=e,s=ow(lf,e.__scopeScrollArea);return C.jsx(oi,{present:i||s.hasThumb,children:C.jsx(aF,{ref:t,...n})})}),aF=N.forwardRef((e,t)=>{const{__scopeScrollArea:i,style:n,...s}=e,r=_i(lf,i),a=ow(lf,i),{onThumbPositionChange:o}=a,l=Me(t,h=>a.onThumbChange(h)),c=N.useRef(void 0),u=id(()=>{c.current&&(c.current(),c.current=void 0)},100);return N.useEffect(()=>{const h=r.viewport;if(h){const f=()=>{if(u(),!c.current){const d=cF(h,o);c.current=d,o()}};return o(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[r.viewport,u,o]),C.jsx(fe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ue(e.onPointerDownCapture,h=>{const d=h.target.getBoundingClientRect(),g=h.clientX-d.left,m=h.clientY-d.top;a.onThumbPointerDown({x:g,y:m})}),onPointerUp:ue(e.onPointerUp,a.onThumbPointerUp)})});cw.displayName=lf;var Tp="ScrollAreaCorner",uw=N.forwardRef((e,t)=>{const i=_i(Tp,e.__scopeScrollArea),n=!!(i.scrollbarX&&i.scrollbarY);return i.type!=="scroll"&&n?C.jsx(oF,{...e,ref:t}):null});uw.displayName=Tp;var oF=N.forwardRef((e,t)=>{const{__scopeScrollArea:i,...n}=e,s=_i(Tp,i),[r,a]=N.useState(0),[o,l]=N.useState(0),c=!!(r&&o);return Fo(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),Fo(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),a(u)}),c?C.jsx(fe.div,{...n,ref:t,style:{width:r,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function cf(e){return e?parseInt(e,10):0}function hw(e,t){const i=e/t;return isNaN(i)?0:i}function td(e){const t=hw(e.viewport,e.content),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-i)*t;return Math.max(n,18)}function lF(e,t,i,n="ltr"){const s=td(i),r=s/2,a=t||r,o=s-a,l=i.scrollbar.paddingStart+a,c=i.scrollbar.size-i.scrollbar.paddingEnd-o,u=i.content-i.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return fw([l,c],h)(e)}function XA(e,t,i="ltr"){const n=td(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=t.scrollbar.size-s,a=t.content-t.viewport,o=r-n,l=i==="ltr"?[0,a]:[a*-1,0],c=N1(e,l);return fw([0,a],[0,o])(c)}function fw(e,t){return i=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(i-e[0])}}function dw(e,t){return e>0&&e<t}var cF=(e,t=()=>{})=>{let i={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const r={left:e.scrollLeft,top:e.scrollTop},a=i.left!==r.left,o=i.top!==r.top;(a||o)&&t(),i=r,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function id(e,t){const i=Gt(e),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(i,t)},[i,t])}function Fo(e,t){const i=Gt(t);Et(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(i)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,i])}var uF=iw,hF=sw,fF=uw;function uf({className:e,children:t,...i}){return C.jsxs(uF,{"data-slot":"scroll-area",className:Te("relative",e),...i,children:[C.jsx(hF,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),C.jsx(dF,{}),C.jsx(fF,{})]})}function dF({className:e,orientation:t="vertical",...i}){return C.jsx(rw,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Te("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...i,children:C.jsx(cw,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Mp(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function Dp(e){const[t,i]=N.useState(void 0);return Et(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;i({width:a,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else i(void 0)},[e]),t}var nd="Checkbox",[mF,gz]=Si(nd),[gF,Rp]=mF(nd);function pF(e){const{__scopeCheckbox:t,checked:i,children:n,defaultChecked:s,disabled:r,form:a,name:o,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:h}=e,[f,d]=ji({prop:i,defaultProp:s??!1,onChange:l,caller:nd}),[g,m]=N.useState(null),[A,p]=N.useState(null),v=N.useRef(!1),x=g?!!a||!!g.closest("form"):!0,y={checked:f,disabled:r,setChecked:d,control:g,setControl:m,name:o,form:a,value:u,hasConsumerStoppedPropagationRef:v,required:c,defaultChecked:Xs(s)?!1:s,isFormControl:x,bubbleInput:A,setBubbleInput:p};return C.jsx(gF,{scope:t,...y,children:vF(h)?h(y):n})}var mw="CheckboxTrigger",gw=N.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:i,...n},s)=>{const{control:r,value:a,disabled:o,checked:l,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:d,bubbleInput:g}=Rp(mw,e),m=Me(s,u),A=N.useRef(l);return N.useEffect(()=>{const p=r==null?void 0:r.form;if(p){const v=()=>h(A.current);return p.addEventListener("reset",v),()=>p.removeEventListener("reset",v)}},[r,h]),C.jsx(fe.button,{type:"button",role:"checkbox","aria-checked":Xs(l)?"mixed":l,"aria-required":c,"data-state":bw(l),"data-disabled":o?"":void 0,disabled:o,value:a,...n,ref:m,onKeyDown:ue(t,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:ue(i,p=>{h(v=>Xs(v)?!0:!v),g&&d&&(f.current=p.isPropagationStopped(),f.current||p.stopPropagation())})})});gw.displayName=mw;var pw=N.forwardRef((e,t)=>{const{__scopeCheckbox:i,name:n,checked:s,defaultChecked:r,required:a,disabled:o,value:l,onCheckedChange:c,form:u,...h}=e;return C.jsx(pF,{__scopeCheckbox:i,checked:s,defaultChecked:r,disabled:o,required:a,onCheckedChange:c,name:n,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>C.jsxs(C.Fragment,{children:[C.jsx(gw,{...h,ref:t,__scopeCheckbox:i}),f&&C.jsx(yw,{__scopeCheckbox:i})]})})});pw.displayName=nd;var vw="CheckboxIndicator",Aw=N.forwardRef((e,t)=>{const{__scopeCheckbox:i,forceMount:n,...s}=e,r=Rp(vw,i);return C.jsx(oi,{present:n||Xs(r.checked)||r.checked===!0,children:C.jsx(fe.span,{"data-state":bw(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Aw.displayName=vw;var xw="CheckboxBubbleInput",yw=N.forwardRef(({__scopeCheckbox:e,...t},i)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:r,defaultChecked:a,required:o,disabled:l,name:c,value:u,form:h,bubbleInput:f,setBubbleInput:d}=Rp(xw,e),g=Me(i,d),m=Mp(r),A=Dp(n);N.useEffect(()=>{const v=f;if(!v)return;const x=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(x,"checked").set,E=!s.current;if(m!==r&&b){const w=new Event("click",{bubbles:E});v.indeterminate=Xs(r),b.call(v,Xs(r)?!1:r),v.dispatchEvent(w)}},[f,m,r,s]);const p=N.useRef(Xs(r)?!1:r);return C.jsx(fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,required:o,disabled:l,name:c,value:u,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});yw.displayName=xw;function vF(e){return typeof e=="function"}function Xs(e){return e==="indeterminate"}function bw(e){return Xs(e)?"indeterminate":e?"checked":"unchecked"}function ww({className:e,...t}){return C.jsx(pw,{"data-slot":"checkbox",className:Te("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:C.jsx(Aw,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:C.jsx(V3,{className:"size-3.5"})})})}var AF="Label",Sw=N.forwardRef((e,t)=>C.jsx(fe.label,{...e,ref:t,onMouseDown:i=>{var s;i.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));Sw.displayName=AF;var xF=Sw;function hf({className:e,...t}){return C.jsx(xF,{"data-slot":"label",className:Te("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}var Np="Radio",[yF,Cw]=Si(Np),[bF,wF]=yF(Np),Ew=N.forwardRef((e,t)=>{const{__scopeRadio:i,name:n,checked:s=!1,required:r,disabled:a,value:o="on",onCheck:l,form:c,...u}=e,[h,f]=N.useState(null),d=Me(t,A=>f(A)),g=N.useRef(!1),m=h?c||!!h.closest("form"):!0;return C.jsxs(bF,{scope:i,checked:s,disabled:a,children:[C.jsx(fe.button,{type:"button",role:"radio","aria-checked":s,"data-state":Rw(s),"data-disabled":a?"":void 0,disabled:a,value:o,...u,ref:d,onClick:ue(e.onClick,A=>{s||l==null||l(),m&&(g.current=A.isPropagationStopped(),g.current||A.stopPropagation())})}),m&&C.jsx(Dw,{control:h,bubbles:!g.current,name:n,value:o,checked:s,required:r,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});Ew.displayName=Np;var Tw="RadioIndicator",Mw=N.forwardRef((e,t)=>{const{__scopeRadio:i,forceMount:n,...s}=e,r=wF(Tw,i);return C.jsx(oi,{present:n||r.checked,children:C.jsx(fe.span,{"data-state":Rw(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})})});Mw.displayName=Tw;var SF="RadioBubbleInput",Dw=N.forwardRef(({__scopeRadio:e,control:t,checked:i,bubbles:n=!0,...s},r)=>{const a=N.useRef(null),o=Me(a,r),l=Mp(i),c=Dp(t);return N.useEffect(()=>{const u=a.current;if(!u)return;const h=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==i&&d){const g=new Event("click",{bubbles:n});d.call(u,i),u.dispatchEvent(g)}},[l,i,n]),C.jsx(fe.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Dw.displayName=SF;function Rw(e){return e?"checked":"unchecked"}var CF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sd="RadioGroup",[EF,pz]=Si(sd,[Qo,Cw]),Nw=Qo(),Iw=Cw(),[TF,MF]=EF(sd),Fw=N.forwardRef((e,t)=>{const{__scopeRadioGroup:i,name:n,defaultValue:s,value:r,required:a=!1,disabled:o=!1,orientation:l,dir:c,loop:u=!0,onValueChange:h,...f}=e,d=Nw(i),g=Ko(c),[m,A]=ji({prop:r,defaultProp:s??null,onChange:h,caller:sd});return C.jsx(TF,{scope:i,name:n,required:a,disabled:o,value:m,onValueChange:A,children:C.jsx(bp,{asChild:!0,...d,orientation:l,dir:g,loop:u,children:C.jsx(fe.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":o?"":void 0,dir:g,...f,ref:t})})})});Fw.displayName=sd;var Uw="RadioGroupItem",Bw=N.forwardRef((e,t)=>{const{__scopeRadioGroup:i,disabled:n,...s}=e,r=MF(Uw,i),a=r.disabled||n,o=Nw(i),l=Iw(i),c=N.useRef(null),u=Me(t,c),h=r.value===s.value,f=N.useRef(!1);return N.useEffect(()=>{const d=m=>{CF.includes(m.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",g)}},[]),C.jsx(wp,{asChild:!0,...o,focusable:!a,active:h,children:C.jsx(Ew,{disabled:a,required:r.required,checked:h,...l,...s,name:r.name,ref:u,onCheck:()=>r.onValueChange(s.value),onKeyDown:ue(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:ue(s.onFocus,()=>{var d;f.current&&((d=c.current)==null||d.click())})})})});Bw.displayName=Uw;var DF="RadioGroupIndicator",Vw=N.forwardRef((e,t)=>{const{__scopeRadioGroup:i,...n}=e,s=Iw(i);return C.jsx(Mw,{...s,...n,ref:t})});Vw.displayName=DF;var RF=Fw,NF=Bw,IF=Vw;function FF({className:e,...t}){return C.jsx(RF,{"data-slot":"radio-group",className:Te("grid gap-3",e),...t})}function UF({className:e,...t}){return C.jsx(NF,{"data-slot":"radio-group-item",className:Te("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:C.jsx(IF,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:C.jsx(K7,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var Pw="Toggle",Ow=N.forwardRef((e,t)=>{const{pressed:i,defaultPressed:n,onPressedChange:s,...r}=e,[a,o]=ji({prop:i,onChange:s,defaultProp:n??!1,caller:Pw});return C.jsx(fe.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":e.disabled?"":void 0,...r,ref:t,onClick:ue(e.onClick,()=>{e.disabled||o(!a)})})});Ow.displayName=Pw;var sr="ToggleGroup",[Lw,vz]=Si(sr,[Qo]),kw=Qo(),Ip=Je.forwardRef((e,t)=>{const{type:i,...n}=e;if(i==="single"){const s=n;return C.jsx(BF,{...s,ref:t})}if(i==="multiple"){const s=n;return C.jsx(VF,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${sr}\``)});Ip.displayName=sr;var[jw,zw]=Lw(sr),BF=Je.forwardRef((e,t)=>{const{value:i,defaultValue:n,onValueChange:s=()=>{},...r}=e,[a,o]=ji({prop:i,defaultProp:n??"",onChange:s,caller:sr});return C.jsx(jw,{scope:e.__scopeToggleGroup,type:"single",value:Je.useMemo(()=>a?[a]:[],[a]),onItemActivate:o,onItemDeactivate:Je.useCallback(()=>o(""),[o]),children:C.jsx(_w,{...r,ref:t})})}),VF=Je.forwardRef((e,t)=>{const{value:i,defaultValue:n,onValueChange:s=()=>{},...r}=e,[a,o]=ji({prop:i,defaultProp:n??[],onChange:s,caller:sr}),l=Je.useCallback(u=>o((h=[])=>[...h,u]),[o]),c=Je.useCallback(u=>o((h=[])=>h.filter(f=>f!==u)),[o]);return C.jsx(jw,{scope:e.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:c,children:C.jsx(_w,{...r,ref:t})})});Ip.displayName=sr;var[PF,OF]=Lw(sr),_w=Je.forwardRef((e,t)=>{const{__scopeToggleGroup:i,disabled:n=!1,rovingFocus:s=!0,orientation:r,dir:a,loop:o=!0,...l}=e,c=kw(i),u=Ko(a),h={role:"group",dir:u,...l};return C.jsx(PF,{scope:i,rovingFocus:s,disabled:n,children:s?C.jsx(bp,{asChild:!0,...c,orientation:r,dir:u,loop:o,children:C.jsx(fe.div,{...h,ref:t})}):C.jsx(fe.div,{...h,ref:t})})}),ff="ToggleGroupItem",Gw=Je.forwardRef((e,t)=>{const i=zw(ff,e.__scopeToggleGroup),n=OF(ff,e.__scopeToggleGroup),s=kw(e.__scopeToggleGroup),r=i.value.includes(e.value),a=n.disabled||e.disabled,o={...e,pressed:r,disabled:a},l=Je.useRef(null);return n.rovingFocus?C.jsx(wp,{asChild:!0,...s,focusable:!a,active:r,ref:l,children:C.jsx(WA,{...o,ref:t})}):C.jsx(WA,{...o,ref:t})});Gw.displayName=ff;var WA=Je.forwardRef((e,t)=>{const{__scopeToggleGroup:i,value:n,...s}=e,r=zw(ff,i),a={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},o=r.type==="single"?a:void 0;return C.jsx(Ow,{...o,...s,ref:t,onPressedChange:l=>{l?r.onItemActivate(n):r.onItemDeactivate(n)}})}),LF=Ip,kF=Gw;const jF=vp("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),Hw=N.createContext({size:"default",variant:"default"});function zF({className:e,variant:t,size:i,children:n,...s}){return C.jsx(LF,{"data-slot":"toggle-group","data-variant":t,"data-size":i,className:Te("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...s,children:C.jsx(Hw.Provider,{value:{variant:t,size:i},children:n})})}function ul({className:e,children:t,variant:i,size:n,...s}){const r=N.useContext(Hw);return C.jsx(kF,{"data-slot":"toggle-group-item","data-variant":r.variant||i,"data-size":r.size||n,className:Te(jF({variant:r.variant||i,size:r.size||n}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...s,children:t})}const _F="/assets/images/axialSlice24.png",GF="/assets/images/coronalSlice24.png",HF="/assets/images/sagittalSlice24.png";function YF({currentView:e,onViewChange:t}){return C.jsx("div",{className:"flex items-center",children:C.jsxs(zF,{type:"single",value:e,onValueChange:i=>i&&t(i),children:[C.jsxs(ul,{value:"axial","aria-label":"Axial view",title:"Axial view",children:[C.jsx("img",{src:_F,alt:"axial"}),C.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Axial"})]}),C.jsxs(ul,{value:"coronal","aria-label":"Coronal view",title:"Coronal view",children:[C.jsx("img",{src:GF,alt:"coronal"}),C.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Coronal"})]}),C.jsxs(ul,{value:"sagittal","aria-label":"Sagittal view",title:"Sagittal view",children:[C.jsx("img",{src:HF,alt:"sagittal"}),C.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Sagittal"})]}),C.jsxs(ul,{value:"multi","aria-label":"Multi view",title:"Multi view",children:[C.jsx(tI,{className:"h-4 w-4 mr-1"}),C.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Multi"})]}),C.jsxs(ul,{value:"render","aria-label":"Render view",title:"Render view",children:[C.jsx(P7,{className:"h-4 w-4 mr-1"}),C.jsx("span",{className:"sr-only sm:not-sr-only sm:inline-block text-xs",children:"Render"})]})]})})}const qF=vp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function vr({className:e,variant:t,asChild:i=!1,...n}){const s=i?y3:"span";return C.jsx(s,{"data-slot":"badge",className:Te(qF({variant:t}),e),...n})}function Yw({className:e,type:t,...i}){return C.jsx("input",{type:t,"data-slot":"input",className:Te("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}var rd="Collapsible",[KF,Az]=Si(rd),[QF,Fp]=KF(rd),qw=N.forwardRef((e,t)=>{const{__scopeCollapsible:i,open:n,defaultOpen:s,disabled:r,onOpenChange:a,...o}=e,[l,c]=ji({prop:n,defaultProp:s??!1,onChange:a,caller:rd});return C.jsx(QF,{scope:i,disabled:r,contentId:wn(),open:l,onOpenToggle:N.useCallback(()=>c(u=>!u),[c]),children:C.jsx(fe.div,{"data-state":Bp(l),"data-disabled":r?"":void 0,...o,ref:t})})});qw.displayName=rd;var Kw="CollapsibleTrigger",Qw=N.forwardRef((e,t)=>{const{__scopeCollapsible:i,...n}=e,s=Fp(Kw,i);return C.jsx(fe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Bp(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:ue(e.onClick,s.onOpenToggle)})});Qw.displayName=Kw;var Up="CollapsibleContent",Xw=N.forwardRef((e,t)=>{const{forceMount:i,...n}=e,s=Fp(Up,e.__scopeCollapsible);return C.jsx(oi,{present:i||s.open,children:({present:r})=>C.jsx(XF,{...n,ref:t,present:r})})});Xw.displayName=Up;var XF=N.forwardRef((e,t)=>{const{__scopeCollapsible:i,present:n,children:s,...r}=e,a=Fp(Up,i),[o,l]=N.useState(n),c=N.useRef(null),u=Me(t,c),h=N.useRef(0),f=h.current,d=N.useRef(0),g=d.current,m=a.open||o,A=N.useRef(m),p=N.useRef(void 0);return N.useEffect(()=>{const v=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(v)},[]),Et(()=>{const v=c.current;if(v){p.current=p.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const x=v.getBoundingClientRect();h.current=x.height,d.current=x.width,A.current||(v.style.transitionDuration=p.current.transitionDuration,v.style.animationName=p.current.animationName),l(n)}},[a.open,n]),C.jsx(fe.div,{"data-state":Bp(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!m,...r,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:m&&s})});function Bp(e){return e?"open":"closed"}var WF=qw;function ZF({...e}){return C.jsx(WF,{"data-slot":"collapsible",...e})}function JF({...e}){return C.jsx(Qw,{"data-slot":"collapsible-trigger",...e})}function $F({...e}){return C.jsx(Xw,{"data-slot":"collapsible-content",...e})}function eU({id:e}){return{queryFn:()=>Zc.readScene({id:e}),queryKey:["scenes",{id:e}]}}function tU({item:e,nvRef:t}){const{data:i,isLoading:n,isError:s}=qy(eU({id:e.id})),r=async a=>{var o;if(console.log("Viewing result for",a),!t.current){alert("Niivue instance is not available");return}if(a.error&&alert(`Process returned error message ${a.error}`),Array.isArray(a.nv_document.imageOptionsArray))for(const l of a.nv_document.imageOptionsArray)l.resultUrl?(console.log("Loading volume from URL:",l.resultUrl),await((o=t.current)==null?void 0:o.addVolumeFromUrl({url:l.resultUrl,name:l.resultUrl.split("/").pop()}))):console.warn("Image option does not have a resultUrl:",l);else alert("No image options available in the result")};if(i!==void 0&&!n)return C.jsxs(Yt,{variant:"outline",size:"sm",className:"w-fit",onClick:()=>r(i),children:[C.jsx(Z7,{className:"h-3 w-3 mr-1"}),"View Result"]})}function iU({id:e}){const[t,i]=N.useState(!1),n=Fc(),r=Ef({mutationFn:async o=>{await Zc.deleteScene({id:o})},onSuccess:()=>{i(!1)},onError:()=>{},onSettled:()=>{n.invalidateQueries()}}),a=async()=>{confirm("Are you sure you want to delete this scene?")&&(i(!0),r.mutate(e))};return C.jsxs(Yt,{variant:"outline",size:"sm",className:"w-full text-red-500",onClick:()=>a(),children:[C.jsx(O3,{className:"h-3 w-3 mr-1"}),"Remove"]})}function nU(){const e=Fc(),i=Ef({mutationFn:async()=>{await Zc.deleteAllScenes()},onSuccess:()=>{},onError:()=>{},onSettled:()=>{e.invalidateQueries()}}),n=async()=>{confirm("Are you sure you want to clear all processing history?")&&i.mutate()};return C.jsxs(Yt,{variant:"ghost",size:"sm",onClick:n,children:[C.jsx(O3,{className:"h-4 w-4 mr-1"}),"Clear All"]})}function sU(e,t=globalThis==null?void 0:globalThis.document){const i=Gt(e);N.useEffect(()=>{const n=s=>{s.key==="Escape"&&i(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[i,t])}var rU="DismissableLayer",I1="dismissableLayer.update",aU="dismissableLayer.pointerDownOutside",oU="dismissableLayer.focusOutside",ZA,Ww=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ad=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:a,onDismiss:o,...l}=e,c=N.useContext(Ww),[u,h]=N.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,d]=N.useState({}),g=Me(t,w=>h(w)),m=Array.from(c.layers),[A]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),p=m.indexOf(A),v=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,y=v>=p,b=uU(w=>{const S=w.target,M=[...c.branches].some(T=>T.contains(S));!y||M||(s==null||s(w),a==null||a(w),w.defaultPrevented||o==null||o())},f),E=hU(w=>{const S=w.target;[...c.branches].some(T=>T.contains(S))||(r==null||r(w),a==null||a(w),w.defaultPrevented||o==null||o())},f);return sU(w=>{v===c.layers.size-1&&(n==null||n(w),!w.defaultPrevented&&o&&(w.preventDefault(),o()))},f),N.useEffect(()=>{if(u)return i&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ZA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),JA(),()=>{i&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ZA)}},[u,f,i,c]),N.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),JA())},[u,c]),N.useEffect(()=>{const w=()=>d({});return document.addEventListener(I1,w),()=>document.removeEventListener(I1,w)},[]),C.jsx(fe.div,{...l,ref:g,style:{pointerEvents:x?y?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,b.onPointerDownCapture)})});ad.displayName=rU;var lU="DismissableLayerBranch",cU=N.forwardRef((e,t)=>{const i=N.useContext(Ww),n=N.useRef(null),s=Me(t,n);return N.useEffect(()=>{const r=n.current;if(r)return i.branches.add(r),()=>{i.branches.delete(r)}},[i.branches]),C.jsx(fe.div,{...e,ref:s})});cU.displayName=lU;function uU(e,t=globalThis==null?void 0:globalThis.document){const i=Gt(e),n=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const r=o=>{if(o.target&&!n.current){let l=function(){Zw(aU,i,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,i]),{onPointerDownCapture:()=>n.current=!0}}function hU(e,t=globalThis==null?void 0:globalThis.document){const i=Gt(e),n=N.useRef(!1);return N.useEffect(()=>{const s=r=>{r.target&&!n.current&&Zw(oU,i,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,i]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function JA(){const e=new CustomEvent(I1);document.dispatchEvent(e)}function Zw(e,t,i,{discrete:n}){const s=i.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&s.addEventListener(e,t,{once:!0}),n?MI(s,r):s.dispatchEvent(r)}var D0=0;function Jw(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$A()),document.body.insertAdjacentElement("beforeend",e[1]??$A()),D0++,()=>{D0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),D0--}},[])}function $A(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var R0="focusScope.autoFocusOnMount",N0="focusScope.autoFocusOnUnmount",ex={bubbles:!1,cancelable:!0},fU="FocusScope",Vp=N.forwardRef((e,t)=>{const{loop:i=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...a}=e,[o,l]=N.useState(null),c=Gt(s),u=Gt(r),h=N.useRef(null),f=Me(t,m=>l(m)),d=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let m=function(x){if(d.paused||!o)return;const y=x.target;o.contains(y)?h.current=y:ms(h.current,{select:!0})},A=function(x){if(d.paused||!o)return;const y=x.relatedTarget;y!==null&&(o.contains(y)||ms(h.current,{select:!0}))},p=function(x){if(document.activeElement===document.body)for(const b of x)b.removedNodes.length>0&&ms(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",A);const v=new MutationObserver(p);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",A),v.disconnect()}}},[n,o,d.paused]),N.useEffect(()=>{if(o){ix.add(d);const m=document.activeElement;if(!o.contains(m)){const p=new CustomEvent(R0,ex);o.addEventListener(R0,c),o.dispatchEvent(p),p.defaultPrevented||(dU(AU($w(o)),{select:!0}),document.activeElement===m&&ms(o))}return()=>{o.removeEventListener(R0,c),setTimeout(()=>{const p=new CustomEvent(N0,ex);o.addEventListener(N0,u),o.dispatchEvent(p),p.defaultPrevented||ms(m??document.body,{select:!0}),o.removeEventListener(N0,u),ix.remove(d)},0)}}},[o,c,u,d]);const g=N.useCallback(m=>{if(!i&&!n||d.paused)return;const A=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,p=document.activeElement;if(A&&p){const v=m.currentTarget,[x,y]=mU(v);x&&y?!m.shiftKey&&p===y?(m.preventDefault(),i&&ms(x,{select:!0})):m.shiftKey&&p===x&&(m.preventDefault(),i&&ms(y,{select:!0})):p===v&&m.preventDefault()}},[i,n,d.paused]);return C.jsx(fe.div,{tabIndex:-1,...a,ref:f,onKeyDown:g})});Vp.displayName=fU;function dU(e,{select:t=!1}={}){const i=document.activeElement;for(const n of e)if(ms(n,{select:t}),document.activeElement!==i)return}function mU(e){const t=$w(e),i=tx(t,e),n=tx(t.reverse(),e);return[i,n]}function $w(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function tx(e,t){for(const i of e)if(!gU(i,{upTo:t}))return i}function gU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pU(e){return e instanceof HTMLInputElement&&"select"in e}function ms(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&pU(e)&&t&&e.select()}}var ix=vU();function vU(){let e=[];return{add(t){const i=e[0];t!==i&&(i==null||i.pause()),e=nx(e,t),e.unshift(t)},remove(t){var i;e=nx(e,t),(i=e[0])==null||i.resume()}}}function nx(e,t){const i=[...e],n=i.indexOf(t);return n!==-1&&i.splice(n,1),i}function AU(e){return e.filter(t=>t.tagName!=="A")}const xU=["top","right","bottom","left"],er=Math.min,di=Math.max,df=Math.round,Ru=Math.floor,Sn=e=>({x:e,y:e}),yU={left:"right",right:"left",bottom:"top",top:"bottom"},bU={start:"end",end:"start"};function F1(e,t,i){return di(e,er(t,i))}function is(e,t){return typeof e=="function"?e(t):e}function ns(e){return e.split("-")[0]}function Xo(e){return e.split("-")[1]}function Pp(e){return e==="x"?"y":"x"}function Op(e){return e==="y"?"height":"width"}const wU=new Set(["top","bottom"]);function An(e){return wU.has(ns(e))?"y":"x"}function Lp(e){return Pp(An(e))}function SU(e,t,i){i===void 0&&(i=!1);const n=Xo(e),s=Lp(e),r=Op(s);let a=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(a=mf(a)),[a,mf(a)]}function CU(e){const t=mf(e);return[U1(e),t,U1(t)]}function U1(e){return e.replace(/start|end/g,t=>bU[t])}const sx=["left","right"],rx=["right","left"],EU=["top","bottom"],TU=["bottom","top"];function MU(e,t,i){switch(e){case"top":case"bottom":return i?t?rx:sx:t?sx:rx;case"left":case"right":return t?EU:TU;default:return[]}}function DU(e,t,i,n){const s=Xo(e);let r=MU(ns(e),i==="start",n);return s&&(r=r.map(a=>a+"-"+s),t&&(r=r.concat(r.map(U1)))),r}function mf(e){return e.replace(/left|right|bottom|top/g,t=>yU[t])}function RU(e){return{top:0,right:0,bottom:0,left:0,...e}}function eS(e){return typeof e!="number"?RU(e):{top:e,right:e,bottom:e,left:e}}function gf(e){const{x:t,y:i,width:n,height:s}=e;return{width:n,height:s,top:i,left:t,right:t+n,bottom:i+s,x:t,y:i}}function ax(e,t,i){let{reference:n,floating:s}=e;const r=An(t),a=Lp(t),o=Op(a),l=ns(t),c=r==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[o]/2-s[o]/2;let d;switch(l){case"top":d={x:u,y:n.y-s.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:h};break;case"left":d={x:n.x-s.width,y:h};break;default:d={x:n.x,y:n.y}}switch(Xo(t)){case"start":d[a]-=f*(i&&c?-1:1);break;case"end":d[a]+=f*(i&&c?-1:1);break}return d}const NU=async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:a}=i,o=r.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=ax(c,n,l),f=n,d={},g=0;for(let m=0;m<o.length;m++){const{name:A,fn:p}=o[m],{x:v,y:x,data:y,reset:b}=await p({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:d,rects:c,platform:a,elements:{reference:e,floating:t}});u=v??u,h=x??h,d={...d,[A]:{...d[A],...y}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):b.rects),{x:u,y:h}=ax(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:d}};async function hc(e,t){var i;t===void 0&&(t={});const{x:n,y:s,platform:r,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=is(t,e),g=eS(d),A=o[f?h==="floating"?"reference":"floating":h],p=gf(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(A)))==null||i?A:A.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),v=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),y=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},b=gf(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:x,strategy:l}):v);return{top:(p.top-b.top+g.top)/y.y,bottom:(b.bottom-p.bottom+g.bottom)/y.y,left:(p.left-b.left+g.left)/y.x,right:(b.right-p.right+g.right)/y.x}}const IU=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:s,rects:r,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=is(e,t)||{};if(c==null)return{};const h=eS(u),f={x:i,y:n},d=Lp(s),g=Op(d),m=await a.getDimensions(c),A=d==="y",p=A?"top":"left",v=A?"bottom":"right",x=A?"clientHeight":"clientWidth",y=r.reference[g]+r.reference[d]-f[d]-r.floating[g],b=f[d]-r.reference[d],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let w=E?E[x]:0;(!w||!await(a.isElement==null?void 0:a.isElement(E)))&&(w=o.floating[x]||r.floating[g]);const S=y/2-b/2,M=w/2-m[g]/2-1,T=er(h[p],M),R=er(h[v],M),D=T,I=w-m[g]-R,U=w/2-m[g]/2+S,L=F1(D,U,I),V=!l.arrow&&Xo(s)!=null&&U!==L&&r.reference[g]/2-(U<D?T:R)-m[g]/2<0,k=V?U<D?U-D:U-I:0;return{[d]:f[d]+k,data:{[d]:L,centerOffset:U-L-k,...V&&{alignmentOffset:k}},reset:V}}}),FU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:s,middlewareData:r,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...A}=is(e,t);if((i=r.arrow)!=null&&i.alignmentOffset)return{};const p=ns(s),v=An(o),x=ns(o)===o,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=f||(x||!m?[mf(o)]:CU(o)),E=g!=="none";!f&&E&&b.push(...DU(o,m,g,y));const w=[o,...b],S=await hc(t,A),M=[];let T=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&M.push(S[p]),h){const U=SU(s,a,y);M.push(S[U[0]],S[U[1]])}if(T=[...T,{placement:s,overflows:M}],!M.every(U=>U<=0)){var R,D;const U=(((R=r.flip)==null?void 0:R.index)||0)+1,L=w[U];if(L&&(!(h==="alignment"?v!==An(L):!1)||T.every(F=>An(F.placement)===v?F.overflows[0]>0:!0)))return{data:{index:U,overflows:T},reset:{placement:L}};let V=(D=T.filter(k=>k.overflows[0]<=0).sort((k,F)=>k.overflows[1]-F.overflows[1])[0])==null?void 0:D.placement;if(!V)switch(d){case"bestFit":{var I;const k=(I=T.filter(F=>{if(E){const z=An(F.placement);return z===v||z==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(z=>z>0).reduce((z,G)=>z+G,0)]).sort((F,z)=>F[1]-z[1])[0])==null?void 0:I[0];k&&(V=k);break}case"initialPlacement":V=o;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function ox(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lx(e){return xU.some(t=>e[t]>=0)}const UU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:n="referenceHidden",...s}=is(e,t);switch(n){case"referenceHidden":{const r=await hc(t,{...s,elementContext:"reference"}),a=ox(r,i.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:lx(a)}}}case"escaped":{const r=await hc(t,{...s,altBoundary:!0}),a=ox(r,i.floating);return{data:{escapedOffsets:a,escaped:lx(a)}}}default:return{}}}}},tS=new Set(["left","top"]);async function BU(e,t){const{placement:i,platform:n,elements:s}=e,r=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=ns(i),o=Xo(i),l=An(i)==="y",c=tS.has(a)?-1:1,u=r&&l?-1:1,h=is(t,e);let{mainAxis:f,crossAxis:d,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof g=="number"&&(d=o==="end"?g*-1:g),l?{x:d*u,y:f*c}:{x:f*c,y:d*u}}const VU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:s,y:r,placement:a,middlewareData:o}=t,l=await BU(t,e);return a===((i=o.offset)==null?void 0:i.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:a}}}}},PU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:s}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:o={fn:A=>{let{x:p,y:v}=A;return{x:p,y:v}}},...l}=is(e,t),c={x:i,y:n},u=await hc(t,l),h=An(ns(s)),f=Pp(h);let d=c[f],g=c[h];if(r){const A=f==="y"?"top":"left",p=f==="y"?"bottom":"right",v=d+u[A],x=d-u[p];d=F1(v,d,x)}if(a){const A=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=g+u[A],x=g-u[p];g=F1(v,g,x)}const m=o.fn({...t,[f]:d,[h]:g});return{...m,data:{x:m.x-i,y:m.y-n,enabled:{[f]:r,[h]:a}}}}}},OU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:s,rects:r,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=is(e,t),u={x:i,y:n},h=An(s),f=Pp(h);let d=u[f],g=u[h];const m=is(o,t),A=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",y=r.reference[f]-r.floating[x]+A.mainAxis,b=r.reference[f]+r.reference[x]-A.mainAxis;d<y?d=y:d>b&&(d=b)}if(c){var p,v;const x=f==="y"?"width":"height",y=tS.has(ns(s)),b=r.reference[h]-r.floating[x]+(y&&((p=a.offset)==null?void 0:p[h])||0)+(y?0:A.crossAxis),E=r.reference[h]+r.reference[x]+(y?0:((v=a.offset)==null?void 0:v[h])||0)-(y?A.crossAxis:0);g<b?g=b:g>E&&(g=E)}return{[f]:d,[h]:g}}}},LU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,n;const{placement:s,rects:r,platform:a,elements:o}=t,{apply:l=()=>{},...c}=is(e,t),u=await hc(t,c),h=ns(s),f=Xo(s),d=An(s)==="y",{width:g,height:m}=r.floating;let A,p;h==="top"||h==="bottom"?(A=h,p=f===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(p=h,A=f==="end"?"top":"bottom");const v=m-u.top-u.bottom,x=g-u.left-u.right,y=er(m-u[A],v),b=er(g-u[p],x),E=!t.middlewareData.shift;let w=y,S=b;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(S=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(w=v),E&&!f){const T=di(u.left,0),R=di(u.right,0),D=di(u.top,0),I=di(u.bottom,0);d?S=g-2*(T!==0||R!==0?T+R:di(u.left,u.right)):w=m-2*(D!==0||I!==0?D+I:di(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:w});const M=await a.getDimensions(o.floating);return g!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function od(){return typeof window<"u"}function Wo(e){return iS(e)?(e.nodeName||"").toLowerCase():"#document"}function bi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rn(e){var t;return(t=(iS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function iS(e){return od()?e instanceof Node||e instanceof bi(e).Node:!1}function $i(e){return od()?e instanceof Element||e instanceof bi(e).Element:!1}function En(e){return od()?e instanceof HTMLElement||e instanceof bi(e).HTMLElement:!1}function cx(e){return!od()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof bi(e).ShadowRoot}const kU=new Set(["inline","contents"]);function $c(e){const{overflow:t,overflowX:i,overflowY:n,display:s}=en(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!kU.has(s)}const jU=new Set(["table","td","th"]);function zU(e){return jU.has(Wo(e))}const _U=[":popover-open",":modal"];function ld(e){return _U.some(t=>{try{return e.matches(t)}catch{return!1}})}const GU=["transform","translate","scale","rotate","perspective"],HU=["transform","translate","scale","rotate","perspective","filter"],YU=["paint","layout","strict","content"];function kp(e){const t=jp(),i=$i(e)?en(e):e;return GU.some(n=>i[n]?i[n]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||HU.some(n=>(i.willChange||"").includes(n))||YU.some(n=>(i.contain||"").includes(n))}function qU(e){let t=tr(e);for(;En(t)&&!Uo(t);){if(kp(t))return t;if(ld(t))return null;t=tr(t)}return null}function jp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KU=new Set(["html","body","#document"]);function Uo(e){return KU.has(Wo(e))}function en(e){return bi(e).getComputedStyle(e)}function cd(e){return $i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tr(e){if(Wo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cx(e)&&e.host||Rn(e);return cx(t)?t.host:t}function nS(e){const t=tr(e);return Uo(t)?e.ownerDocument?e.ownerDocument.body:e.body:En(t)&&$c(t)?t:nS(t)}function fc(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=nS(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),a=bi(s);if(r){const o=B1(a);return t.concat(a,a.visualViewport||[],$c(s)?s:[],o&&i?fc(o):[])}return t.concat(s,fc(s,[],i))}function B1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sS(e){const t=en(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=En(e),r=s?e.offsetWidth:i,a=s?e.offsetHeight:n,o=df(i)!==r||df(n)!==a;return o&&(i=r,n=a),{width:i,height:n,$:o}}function zp(e){return $i(e)?e:e.contextElement}function Ja(e){const t=zp(e);if(!En(t))return Sn(1);const i=t.getBoundingClientRect(),{width:n,height:s,$:r}=sS(t);let a=(r?df(i.width):i.width)/n,o=(r?df(i.height):i.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const QU=Sn(0);function rS(e){const t=bi(e);return!jp()||!t.visualViewport?QU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function XU(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==bi(e)?!1:t}function Zr(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),r=zp(e);let a=Sn(1);t&&(n?$i(n)&&(a=Ja(n)):a=Ja(e));const o=XU(r,i,n)?rS(r):Sn(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,u=s.width/a.x,h=s.height/a.y;if(r){const f=bi(r),d=n&&$i(n)?bi(n):n;let g=f,m=B1(g);for(;m&&n&&d!==g;){const A=Ja(m),p=m.getBoundingClientRect(),v=en(m),x=p.left+(m.clientLeft+parseFloat(v.paddingLeft))*A.x,y=p.top+(m.clientTop+parseFloat(v.paddingTop))*A.y;l*=A.x,c*=A.y,u*=A.x,h*=A.y,l+=x,c+=y,g=bi(m),m=B1(g)}}return gf({width:u,height:h,x:l,y:c})}function _p(e,t){const i=cd(e).scrollLeft;return t?t.left+i:Zr(Rn(e)).left+i}function aS(e,t,i){i===void 0&&(i=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(i?0:_p(e,n)),r=n.top+t.scrollTop;return{x:s,y:r}}function WU(e){let{elements:t,rect:i,offsetParent:n,strategy:s}=e;const r=s==="fixed",a=Rn(n),o=t?ld(t.floating):!1;if(n===a||o&&r)return i;let l={scrollLeft:0,scrollTop:0},c=Sn(1);const u=Sn(0),h=En(n);if((h||!h&&!r)&&((Wo(n)!=="body"||$c(a))&&(l=cd(n)),En(n))){const d=Zr(n);c=Ja(n),u.x=d.x+n.clientLeft,u.y=d.y+n.clientTop}const f=a&&!h&&!r?aS(a,l,!0):Sn(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:i.y*c.y-l.scrollTop*c.y+u.y+f.y}}function ZU(e){return Array.from(e.getClientRects())}function JU(e){const t=Rn(e),i=cd(e),n=e.ownerDocument.body,s=di(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=di(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-i.scrollLeft+_p(e);const o=-i.scrollTop;return en(n).direction==="rtl"&&(a+=di(t.clientWidth,n.clientWidth)-s),{width:s,height:r,x:a,y:o}}function $U(e,t){const i=bi(e),n=Rn(e),s=i.visualViewport;let r=n.clientWidth,a=n.clientHeight,o=0,l=0;if(s){r=s.width,a=s.height;const c=jp();(!c||c&&t==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:r,height:a,x:o,y:l}}const e9=new Set(["absolute","fixed"]);function t9(e,t){const i=Zr(e,!0,t==="fixed"),n=i.top+e.clientTop,s=i.left+e.clientLeft,r=En(e)?Ja(e):Sn(1),a=e.clientWidth*r.x,o=e.clientHeight*r.y,l=s*r.x,c=n*r.y;return{width:a,height:o,x:l,y:c}}function ux(e,t,i){let n;if(t==="viewport")n=$U(e,i);else if(t==="document")n=JU(Rn(e));else if($i(t))n=t9(t,i);else{const s=rS(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return gf(n)}function oS(e,t){const i=tr(e);return i===t||!$i(i)||Uo(i)?!1:en(i).position==="fixed"||oS(i,t)}function i9(e,t){const i=t.get(e);if(i)return i;let n=fc(e,[],!1).filter(o=>$i(o)&&Wo(o)!=="body"),s=null;const r=en(e).position==="fixed";let a=r?tr(e):e;for(;$i(a)&&!Uo(a);){const o=en(a),l=kp(a);!l&&o.position==="fixed"&&(s=null),(r?!l&&!s:!l&&o.position==="static"&&!!s&&e9.has(s.position)||$c(a)&&!l&&oS(e,a))?n=n.filter(u=>u!==a):s=o,a=tr(a)}return t.set(e,n),n}function n9(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const a=[...i==="clippingAncestors"?ld(t)?[]:i9(t,this._c):[].concat(i),n],o=a[0],l=a.reduce((c,u)=>{const h=ux(t,u,s);return c.top=di(h.top,c.top),c.right=er(h.right,c.right),c.bottom=er(h.bottom,c.bottom),c.left=di(h.left,c.left),c},ux(t,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function s9(e){const{width:t,height:i}=sS(e);return{width:t,height:i}}function r9(e,t,i){const n=En(t),s=Rn(t),r=i==="fixed",a=Zr(e,!0,r,t);let o={scrollLeft:0,scrollTop:0};const l=Sn(0);function c(){l.x=_p(s)}if(n||!n&&!r)if((Wo(t)!=="body"||$c(s))&&(o=cd(t)),n){const d=Zr(t,!0,r,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else s&&c();r&&!n&&s&&c();const u=s&&!n&&!r?aS(s,o):Sn(0),h=a.left+o.scrollLeft-l.x-u.x,f=a.top+o.scrollTop-l.y-u.y;return{x:h,y:f,width:a.width,height:a.height}}function I0(e){return en(e).position==="static"}function hx(e,t){if(!En(e)||en(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return Rn(e)===i&&(i=i.ownerDocument.body),i}function lS(e,t){const i=bi(e);if(ld(e))return i;if(!En(e)){let s=tr(e);for(;s&&!Uo(s);){if($i(s)&&!I0(s))return s;s=tr(s)}return i}let n=hx(e,t);for(;n&&zU(n)&&I0(n);)n=hx(n,t);return n&&Uo(n)&&I0(n)&&!kp(n)?i:n||qU(e)||i}const a9=async function(e){const t=this.getOffsetParent||lS,i=this.getDimensions,n=await i(e.floating);return{reference:r9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function o9(e){return en(e).direction==="rtl"}const l9={convertOffsetParentRelativeRectToViewportRelativeRect:WU,getDocumentElement:Rn,getClippingRect:n9,getOffsetParent:lS,getElementRects:a9,getClientRects:ZU,getDimensions:s9,getScale:Ja,isElement:$i,isRTL:o9};function cS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function c9(e,t){let i=null,n;const s=Rn(e);function r(){var o;clearTimeout(n),(o=i)==null||o.disconnect(),i=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),r();const c=e.getBoundingClientRect(),{left:u,top:h,width:f,height:d}=c;if(o||t(),!f||!d)return;const g=Ru(h),m=Ru(s.clientWidth-(u+f)),A=Ru(s.clientHeight-(h+d)),p=Ru(u),x={rootMargin:-g+"px "+-m+"px "+-A+"px "+-p+"px",threshold:di(0,er(1,l))||1};let y=!0;function b(E){const w=E[0].intersectionRatio;if(w!==l){if(!y)return a();w?a(!1,w):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w===1&&!cS(c,e.getBoundingClientRect())&&a(),y=!1}try{i=new IntersectionObserver(b,{...x,root:s.ownerDocument})}catch{i=new IntersectionObserver(b,x)}i.observe(e)}return a(!0),r}function u9(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=zp(e),u=s||r?[...c?fc(c):[],...fc(t)]:[];u.forEach(p=>{s&&p.addEventListener("scroll",i,{passive:!0}),r&&p.addEventListener("resize",i)});const h=c&&o?c9(c,i):null;let f=-1,d=null;a&&(d=new ResizeObserver(p=>{let[v]=p;v&&v.target===c&&d&&(d.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=d)==null||x.observe(t)})),i()}),c&&!l&&d.observe(c),d.observe(t));let g,m=l?Zr(e):null;l&&A();function A(){const p=Zr(e);m&&!cS(m,p)&&i(),m=p,g=requestAnimationFrame(A)}return i(),()=>{var p;u.forEach(v=>{s&&v.removeEventListener("scroll",i),r&&v.removeEventListener("resize",i)}),h==null||h(),(p=d)==null||p.disconnect(),d=null,l&&cancelAnimationFrame(g)}}const h9=VU,f9=PU,d9=FU,m9=LU,g9=UU,fx=IU,p9=OU,v9=(e,t,i)=>{const n=new Map,s={platform:l9,...i},r={...s.platform,_c:n};return NU(e,t,{...s,platform:r})};var A9=typeof document<"u",x9=function(){},lh=A9?N.useLayoutEffect:x9;function pf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!pf(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=i;n--!==0;){const r=s[n];if(!(r==="_owner"&&e.$$typeof)&&!pf(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function uS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function dx(e,t){const i=uS(e);return Math.round(t*i)/i}function F0(e){const t=N.useRef(e);return lh(()=>{t.current=e}),t}function y9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:s,elements:{reference:r,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,h]=N.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[f,d]=N.useState(n);pf(f,n)||d(n);const[g,m]=N.useState(null),[A,p]=N.useState(null),v=N.useCallback(F=>{F!==E.current&&(E.current=F,m(F))},[]),x=N.useCallback(F=>{F!==w.current&&(w.current=F,p(F))},[]),y=r||g,b=a||A,E=N.useRef(null),w=N.useRef(null),S=N.useRef(u),M=l!=null,T=F0(l),R=F0(s),D=F0(c),I=N.useCallback(()=>{if(!E.current||!w.current)return;const F={placement:t,strategy:i,middleware:f};R.current&&(F.platform=R.current),v9(E.current,w.current,F).then(z=>{const G={...z,isPositioned:D.current!==!1};U.current&&!pf(S.current,G)&&(S.current=G,na.flushSync(()=>{h(G)}))})},[f,t,i,R,D]);lh(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const U=N.useRef(!1);lh(()=>(U.current=!0,()=>{U.current=!1}),[]),lh(()=>{if(y&&(E.current=y),b&&(w.current=b),y&&b){if(T.current)return T.current(y,b,I);I()}},[y,b,I,T,M]);const L=N.useMemo(()=>({reference:E,floating:w,setReference:v,setFloating:x}),[v,x]),V=N.useMemo(()=>({reference:y,floating:b}),[y,b]),k=N.useMemo(()=>{const F={position:i,left:0,top:0};if(!V.floating)return F;const z=dx(V.floating,u.x),G=dx(V.floating,u.y);return o?{...F,transform:"translate("+z+"px, "+G+"px)",...uS(V.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:z,top:G}},[i,o,V.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:I,refs:L,elements:V,floatingStyles:k}),[u,I,L,V,k])}const b9=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:n,padding:s}=typeof e=="function"?e(i):e;return n&&t(n)?n.current!=null?fx({element:n.current,padding:s}).fn(i):{}:n?fx({element:n,padding:s}).fn(i):{}}}},w9=(e,t)=>({...h9(e),options:[e,t]}),S9=(e,t)=>({...f9(e),options:[e,t]}),C9=(e,t)=>({...p9(e),options:[e,t]}),E9=(e,t)=>({...d9(e),options:[e,t]}),T9=(e,t)=>({...m9(e),options:[e,t]}),M9=(e,t)=>({...g9(e),options:[e,t]}),D9=(e,t)=>({...b9(e),options:[e,t]});var R9="Arrow",hS=N.forwardRef((e,t)=>{const{children:i,width:n=10,height:s=5,...r}=e;return C.jsx(fe.svg,{...r,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});hS.displayName=R9;var N9=hS,Gp="Popper",[fS,ud]=Si(Gp),[I9,dS]=fS(Gp),mS=e=>{const{__scopePopper:t,children:i}=e,[n,s]=N.useState(null);return C.jsx(I9,{scope:t,anchor:n,onAnchorChange:s,children:i})};mS.displayName=Gp;var gS="PopperAnchor",pS=N.forwardRef((e,t)=>{const{__scopePopper:i,virtualRef:n,...s}=e,r=dS(gS,i),a=N.useRef(null),o=Me(t,a);return N.useEffect(()=>{r.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:C.jsx(fe.div,{...s,ref:o})});pS.displayName=gS;var Hp="PopperContent",[F9,U9]=fS(Hp),vS=N.forwardRef((e,t)=>{var K,te,he,Z,W,ee;const{__scopePopper:i,side:n="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:d="optimized",onPlaced:g,...m}=e,A=dS(Hp,i),[p,v]=N.useState(null),x=Me(t,Fe=>v(Fe)),[y,b]=N.useState(null),E=Dp(y),w=(E==null?void 0:E.width)??0,S=(E==null?void 0:E.height)??0,M=n+(r!=="center"?"-"+r:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],D=R.length>0,I={padding:T,boundary:R.filter(V9),altBoundary:D},{refs:U,floatingStyles:L,placement:V,isPositioned:k,middlewareData:F}=y9({strategy:"fixed",placement:M,whileElementsMounted:(...Fe)=>u9(...Fe,{animationFrame:d==="always"}),elements:{reference:A.anchor},middleware:[w9({mainAxis:s+S,alignmentAxis:a}),l&&S9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?C9():void 0,...I}),l&&E9({...I}),T9({...I,apply:({elements:Fe,rects:Oe,availableWidth:li,availableHeight:Nn})=>{const{width:In,height:or}=Oe.reference,Gi=Fe.floating.style;Gi.setProperty("--radix-popper-available-width",`${li}px`),Gi.setProperty("--radix-popper-available-height",`${Nn}px`),Gi.setProperty("--radix-popper-anchor-width",`${In}px`),Gi.setProperty("--radix-popper-anchor-height",`${or}px`)}}),y&&D9({element:y,padding:o}),P9({arrowWidth:w,arrowHeight:S}),f&&M9({strategy:"referenceHidden",...I})]}),[z,G]=yS(V),X=Gt(g);Et(()=>{k&&(X==null||X())},[k,X]);const le=(K=F.arrow)==null?void 0:K.x,oe=(te=F.arrow)==null?void 0:te.y,ne=((he=F.arrow)==null?void 0:he.centerOffset)!==0,[ie,me]=N.useState();return Et(()=>{p&&me(window.getComputedStyle(p).zIndex)},[p]),C.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:k?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(Z=F.transformOrigin)==null?void 0:Z.x,(W=F.transformOrigin)==null?void 0:W.y].join(" "),...((ee=F.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:C.jsx(F9,{scope:i,placedSide:z,onArrowChange:b,arrowX:le,arrowY:oe,shouldHideArrow:ne,children:C.jsx(fe.div,{"data-side":z,"data-align":G,...m,ref:x,style:{...m.style,animation:k?void 0:"none"}})})})});vS.displayName=Hp;var AS="PopperArrow",B9={top:"bottom",right:"left",bottom:"top",left:"right"},xS=N.forwardRef(function(t,i){const{__scopePopper:n,...s}=t,r=U9(AS,n),a=B9[r.placedSide];return C.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:C.jsx(N9,{...s,ref:i,style:{...s.style,display:"block"}})})});xS.displayName=AS;function V9(e){return e!==null}var P9=e=>({name:"transformOrigin",options:e,fn(t){var A,p,v;const{placement:i,rects:n,middlewareData:s}=t,a=((A=s.arrow)==null?void 0:A.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,u]=yS(i),h={start:"0%",center:"50%",end:"100%"}[u],f=(((p=s.arrow)==null?void 0:p.x)??0)+o/2,d=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=a?h:`${f}px`,m=`${-l}px`):c==="top"?(g=a?h:`${f}px`,m=`${n.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=a?h:`${d}px`):c==="left"&&(g=`${n.floating.width+l}px`,m=a?h:`${d}px`),{data:{x:g,y:m}}}});function yS(e){const[t,i="center"]=e.split("-");return[t,i]}var bS=mS,wS=pS,SS=vS,CS=xS,O9="Portal",hd=N.forwardRef((e,t)=>{var o;const{container:i,...n}=e,[s,r]=N.useState(!1);Et(()=>r(!0),[]);const a=i||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?WT.createPortal(C.jsx(fe.div,{...n,ref:t}),a):null});hd.displayName=O9;var ES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),L9="VisuallyHidden",TS=N.forwardRef((e,t)=>C.jsx(fe.span,{...e,ref:t,style:{...ES,...e.style}}));TS.displayName=L9;var k9=TS,j9=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fa=new WeakMap,Nu=new WeakMap,Iu={},U0=0,MS=function(e){return e&&(e.host||MS(e.parentNode))},z9=function(e,t){return t.map(function(i){if(e.contains(i))return i;var n=MS(i);return n&&e.contains(n)?n:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},_9=function(e,t,i,n){var s=z9(t,Array.isArray(e)?e:[e]);Iu[i]||(Iu[i]=new WeakMap);var r=Iu[i],a=[],o=new Set,l=new Set(s),c=function(h){!h||o.has(h)||(o.add(h),c(h.parentNode))};s.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(o.has(f))u(f);else try{var d=f.getAttribute(n),g=d!==null&&d!=="false",m=(fa.get(f)||0)+1,A=(r.get(f)||0)+1;fa.set(f,m),r.set(f,A),a.push(f),m===1&&g&&Nu.set(f,!0),A===1&&f.setAttribute(i,"true"),g||f.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",f,p)}})};return u(t),o.clear(),U0++,function(){a.forEach(function(h){var f=fa.get(h)-1,d=r.get(h)-1;fa.set(h,f),r.set(h,d),f||(Nu.has(h)||h.removeAttribute(n),Nu.delete(h)),d||h.removeAttribute(i)}),U0--,U0||(fa=new WeakMap,fa=new WeakMap,Nu=new WeakMap,Iu={})}},DS=function(e,t,i){i===void 0&&(i="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=j9(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),_9(n,s,i,"aria-hidden")):function(){return null}},pn=function(){return pn=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},pn.apply(this,arguments)};function RS(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i}function G9(e,t,i){if(i||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}var ch="right-scroll-bar-position",uh="width-before-scroll-bar",H9="with-scroll-bars-hidden",Y9="--removed-body-scroll-bar-size";function B0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function q9(e,t){var i=N.useState(function(){return{value:e,callback:t,facade:{get current(){return i.value},set current(n){var s=i.value;s!==n&&(i.value=n,i.callback(n,s))}}}})[0];return i.callback=t,i.facade}var K9=typeof window<"u"?N.useLayoutEffect:N.useEffect,mx=new WeakMap;function Q9(e,t){var i=q9(null,function(n){return e.forEach(function(s){return B0(s,n)})});return K9(function(){var n=mx.get(i);if(n){var s=new Set(n),r=new Set(e),a=i.current;s.forEach(function(o){r.has(o)||B0(o,null)}),r.forEach(function(o){s.has(o)||B0(o,a)})}mx.set(i,e)},[e]),i}function X9(e){return e}function W9(e,t){t===void 0&&(t=X9);var i=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(r){var a=t(r,n);return i.push(a),function(){i=i.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(n=!0;i.length;){var a=i;i=[],a.forEach(r)}i={push:function(o){return r(o)},filter:function(){return i}}},assignMedium:function(r){n=!0;var a=[];if(i.length){var o=i;i=[],o.forEach(r),a=i}var l=function(){var u=a;a=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),i={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),i}}}};return s}function Z9(e){e===void 0&&(e={});var t=W9(null);return t.options=pn({async:!0,ssr:!1},e),t}var NS=function(e){var t=e.sideCar,i=RS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,pn({},i))};NS.isSideCarExport=!0;function J9(e,t){return e.useMedium(t),NS}var IS=Z9(),V0=function(){},fd=N.forwardRef(function(e,t){var i=N.useRef(null),n=N.useState({onScrollCapture:V0,onWheelCapture:V0,onTouchMoveCapture:V0}),s=n[0],r=n[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,d=e.noRelative,g=e.noIsolation,m=e.inert,A=e.allowPinchZoom,p=e.as,v=p===void 0?"div":p,x=e.gapMode,y=RS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,E=Q9([i,t]),w=pn(pn({},y),s);return N.createElement(N.Fragment,null,u&&N.createElement(b,{sideCar:IS,removeScrollBar:c,shards:h,noRelative:d,noIsolation:g,inert:m,setCallbacks:r,allowPinchZoom:!!A,lockRef:i,gapMode:x}),a?N.cloneElement(N.Children.only(o),pn(pn({},w),{ref:E})):N.createElement(v,pn({},w,{className:l,ref:E}),o))});fd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fd.classNames={fullWidth:uh,zeroRight:ch};var $9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$9();return t&&e.setAttribute("nonce",t),e}function tB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function iB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var nB=function(){var e=0,t=null;return{add:function(i){e==0&&(t=eB())&&(tB(t,i),iB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},sB=function(){var e=nB();return function(t,i){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&i])}},FS=function(){var e=sB(),t=function(i){var n=i.styles,s=i.dynamic;return e(n,s),null};return t},rB={left:0,top:0,right:0,gap:0},P0=function(e){return parseInt(e||"",10)||0},aB=function(e){var t=window.getComputedStyle(document.body),i=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[P0(i),P0(n),P0(s)]},oB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rB;var t=aB(e),i=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-i+t[2]-t[0])}},lB=FS(),$a="data-scroll-locked",cB=function(e,t,i,n){var s=e.left,r=e.top,a=e.right,o=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(H9,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat($a,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),i==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),i==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ch,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(uh,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ch," .").concat(ch,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(uh," .").concat(uh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat($a,`] {
    `).concat(Y9,": ").concat(o,`px;
  }
`)},gx=function(){var e=parseInt(document.body.getAttribute($a)||"0",10);return isFinite(e)?e:0},uB=function(){N.useEffect(function(){return document.body.setAttribute($a,(gx()+1).toString()),function(){var e=gx()-1;e<=0?document.body.removeAttribute($a):document.body.setAttribute($a,e.toString())}},[])},hB=function(e){var t=e.noRelative,i=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;uB();var r=N.useMemo(function(){return oB(s)},[s]);return N.createElement(lB,{styles:cB(r,!t,s,i?"":"!important")})},V1=!1;if(typeof window<"u")try{var Fu=Object.defineProperty({},"passive",{get:function(){return V1=!0,!0}});window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{V1=!1}var da=V1?{passive:!1}:!1,fB=function(e){return e.tagName==="TEXTAREA"},US=function(e,t){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[t]!=="hidden"&&!(i.overflowY===i.overflowX&&!fB(e)&&i[t]==="visible")},dB=function(e){return US(e,"overflowY")},mB=function(e){return US(e,"overflowX")},px=function(e,t){var i=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=BS(e,n);if(s){var r=VS(e,n),a=r[1],o=r[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==i.body);return!1},gB=function(e){var t=e.scrollTop,i=e.scrollHeight,n=e.clientHeight;return[t,i,n]},pB=function(e){var t=e.scrollLeft,i=e.scrollWidth,n=e.clientWidth;return[t,i,n]},BS=function(e,t){return e==="v"?dB(t):mB(t)},VS=function(e,t){return e==="v"?gB(t):pB(t)},vB=function(e,t){return e==="h"&&t==="rtl"?-1:1},AB=function(e,t,i,n,s){var r=vB(e,window.getComputedStyle(t).direction),a=r*n,o=i.target,l=t.contains(o),c=!1,u=a>0,h=0,f=0;do{if(!o)break;var d=VS(e,o),g=d[0],m=d[1],A=d[2],p=m-A-r*g;(g||p)&&BS(e,o)&&(h+=p,f+=g);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(Math.abs(h)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},Uu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vx=function(e){return[e.deltaX,e.deltaY]},Ax=function(e){return e&&"current"in e?e.current:e},xB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bB=0,ma=[];function wB(e){var t=N.useRef([]),i=N.useRef([0,0]),n=N.useRef(),s=N.useState(bB++)[0],r=N.useState(FS)[0],a=N.useRef(e);N.useEffect(function(){a.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=G9([e.lockRef.current],(e.shards||[]).map(Ax),!0).filter(Boolean);return m.forEach(function(A){return A.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=N.useCallback(function(m,A){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var p=Uu(m),v=i.current,x="deltaX"in m?m.deltaX:v[0]-p[0],y="deltaY"in m?m.deltaY:v[1]-p[1],b,E=m.target,w=Math.abs(x)>Math.abs(y)?"h":"v";if("touches"in m&&w==="h"&&E.type==="range")return!1;var S=px(w,E);if(!S)return!0;if(S?b=w:(b=w==="v"?"h":"v",S=px(w,E)),!S)return!1;if(!n.current&&"changedTouches"in m&&(x||y)&&(n.current=b),!b)return!0;var M=n.current||b;return AB(M,A,m,M==="h"?x:y,!0)},[]),l=N.useCallback(function(m){var A=m;if(!(!ma.length||ma[ma.length-1]!==r)){var p="deltaY"in A?vx(A):Uu(A),v=t.current.filter(function(b){return b.name===A.type&&(b.target===A.target||A.target===b.shadowParent)&&xB(b.delta,p)})[0];if(v&&v.should){A.cancelable&&A.preventDefault();return}if(!v){var x=(a.current.shards||[]).map(Ax).filter(Boolean).filter(function(b){return b.contains(A.target)}),y=x.length>0?o(A,x[0]):!a.current.noIsolation;y&&A.cancelable&&A.preventDefault()}}},[]),c=N.useCallback(function(m,A,p,v){var x={name:m,delta:A,target:p,should:v,shadowParent:SB(p)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(y){return y!==x})},1)},[]),u=N.useCallback(function(m){i.current=Uu(m),n.current=void 0},[]),h=N.useCallback(function(m){c(m.type,vx(m),m.target,o(m,e.lockRef.current))},[]),f=N.useCallback(function(m){c(m.type,Uu(m),m.target,o(m,e.lockRef.current))},[]);N.useEffect(function(){return ma.push(r),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,da),document.addEventListener("touchmove",l,da),document.addEventListener("touchstart",u,da),function(){ma=ma.filter(function(m){return m!==r}),document.removeEventListener("wheel",l,da),document.removeEventListener("touchmove",l,da),document.removeEventListener("touchstart",u,da)}},[]);var d=e.removeScrollBar,g=e.inert;return N.createElement(N.Fragment,null,g?N.createElement(r,{styles:yB(s)}):null,d?N.createElement(hB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function SB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CB=J9(IS,wB);var Yp=N.forwardRef(function(e,t){return N.createElement(fd,pn({},e,{ref:t,sideCar:CB}))});Yp.classNames=fd.classNames;var EB=[" ","Enter","ArrowUp","ArrowDown"],TB=[" ","Enter"],Jr="Select",[dd,md,MB]=k3(Jr),[Zo,xz]=Si(Jr,[MB,ud]),gd=ud(),[DB,rr]=Zo(Jr),[RB,NB]=Zo(Jr),PS=e=>{const{__scopeSelect:t,children:i,open:n,defaultOpen:s,onOpenChange:r,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:d,form:g}=e,m=gd(t),[A,p]=N.useState(null),[v,x]=N.useState(null),[y,b]=N.useState(!1),E=Ko(c),[w,S]=ji({prop:n,defaultProp:s??!1,onChange:r,caller:Jr}),[M,T]=ji({prop:a,defaultProp:o,onChange:l,caller:Jr}),R=N.useRef(null),D=A?g||!!A.closest("form"):!0,[I,U]=N.useState(new Set),L=Array.from(I).map(V=>V.props.value).join(";");return C.jsx(bS,{...m,children:C.jsxs(DB,{required:d,scope:t,trigger:A,onTriggerChange:p,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:y,onValueNodeHasChildrenChange:b,contentId:wn(),value:M,onValueChange:T,open:w,onOpenChange:S,dir:E,triggerPointerDownPosRef:R,disabled:f,children:[C.jsx(dd.Provider,{scope:t,children:C.jsx(RB,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(V=>{U(k=>new Set(k).add(V))},[]),onNativeOptionRemove:N.useCallback(V=>{U(k=>{const F=new Set(k);return F.delete(V),F})},[]),children:i})}),D?C.jsxs(sC,{"aria-hidden":!0,required:d,tabIndex:-1,name:u,autoComplete:h,value:M,onChange:V=>T(V.target.value),disabled:f,form:g,children:[M===void 0?C.jsx("option",{value:""}):null,Array.from(I)]},L):null]})})};PS.displayName=Jr;var OS="SelectTrigger",LS=N.forwardRef((e,t)=>{const{__scopeSelect:i,disabled:n=!1,...s}=e,r=gd(i),a=rr(OS,i),o=a.disabled||n,l=Me(t,a.onTriggerChange),c=md(i),u=N.useRef("touch"),[h,f,d]=aC(m=>{const A=c().filter(x=>!x.disabled),p=A.find(x=>x.value===a.value),v=oC(A,m,p);v!==void 0&&a.onValueChange(v.value)}),g=m=>{o||(a.onOpenChange(!0),d()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return C.jsx(wS,{asChild:!0,...r,children:C.jsx(fe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":rC(a.value)?"":void 0,...s,ref:l,onClick:ue(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ue(s.onPointerDown,m=>{u.current=m.pointerType;const A=m.target;A.hasPointerCapture(m.pointerId)&&A.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ue(s.onKeyDown,m=>{const A=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(A&&m.key===" ")&&EB.includes(m.key)&&(g(),m.preventDefault())})})})});LS.displayName=OS;var kS="SelectValue",jS=N.forwardRef((e,t)=>{const{__scopeSelect:i,className:n,style:s,children:r,placeholder:a="",...o}=e,l=rr(kS,i),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,h=Me(t,l.onValueNodeChange);return Et(()=>{c(u)},[c,u]),C.jsx(fe.span,{...o,ref:h,style:{pointerEvents:"none"},children:rC(l.value)?C.jsx(C.Fragment,{children:a}):r})});jS.displayName=kS;var IB="SelectIcon",zS=N.forwardRef((e,t)=>{const{__scopeSelect:i,children:n,...s}=e;return C.jsx(fe.span,{"aria-hidden":!0,...s,ref:t,children:n||"▼"})});zS.displayName=IB;var FB="SelectPortal",_S=e=>C.jsx(hd,{asChild:!0,...e});_S.displayName=FB;var $r="SelectContent",GS=N.forwardRef((e,t)=>{const i=rr($r,e.__scopeSelect),[n,s]=N.useState();if(Et(()=>{s(new DocumentFragment)},[]),!i.open){const r=n;return r?na.createPortal(C.jsx(HS,{scope:e.__scopeSelect,children:C.jsx(dd.Slot,{scope:e.__scopeSelect,children:C.jsx("div",{children:e.children})})}),r):null}return C.jsx(YS,{...e,ref:t})});GS.displayName=$r;var qi=10,[HS,ar]=Zo($r),UB="SelectContentImpl",BB=Io("SelectContent.RemoveScroll"),YS=N.forwardRef((e,t)=>{const{__scopeSelect:i,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:d,sticky:g,hideWhenDetached:m,avoidCollisions:A,...p}=e,v=rr($r,i),[x,y]=N.useState(null),[b,E]=N.useState(null),w=Me(t,K=>y(K)),[S,M]=N.useState(null),[T,R]=N.useState(null),D=md(i),[I,U]=N.useState(!1),L=N.useRef(!1);N.useEffect(()=>{if(x)return DS(x)},[x]),Jw();const V=N.useCallback(K=>{const[te,...he]=D().map(ee=>ee.ref.current),[Z]=he.slice(-1),W=document.activeElement;for(const ee of K)if(ee===W||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===te&&b&&(b.scrollTop=0),ee===Z&&b&&(b.scrollTop=b.scrollHeight),ee==null||ee.focus(),document.activeElement!==W))return},[D,b]),k=N.useCallback(()=>V([S,x]),[V,S,x]);N.useEffect(()=>{I&&k()},[I,k]);const{onOpenChange:F,triggerPointerDownPosRef:z}=v;N.useEffect(()=>{if(x){let K={x:0,y:0};const te=Z=>{var W,ee;K={x:Math.abs(Math.round(Z.pageX)-(((W=z.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((ee=z.current)==null?void 0:ee.y)??0))}},he=Z=>{K.x<=10&&K.y<=10?Z.preventDefault():x.contains(Z.target)||F(!1),document.removeEventListener("pointermove",te),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",he,{capture:!0})}}},[x,F,z]),N.useEffect(()=>{const K=()=>F(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[F]);const[G,X]=aC(K=>{const te=D().filter(W=>!W.disabled),he=te.find(W=>W.ref.current===document.activeElement),Z=oC(te,K,he);Z&&setTimeout(()=>Z.ref.current.focus())}),le=N.useCallback((K,te,he)=>{const Z=!L.current&&!he;(v.value!==void 0&&v.value===te||Z)&&(M(K),Z&&(L.current=!0))},[v.value]),oe=N.useCallback(()=>x==null?void 0:x.focus(),[x]),ne=N.useCallback((K,te,he)=>{const Z=!L.current&&!he;(v.value!==void 0&&v.value===te||Z)&&R(K)},[v.value]),ie=n==="popper"?P1:qS,me=ie===P1?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:d,sticky:g,hideWhenDetached:m,avoidCollisions:A}:{};return C.jsx(HS,{scope:i,content:x,viewport:b,onViewportChange:E,itemRefCallback:le,selectedItem:S,onItemLeave:oe,itemTextRefCallback:ne,focusSelectedItem:k,selectedItemText:T,position:n,isPositioned:I,searchRef:G,children:C.jsx(Yp,{as:BB,allowPinchZoom:!0,children:C.jsx(Vp,{asChild:!0,trapped:v.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:ue(s,K=>{var te;(te=v.trigger)==null||te.focus({preventScroll:!0}),K.preventDefault()}),children:C.jsx(ad,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:C.jsx(ie,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:K=>K.preventDefault(),...p,...me,onPlaced:()=>U(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:ue(p.onKeyDown,K=>{const te=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!te&&K.key.length===1&&X(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let Z=D().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(K.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const W=K.target,ee=Z.indexOf(W);Z=Z.slice(ee+1)}setTimeout(()=>V(Z)),K.preventDefault()}})})})})})})});YS.displayName=UB;var VB="SelectItemAlignedPosition",qS=N.forwardRef((e,t)=>{const{__scopeSelect:i,onPlaced:n,...s}=e,r=rr($r,i),a=ar($r,i),[o,l]=N.useState(null),[c,u]=N.useState(null),h=Me(t,w=>u(w)),f=md(i),d=N.useRef(!1),g=N.useRef(!0),{viewport:m,selectedItem:A,selectedItemText:p,focusSelectedItem:v}=a,x=N.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&c&&m&&A&&p){const w=r.trigger.getBoundingClientRect(),S=c.getBoundingClientRect(),M=r.valueNode.getBoundingClientRect(),T=p.getBoundingClientRect();if(r.dir!=="rtl"){const W=T.left-S.left,ee=M.left-W,Fe=w.left-ee,Oe=w.width+Fe,li=Math.max(Oe,S.width),Nn=window.innerWidth-qi,In=N1(ee,[qi,Math.max(qi,Nn-li)]);o.style.minWidth=Oe+"px",o.style.left=In+"px"}else{const W=S.right-T.right,ee=window.innerWidth-M.right-W,Fe=window.innerWidth-w.right-ee,Oe=w.width+Fe,li=Math.max(Oe,S.width),Nn=window.innerWidth-qi,In=N1(ee,[qi,Math.max(qi,Nn-li)]);o.style.minWidth=Oe+"px",o.style.right=In+"px"}const R=f(),D=window.innerHeight-qi*2,I=m.scrollHeight,U=window.getComputedStyle(c),L=parseInt(U.borderTopWidth,10),V=parseInt(U.paddingTop,10),k=parseInt(U.borderBottomWidth,10),F=parseInt(U.paddingBottom,10),z=L+V+I+F+k,G=Math.min(A.offsetHeight*5,z),X=window.getComputedStyle(m),le=parseInt(X.paddingTop,10),oe=parseInt(X.paddingBottom,10),ne=w.top+w.height/2-qi,ie=D-ne,me=A.offsetHeight/2,K=A.offsetTop+me,te=L+V+K,he=z-te;if(te<=ne){const W=R.length>0&&A===R[R.length-1].ref.current;o.style.bottom="0px";const ee=c.clientHeight-m.offsetTop-m.offsetHeight,Fe=Math.max(ie,me+(W?oe:0)+ee+k),Oe=te+Fe;o.style.height=Oe+"px"}else{const W=R.length>0&&A===R[0].ref.current;o.style.top="0px";const Fe=Math.max(ne,L+m.offsetTop+(W?le:0)+me)+he;o.style.height=Fe+"px",m.scrollTop=te-ne+m.offsetTop}o.style.margin=`${qi}px 0`,o.style.minHeight=G+"px",o.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>d.current=!0)}},[f,r.trigger,r.valueNode,o,c,m,A,p,r.dir,n]);Et(()=>x(),[x]);const[y,b]=N.useState();Et(()=>{c&&b(window.getComputedStyle(c).zIndex)},[c]);const E=N.useCallback(w=>{w&&g.current===!0&&(x(),v==null||v(),g.current=!1)},[x,v]);return C.jsx(OB,{scope:i,contentWrapper:o,shouldExpandOnScrollRef:d,onScrollButtonChange:E,children:C.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:y},children:C.jsx(fe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});qS.displayName=VB;var PB="SelectPopperPosition",P1=N.forwardRef((e,t)=>{const{__scopeSelect:i,align:n="start",collisionPadding:s=qi,...r}=e,a=gd(i);return C.jsx(SS,{...a,...r,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P1.displayName=PB;var[OB,qp]=Zo($r,{}),O1="SelectViewport",KS=N.forwardRef((e,t)=>{const{__scopeSelect:i,nonce:n,...s}=e,r=ar(O1,i),a=qp(O1,i),o=Me(t,r.onViewportChange),l=N.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),C.jsx(dd.Slot,{scope:i,children:C.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&h){const d=Math.abs(l.current-u.scrollTop);if(d>0){const g=window.innerHeight-qi*2,m=parseFloat(h.style.minHeight),A=parseFloat(h.style.height),p=Math.max(m,A);if(p<g){const v=p+d,x=Math.min(g,v),y=v-x;h.style.height=x+"px",h.style.bottom==="0px"&&(u.scrollTop=y>0?y:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});KS.displayName=O1;var QS="SelectGroup",[LB,kB]=Zo(QS),jB=N.forwardRef((e,t)=>{const{__scopeSelect:i,...n}=e,s=wn();return C.jsx(LB,{scope:i,id:s,children:C.jsx(fe.div,{role:"group","aria-labelledby":s,...n,ref:t})})});jB.displayName=QS;var XS="SelectLabel",zB=N.forwardRef((e,t)=>{const{__scopeSelect:i,...n}=e,s=kB(XS,i);return C.jsx(fe.div,{id:s.id,...n,ref:t})});zB.displayName=XS;var vf="SelectItem",[_B,WS]=Zo(vf),ZS=N.forwardRef((e,t)=>{const{__scopeSelect:i,value:n,disabled:s=!1,textValue:r,...a}=e,o=rr(vf,i),l=ar(vf,i),c=o.value===n,[u,h]=N.useState(r??""),[f,d]=N.useState(!1),g=Me(t,v=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,v,n,s)}),m=wn(),A=N.useRef("touch"),p=()=>{s||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(_B,{scope:i,value:n,disabled:s,textId:m,isSelected:c,onItemTextChange:N.useCallback(v=>{h(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:C.jsx(dd.ItemSlot,{scope:i,value:n,disabled:s,textValue:u,children:C.jsx(fe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:g,onFocus:ue(a.onFocus,()=>d(!0)),onBlur:ue(a.onBlur,()=>d(!1)),onClick:ue(a.onClick,()=>{A.current!=="mouse"&&p()}),onPointerUp:ue(a.onPointerUp,()=>{A.current==="mouse"&&p()}),onPointerDown:ue(a.onPointerDown,v=>{A.current=v.pointerType}),onPointerMove:ue(a.onPointerMove,v=>{var x;A.current=v.pointerType,s?(x=l.onItemLeave)==null||x.call(l):A.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(a.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:ue(a.onKeyDown,v=>{var y;((y=l.searchRef)==null?void 0:y.current)!==""&&v.key===" "||(TB.includes(v.key)&&p(),v.key===" "&&v.preventDefault())})})})})});ZS.displayName=vf;var Sl="SelectItemText",JS=N.forwardRef((e,t)=>{const{__scopeSelect:i,className:n,style:s,...r}=e,a=rr(Sl,i),o=ar(Sl,i),l=WS(Sl,i),c=NB(Sl,i),[u,h]=N.useState(null),f=Me(t,p=>h(p),l.onItemTextChange,p=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,p,l.value,l.disabled)}),d=u==null?void 0:u.textContent,g=N.useMemo(()=>C.jsx("option",{value:l.value,disabled:l.disabled,children:d},l.value),[l.disabled,l.value,d]),{onNativeOptionAdd:m,onNativeOptionRemove:A}=c;return Et(()=>(m(g),()=>A(g)),[m,A,g]),C.jsxs(C.Fragment,{children:[C.jsx(fe.span,{id:l.textId,...r,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?na.createPortal(r.children,a.valueNode):null]})});JS.displayName=Sl;var $S="SelectItemIndicator",eC=N.forwardRef((e,t)=>{const{__scopeSelect:i,...n}=e;return WS($S,i).isSelected?C.jsx(fe.span,{"aria-hidden":!0,...n,ref:t}):null});eC.displayName=$S;var L1="SelectScrollUpButton",tC=N.forwardRef((e,t)=>{const i=ar(L1,e.__scopeSelect),n=qp(L1,e.__scopeSelect),[s,r]=N.useState(!1),a=Me(t,n.onScrollButtonChange);return Et(()=>{if(i.viewport&&i.isPositioned){let o=function(){const c=l.scrollTop>0;r(c)};const l=i.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),s?C.jsx(nC,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=i;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});tC.displayName=L1;var k1="SelectScrollDownButton",iC=N.forwardRef((e,t)=>{const i=ar(k1,e.__scopeSelect),n=qp(k1,e.__scopeSelect),[s,r]=N.useState(!1),a=Me(t,n.onScrollButtonChange);return Et(()=>{if(i.viewport&&i.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=i.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),s?C.jsx(nC,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=i;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});iC.displayName=k1;var nC=N.forwardRef((e,t)=>{const{__scopeSelect:i,onAutoScroll:n,...s}=e,r=ar("SelectScrollButton",i),a=N.useRef(null),o=md(i),l=N.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return N.useEffect(()=>()=>l(),[l]),Et(()=>{var u;const c=o().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),C.jsx(fe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:ue(s.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{l()})})}),GB="SelectSeparator",HB=N.forwardRef((e,t)=>{const{__scopeSelect:i,...n}=e;return C.jsx(fe.div,{"aria-hidden":!0,...n,ref:t})});HB.displayName=GB;var j1="SelectArrow",YB=N.forwardRef((e,t)=>{const{__scopeSelect:i,...n}=e,s=gd(i),r=rr(j1,i),a=ar(j1,i);return r.open&&a.position==="popper"?C.jsx(CS,{...s,...n,ref:t}):null});YB.displayName=j1;var qB="SelectBubbleInput",sC=N.forwardRef(({__scopeSelect:e,value:t,...i},n)=>{const s=N.useRef(null),r=Me(n,s),a=Mp(t);return N.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&u){const h=new Event("change",{bubbles:!0});u.call(o,t),o.dispatchEvent(h)}},[a,t]),C.jsx(fe.select,{...i,style:{...ES,...i.style},ref:r,defaultValue:t})});sC.displayName=qB;function rC(e){return e===""||e===void 0}function aC(e){const t=Gt(e),i=N.useRef(""),n=N.useRef(0),s=N.useCallback(a=>{const o=i.current+a;t(o),function l(c){i.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),r=N.useCallback(()=>{i.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[i,s,r]}function oC(e,t,i){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,r=i?e.indexOf(i):-1;let a=KB(e,Math.max(r,0));s.length===1&&(a=a.filter(c=>c!==i));const l=a.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==i?l:void 0}function KB(e,t){return e.map((i,n)=>e[(t+n)%e.length])}var QB=PS,XB=LS,WB=jS,ZB=zS,JB=_S,$B=GS,eV=KS,tV=ZS,iV=JS,nV=eC,sV=tC,rV=iC;function lC({...e}){return C.jsx(QB,{"data-slot":"select",...e})}function cC({...e}){return C.jsx(WB,{"data-slot":"select-value",...e})}function uC({className:e,size:t="default",children:i,...n}){return C.jsxs(XB,{"data-slot":"select-trigger","data-size":t,className:Te("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[i,C.jsx(ZB,{asChild:!0,children:C.jsx(yp,{className:"size-4 opacity-50"})})]})}function hC({className:e,children:t,position:i="popper",...n}){return C.jsx(JB,{children:C.jsxs($B,{"data-slot":"select-content",className:Te("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...n,children:[C.jsx(aV,{}),C.jsx(eV,{className:Te("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),C.jsx(oV,{})]})})}function Cl({className:e,children:t,...i}){return C.jsxs(tV,{"data-slot":"select-item",className:Te("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...i,children:[C.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:C.jsx(nV,{children:C.jsx(V3,{className:"size-4"})})}),C.jsx(iV,{children:t})]})}function aV({className:e,...t}){return C.jsx(sV,{"data-slot":"select-scroll-up-button",className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(P3,{className:"size-4"})})}function oV({className:e,...t}){return C.jsx(rV,{"data-slot":"select-scroll-down-button",className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(yp,{className:"size-4"})})}var pd="Dialog",[fC,yz]=Si(pd),[lV,sn]=fC(pd),dC=e=>{const{__scopeDialog:t,children:i,open:n,defaultOpen:s,onOpenChange:r,modal:a=!0}=e,o=N.useRef(null),l=N.useRef(null),[c,u]=ji({prop:n,defaultProp:s??!1,onChange:r,caller:pd});return C.jsx(lV,{scope:t,triggerRef:o,contentRef:l,contentId:wn(),titleId:wn(),descriptionId:wn(),open:c,onOpenChange:u,onOpenToggle:N.useCallback(()=>u(h=>!h),[u]),modal:a,children:i})};dC.displayName=pd;var mC="DialogTrigger",cV=N.forwardRef((e,t)=>{const{__scopeDialog:i,...n}=e,s=sn(mC,i),r=Me(t,s.triggerRef);return C.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xp(s.open),...n,ref:r,onClick:ue(e.onClick,s.onOpenToggle)})});cV.displayName=mC;var Kp="DialogPortal",[uV,gC]=fC(Kp,{forceMount:void 0}),pC=e=>{const{__scopeDialog:t,forceMount:i,children:n,container:s}=e,r=sn(Kp,t);return C.jsx(uV,{scope:t,forceMount:i,children:N.Children.map(n,a=>C.jsx(oi,{present:i||r.open,children:C.jsx(hd,{asChild:!0,container:s,children:a})}))})};pC.displayName=Kp;var Af="DialogOverlay",vC=N.forwardRef((e,t)=>{const i=gC(Af,e.__scopeDialog),{forceMount:n=i.forceMount,...s}=e,r=sn(Af,e.__scopeDialog);return r.modal?C.jsx(oi,{present:n||r.open,children:C.jsx(fV,{...s,ref:t})}):null});vC.displayName=Af;var hV=Io("DialogOverlay.RemoveScroll"),fV=N.forwardRef((e,t)=>{const{__scopeDialog:i,...n}=e,s=sn(Af,i);return C.jsx(Yp,{as:hV,allowPinchZoom:!0,shards:[s.contentRef],children:C.jsx(fe.div,{"data-state":Xp(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ea="DialogContent",AC=N.forwardRef((e,t)=>{const i=gC(ea,e.__scopeDialog),{forceMount:n=i.forceMount,...s}=e,r=sn(ea,e.__scopeDialog);return C.jsx(oi,{present:n||r.open,children:r.modal?C.jsx(dV,{...s,ref:t}):C.jsx(mV,{...s,ref:t})})});AC.displayName=ea;var dV=N.forwardRef((e,t)=>{const i=sn(ea,e.__scopeDialog),n=N.useRef(null),s=Me(t,i.contentRef,n);return N.useEffect(()=>{const r=n.current;if(r)return DS(r)},[]),C.jsx(xC,{...e,ref:s,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,r=>{var a;r.preventDefault(),(a=i.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,r=>{const a=r.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&r.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,r=>r.preventDefault())})}),mV=N.forwardRef((e,t)=>{const i=sn(ea,e.__scopeDialog),n=N.useRef(!1),s=N.useRef(!1);return C.jsx(xC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,r),r.defaultPrevented||(n.current||(o=i.triggerRef.current)==null||o.focus(),r.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:r=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=r.target;((c=i.triggerRef.current)==null?void 0:c.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),xC=N.forwardRef((e,t)=>{const{__scopeDialog:i,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:r,...a}=e,o=sn(ea,i),l=N.useRef(null),c=Me(t,l);return Jw(),C.jsxs(C.Fragment,{children:[C.jsx(Vp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:r,children:C.jsx(ad,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Xp(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(gV,{titleId:o.titleId}),C.jsx(vV,{contentRef:l,descriptionId:o.descriptionId})]})]})}),Qp="DialogTitle",yC=N.forwardRef((e,t)=>{const{__scopeDialog:i,...n}=e,s=sn(Qp,i);return C.jsx(fe.h2,{id:s.titleId,...n,ref:t})});yC.displayName=Qp;var bC="DialogDescription",wC=N.forwardRef((e,t)=>{const{__scopeDialog:i,...n}=e,s=sn(bC,i);return C.jsx(fe.p,{id:s.descriptionId,...n,ref:t})});wC.displayName=bC;var SC="DialogClose",CC=N.forwardRef((e,t)=>{const{__scopeDialog:i,...n}=e,s=sn(SC,i);return C.jsx(fe.button,{type:"button",...n,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});CC.displayName=SC;function Xp(e){return e?"open":"closed"}var EC="DialogTitleWarning",[bz,TC]=wI(EC,{contentName:ea,titleName:Qp,docsSlug:"dialog"}),gV=({titleId:e})=>{const t=TC(EC),i=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},pV="DialogDescriptionWarning",vV=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${TC(pV).contentName}}.`;return N.useEffect(()=>{var r;const s=(r=e.current)==null?void 0:r.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},AV=dC,xV=pC,yV=vC,bV=AC,wV=yC,SV=wC,CV=CC;function EV({...e}){return C.jsx(AV,{"data-slot":"dialog",...e})}function TV({...e}){return C.jsx(xV,{"data-slot":"dialog-portal",...e})}function MV({className:e,...t}){return C.jsx(yV,{"data-slot":"dialog-overlay",className:Te("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function DV({className:e,children:t,showCloseButton:i=!0,...n}){return C.jsxs(TV,{"data-slot":"dialog-portal",children:[C.jsx(MV,{}),C.jsxs(bV,{"data-slot":"dialog-content",className:Te("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,i&&C.jsxs(CV,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[C.jsx(L3,{}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function RV({className:e,...t}){return C.jsx("div",{"data-slot":"dialog-header",className:Te("flex flex-col gap-2 text-center sm:text-left",e),...t})}function NV({className:e,...t}){return C.jsx("div",{"data-slot":"dialog-footer",className:Te("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function IV({className:e,...t}){return C.jsx(wV,{"data-slot":"dialog-title",className:Te("text-lg leading-none font-semibold",e),...t})}function FV({className:e,...t}){return C.jsx(SV,{"data-slot":"dialog-description",className:Te("text-muted-foreground text-sm",e),...t})}var UV="Separator",xx="horizontal",BV=["horizontal","vertical"],MC=N.forwardRef((e,t)=>{const{decorative:i,orientation:n=xx,...s}=e,r=VV(n)?n:xx,o=i?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return C.jsx(fe.div,{"data-orientation":r,...o,...s,ref:t})});MC.displayName=UV;function VV(e){return BV.includes(e)}var PV=MC;function OV({className:e,orientation:t="horizontal",decorative:i=!0,...n}){return C.jsx(PV,{"data-slot":"separator",decorative:i,orientation:t,className:Te("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...n})}const jr=(e,t,i="")=>(e==null?void 0:e[t])??i,Zi=(e,t,i="")=>(e==null?void 0:e[t])??i,vd=e=>{try{const t=jr(e,"nv_document",{}),i=t==null?void 0:t.imageOptionsArray;return Array.isArray(i)?i:[]}catch(t){return console.warn("Error accessing imageOptionsArray:",t),[]}},z1=e=>vd(e).length,LV=(e,t=0)=>{const i=["name","customData"];for(const n of i){const s=Zi(e,n,"");if(s&&typeof s=="string"&&s.trim())return s}return`Image ${t+1}`},kV=(e,t=0)=>{var n;const i=Zi(e,"url","");if(i&&typeof i=="string"&&i.trim()){const s=(n=i.split("/").pop())==null?void 0:n.split(".")[0];if(s&&s.trim())return`original_${s}`}return`original_image_${t}`},jV=(e,t=0)=>{var n;const i=Zi(e,"resultUrl","");if(i&&typeof i=="string"&&i.trim()){const s=(n=i.split("/").pop())==null?void 0:n.split(".")[0];if(s&&s.trim())return`processed_${s}`}return`processed_image_${t}`},Bu=(e,t=0)=>{const i=[],n=Zi(e,"url","");if(n){const r=Zi(e,"name",`image_${t+1}`);i.push({id:kV(e,t),type:"original",url:n,filename:r,displayName:`${r} (Original)`})}const s=Zi(e,"resultUrl","");if(s){const r=Zi(e,"name",`image_${t+1}`),a=r.includes(".")?r.replace(/(\.[^.]+)$/,"_processed$1"):`${r}_processed`;i.push({id:jV(e,t),type:"processed",url:s,filename:a,displayName:`${a} (Processed)`})}return i},zV=e=>{const t=[];["tool_name","status","id","error"].forEach(r=>{const a=jr(e,r,"");a&&typeof a=="string"&&a.trim()&&t.push(a)}),vd(e).forEach((r,a)=>{const o=LV(r,a);o&&t.push(o),Object.keys(r||{}).forEach(l=>{const c=r[l];typeof c=="string"&&c.trim()&&t.push(c)})});const s=jr(e,"result",{});return s&&typeof s=="object"&&Object.values(s).forEach(r=>{typeof r=="string"&&r.trim()&&t.push(r)}),t.filter(r=>r.trim().length>0)},DC=e=>{const i=new Date().getTime()-new Date(e).getTime(),n=Math.floor(i/1e3);if(n<60)return`${n}s`;const s=Math.floor(n/60),r=n%60;return`${s}m ${r}s`},_V=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)},GV=e=>{if(!jr(e,"timestamp"))return"Processing status unknown";const t=z1(e),i=jr(e,"tool_name","Unknown Tool"),n=jr(e,"timestamp","");switch(e.status){case"pending":return`Processing ${t} image(s) with ${i}...`;case"completed":return`Successfully processed ${t} image(s) in ${DC(n)}`;case"failed":return`Failed to process ${t} image(s). Please check your inputs and try again.`;default:return"Processing status unknown"}},HV=N.forwardRef(function({open:t,onOpenChange:i,item:n},s){var p,v;const[r,a]=N.useState(new Set),[o,l]=N.useState("original"),[c,u]=N.useState(!1),h=vd(n),f=h.flatMap((x,y)=>Bu(x,y)).length,d=x=>{const y=new Set(r);y.has(x)?y.delete(x):y.add(x),a(y)},g=()=>{const x=h.flatMap((y,b)=>Bu(y,b)).map(y=>y.id);r.size===x.length?a(new Set):a(new Set(x))},m=async()=>{if(r.size===0){alert("Please select at least one image to download");return}u(!0);try{const x=h.flatMap((y,b)=>Bu(y,b)).filter(y=>r.has(y.id));if(console.log("Downloading files:",x),console.log("Download format:",o),await new Promise(y=>setTimeout(y,2e3)),x.length===1){const y=x[0],b=document.createElement("a");b.href=y.url,b.download=y.filename,document.body.appendChild(b),b.click(),document.body.removeChild(b)}else{const y=document.createElement("a");y.href=`/downloads/${n==null?void 0:n.id}/batch_download.zip`,y.download=`${Zi(n,"tool_name","processing")}_results_${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}a(new Set),i(!1)}catch(x){console.error("Download failed:",x),alert("Download failed. Please try again.")}finally{u(!1)}},A=x=>{switch(x.toLowerCase()){case"nii":case"nii.gz":return"bg-blue-100 text-blue-800";case"dcm":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return n?C.jsx(EV,{open:t,onOpenChange:i,children:C.jsxs(DV,{className:"max-w-2xl max-h-[80vh] flex flex-col",ref:s,children:[C.jsxs(RV,{children:[C.jsxs(IV,{className:"flex items-center gap-2",children:[C.jsx(D1,{className:"h-5 w-5"}),"Download Processed Images"]}),C.jsxs(FV,{children:["Select the processed images you want to download from the"," ",Zi(n,"tool_name","processing")," processing job completed on"," ",((v=(p=Zi(n,"timestamp",new Date)).toLocaleDateString)==null?void 0:v.call(p))||"Unknown date","."]})]}),C.jsxs("div",{className:"flex-1 space-y-4 overflow-hidden",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(hf,{className:"text-sm font-medium",children:"Download Format"}),C.jsxs(lC,{value:o,onValueChange:l,children:[C.jsx(uC,{className:"w-48",children:C.jsx(cC,{})}),C.jsxs(hC,{children:[C.jsx(Cl,{value:"original",children:"Original Format"}),C.jsx(Cl,{value:"nii",children:"NIfTI (.nii)"}),C.jsx(Cl,{value:"nii.gz",children:"Compressed NIfTI (.nii.gz)"}),C.jsx(Cl,{value:"dicom",children:"DICOM (.dcm)"})]})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs(hf,{className:"text-sm font-medium",children:["Files (",r.size," of ",f," ","selected)"]}),C.jsx(Yt,{variant:"outline",size:"sm",onClick:g,children:r.size===f?"Deselect All":"Select All"})]})]}),C.jsx(OV,{}),C.jsx(uf,{className:"flex-1 max-h-96",children:C.jsx("div",{className:"space-y-2",children:h.map((x,y)=>{const b=Bu(x,y);return C.jsx("div",{className:"space-y-2",children:b.map(E=>{const w=E.filename.split(".").pop()||"unknown";return C.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border transition-colors ${r.has(E.id)?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[C.jsx(ww,{id:E.id,checked:r.has(E.id),onCheckedChange:()=>d(E.id)}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.jsx("p",{className:"text-sm font-medium truncate",children:E.displayName}),r.has(E.id)&&C.jsx(G7,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]}),C.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[C.jsx(vr,{variant:"secondary",className:`text-xs ${A(w)}`,children:w}),C.jsx(vr,{variant:"outline",className:"text-xs",children:E.type==="original"?"Original":"Processed"})]})]})]},E.id)})},`image-group-${y}`)})})}),r.size>0&&C.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[C.jsxs("div",{className:"flex items-center justify-between text-sm",children:[C.jsx("span",{className:"font-medium text-blue-900",children:"Download Summary"}),C.jsxs("span",{className:"text-blue-700",children:[r.size," file",r.size!==1?"s":""," selected"]})]}),C.jsx("div",{className:"text-xs text-blue-700 mt-1",children:r.size>1?"Files will be downloaded as a ZIP archive":"File will be downloaded individually"})]})]}),C.jsxs(NV,{className:"flex-shrink-0",children:[C.jsx(Yt,{variant:"outline",onClick:()=>i(!1),disabled:c,children:"Cancel"}),C.jsx(Yt,{onClick:m,disabled:r.size===0||c,children:c?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Downloading..."]}):C.jsxs(C.Fragment,{children:[C.jsx(D1,{className:"h-4 w-4 mr-2"}),"Download"," ",r.size>0?`(${r.size})`:""]})})]})]})}):null});function YV(){return{queryFn:()=>Zc.readScenes(),queryKey:["scenes"]}}function qV({nvRef:e}){const[t,i]=N.useState(""),[n,s]=N.useState(new Set),[r,a]=N.useState(!1),[o,l]=N.useState(null),{data:c,isLoading:u,isPlaceholderData:h}=qy({...YV(),placeholderData:v=>v}),f=(c==null?void 0:c.data)??[],d=v=>{switch(v){case"pending":return C.jsx(nI,{className:"h-4 w-4 text-yellow-500"});case"processing":return C.jsx(gI,{className:"h-4 w-4 text-yellow-500 animate spin"});case"completed":return C.jsx(z7,{className:"h-4 w-4 text-green-500"});case"failed":return C.jsx(Y7,{className:"h-4 w-4 text-red-500"})}},g=v=>{switch(v){case"pending":return C.jsx(vr,{variant:"outline",className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:"Pending"});case"processing":return C.jsx(vr,{variant:"outline",className:`bg-yellow-500/10 text-yellow-500 border-yellow-500/
              20 animate-pulse`,children:"Processing"});case"completed":return C.jsx(vr,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Completed"});case"failed":return C.jsx(vr,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/20",children:"Failed"})}};if((f==null?void 0:f.length)===0)return C.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center text-muted-foreground",children:[C.jsx(S0,{className:"h-12 w-12 mb-4 opacity-20"}),C.jsx("h3",{className:"text-lg font-medium mb-2",children:"No processing history"}),C.jsx("p",{className:"text-sm",children:"Your processing history will appear here after you process images."})]});const m=v=>{const x=new Set(n);x.has(v)?x.delete(v):x.add(v),s(x)},A=v=>{l(v),a(!0)},p=f.filter(v=>{if(!t.trim())return!0;const x=t.toLowerCase();return zV(v).some(b=>b.toLowerCase().includes(x))});return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex flex-col h-full",children:[C.jsxs("div",{className:"p-4 border-b space-y-3",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"font-medium",children:"Processing History"}),f.length>0&&C.jsx(nU,{})]}),C.jsxs("div",{className:"relative",children:[C.jsx(C0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),C.jsx(Yw,{placeholder:"Search by tool, images, status, scene ID, or any text...",value:t,onChange:v=>i(v.target.value),className:"pl-10"})]}),t&&C.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.length," of ",f.length,' items match "',t,'"']})]}),C.jsx(uf,{className:"flex-1",children:C.jsxs("div",{className:"p-2",children:[p.length===0?C.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center text-muted-foreground",children:[C.jsx(C0,{className:"h-8 w-8 mb-2 opacity-20"}),C.jsx("p",{className:"text-sm",children:"No items match your search"})]}):p.map(v=>{const x=n.has(v.id);return C.jsx("div",{className:"mb-3 last:mb-0",children:C.jsx("div",{className:"rounded-lg border bg-card",children:C.jsxs(ZF,{open:x,onOpenChange:()=>m(v.id),children:[C.jsxs("div",{className:"p-3",children:[C.jsxs("div",{className:"flex items-start justify-between mb-2",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[d(v.status),C.jsx("span",{className:"ml-2 font-medium text-sm",children:jr(v,"tool_name","Unknown Tool")})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[g(v.status),C.jsx(JF,{asChild:!0,children:C.jsx(Yt,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:x?C.jsx(P3,{className:"h-3 w-3"}):C.jsx(yp,{className:"h-3 w-3"})})})]})]}),C.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:C.jsxs("span",{className:"flex items-center",children:[C.jsx(S0,{className:"h-3 w-3 mr-1 inline"}),_V(v.timestamp)]})}),C.jsxs("div",{className:"text-xs mb-3",children:[C.jsxs("span",{className:"text-muted-foreground",children:["Processing ID:"," "]}),C.jsx("span",{children:v.id})]}),C.jsxs("div",{className:"flex items-center gap-2 text-xs mb-3",children:[C.jsx("div",{className:"flex items-center gap-1",children:C.jsxs("span",{children:[z1(v)," image",z1(v)!==1?"s":""]})}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx(S0,{className:"h-3 w-3"}),C.jsx("span",{children:DC(v.timestamp)})]})]}),v.status==="completed"&&C.jsxs("div",{className:"flex gap-2",children:[C.jsx(tU,{item:v,nvRef:e}),C.jsxs(Yt,{variant:"outline",size:"sm",className:"w-fit",onClick:()=>A(v),children:[C.jsx(D1,{className:"h-3 w-3 mr-1"}),"Download"]})]}),v.status==="failed"&&C.jsx(iU,{id:v.id})]}),C.jsx($F,{children:C.jsxs("div",{className:"border-t p-3 space-y-3",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"text-xs font-medium mb-2",children:"Selected Images:"}),C.jsx("div",{className:"space-y-1",children:(()=>{const y=vd(v);return y.length>0?y.map((b,E)=>C.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[C.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),C.jsx("span",{className:"truncate w-3xs",children:Zi(b,"name",`Image ${E+1}`)})]},E)):C.jsx("span",{className:"text-muted-foreground",children:"No images available"})})()})]}),C.jsx("div",{className:"text-xs mb-3 p-2 bg-muted/50 rounded text-muted-foreground",children:GV(v)})]})})]})})},v.id)}),t&&p.length===0&&C.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[C.jsx(C0,{className:"h-12 w-12 mb-4 opacity-20"}),C.jsx("h3",{className:"text-lg font-medium mb-2",children:"No results found"}),C.jsx("p",{className:"text-sm",children:"Try searching with different keywords or clear the search to see all items."})]})]})})]}),C.jsx(HV,{open:r,onOpenChange:a,item:o||{}})]})}var KV=1e-6,Tt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function QV(){var e=new Tt(9);return Tt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ar(e,t,i,n,s,r,a,o,l){var c=new Tt(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=n,c[4]=s,c[5]=r,c[6]=a,c[7]=o,c[8]=l,c}function RC(e,t,i){var n=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=i[0],d=i[1],g=i[2],m=i[3],A=i[4],p=i[5],v=i[6],x=i[7],y=i[8];return e[0]=f*n+d*a+g*c,e[1]=f*s+d*o+g*u,e[2]=f*r+d*l+g*h,e[3]=m*n+A*a+p*c,e[4]=m*s+A*o+p*u,e[5]=m*r+A*l+p*h,e[6]=v*n+x*a+y*c,e[7]=v*s+x*o+y*u,e[8]=v*r+x*l+y*h,e}function Se(){var e=new Tt(16);return Tt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ot(e){var t=new Tt(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function XV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function pi(e,t,i,n,s,r,a,o,l,c,u,h,f,d,g,m){var A=new Tt(16);return A[0]=e,A[1]=t,A[2]=i,A[3]=n,A[4]=s,A[5]=r,A[6]=a,A[7]=o,A[8]=l,A[9]=c,A[10]=u,A[11]=h,A[12]=f,A[13]=d,A[14]=g,A[15]=m,A}function NC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mi(e,t){if(e===t){var i=t[1],n=t[2],s=t[3],r=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=r,e[11]=t[14],e[12]=s,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function ti(e,t){var i=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],g=t[12],m=t[13],A=t[14],p=t[15],v=i*o-n*a,x=i*l-s*a,y=i*c-r*a,b=n*l-s*o,E=n*c-r*o,w=s*c-r*l,S=u*m-h*g,M=u*A-f*g,T=u*p-d*g,R=h*A-f*m,D=h*p-d*m,I=f*p-d*A,U=v*I-x*D+y*R+b*T-E*M+w*S;return U?(U=1/U,e[0]=(o*I-l*D+c*R)*U,e[1]=(s*D-n*I-r*R)*U,e[2]=(m*w-A*E+p*b)*U,e[3]=(f*E-h*w-d*b)*U,e[4]=(l*T-a*I-c*M)*U,e[5]=(i*I-s*T+r*M)*U,e[6]=(A*y-g*w-p*x)*U,e[7]=(u*w-f*y+d*x)*U,e[8]=(a*D-o*T+c*S)*U,e[9]=(n*T-i*D-r*S)*U,e[10]=(g*E-m*y+p*v)*U,e[11]=(h*y-u*E-d*v)*U,e[12]=(o*M-a*R-l*S)*U,e[13]=(i*R-n*M+s*S)*U,e[14]=(m*x-g*b-A*v)*U,e[15]=(u*b-h*x+f*v)*U,e):null}function As(e,t,i){var n=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],d=t[10],g=t[11],m=t[12],A=t[13],p=t[14],v=t[15],x=i[0],y=i[1],b=i[2],E=i[3];return e[0]=x*n+y*o+b*h+E*m,e[1]=x*s+y*l+b*f+E*A,e[2]=x*r+y*c+b*d+E*p,e[3]=x*a+y*u+b*g+E*v,x=i[4],y=i[5],b=i[6],E=i[7],e[4]=x*n+y*o+b*h+E*m,e[5]=x*s+y*l+b*f+E*A,e[6]=x*r+y*c+b*d+E*p,e[7]=x*a+y*u+b*g+E*v,x=i[8],y=i[9],b=i[10],E=i[11],e[8]=x*n+y*o+b*h+E*m,e[9]=x*s+y*l+b*f+E*A,e[10]=x*r+y*c+b*d+E*p,e[11]=x*a+y*u+b*g+E*v,x=i[12],y=i[13],b=i[14],E=i[15],e[12]=x*n+y*o+b*h+E*m,e[13]=x*s+y*l+b*f+E*A,e[14]=x*r+y*c+b*d+E*p,e[15]=x*a+y*u+b*g+E*v,e}function Ea(e,t,i){var n=i[0],s=i[1],r=i[2],a,o,l,c,u,h,f,d,g,m,A,p;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*r+t[12],e[13]=t[1]*n+t[5]*s+t[9]*r+t[13],e[14]=t[2]*n+t[6]*s+t[10]*r+t[14],e[15]=t[3]*n+t[7]*s+t[11]*r+t[15]):(a=t[0],o=t[1],l=t[2],c=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],m=t[9],A=t[10],p=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=c,e[4]=u,e[5]=h,e[6]=f,e[7]=d,e[8]=g,e[9]=m,e[10]=A,e[11]=p,e[12]=a*n+u*s+g*r+t[12],e[13]=o*n+h*s+m*r+t[13],e[14]=l*n+f*s+A*r+t[14],e[15]=c*n+d*s+p*r+t[15]),e}function yx(e,t,i){var n=i[0],s=i[1],r=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Vu(e,t,i){var n=Math.sin(i),s=Math.cos(i),r=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*s+c*n,e[5]=a*s+u*n,e[6]=o*s+h*n,e[7]=l*s+f*n,e[8]=c*s-r*n,e[9]=u*s-a*n,e[10]=h*s-o*n,e[11]=f*s-l*n,e}function Pu(e,t,i){var n=Math.sin(i),s=Math.cos(i),r=t[0],a=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*s+c*n,e[1]=a*s+u*n,e[2]=o*s+h*n,e[3]=l*s+f*n,e[4]=c*s-r*n,e[5]=u*s-a*n,e[6]=h*s-o*n,e[7]=f*s-l*n,e}function WV(e,t,i){var n=i[0],s=i[1],r=i[2],a=Math.hypot(n,s,r),o,l,c;return a<KV?null:(a=1/a,n*=a,s*=a,r*=a,o=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=n*n*c+l,e[1]=s*n*c+r*o,e[2]=r*n*c-s*o,e[3]=0,e[4]=n*s*c-r*o,e[5]=s*s*c+l,e[6]=r*s*c+n*o,e[7]=0,e[8]=n*r*c+s*o,e[9]=s*r*c-n*o,e[10]=r*r*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ZV(e,t,i,n,s,r,a){var o=1/(t-i),l=1/(n-s),c=1/(r-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(s+n)*l,e[14]=(a+r)*c,e[15]=1,e}var Ou=ZV;function JV(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}var IC=As;function _e(){var e=new Tt(3);return Tt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Yl(e){var t=new Tt(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ws(e){var t=e[0],i=e[1],n=e[2];return Math.hypot(t,i,n)}function Q(e,t,i){var n=new Tt(3);return n[0]=e,n[1]=t,n[2]=i,n}function bx(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function zr(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function He(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Wp(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function Zp(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function $V(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function eP(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Vi(e,t){var i=t[0],n=t[1],s=t[2],r=i*i+n*n+s*s;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function tP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hh(e,t,i){var n=t[0],s=t[1],r=t[2],a=i[0],o=i[1],l=i[2];return e[0]=s*l-r*o,e[1]=r*a-n*l,e[2]=n*o-s*a,e}function iP(e,t,i,n){var s=t[0],r=t[1],a=t[2];return e[0]=s+n*(i[0]-s),e[1]=r+n*(i[1]-r),e[2]=a+n*(i[2]-a),e}function O0(e,t){var i=e[0],n=e[1],s=e[2],r=t[0],a=t[1],o=t[2],l=Math.sqrt(i*i+n*n+s*s),c=Math.sqrt(r*r+a*a+o*o),u=l*c,h=u&&tP(e,t)/u;return Math.acos(Math.min(Math.max(h,-1),1))}var wx=He,dc=Ws;(function(){var e=_e();return function(t,i,n,s,r,a){var o,l;for(i||(i=3),n||(n=0),s?l=Math.min(s*i+n,t.length):l=t.length,o=n;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],r(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();function Cn(){var e=new Tt(4);return Tt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function jn(e){var t=new Tt(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ye(e,t,i,n){var s=new Tt(4);return s[0]=e,s[1]=t,s[2]=i,s[3]=n,s}function Sx(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function nP(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function sP(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function bt(e,t,i){var n=t[0],s=t[1],r=t[2],a=t[3];return e[0]=i[0]*n+i[4]*s+i[8]*r+i[12]*a,e[1]=i[1]*n+i[5]*s+i[9]*r+i[13]*a,e[2]=i[2]*n+i[6]*s+i[10]*r+i[14]*a,e[3]=i[3]*n+i[7]*s+i[11]*r+i[15]*a,e}var rP=nP;(function(){var e=Cn();return function(t,i,n,s,r,a){var o,l;for(i||(i=4),n||(n=0),s?l=Math.min(s*i+n,t.length):l=t.length,o=n;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],r(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();function aP(){var e=new Tt(2);return Tt!=Float32Array&&(e[0]=0,e[1]=0),e}function Cx(e,t){var i=new Tt(2);return i[0]=e,i[1]=t,i}function oP(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Ex(e){var t=e[0],i=e[1];return Math.hypot(t,i)}function lP(e,t){var i=t[0],n=t[1],s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e}(function(){var e=aP();return function(t,i,n,s,r,a){var o,l;for(i||(i=2),n||(n=0),s?l=Math.min(s*i+n,t.length):l=t.length,o=n;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],r(e,e,a),t[o]=e[0],t[o+1]=e[1];return t}})();var xr=256,fh=[],Lu;for(;xr--;)fh[xr]=(xr+256).toString(16).substring(1);function _1(){var e=0,t,i="";if(!Lu||xr+16>256){for(Lu=Array(e=256);e--;)Lu[e]=256*Math.random()|0;e=xr=0}for(;e<16;e++)t=Lu[xr+e],e==6?i+=fh[t&15|64]:e==8?i+=fh[t&63|128]:i+=fh[t],e&1&&e>1&&e<11&&(i+="-");return xr++,i}var cP=function(t,i){var n=t.length;if(t===i)return!0;if(n!==i.length)return!1;for(var s=0;s<n;s++)if(t[s]!==i[s])return!1;return!0};const uP=$1(cP),FC=-1,Ad=0,xf=1,yf=2,Jp=3,$p=4,e2=5,t2=6,UC=7,BC=8,Tx=typeof self=="object"?self:globalThis,hP=(e,t)=>{const i=(s,r)=>(e.set(r,s),s),n=s=>{if(e.has(s))return e.get(s);const[r,a]=t[s];switch(r){case Ad:case FC:return i(a,s);case xf:{const o=i([],s);for(const l of a)o.push(n(l));return o}case yf:{const o=i({},s);for(const[l,c]of a)o[n(l)]=n(c);return o}case Jp:return i(new Date(a),s);case $p:{const{source:o,flags:l}=a;return i(new RegExp(o,l),s)}case e2:{const o=i(new Map,s);for(const[l,c]of a)o.set(n(l),n(c));return o}case t2:{const o=i(new Set,s);for(const l of a)o.add(n(l));return o}case UC:{const{name:o,message:l}=a;return i(new Tx[o](l),s)}case BC:return i(BigInt(a),s);case"BigInt":return i(Object(BigInt(a)),s)}return i(new Tx[r](a),s)};return n},fP=e=>hP(new Map,e)(0),ga="",{toString:dP}={},{keys:mP}=Object,hl=e=>{const t=typeof e;if(t!=="object"||!e)return[Ad,t];const i=dP.call(e).slice(8,-1);switch(i){case"Array":return[xf,ga];case"Object":return[yf,ga];case"Date":return[Jp,ga];case"RegExp":return[$p,ga];case"Map":return[e2,ga];case"Set":return[t2,ga]}return i.includes("Array")?[xf,i]:i.includes("Error")?[UC,i]:[yf,i]},ku=([e,t])=>e===Ad&&(t==="function"||t==="symbol"),gP=(e,t,i,n)=>{const s=(a,o)=>{const l=n.push(a)-1;return i.set(o,l),l},r=a=>{if(i.has(a))return i.get(a);let[o,l]=hl(a);switch(o){case Ad:{let u=a;switch(l){case"bigint":o=BC,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([FC],a)}return s([o,u],a)}case xf:{if(l)return s([l,[...a]],a);const u=[],h=s([o,u],a);for(const f of a)u.push(r(f));return h}case yf:{if(l)switch(l){case"BigInt":return s([l,a.toString()],a);case"Boolean":case"Number":case"String":return s([l,a.valueOf()],a)}if(t&&"toJSON"in a)return r(a.toJSON());const u=[],h=s([o,u],a);for(const f of mP(a))(e||!ku(hl(a[f])))&&u.push([r(f),r(a[f])]);return h}case Jp:return s([o,a.toISOString()],a);case $p:{const{source:u,flags:h}=a;return s([o,{source:u,flags:h}],a)}case e2:{const u=[],h=s([o,u],a);for(const[f,d]of a)(e||!(ku(hl(f))||ku(hl(d))))&&u.push([r(f),r(d)]);return h}case t2:{const u=[],h=s([o,u],a);for(const f of a)(e||!ku(hl(f)))&&u.push(r(f));return h}}const{message:c}=a;return s([o,{name:l,message:c}],a)};return r},pP=(e,{json:t,lossy:i}={})=>{const n=[];return gP(!(t||i),!!t,new Map,n)(e),n};var wt=Uint8Array,ja=Uint16Array,vP=Int32Array,VC=new wt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),PC=new wt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),AP=new wt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OC=function(e,t){for(var i=new ja(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];for(var s=new vP(i[30]),n=1;n<30;++n)for(var r=i[n];r<i[n+1];++r)s[r]=r-i[n]<<5|n;return{b:i,r:s}},LC=OC(VC,2),kC=LC.b,xP=LC.r;kC[28]=258,xP[258]=28;var yP=OC(PC,0),bP=yP.b,G1=new ja(32768);for(var Ke=0;Ke<32768;++Ke){var cs=(Ke&43690)>>1|(Ke&21845)<<1;cs=(cs&52428)>>2|(cs&13107)<<2,cs=(cs&61680)>>4|(cs&3855)<<4,G1[Ke]=((cs&65280)>>8|(cs&255)<<8)>>1}var ql=function(e,t,i){for(var n=e.length,s=0,r=new ja(t);s<n;++s)e[s]&&++r[e[s]-1];var a=new ja(t);for(s=1;s<t;++s)a[s]=a[s-1]+r[s-1]<<1;var o;if(i){o=new ja(1<<t);var l=15-t;for(s=0;s<n;++s)if(e[s])for(var c=s<<4|e[s],u=t-e[s],h=a[e[s]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)o[G1[h]>>l]=c}else for(o=new ja(n),s=0;s<n;++s)e[s]&&(o[s]=G1[a[e[s]-1]++]>>15-e[s]);return o},eu=new wt(288);for(var Ke=0;Ke<144;++Ke)eu[Ke]=8;for(var Ke=144;Ke<256;++Ke)eu[Ke]=9;for(var Ke=256;Ke<280;++Ke)eu[Ke]=7;for(var Ke=280;Ke<288;++Ke)eu[Ke]=8;var jC=new wt(32);for(var Ke=0;Ke<32;++Ke)jC[Ke]=5;var wP=ql(eu,9,1),SP=ql(jC,5,1),L0=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Hi=function(e,t,i){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&i},k0=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},zC=function(e){return(e+7)/8|0},dh=function(e,t,i){return(t==null||t<0)&&(t=0),(i==null||i>e.length)&&(i=e.length),new wt(e.subarray(t,i))},CP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zt=function(e,t,i){var n=new Error(t||CP[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,zt),!i)throw n;return n},xd=function(e,t,i,n){var s=e.length,r=0;if(!s||t.f&&!t.l)return i||new wt(0);var a=!i,o=a||t.i!=2,l=t.i;a&&(i=new wt(s*3));var c=function(W){var ee=i.length;if(W>ee){var Fe=new wt(Math.max(ee*2,W));Fe.set(i),i=Fe}},u=t.f||0,h=t.p||0,f=t.b||0,d=t.l,g=t.d,m=t.m,A=t.n,p=s*8;do{if(!d){u=Hi(e,h,1);var v=Hi(e,h+1,3);if(h+=3,v)if(v==1)d=wP,g=SP,m=9,A=5;else if(v==2){var E=Hi(e,h,31)+257,w=Hi(e,h+10,15)+4,S=E+Hi(e,h+5,31)+1;h+=14;for(var M=new wt(S),T=new wt(19),R=0;R<w;++R)T[AP[R]]=Hi(e,h+R*3,7);h+=w*3;for(var D=L0(T),I=(1<<D)-1,U=ql(T,D,1),R=0;R<S;){var L=U[Hi(e,h,I)];h+=L&15;var x=L>>4;if(x<16)M[R++]=x;else{var V=0,k=0;for(x==16?(k=3+Hi(e,h,3),h+=2,V=M[R-1]):x==17?(k=3+Hi(e,h,7),h+=3):x==18&&(k=11+Hi(e,h,127),h+=7);k--;)M[R++]=V}}var F=M.subarray(0,E),z=M.subarray(E);m=L0(F),A=L0(z),d=ql(F,m,1),g=ql(z,A,1)}else zt(1);else{var x=zC(h)+4,y=e[x-4]|e[x-3]<<8,b=x+y;if(b>s){l&&zt(0);break}o&&c(f+y),i.set(e.subarray(x,b),f),t.b=f+=y,t.p=h=b*8,t.f=u;continue}if(h>p){l&&zt(0);break}}o&&c(f+131072);for(var G=(1<<m)-1,X=(1<<A)-1,le=h;;le=h){var V=d[k0(e,h)&G],oe=V>>4;if(h+=V&15,h>p){l&&zt(0);break}if(V||zt(2),oe<256)i[f++]=oe;else if(oe==256){le=h,d=null;break}else{var ne=oe-254;if(oe>264){var R=oe-257,ie=VC[R];ne=Hi(e,h,(1<<ie)-1)+kC[R],h+=ie}var me=g[k0(e,h)&X],K=me>>4;me||zt(3),h+=me&15;var z=bP[K];if(K>3){var ie=PC[K];z+=k0(e,h)&(1<<ie)-1,h+=ie}if(h>p){l&&zt(0);break}o&&c(f+131072);var te=f+ne;if(f<z){var he=r-z,Z=Math.min(z,te);for(he+f<0&&zt(3);f<Z;++f)i[f]=n[he+f]}for(;f<te;++f)i[f]=i[f-z]}}t.l=d,t.p=le,t.b=f,t.f=u,d&&(u=1,t.m=m,t.d=g,t.n=A)}while(!u);return f!=i.length&&a?dh(i,0,f):i.subarray(0,f)},EP=new wt(0),_C=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&zt(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[i++]);return i+(t&2)},TP=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},MP=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zt(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&zt(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2},j0=function(){function e(t,i){typeof t=="function"&&(i=t,t={}),this.ondata=i;var n=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new wt(32768),this.p=new wt(0),n&&this.o.set(n)}return e.prototype.e=function(t){if(this.ondata||zt(5),this.d&&zt(4),!this.p.length)this.p=t;else if(t.length){var i=new wt(this.p.length+t.length);i.set(this.p),i.set(t,this.p.length),this.p=i}},e.prototype.c=function(t){this.s.i=+(this.d=t||!1);var i=this.s.b,n=xd(this.p,this.s,this.o);this.ondata(dh(n,i,this.s.b),this.d),this.o=dh(n,this.s.b-32768),this.s.b=this.o.length,this.p=dh(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,i){this.e(t),this.c(i)},e}();function DP(e,t){return xd(e,{i:2},t,t)}var RP=function(){function e(t,i){this.v=1,this.r=0,j0.call(this,t,i)}return e.prototype.push=function(t,i){if(j0.prototype.e.call(this,t),this.r+=t.length,this.v){var n=this.p.subarray(this.v-1),s=n.length>3?_C(n):4;if(s>n.length){if(!i)return}else this.v>1&&this.onmember&&this.onmember(this.r-n.length);this.p=n.subarray(s),this.v=0}j0.prototype.c.call(this,i),this.s.f&&!this.s.l&&!i&&(this.v=zC(this.s.p)+9,this.s={i:0},this.o=new wt(0),this.push(new wt(0),i))},e}();function NP(e,t){var i=_C(e);return i+8>e.length&&zt(6,"invalid gzip data"),xd(e.subarray(i,-8),{i:2},new wt(TP(e)),t)}function IP(e,t){return xd(e.subarray(MP(e,t),-4),{i:2},t,t)}function FP(e,t){return e[0]==31&&e[1]==139&&e[2]==8?NP(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?DP(e,t):IP(e,t)}var UP=typeof TextDecoder<"u"&&new TextDecoder,BP=0;try{UP.decode(EP,{stream:!0}),BP=1}catch{}class GC{constructor(t,i,n,s){j(this,"esize");j(this,"ecode");j(this,"edata");j(this,"littleEndian");if(t%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=t,this.ecode=i,this.edata=n,this.littleEndian=s}toArrayBuffer(){let t=new Uint8Array(this.esize),i=new Uint8Array(this.edata);t.set(i,8);let n=new DataView(t.buffer);return n.setInt32(0,this.esize,this.littleEndian),n.setInt32(4,this.ecode,this.littleEndian),t.buffer}}const Ot=class Ot{static getStringAt(t,i,n){var s="",r,a;for(r=i;r<n;r+=1)a=t.getUint8(r),a!==0&&(s+=String.fromCharCode(a));return s}static getIntAt(t,i,n){return t.getInt32(i,n)}static getFloatAt(t,i,n){return t.getFloat32(i,n)}static getDoubleAt(t,i,n){return t.getFloat64(i,n)}static getInt64At(t,i,n){const s=t.getUint32(i,n),r=t.getInt32(i+4,n);let a;return n?a=r*2**32+s:a=s*2**32+r,r<0&&(a+=-1*2**32*2**32),a}static getUint64At(t,i,n){const s=t.getUint32(i+(n?0:4),n),r=t.getUint32(i+(n?4:0),n);return n?r*2**32+s:s*2**32+r}static getExtensionsAt(t,i,n,s){let r=[],a=i;for(;a<s;){let o=n,l=Ot.getIntAt(t,a,n);if(!l)break;if(l+a>s&&(o=!o,l=Ot.getIntAt(t,a,o),l+a>s))throw new Error("This does not appear to be a valid NIFTI extension");if(l%16!=0)throw new Error("This does not appear to be a NIFTI extension");let c=Ot.getIntAt(t,a+4,o),u=t.buffer.slice(a+8,a+l),h=new GC(l,c,u,o);r.push(h),a+=l}return r}static toArrayBuffer(t){var i,n,s;for(i=new ArrayBuffer(t.length),n=new Uint8Array(i),s=0;s<t.length;s+=1)n[s]=t[s];return i}static isString(t){return typeof t=="string"||t instanceof String}static formatNumber(t,i=void 0){let n;return Ot.isString(t)?n=Number(t):n=t,i?n=n.toPrecision(5):n=n.toPrecision(7),parseFloat(n)}static makeCRCTable(){let t,i=[];for(var n=0;n<256;n++){t=n;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;i[n]=t}return i}static crc32(t){Ot.crcTable||(Ot.crcTable=Ot.makeCRCTable());const i=Ot.crcTable;let n=-1;for(var s=0;s<t.byteLength;s++)n=n>>>8^i[(n^t.getUint8(s))&255];return(n^-1)>>>0}};j(Ot,"crcTable",null),j(Ot,"GUNZIP_MAGIC_COOKIE1",31),j(Ot,"GUNZIP_MAGIC_COOKIE2",139),j(Ot,"getByteAt",function(t,i){return t.getUint8(i)}),j(Ot,"getShortAt",function(t,i,n){return t.getInt16(i,n)});let q=Ot;const J=class J{constructor(){j(this,"littleEndian",!1);j(this,"dim_info",0);j(this,"dims",[]);j(this,"intent_p1",0);j(this,"intent_p2",0);j(this,"intent_p3",0);j(this,"intent_code",0);j(this,"datatypeCode",0);j(this,"numBitsPerVoxel",0);j(this,"slice_start",0);j(this,"slice_end",0);j(this,"slice_code",0);j(this,"pixDims",[]);j(this,"vox_offset",0);j(this,"scl_slope",1);j(this,"scl_inter",0);j(this,"xyzt_units",0);j(this,"cal_max",0);j(this,"cal_min",0);j(this,"slice_duration",0);j(this,"toffset",0);j(this,"description","");j(this,"aux_file","");j(this,"intent_name","");j(this,"qform_code",0);j(this,"sform_code",0);j(this,"quatern_a",0);j(this,"quatern_b",0);j(this,"quatern_c",0);j(this,"quatern_d",0);j(this,"qoffset_x",0);j(this,"qoffset_y",0);j(this,"qoffset_z",0);j(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);j(this,"qfac",1);j(this,"quatern_R");j(this,"magic","0");j(this,"isHDR",!1);j(this,"extensionFlag",[0,0,0,0]);j(this,"extensionSize",0);j(this,"extensionCode",0);j(this,"extensions",[]);j(this,"getDatatypeCodeString",function(t){return t===J.TYPE_UINT8?"1-Byte Unsigned Integer":t===J.TYPE_INT16?"2-Byte Signed Integer":t===J.TYPE_INT32?"4-Byte Signed Integer":t===J.TYPE_FLOAT32?"4-Byte Float":t===J.TYPE_FLOAT64?"8-Byte Float":t===J.TYPE_RGB24?"RGB":t===J.TYPE_INT8?"1-Byte Signed Integer":t===J.TYPE_UINT16?"2-Byte Unsigned Integer":t===J.TYPE_UINT32?"4-Byte Unsigned Integer":t===J.TYPE_INT64?"8-Byte Signed Integer":t===J.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"});j(this,"getTransformCodeString",function(t){return t===J.XFORM_SCANNER_ANAT?"Scanner":t===J.XFORM_ALIGNED_ANAT?"Aligned":t===J.XFORM_TALAIRACH?"Talairach":t===J.XFORM_MNI_152?"MNI":"Unknown"});j(this,"getUnitsCodeString",function(t){return t===J.UNITS_METER?"Meters":t===J.UNITS_MM?"Millimeters":t===J.UNITS_MICRON?"Microns":t===J.UNITS_SEC?"Seconds":t===J.UNITS_MSEC?"Milliseconds":t===J.UNITS_USEC?"Microseconds":t===J.UNITS_HZ?"Hz":t===J.UNITS_PPM?"PPM":t===J.UNITS_RADS?"Rads":"Unknown"});j(this,"nifti_mat33_mul",function(t,i){var n=[[0,0,0],[0,0,0],[0,0,0]],s,r;for(s=0;s<3;s+=1)for(r=0;r<3;r+=1)n[s][r]=t[s][0]*i[0][r]+t[s][1]*i[1][r]+t[s][2]*i[2][r];return n});j(this,"nifti_mat33_determ",function(t){var i,n,s,r,a,o,l,c,u;return i=t[0][0],n=t[0][1],s=t[0][2],r=t[1][0],a=t[1][1],o=t[1][2],l=t[2][0],c=t[2][1],u=t[2][2],i*a*u-i*c*o-r*n*u+r*c*s+l*n*o-l*a*s})}readHeader(t){var i=new DataView(t),n=q.getIntAt(i,0,this.littleEndian),s,r,a,o;if(n!==J.MAGIC_COOKIE&&(this.littleEndian=!0,n=q.getIntAt(i,0,this.littleEndian)),n!==J.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=q.getByteAt(i,39),s=0;s<8;s+=1)o=40+s*2,this.dims[s]=q.getShortAt(i,o,this.littleEndian);for(this.intent_p1=q.getFloatAt(i,56,this.littleEndian),this.intent_p2=q.getFloatAt(i,60,this.littleEndian),this.intent_p3=q.getFloatAt(i,64,this.littleEndian),this.intent_code=q.getShortAt(i,68,this.littleEndian),this.datatypeCode=q.getShortAt(i,70,this.littleEndian),this.numBitsPerVoxel=q.getShortAt(i,72,this.littleEndian),this.slice_start=q.getShortAt(i,74,this.littleEndian),s=0;s<8;s+=1)o=76+s*4,this.pixDims[s]=q.getFloatAt(i,o,this.littleEndian);if(this.vox_offset=q.getFloatAt(i,108,this.littleEndian),this.scl_slope=q.getFloatAt(i,112,this.littleEndian),this.scl_inter=q.getFloatAt(i,116,this.littleEndian),this.slice_end=q.getShortAt(i,120,this.littleEndian),this.slice_code=q.getByteAt(i,122),this.xyzt_units=q.getByteAt(i,123),this.cal_max=q.getFloatAt(i,124,this.littleEndian),this.cal_min=q.getFloatAt(i,128,this.littleEndian),this.slice_duration=q.getFloatAt(i,132,this.littleEndian),this.toffset=q.getFloatAt(i,136,this.littleEndian),this.description=q.getStringAt(i,148,228),this.aux_file=q.getStringAt(i,228,252),this.qform_code=q.getShortAt(i,252,this.littleEndian),this.sform_code=q.getShortAt(i,254,this.littleEndian),this.quatern_b=q.getFloatAt(i,256,this.littleEndian),this.quatern_c=q.getFloatAt(i,260,this.littleEndian),this.quatern_d=q.getFloatAt(i,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=q.getFloatAt(i,268,this.littleEndian),this.qoffset_y=q.getFloatAt(i,272,this.littleEndian),this.qoffset_z=q.getFloatAt(i,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const l=this.quatern_a,c=this.quatern_b,u=this.quatern_c,h=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[l*l+c*c-u*u-h*h,2*c*u-2*l*h,2*c*h+2*l*u],[2*c*u+2*l*h,l*l+u*u-c*c-h*h,2*u*h-2*l*c],[2*c*h-2*l*u,2*u*h+2*l*c,l*l+h*h-u*u-c*c]],r=0;r<3;r+=1)for(a=0;a<3;a+=1)this.affine[r][a]=this.quatern_R[r][a]*this.pixDims[a+1],a===2&&(this.affine[r][a]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(r=0;r<3;r+=1)for(a=0;a<4;a+=1)o=280+(r*4+a)*4,this.affine[r][a]=q.getFloatAt(i,o,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=q.getStringAt(i,328,344),this.magic=q.getStringAt(i,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,J.MAGIC_NUMBER2),i.byteLength>J.MAGIC_COOKIE){this.extensionFlag[0]=q.getByteAt(i,348),this.extensionFlag[1]=q.getByteAt(i,349),this.extensionFlag[2]=q.getByteAt(i,350),this.extensionFlag[3]=q.getByteAt(i,351);let l=!0;!this.isHDR&&this.vox_offset<=352&&(l=!1),i.byteLength<=368&&(l=!1),l&&this.extensionFlag[0]&&(this.extensions=q.getExtensionsAt(i,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var t=q.formatNumber,i="";return i+="Dim Info = "+this.dim_info+`
`,i+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,i+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,i+="Intent Code = "+this.intent_code+`
`,i+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,i+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,i+="Slice Start = "+this.slice_start+`
`,i+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,i+="Image Offset = "+this.vox_offset+`
`,i+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,i+="Slice End = "+this.slice_end+`
`,i+="Slice Code = "+this.slice_code+`
`,i+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(J.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(J.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,i+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,i+="Slice Duration = "+this.slice_duration+`
`,i+="Time Axis Shift = "+this.toffset+`
`,i+='Description: "'+this.description+`"
`,i+='Auxiliary File: "'+this.aux_file+`"
`,i+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,i+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,i+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,i+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,i+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,i+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,i+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,i+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(i+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),i}getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(t,i,n,s,r,a,o,l,c,u){var h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f,d=t,g=i,m=n,A,p,v;return h[3][0]=h[3][1]=h[3][2]=0,h[3][3]=1,f=1-(d*d+g*g+m*m),f<1e-7?(f=1/Math.sqrt(d*d+g*g+m*m),d*=f,g*=f,m*=f,f=0):f=Math.sqrt(f),A=o>0?o:1,p=l>0?l:1,v=c>0?c:1,u<0&&(v=-v),h[0][0]=(f*f+d*d-g*g-m*m)*A,h[0][1]=2*(d*g-f*m)*p,h[0][2]=2*(d*m+f*g)*v,h[1][0]=2*(d*g+f*m)*A,h[1][1]=(f*f+g*g-d*d-m*m)*p,h[1][2]=2*(g*m-f*d)*v,h[2][0]=2*(d*m-f*g)*A,h[2][1]=2*(g*m+f*d)*p,h[2][2]=(f*f+m*m-g*g-d*d)*v,h[0][3]=s,h[1][3]=r,h[2][3]=a,h}convertNiftiSFormToNEMA(t){var i,n,s,r,a,o,l,c,u,h,f,d,g,m,A,p,v,x,y,b,E,w,S,M,T,R,D,I,U,L,V,k,F,z;if(A=0,D=[[0,0,0],[0,0,0],[0,0,0]],I=[[0,0,0],[0,0,0],[0,0,0]],i=t[0][0],n=t[0][1],s=t[0][2],r=t[1][0],a=t[1][1],o=t[1][2],l=t[2][0],c=t[2][1],u=t[2][2],h=Math.sqrt(i*i+r*r+l*l),h===0||(i/=h,r/=h,l/=h,h=Math.sqrt(n*n+a*a+c*c),h===0))return null;if(n/=h,a/=h,c/=h,h=i*n+r*a+l*c,Math.abs(h)>1e-4){if(n-=h*i,a-=h*r,c-=h*l,h=Math.sqrt(n*n+a*a+c*c),h===0)return null;n/=h,a/=h,c/=h}if(h=Math.sqrt(s*s+o*o+u*u),h===0?(s=r*c-l*a,o=l*n-c*i,u=i*a-r*n):(s/=h,o/=h,u/=h),h=i*s+r*o+l*u,Math.abs(h)>1e-4){if(s-=h*i,o-=h*r,u-=h*l,h=Math.sqrt(s*s+o*o+u*u),h===0)return null;s/=h,o/=h,u/=h}if(h=n*s+a*o+c*u,Math.abs(h)>1e-4){if(s-=h*n,o-=h*a,u-=h*c,h=Math.sqrt(s*s+o*o+u*u),h===0)return null;s/=h,o/=h,u/=h}if(D[0][0]=i,D[0][1]=n,D[0][2]=s,D[1][0]=r,D[1][1]=a,D[1][2]=o,D[2][0]=l,D[2][1]=c,D[2][2]=u,f=this.nifti_mat33_determ(D),f===0)return null;for(R=-666,y=w=S=M=1,b=2,E=3,g=1;g<=3;g+=1)for(m=1;m<=3;m+=1)if(g!==m){for(A=1;A<=3;A+=1)if(!(g===A||m===A))for(I[0][0]=I[0][1]=I[0][2]=I[1][0]=I[1][1]=I[1][2]=I[2][0]=I[2][1]=I[2][2]=0,p=-1;p<=1;p+=2)for(v=-1;v<=1;v+=2)for(x=-1;x<=1;x+=2)I[0][g-1]=p,I[1][m-1]=v,I[2][A-1]=x,d=this.nifti_mat33_determ(I),d*f>0&&(T=this.nifti_mat33_mul(I,D),h=T[0][0]+T[1][1]+T[2][2],h>R&&(R=h,y=g,b=m,E=A,w=p,S=v,M=x))}switch(U=L=V=k=F=z="",y*w){case 1:U="X",k="+";break;case-1:U="X",k="-";break;case 2:U="Y",k="+";break;case-2:U="Y",k="-";break;case 3:U="Z",k="+";break;case-3:U="Z",k="-";break}switch(b*S){case 1:L="X",F="+";break;case-1:L="X",F="-";break;case 2:L="Y",F="+";break;case-2:L="Y",F="-";break;case 3:L="Z",F="+";break;case-3:L="Z",F="-";break}switch(E*M){case 1:V="X",z="+";break;case-1:V="X",z="-";break;case 2:V="Y",z="+";break;case-2:V="Y",z="-";break;case 3:V="Z",z="+";break;case-3:V="Z",z="-";break}return U+L+V+k+F+z}getExtensionLocation(){return J.MAGIC_COOKIE+4}getExtensionSize(t){return q.getIntAt(t,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(t){return q.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)}addExtension(t,i=-1){i==-1?this.extensions.push(t):this.extensions.splice(i,0,t),this.vox_offset+=t.esize}removeExtension(t){let i=this.extensions[t];i&&(this.vox_offset-=i.esize),this.extensions.splice(t,1)}toArrayBuffer(t=!1){let s=352;if(t)for(let l of this.extensions)s+=l.esize;let r=new Uint8Array(s),a=new DataView(r.buffer);a.setInt32(0,348,this.littleEndian),a.setUint8(39,this.dim_info);for(let l=0;l<8;l++)a.setUint16(40+2*l,this.dims[l],this.littleEndian);a.setFloat32(56,this.intent_p1,this.littleEndian),a.setFloat32(60,this.intent_p2,this.littleEndian),a.setFloat32(64,this.intent_p3,this.littleEndian),a.setInt16(68,this.intent_code,this.littleEndian),a.setInt16(70,this.datatypeCode,this.littleEndian),a.setInt16(72,this.numBitsPerVoxel,this.littleEndian),a.setInt16(74,this.slice_start,this.littleEndian);for(let l=0;l<8;l++)a.setFloat32(76+4*l,this.pixDims[l],this.littleEndian);a.setFloat32(108,this.vox_offset,this.littleEndian),a.setFloat32(112,this.scl_slope,this.littleEndian),a.setFloat32(116,this.scl_inter,this.littleEndian),a.setInt16(120,this.slice_end,this.littleEndian),a.setUint8(122,this.slice_code),a.setUint8(123,this.xyzt_units),a.setFloat32(124,this.cal_max,this.littleEndian),a.setFloat32(128,this.cal_min,this.littleEndian),a.setFloat32(132,this.slice_duration,this.littleEndian),a.setFloat32(136,this.toffset,this.littleEndian),r.set(new TextEncoder().encode(this.description),148),r.set(new TextEncoder().encode(this.aux_file),228),a.setInt16(252,this.qform_code,this.littleEndian),a.setInt16(254,this.sform_code,this.littleEndian),a.setFloat32(256,this.quatern_b,this.littleEndian),a.setFloat32(260,this.quatern_c,this.littleEndian),a.setFloat32(264,this.quatern_d,this.littleEndian),a.setFloat32(268,this.qoffset_x,this.littleEndian),a.setFloat32(272,this.qoffset_y,this.littleEndian),a.setFloat32(276,this.qoffset_z,this.littleEndian);const o=this.affine.flat();for(let l=0;l<12;l++)a.setFloat32(280+4*l,o[l],this.littleEndian);if(r.set(new TextEncoder().encode(this.intent_name),328),r.set(new TextEncoder().encode(this.magic),344),t){r.set(Uint8Array.from([1,0,0,0]),348);let l=this.getExtensionLocation();for(const c of this.extensions)a.setInt32(l,c.esize,c.littleEndian),a.setInt32(l+4,c.ecode,c.littleEndian),r.set(new Uint8Array(c.edata),l+8),l+=c.esize}else r.set(new Uint8Array(4).fill(0),348);return r.buffer}};j(J,"TYPE_NONE",0),j(J,"TYPE_BINARY",1),j(J,"TYPE_UINT8",2),j(J,"TYPE_INT16",4),j(J,"TYPE_INT32",8),j(J,"TYPE_FLOAT32",16),j(J,"TYPE_COMPLEX64",32),j(J,"TYPE_FLOAT64",64),j(J,"TYPE_RGB24",128),j(J,"TYPE_INT8",256),j(J,"TYPE_UINT16",512),j(J,"TYPE_UINT32",768),j(J,"TYPE_INT64",1024),j(J,"TYPE_UINT64",1280),j(J,"TYPE_FLOAT128",1536),j(J,"TYPE_COMPLEX128",1792),j(J,"TYPE_COMPLEX256",2048),j(J,"XFORM_UNKNOWN",0),j(J,"XFORM_SCANNER_ANAT",1),j(J,"XFORM_ALIGNED_ANAT",2),j(J,"XFORM_TALAIRACH",3),j(J,"XFORM_MNI_152",4),j(J,"SPATIAL_UNITS_MASK",7),j(J,"TEMPORAL_UNITS_MASK",56),j(J,"UNITS_UNKNOWN",0),j(J,"UNITS_METER",1),j(J,"UNITS_MM",2),j(J,"UNITS_MICRON",3),j(J,"UNITS_SEC",8),j(J,"UNITS_MSEC",16),j(J,"UNITS_USEC",24),j(J,"UNITS_HZ",32),j(J,"UNITS_PPM",40),j(J,"UNITS_RADS",48),j(J,"MAGIC_COOKIE",348),j(J,"STANDARD_HEADER_SIZE",348),j(J,"MAGIC_NUMBER_LOCATION",344),j(J,"MAGIC_NUMBER",[110,43,49]),j(J,"MAGIC_NUMBER2",[110,105,49]),j(J,"EXTENSION_HEADER_SIZE",8);let ve=J;const cn=class cn{constructor(){j(this,"littleEndian",!1);j(this,"dim_info",0);j(this,"dims",[]);j(this,"intent_p1",0);j(this,"intent_p2",0);j(this,"intent_p3",0);j(this,"intent_code",0);j(this,"datatypeCode",0);j(this,"numBitsPerVoxel",0);j(this,"slice_start",0);j(this,"slice_end",0);j(this,"slice_code",0);j(this,"pixDims",[]);j(this,"vox_offset",0);j(this,"scl_slope",1);j(this,"scl_inter",0);j(this,"xyzt_units",0);j(this,"cal_max",0);j(this,"cal_min",0);j(this,"slice_duration",0);j(this,"toffset",0);j(this,"description","");j(this,"aux_file","");j(this,"intent_name","");j(this,"qform_code",0);j(this,"sform_code",0);j(this,"quatern_b",0);j(this,"quatern_c",0);j(this,"quatern_d",0);j(this,"qoffset_x",0);j(this,"qoffset_y",0);j(this,"qoffset_z",0);j(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);j(this,"magic","0");j(this,"extensionFlag",[0,0,0,0]);j(this,"extensions",[]);j(this,"extensionSize",0);j(this,"extensionCode",0);j(this,"getExtensionLocation",function(){return cn.MAGIC_COOKIE+4});j(this,"getExtensionSize",ve.prototype.getExtensionSize);j(this,"getExtensionCode",ve.prototype.getExtensionCode);j(this,"addExtension",ve.prototype.addExtension);j(this,"removeExtension",ve.prototype.removeExtension);j(this,"getDatatypeCodeString",ve.prototype.getDatatypeCodeString);j(this,"getTransformCodeString",ve.prototype.getTransformCodeString);j(this,"getUnitsCodeString",ve.prototype.getUnitsCodeString);j(this,"getQformMat",ve.prototype.getQformMat);j(this,"convertNiftiQFormToNiftiSForm",ve.prototype.convertNiftiQFormToNiftiSForm);j(this,"convertNiftiSFormToNEMA",ve.prototype.convertNiftiSFormToNEMA);j(this,"nifti_mat33_mul",ve.prototype.nifti_mat33_mul);j(this,"nifti_mat33_determ",ve.prototype.nifti_mat33_determ)}readHeader(t){var i=new DataView(t),n=q.getIntAt(i,0,this.littleEndian),s,r,a,o;if(n!==cn.MAGIC_COOKIE&&(this.littleEndian=!0,n=q.getIntAt(i,0,this.littleEndian)),n!==cn.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=q.getStringAt(i,4,12),this.datatypeCode=q.getShortAt(i,12,this.littleEndian),this.numBitsPerVoxel=q.getShortAt(i,14,this.littleEndian),s=0;s<8;s+=1)o=16+s*8,this.dims[s]=q.getInt64At(i,o,this.littleEndian);for(this.intent_p1=q.getDoubleAt(i,80,this.littleEndian),this.intent_p2=q.getDoubleAt(i,88,this.littleEndian),this.intent_p3=q.getDoubleAt(i,96,this.littleEndian),s=0;s<8;s+=1)o=104+s*8,this.pixDims[s]=q.getDoubleAt(i,o,this.littleEndian);for(this.vox_offset=q.getInt64At(i,168,this.littleEndian),this.scl_slope=q.getDoubleAt(i,176,this.littleEndian),this.scl_inter=q.getDoubleAt(i,184,this.littleEndian),this.cal_max=q.getDoubleAt(i,192,this.littleEndian),this.cal_min=q.getDoubleAt(i,200,this.littleEndian),this.slice_duration=q.getDoubleAt(i,208,this.littleEndian),this.toffset=q.getDoubleAt(i,216,this.littleEndian),this.slice_start=q.getInt64At(i,224,this.littleEndian),this.slice_end=q.getInt64At(i,232,this.littleEndian),this.description=q.getStringAt(i,240,320),this.aux_file=q.getStringAt(i,320,344),this.qform_code=q.getIntAt(i,344,this.littleEndian),this.sform_code=q.getIntAt(i,348,this.littleEndian),this.quatern_b=q.getDoubleAt(i,352,this.littleEndian),this.quatern_c=q.getDoubleAt(i,360,this.littleEndian),this.quatern_d=q.getDoubleAt(i,368,this.littleEndian),this.qoffset_x=q.getDoubleAt(i,376,this.littleEndian),this.qoffset_y=q.getDoubleAt(i,384,this.littleEndian),this.qoffset_z=q.getDoubleAt(i,392,this.littleEndian),r=0;r<3;r+=1)for(a=0;a<4;a+=1)o=400+(r*4+a)*8,this.affine[r][a]=q.getDoubleAt(i,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=q.getIntAt(i,496,this.littleEndian),this.xyzt_units=q.getIntAt(i,500,this.littleEndian),this.intent_code=q.getIntAt(i,504,this.littleEndian),this.intent_name=q.getStringAt(i,508,524),this.dim_info=q.getByteAt(i,524),i.byteLength>cn.MAGIC_COOKIE&&(this.extensionFlag[0]=q.getByteAt(i,540),this.extensionFlag[1]=q.getByteAt(i,541),this.extensionFlag[2]=q.getByteAt(i,542),this.extensionFlag[3]=q.getByteAt(i,543),this.extensionFlag[0]&&(this.extensions=q.getExtensionsAt(i,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var t=q.formatNumber,i="";return i+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,i+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,i+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,i+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,i+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,i+="Image Offset = "+this.vox_offset+`
`,i+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,i+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,i+="Slice Duration = "+this.slice_duration+`
`,i+="Time Axis Shift = "+this.toffset+`
`,i+="Slice Start = "+this.slice_start+`
`,i+="Slice End = "+this.slice_end+`
`,i+='Description: "'+this.description+`"
`,i+='Auxiliary File: "'+this.aux_file+`"
`,i+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,i+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,i+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,i+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,i+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,i+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,i+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,i+="Slice Code = "+this.slice_code+`
`,i+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(ve.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(ve.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,i+="Intent Code = "+this.intent_code+`
`,i+='Intent Name: "'+this.intent_name+`"
`,i+="Dim Info = "+this.dim_info+`
`,i}toArrayBuffer(t=!1){let s=544;if(t)for(let l of this.extensions)s+=l.esize;let r=new Uint8Array(s),a=new DataView(r.buffer);a.setInt32(0,540,this.littleEndian),r.set(new TextEncoder().encode(this.magic),4),a.setInt16(12,this.datatypeCode,this.littleEndian),a.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let l=0;l<8;l++)a.setBigInt64(16+8*l,BigInt(this.dims[l]),this.littleEndian);a.setFloat64(80,this.intent_p1,this.littleEndian),a.setFloat64(88,this.intent_p2,this.littleEndian),a.setFloat64(96,this.intent_p3,this.littleEndian);for(let l=0;l<8;l++)a.setFloat64(104+8*l,this.pixDims[l],this.littleEndian);a.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),a.setFloat64(176,this.scl_slope,this.littleEndian),a.setFloat64(184,this.scl_inter,this.littleEndian),a.setFloat64(192,this.cal_max,this.littleEndian),a.setFloat64(200,this.cal_min,this.littleEndian),a.setFloat64(208,this.slice_duration,this.littleEndian),a.setFloat64(216,this.toffset,this.littleEndian),a.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),a.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),r.set(new TextEncoder().encode(this.description),240),r.set(new TextEncoder().encode(this.aux_file),320),a.setInt32(344,this.qform_code,this.littleEndian),a.setInt32(348,this.sform_code,this.littleEndian),a.setFloat64(352,this.quatern_b,this.littleEndian),a.setFloat64(360,this.quatern_c,this.littleEndian),a.setFloat64(368,this.quatern_d,this.littleEndian),a.setFloat64(376,this.qoffset_x,this.littleEndian),a.setFloat64(384,this.qoffset_y,this.littleEndian),a.setFloat64(392,this.qoffset_z,this.littleEndian);const o=this.affine.flat();for(let l=0;l<12;l++)a.setFloat64(400+8*l,o[l],this.littleEndian);if(a.setInt32(496,this.slice_code,this.littleEndian),a.setInt32(500,this.xyzt_units,this.littleEndian),a.setInt32(504,this.intent_code,this.littleEndian),r.set(new TextEncoder().encode(this.intent_name),508),a.setUint8(524,this.dim_info),t){r.set(Uint8Array.from([1,0,0,0]),540);let l=this.getExtensionLocation();for(const c of this.extensions)a.setInt32(l,c.esize,c.littleEndian),a.setInt32(l+4,c.ecode,c.littleEndian),r.set(new Uint8Array(c.edata),l+8),l+=c.esize}else r.set(new Uint8Array(4).fill(0),540);return r.buffer}};j(cn,"MAGIC_COOKIE",540),j(cn,"MAGIC_NUMBER_LOCATION",4),j(cn,"MAGIC_NUMBER",[110,43,50,0,13,10,26,10]),j(cn,"MAGIC_NUMBER2",[110,105,50,0,13,10,26,10]);let ei=cn;function VP(e,t=!1){var i,n,s,r;return e.byteLength<ve.STANDARD_HEADER_SIZE?!1:(i=new DataView(e),i&&(n=i.getUint8(ve.MAGIC_NUMBER_LOCATION)),s=i.getUint8(ve.MAGIC_NUMBER_LOCATION+1),r=i.getUint8(ve.MAGIC_NUMBER_LOCATION+2),t&&n===ve.MAGIC_NUMBER2[0]&&s===ve.MAGIC_NUMBER2[1]&&r===ve.MAGIC_NUMBER2[2]?!0:n===ve.MAGIC_NUMBER[0]&&s===ve.MAGIC_NUMBER[1]&&r===ve.MAGIC_NUMBER[2])}function PP(e,t=!1){var i,n,s,r;return e.byteLength<ve.STANDARD_HEADER_SIZE?!1:(i=new DataView(e),n=i.getUint8(ei.MAGIC_NUMBER_LOCATION),s=i.getUint8(ei.MAGIC_NUMBER_LOCATION+1),r=i.getUint8(ei.MAGIC_NUMBER_LOCATION+2),t&&n===ei.MAGIC_NUMBER2[0]&&s===ei.MAGIC_NUMBER2[1]&&r===ei.MAGIC_NUMBER2[2]?!0:n===ei.MAGIC_NUMBER[0]&&s===ei.MAGIC_NUMBER[1]&&r===ei.MAGIC_NUMBER[2])}function i2(e){var t,i,n;return!!(e&&(t=new DataView(e),i=t.getUint8(0),n=t.getUint8(1),i===q.GUNZIP_MAGIC_COOKIE1||n===q.GUNZIP_MAGIC_COOKIE2))}function OP(e){return FP(new Uint8Array(e)).buffer}async function LP(e){const t=new Uint8Array(e),i=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",n=new DecompressionStream(i),s=n.writable.getWriter();s.write(t).catch(console.error);const r=s.close().catch(console.error),o=await new Response(n.readable).arrayBuffer();return await r,o}async function Mx(e,t=1/0){const i=d=>d[0]===31&&d[1]===139&&d[2]===8?"gzip":d[0]===120&&[1,94,156,218].includes(d[1])?"deflate":"deflate-raw",n=new Uint8Array(e),s=i(n),r=new DecompressionStream(s),a=new TransformStream({transform(d,g){g.enqueue(d)},flush(d){d.terminate()}}),{readable:o,writable:l}=r,c=l.getWriter(),u=o.pipeThrough(a).getReader();c.write(n).catch(d=>{d instanceof Error&&d.name==="AbortError"||console.error("Error during write:",d)});const h=[];let f=0;try{for(;f<t;){const{done:d,value:g}=await u.read();if(d)break;const m=t-f,A=g.subarray(0,Math.min(g.length,m));if(h.push(A),f+=A.length,f>=t){await Promise.all([u.cancel().catch(()=>{}),c.abort().catch(()=>{})]);break}}}catch(d){d instanceof Error&&d.name==="AbortError"||console.error("Error during decompression:",d)}finally{await Promise.allSettled([u.cancel().catch(()=>{}),c.close().catch(()=>{})])}return h.length===1?h[0].buffer:h.reduce((d,g)=>{const m=new Uint8Array(d.byteLength+g.byteLength);return m.set(new Uint8Array(d),0),m.set(g,d.byteLength),m.buffer},new ArrayBuffer(0))}function kP(e,t=!1){let i=null;if(i2(e)&&(e=OP(e)),VP(e,t)?i=new ve:PP(e,t)&&(i=new ei),i)i.readHeader(e);else throw new Error("That file does not appear to be NIFTI!");return i}async function El(e,t=!1){if(!i2(e))return kP(e,t);let i=null,n=await Mx(e,540),s=!0,r=!0;var a=new DataView(n);const o=a.getInt32(0,!0),l=a.getInt32(0,!1);if(o!==348)if(l===348)s=!1;else if(o===540)r=!1;else if(l===540)r=!1,s=!1;else throw new Error("That file does not appear to be NIFTI!");let c=Math.round(a.getFloat32(108,s));return ei&&(c=q.getUint64At(a,168,s)),c>n.byteLength&&(n=await Mx(e,c)),r?i=new ve:i=new ei,i.readHeader(n),i}function jP(e,t){var i=e.vox_offset,n=1,s=1;e.dims[4]&&(n=e.dims[4]),e.dims[5]&&(s=e.dims[5]);var r=e.dims[1]*e.dims[2]*e.dims[3]*n*s*(e.numBitsPerVoxel/8);return t.slice(i,i+r)}class tu extends Error{constructor(t,i={}){super(`Node not found: ${t}`,i),this.name="NodeNotFoundError"}}class n2 extends Error{constructor(t){super(`Missing key: ${t}`),this.name="KeyError"}}var hi;class HC{constructor(t,i,n){$(this,hi);typeof t=="number"?Y(this,hi,new Uint8Array(t)):t instanceof ArrayBuffer?Y(this,hi,new Uint8Array(t,i,n)):Y(this,hi,new Uint8Array(Array.from(t,s=>s?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return O(this,hi).byteOffset}get byteLength(){return O(this,hi).byteLength}get buffer(){return O(this,hi).buffer}get length(){return O(this,hi).length}get(t){let i=O(this,hi)[t];return typeof i=="number"?i!==0:i}set(t,i){O(this,hi)[t]=i?1:0}fill(t){O(this,hi).fill(t?1:0)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}hi=new WeakMap;var fo;class s2{constructor(t,i,n,s){j(this,"_data");j(this,"chars");$(this,fo);if(this.chars=t,Y(this,fo,new TextEncoder),typeof i=="number")this._data=new Uint8Array(i*t);else if(i instanceof ArrayBuffer)s&&(s=s*t),this._data=new Uint8Array(i,n,s);else{let r=Array.from(i);this._data=new Uint8Array(r.length*t);for(let a=0;a<r.length;a++)this.set(a,r[a])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(t){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);return new TextDecoder().decode(i).replace(/\x00/g,"")}set(t,i){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);n.fill(0),n.set(O(this,fo).encode(i))}fill(t){const i=O(this,fo).encode(t);for(let n=0;n<this.length;n++)this._data.set(i,n*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}fo=new WeakMap;var Ut;const A2=class A2{constructor(t,i,n,s){$(this,Ut);j(this,"chars");if(this.chars=t,typeof i=="number")Y(this,Ut,new Int32Array(i*t));else if(i instanceof ArrayBuffer)s&&(s*=t),Y(this,Ut,new Int32Array(i,n,s));else{const r=i,a=new A2(t,1);Y(this,Ut,new Int32Array(function*(){for(let o of r)a.set(0,o),yield*O(a,Ut)}()))}}get BYTES_PER_ELEMENT(){return O(this,Ut).BYTES_PER_ELEMENT*this.chars}get byteLength(){return O(this,Ut).byteLength}get byteOffset(){return O(this,Ut).byteOffset}get buffer(){return O(this,Ut).buffer}get length(){return O(this,Ut).length/this.chars}get(t){const i=this.chars*t;let n="";for(let s=0;s<this.chars;s++)n+=String.fromCodePoint(O(this,Ut)[i+s]);return n.replace(/\u0000/g,"")}set(t,i){const n=this.chars*t,s=O(this,Ut).subarray(n,n+this.chars);s.fill(0);for(let r=0;r<this.chars;r++)s[r]=i.codePointAt(r)??0}fill(t){this.set(0,t);let i=O(this,Ut).subarray(0,this.chars);for(let n=1;n<this.length;n++)O(this,Ut).set(i,n*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}};Ut=new WeakMap;let mc=A2;function iu(e){const t=new TextDecoder().decode(e);return JSON.parse(t)}function Dx(e,t){const i=t/2,n=t-1;let s=0;for(let r=0;r<e.length;r+=t)for(let a=0;a<i;a+=1)s=e[r+a],e[r+a]=e[r+n-a],e[r+n-a]=s}function YC(e){if(e==="v2:object")return globalThis.Array;let t=e.match(/v2:([US])(\d+)/);if(t){let[,n,s]=t;return(n==="U"?mc:s2).bind(null,Number(s))}let i={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:HC}[e];return pt(i,`Unknown or unsupported data_type: ${e}`),i}function ta(e,t){const i=e.length;typeof t=="string"&&(t=t==="C"?Array.from({length:i},(r,a)=>a):Array.from({length:i},(r,a)=>i-1-a)),pt(i===t.length,"Order length must match the number of dimensions.");let n=1,s=new Array(i);for(let r=t.length-1;r>=0;r--)s[t[r]]=n,n*=e[t[r]];return s}function zP({name:e,configuration:t}){if(e==="default"){const i=(t==null?void 0:t.separator)??"/";return n=>["c",...n].join(i)}if(e==="v2"){const i=(t==null?void 0:t.separator)??".";return n=>n.join(i)||"0"}throw new Error(`Unknown chunk key encoding: ${e}`)}function _P(e){if(e==="|O")return{data_type:"v2:object"};let t=e.match(/^([<|>])(.*)$/);pt(t,`Invalid dtype: ${e}`);let[,i,n]=t,s={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[n]??(n.startsWith("S")||n.startsWith("U")?`v2:${n}`:void 0);return pt(s,`Unsupported or unknown dtype: ${e}`),i==="|"?{data_type:s}:{data_type:s,endian:i==="<"?"little":"big"}}function GP(e,t={}){let i=[],n=_P(e.dtype);e.order==="F"&&i.push({name:"transpose",configuration:{order:"F"}}),"endian"in n&&n.endian==="big"&&i.push({name:"bytes",configuration:{endian:"big"}});for(let{id:s,...r}of e.filters??[])i.push({name:s,configuration:r});if(e.compressor){let{id:s,...r}=e.compressor;i.push({name:s,configuration:r})}return{zarr_format:3,node_type:"array",shape:e.shape,data_type:n.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:e.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:e.dimension_separator??"."}},codecs:i,fill_value:e.fill_value,attributes:t}}function HP(e,t={}){return{zarr_format:3,node_type:"group",attributes:t}}function YP(e,t){if(t!=="number"&&t!=="bigint"&&t!=="boolean"&&t!=="object"&&t!=="string")return e===t;let i=e==="bool";if(t==="boolean")return i;let n=e.startsWith("v2:U")||e.startsWith("v2:S");if(t==="string")return n;let s=e==="int64"||e==="uint64";if(t==="bigint")return s;let r=e==="v2:object";return t==="object"?r:!n&&!s&&!i&&!r}function qP(e){return(e==null?void 0:e.name)==="sharding_indexed"}function qC(e){return(e.data_type==="uint64"||e.data_type==="int64")&&e.fill_value!=null?BigInt(e.fill_value):e.fill_value}function KC(e,...t){if(!t.some(i=>e instanceof i))throw e}function pt(e,t=""){if(!e)throw new Error(t)}async function QC(e,{format:t,signal:i}){const n=e instanceof Response?e:new Response(e);pt(n.body,"Response does not contain body.");try{return await new Response(n.body.pipeThrough(new DecompressionStream(t),{signal:i})).arrayBuffer()}catch{throw i==null||i.throwIfAborted(),new Error(`Failed to decode ${t}`)}}class r2{constructor(t,i){j(this,"kind","array_to_array");pt(t.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(t,i){return new r2(t,i)}encode(t){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(t){return t}}const Rx=KP();function KP(){const e=new Uint32Array([305419896]);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0]!==18}function Nx(e){return"BYTES_PER_ELEMENT"in e?e.BYTES_PER_ELEMENT:4}var yc,Us,bc,wc,mo;const x2=class x2{constructor(t,i){j(this,"kind","array_to_bytes");$(this,yc);$(this,Us);$(this,bc);$(this,wc);$(this,mo);Y(this,mo,t==null?void 0:t.endian),Y(this,Us,YC(i.data_type)),Y(this,wc,i.shape),Y(this,yc,ta(i.shape,"C"));const n=new(O(this,Us))(0);Y(this,bc,n.BYTES_PER_ELEMENT)}static fromConfig(t,i){return new x2(t,i)}encode(t){let i=new Uint8Array(t.data.buffer);return Rx&&O(this,mo)==="big"&&Dx(i,Nx(O(this,Us))),i}decode(t){return Rx&&O(this,mo)==="big"&&Dx(t,Nx(O(this,Us))),{data:new(O(this,Us))(t.buffer,t.byteOffset,t.byteLength/O(this,bc)),shape:O(this,wc),stride:O(this,yc)}}};yc=new WeakMap,Us=new WeakMap,bc=new WeakMap,wc=new WeakMap,mo=new WeakMap;let bf=x2;class a2{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(){return new a2}encode(t){throw new Error("Not implemented")}decode(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength-4)}}class o2{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(t){return new o2}encode(t){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(t){const i=await QC(t,{format:"gzip"});return new Uint8Array(i)}}function QP(e,t){return pt(!Number.isNaN(t),"JsonCodec allow_nan is false but NaN was encountered during encoding."),pt(t!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),pt(t!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),t}function XP(e,t){return t instanceof Object&&!Array.isArray(t)?Object.keys(t).sort().reduce((i,n)=>(i[n]=t[n],i),{}):t}var Sc,Cc;const y2=class y2{constructor(t={}){j(this,"configuration");j(this,"kind","array_to_bytes");$(this,Sc);$(this,Cc);this.configuration=t;const{encoding:i="utf-8",skipkeys:n=!1,ensure_ascii:s=!0,check_circular:r=!0,allow_nan:a=!0,sort_keys:o=!0,indent:l,strict:c=!0}=t;let u=t.separators;u||(l?u=[", ",": "]:u=[",",":"]),Y(this,Sc,{encoding:i,skipkeys:n,ensure_ascii:s,check_circular:r,allow_nan:a,indent:l,separators:u,sort_keys:o}),Y(this,Cc,{strict:c})}static fromConfig(t){return new y2(t)}encode(t){const{indent:i,encoding:n,ensure_ascii:s,check_circular:r,allow_nan:a,sort_keys:o}=O(this,Sc);pt(n==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const l=[];pt(r,"JsonCodec does not yet support skipping the check for circular references during encoding."),a||l.push(QP),o&&l.push(XP);const c=Array.from(t.data);c.push("|O"),c.push(t.shape);let u;l.length&&(u=(f,d)=>{let g=d;for(let m of l)g=m(f,g);return g});let h=JSON.stringify(c,u,i);return s&&(h=h.replace(/[\u007F-\uFFFF]/g,f=>{const d=`0000${f.charCodeAt(0).toString(16)}`;return`\\u${d.substring(d.length-4)}`})),new TextEncoder().encode(h)}decode(t){const{strict:i}=O(this,Cc);pt(i,"JsonCodec does not yet support non-strict decoding.");const n=iu(t),s=n.pop();n.pop(),pt(s,"0D not implemented for JsonCodec.");const r=ta(s,"C");return{data:n,shape:s,stride:r}}};Sc=new WeakMap,Cc=new WeakMap;let H1=y2;function Ix(e){return e instanceof HC||e instanceof s2||e instanceof mc?new Proxy(e,{get(i,n){return i.get(Number(n))},set(i,n,s){return i.set(Number(n),s),!0}}):e}function WP(e,t){let i;return e.data instanceof s2||e.data instanceof mc?i=new e.constructor(e.data.length,e.data.chars):i=new e.constructor(e.data.length),{data:i,shape:e.shape,stride:ta(e.shape,t)}}function ZP(e,t){let i=WP(e,t),n=e.shape.length,s=e.data.length,r=Array(n).fill(0),a=Ix(e.data),o=Ix(i.data);for(let l=0;l<s;l++){let c=0;for(let u=0;u<n;u++)c+=r[u]*i.stride[u];o[c]=a[l],r[0]+=1;for(let u=0;u<n;u++)if(r[u]===e.shape[u]){if(u+1===n)break;r[u]=0,r[u+1]+=1}}return i}function JP(e){let t=e.shape.length;return pt(t===e.stride.length,"Shape and stride must have the same length."),e.stride.map((i,n)=>({stride:i,index:n})).sort((i,n)=>n.stride-i.stride).map(i=>i.index)}function $P(e,t){let i=JP(e);return pt(i.length===t.length,"Orders must match"),i.every((n,s)=>n===t[s])}var Ec,go;const b2=class b2{constructor(t,i){j(this,"kind","array_to_array");$(this,Ec);$(this,go);let n=t.order??"C",s=i.shape.length,r=new Array(s),a=new Array(s);if(n==="C")for(let o=0;o<s;++o)r[o]=o,a[o]=o;else if(n==="F")for(let o=0;o<s;++o)r[o]=s-o-1,a[o]=s-o-1;else r=n,r.forEach((o,l)=>{pt(a[o]===void 0,`Invalid permutation: ${JSON.stringify(n)}`),a[o]=l});Y(this,Ec,r),Y(this,go,a)}static fromConfig(t,i){return new b2(t,i)}encode(t){return $P(t,O(this,go))?t:ZP(t,O(this,go))}decode(t){return{data:t.data,shape:t.shape,stride:ta(t.shape,O(this,Ec))}}};Ec=new WeakMap,go=new WeakMap;let Y1=b2;var Tc,Mc;const w2=class w2{constructor(t){j(this,"kind","array_to_bytes");$(this,Tc);$(this,Mc);Y(this,Tc,t),Y(this,Mc,ta(t,"C"))}static fromConfig(t,i){return new w2(i.shape)}encode(t){throw new Error("Method not implemented.")}decode(t){let i=new TextDecoder,n=new DataView(t.buffer),s=Array(n.getUint32(0,!0)),r=4;for(let a=0;a<s.length;a++){let o=n.getUint32(r,!0);r+=4,s[a]=i.decode(t.buffer.slice(r,r+o)),r+=o}return{data:s,shape:O(this,Tc),stride:O(this,Mc)}}};Tc=new WeakMap,Mc=new WeakMap;let q1=w2;class l2{constructor(){j(this,"kind","bytes_to_bytes")}static fromConfig(t){return new l2}encode(t){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(t){const i=await QC(t,{format:"deflate"});return new Uint8Array(i)}}function eO(){return new Map().set("blosc",()=>y0(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(e=>e.default)).set("lz4",()=>y0(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([2,1])).then(e=>e.default)).set("zstd",()=>y0(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([3,1])).then(e=>e.default)).set("gzip",()=>o2).set("zlib",()=>l2).set("transpose",()=>Y1).set("bytes",()=>bf).set("crc32c",()=>a2).set("vlen-utf8",()=>q1).set("json2",()=>H1).set("bitround",()=>r2)}const tO=eO();function K1(e){let t;return{async encode(i){t||(t=await Fx(e));for(const s of t.array_to_array)i=await s.encode(i);let n=await t.array_to_bytes.encode(i);for(const s of t.bytes_to_bytes)n=await s.encode(n);return n},async decode(i){t||(t=await Fx(e));for(let s=t.bytes_to_bytes.length-1;s>=0;s--)i=await t.bytes_to_bytes[s].decode(i);let n=await t.array_to_bytes.decode(i);for(let s=t.array_to_array.length-1;s>=0;s--)n=await t.array_to_array[s].decode(n);return n}}}async function Fx(e){let t=e.codecs.map(async r=>{var o;let a=await((o=tO.get(r.name))==null?void 0:o());return pt(a,`Unknown codec: ${r.name}`),{Codec:a,meta:r}}),i=[],n,s=[];for await(let{Codec:r,meta:a}of t){let o=r.fromConfig(a.configuration,e);switch(o.kind){case"array_to_array":i.push(o);break;case"array_to_bytes":n=o;break;default:s.push(o)}}return n||(pt(iO(e),`Cannot encode ${e.data_type} to bytes without a codec`),n=bf.fromConfig({endian:"little"},e)),{array_to_array:i,array_to_bytes:n,bytes_to_bytes:s}}function iO(e){return e.data_type!=="v2:object"}const Ux=18446744073709551615n;function nO(e,t,i,n){pt(e.store.getRange,"Store does not support range requests");let s=e.store.getRange.bind(e.store),r=t.map((l,c)=>l/n.chunk_shape[c]),a=K1({data_type:"uint64",shape:[...r,2],codecs:n.index_codecs}),o={};return async l=>{let c=l.map((v,x)=>Math.floor(v/r[x])),u=e.resolve(i(c)).path,h;if(u in o)h=o[u];else{let v=4,x=16*r.reduce((b,E)=>b*E,1),y=await s(u,{suffixLength:x+v});h=o[u]=y?await a.decode(y):null}if(h===null)return;let{data:f,shape:d,stride:g}=h,m=l.map((v,x)=>v%d[x]).reduce((v,x,y)=>v+x*g[y],0),A=f[m],p=f[m+1];if(!(A===Ux&&p===Ux))return s(u,{offset:Number(A),length:Number(p)})}}class la{constructor(t,i="/"){j(this,"store");j(this,"path");this.store=t,this.path=i}resolve(t){let i=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new la(this.store,new URL(t,i).pathname)}}function sO(e){return new la(e??new Map)}var Dc;class c2 extends la{constructor(i,n,s){super(i,n);j(this,"kind","group");$(this,Dc);Y(this,Dc,s)}get attrs(){return O(this,Dc).attributes}}Dc=new WeakMap;function Bx(e){var i;const t=e.find(n=>n.name==="transpose");return((i=t==null?void 0:t.configuration)==null?void 0:i.order)??"C"}const Tl=Symbol("zarrita.context");function rO(e){return e[Tl]}function aO(e,t){let{configuration:i}=t.codecs.find(qP)??{},n={encode_chunk_key:zP(t.chunk_key_encoding),TypedArray:YC(t.data_type),fill_value:t.fill_value};if(i){let r=Bx(i.codecs);return{...n,kind:"sharded",chunk_shape:i.chunk_shape,codec:K1({data_type:t.data_type,shape:i.chunk_shape,codecs:i.codecs}),get_strides(a){return ta(a,r)},get_chunk_bytes:nO(e,t.chunk_grid.configuration.chunk_shape,n.encode_chunk_key,i)}}let s=Bx(t.codecs);return{...n,kind:"regular",chunk_shape:t.chunk_grid.configuration.chunk_shape,codec:K1({data_type:t.data_type,shape:t.chunk_grid.configuration.chunk_shape,codecs:t.codecs}),get_strides(r){return ta(r,s)},async get_chunk_bytes(r,a){let o=n.encode_chunk_key(r),l=e.resolve(o).path;return e.store.get(l,a)}}}var Ay,xy,Rr,yy;let wf=(yy=class extends(xy=la,Ay=Tl,xy){constructor(i,n,s){super(i,n);j(this,"kind","array");$(this,Rr);j(this,Ay);Y(this,Rr,{...s,fill_value:qC(s)}),this[Tl]=aO(this,s)}get attrs(){return O(this,Rr).attributes}get shape(){return O(this,Rr).shape}get chunks(){return this[Tl].chunk_shape}get dtype(){return O(this,Rr).data_type}async getChunk(i,n){let s=this[Tl],r=await s.get_chunk_bytes(i,n);if(!r){let a=s.chunk_shape.reduce((l,c)=>l*c,1),o=new s.TypedArray(a);return o.fill(s.fill_value),{data:o,shape:s.chunk_shape,stride:s.get_strides(s.chunk_shape)}}return s.codec.decode(r)}is(i){return YP(this.dtype,i)}},Rr=new WeakMap,yy),yd=oO();function oO(){let e=new WeakMap;function t(i){let n=e.get(i)??{v2:0,v3:0};return e.set(i,n),n}return{increment(i,n){t(i)[n]+=1},version_max(i){let n=t(i);return n.v3>n.v2?"v3":"v2"}}}async function lO(e){let t=await e.store.get(e.resolve(".zattrs").path);return t?iu(t):{}}async function cO(e,t={}){let i="store"in e?e:new la(e),n={};return(t.attrs??!0)&&(n=await lO(i)),t.kind==="array"?Vx(i,n):t.kind==="group"?Px(i,n):Vx(i,n).catch(s=>(KC(s,tu),Px(i,n)))}async function Vx(e,t){let{path:i}=e.resolve(".zarray"),n=await e.store.get(i);if(!n)throw new tu("v2 array",{cause:new n2(i)});return yd.increment(e.store,"v2"),new wf(e.store,e.path,GP(iu(n),t))}async function Px(e,t){let{path:i}=e.resolve(".zgroup"),n=await e.store.get(i);if(!n)throw new tu("v2 group",{cause:new n2(i)});return yd.increment(e.store,"v2"),new c2(e.store,e.path,HP(iu(n),t))}async function uO(e){let{store:t,path:i}=e.resolve("zarr.json"),n=await e.store.get(i);if(!n)throw new tu("v3 array or group",{cause:new n2(i)});let s=iu(n);return s.node_type==="array"&&(s.fill_value=qC(s)),s.node_type==="array"?new wf(t,e.path,s):new c2(t,e.path,s)}async function hO(e,t={}){let i="store"in e?e:new la(e),n=await uO(i);if(yd.increment(i.store,"v3"),t.kind===void 0||t.kind==="array"&&n instanceof wf||t.kind==="group"&&n instanceof c2)return n;let s=n instanceof wf?"array":"group";throw new Error(`Expected node of kind ${t.kind}, found ${s}.`)}async function Ls(e,t={}){let i="store"in e?e.store:e,n=yd.version_max(i),s=n==="v2"?Ls.v2:Ls.v3,r=n==="v2"?Ls.v3:Ls.v2;return s(e,t).catch(a=>(KC(a,tu),r(e,t)))}Ls.v2=cO;Ls.v3=hO;function*fO(e,t,i=1){t===void 0&&(t=e,e=0);for(let n=e;n<t;n+=i)yield n}function*dO(...e){if(e.length===0)return;const t=e.map(n=>n[Symbol.iterator]()),i=t.map(n=>n.next());if(i.some(n=>n.done))throw new Error("Input contains an empty iterator.");for(let n=0;;){if(i[n].done){if(t[n]=e[n][Symbol.iterator](),i[n]=t[n].next(),++n>=t.length)return}else yield i.map(({value:s})=>s),n=0;i[n]=t[n].next()}}function mO({start:e,stop:t,step:i},n){if(i===0)throw new Error("slice step cannot be zero");i=i??1;const s=i<0,[r,a]=s?[-1,n-1]:[0,n];return e===null?e=s?a:r:e<0?(e+=n,e<r&&(e=r)):e>a&&(e=a),t===null?t=s?r:a:t<0?(t+=n,t<r&&(t=r)):t>a&&(t=a),[e,t,i]}function Kl(e,t,i=null){return t===void 0&&(t=e,e=null),{start:e,stop:t,step:i}}function gO(){const e=[];return{add:t=>e.push(t()),onIdle:()=>Promise.all(e)}}class u2 extends Error{constructor(t){super(t),this.name="IndexError"}}function pO(e,t){throw new u2(`too many indicies for array; expected ${t.length}, got ${e.length}`)}function vO(e){throw new u2(`index out of bounds for dimension with length ${e}`)}function AO(){throw new u2("only slices with step >= 1 are supported")}function xO(e,t){e.length>t.length&&pO(e,t)}function yO(e,t){return e=Math.trunc(e),e<0&&(e=t+e),(e>=t||e<0)&&vO(t),e}class bO{constructor({dim_sel:t,dim_len:i,dim_chunk_len:n}){j(this,"dim_sel");j(this,"dim_len");j(this,"dim_chunk_len");j(this,"nitems");t=yO(t,i),this.dim_sel=t,this.dim_len=i,this.dim_chunk_len=n,this.nitems=1}*[Symbol.iterator](){const t=Math.floor(this.dim_sel/this.dim_chunk_len),i=t*this.dim_chunk_len,n=this.dim_sel-i;yield{dim_chunk_ix:t,dim_chunk_sel:n}}}class Ox{constructor({dim_sel:t,dim_len:i,dim_chunk_len:n}){j(this,"start");j(this,"stop");j(this,"step");j(this,"dim_len");j(this,"dim_chunk_len");j(this,"nitems");j(this,"nchunks");const[s,r,a]=mO(t,i);this.start=s,this.stop=r,this.step=a,this.step<1&&AO(),this.dim_len=i,this.dim_chunk_len=n,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const t=Math.floor(this.start/this.dim_chunk_len),i=Math.ceil(this.stop/this.dim_chunk_len);for(const n of fO(t,i)){const s=n*this.dim_chunk_len,r=Math.min(this.dim_len,(n+1)*this.dim_chunk_len),a=r-s;let o=0,l=0;if(this.start<s){const d=(s-this.start)%this.step;d&&(l+=this.step-d),o=Math.ceil((s-this.start)/this.step)}else l=this.start-s;const c=this.stop>r?a:this.stop-s,u=[l,c,this.step],h=Math.ceil((c-l)/this.step),f=[o,o+h,1];yield{dim_chunk_ix:n,dim_chunk_sel:u,dim_out_sel:f}}}}function wO(e,t){let i=[];return e===null?i=t.map(n=>Kl(null)):Array.isArray(e)&&(i=e.map(n=>n??Kl(null))),xO(i,t),i}class SO{constructor({selection:t,shape:i,chunk_shape:n}){j(this,"dim_indexers");j(this,"shape");this.dim_indexers=wO(t,i).map((s,r)=>new(typeof s=="number"?bO:Ox)({dim_sel:s,dim_len:i[r],dim_chunk_len:n[r]})),this.shape=this.dim_indexers.filter(s=>s instanceof Ox).map(s=>s.nitems)}*[Symbol.iterator](){for(const t of dO(...this.dim_indexers)){const i=t.map(s=>s.dim_chunk_ix),n=t.map(s=>"dim_out_sel"in s?{from:s.dim_chunk_sel,to:s.dim_out_sel}:{from:s.dim_chunk_sel,to:null});yield{chunk_coords:i,mapping:n}}}}function CO(e,t){return"get"in e?e.get(t):e[t]}async function EO(e,t,i,n){var l;let s=rO(e),r=new SO({selection:t,shape:e.shape,chunk_shape:e.chunks}),a=n.prepare(new s.TypedArray(r.shape.reduce((c,u)=>c*u,1)),r.shape,s.get_strides(r.shape)),o=((l=i.create_queue)==null?void 0:l.call(i))??gO();for(const{chunk_coords:c,mapping:u}of r)o.add(async()=>{let{data:h,shape:f,stride:d}=await e.getChunk(c,i.opts),g=n.prepare(h,f,d);n.set_from_chunk(a,g,u)});return await o.onIdle(),r.shape.length===0?CO(a.data,0):a}function h2(e,t=0,i){let n=i??e.length-t;return{length:n,subarray(s,r=n){return h2(e,t+s,r-s)},set(s,r=0){for(let a=0;a<s.length;a++)e[t+r+a]=s.get(a)},get(s){return e[t+s]}}}function z0(e){return globalThis.Array.isArray(e.data)?{data:h2(e.data),stride:e.stride,bytes_per_element:1}:{data:new Uint8Array(e.data.buffer,e.data.byteOffset,e.data.byteLength),stride:e.stride,bytes_per_element:e.data.BYTES_PER_ELEMENT}}function TO(e){return"chars"in e?e.constructor.bind(null,e.chars):e.constructor}function MO(e,t){if(globalThis.Array.isArray(e.data))return h2([t]);let i=TO(e.data),n=new i([t]);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}const DO={prepare(e,t,i){return{data:e,shape:t,stride:i}},set_scalar(e,t,i){let n=z0(e);Q1(n,t,MO(e,i),n.bytes_per_element)},set_from_chunk(e,t,i){let n=z0(e);mh(n,z0(t),n.bytes_per_element,i)}};async function Lx(e,t=null,i={}){return EO(e,t,i,DO)}function XC(e,t,i){return i<0&&t<e?Math.floor((e-t-1)/-i)+1:e<t?Math.floor((t-e-1)/i)+1:0}function Q1(e,t,i,n){if(t.length===0){e.data.set(i,0);return}const[s,...r]=t,[a,...o]=e.stride;if(typeof s=="number"){const f=e.data.subarray(a*s*n);Q1({data:f,stride:o},r,i,n);return}const[l,c,u]=s,h=XC(l,c,u);if(r.length===0){for(let f=0;f<h;f++)e.data.set(i,a*(l+u*f)*n);return}for(let f=0;f<h;f++){const d=e.data.subarray(a*(l+u*f)*n);Q1({data:d,stride:o},r,i,n)}}function mh(e,t,i,n){const[s,...r]=n,[a,...o]=e.stride,[l,...c]=t.stride;if(s.from===null){if(r.length===0){e.data.set(t.data.subarray(0,i),s.to*i);return}mh({data:e.data.subarray(a*s.to*i),stride:o},t,i,r);return}if(s.to===null){if(r.length===0){let p=s.from*i;e.data.set(t.data.subarray(p,p+i),0);return}mh(e,{data:t.data.subarray(l*s.from*i),stride:c},i,r);return}const[u,h,f]=s.to,[d,g,m]=s.from,A=XC(u,h,f);if(r.length===0){if(f===1&&m===1&&a===1&&l===1){let p=d*i,v=A*i;e.data.set(t.data.subarray(p,p+v),u*i);return}for(let p=0;p<A;p++){let v=l*(d+m*p)*i;e.data.set(t.data.subarray(v,v+i),a*(u+f*p)*i)}return}for(let p=0;p<A;p++)mh({data:e.data.subarray(a*(u+p*f)*i),stride:o},{data:t.data.subarray(l*(d+p*m)*i),stride:c},i,r)}function WC(e,t,i,n={}){return t!==void 0&&i!==void 0&&(n={...n,headers:{...n.headers,Range:`bytes=${t}-${t+i-1}`}}),fetch(e,n)}function RO(e,t){return{...e,...t,headers:{...e.headers,...t.headers}}}function kx(e,t){const i=typeof e=="string"?new URL(e):e;i.pathname.endsWith("/")||(i.pathname+="/");const n=new URL(t.slice(1),i);return n.search=i.search,n}async function jx(e){if(e.status!==404){if(e.status===200||e.status===206)return new Uint8Array(await e.arrayBuffer());throw new Error(`Unexpected response status ${e.status} ${e.statusText}`)}}async function NO(e,t,i,n){if(n)return fetch(e,{...i,headers:{...i.headers,Range:`bytes=-${t}`}});let s=await fetch(e,{...i,method:"HEAD"});if(!s.ok)return s;let r=s.headers.get("Content-Length"),a=Number(r);return WC(e,a-t,a,i)}var Rc,Nc,Ic,X1;class IO{constructor(t,i={}){$(this,Ic);j(this,"url");$(this,Rc);$(this,Nc);this.url=t,Y(this,Rc,i.overrides??{}),Y(this,Nc,i.useSuffixRequest??!1)}async get(t,i={}){let n=kx(this.url,t).href,s=await fetch(n,Ae(this,Ic,X1).call(this,i));return jx(s)}async getRange(t,i,n={}){let s=kx(this.url,t),r=Ae(this,Ic,X1).call(this,n),a;return"suffixLength"in i?a=await NO(s,i.suffixLength,r,O(this,Nc)):a=await WC(s,i.offset,i.length,r),jx(a)}}Rc=new WeakMap,Nc=new WeakMap,Ic=new WeakSet,X1=function(t){return RO(O(this,Rc),t)};var ZC=Object.defineProperty,JC=e=>{throw TypeError(e)},FO=(e,t,i)=>t in e?ZC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,bd=(e,t)=>{for(var i in t)ZC(e,i,{get:t[i],enumerable:!0})},B=(e,t,i)=>FO(e,typeof t!="symbol"?t+"":t,i),$C=(e,t,i)=>t.has(e)||JC("Cannot "+i),ce=(e,t,i)=>($C(e,t,"read from private field"),i?i.call(e):t.get(e)),fl=(e,t,i)=>t.has(e)?JC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),pa=(e,t,i,n)=>($C(e,t,"write to private field"),t.set(e,i),i),zx="0.58.0",e6=class Yi{constructor({name:t="niivue",level:i="info"}={}){B(this,"level"),B(this,"name"),this.name=`${t}`,this.level=i}debug(...t){Yi.levels[this.level]>Yi.levels.debug||console.debug(`${this.name}-debug`,...t)}info(...t){Yi.levels[this.level]>Yi.levels.info||console.info(`${this.name}-info`,...t)}warn(...t){Yi.levels[this.level]>Yi.levels.warn||console.warn(`${this.name}-warn`,...t)}error(...t){Yi.levels[this.level]>Yi.levels.error||console.error(`${this.name}-error`,...t)}fatal(...t){Yi.levels[this.level]>Yi.levels.fatal||console.error(`${this.name}-fatal`,...t)}setLogLevel(t){this.level=t}setName(t){this.name=t}};B(e6,"levels",{debug:0,info:1,warn:2,error:3,fatal:4,silent:1/0});var UO=e6,P=new UO({name:"niivue",level:"info"}),BO=function(e,t,i){const n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);const s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,i),e.compileShader(s);const r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,s),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(r)),e.getShaderParameter(n,e.COMPILE_STATUS)||console.log("Vertex shader compilation error:",e.getShaderInfoLog(n)),e.getShaderParameter(s,e.COMPILE_STATUS)||console.log("Fragment shader compilation error:",e.getShaderInfoLog(s)),P.error(e.getProgramInfoLog(r)),new Error("Shader failed to link, see console for log");return r},De=class{constructor(e,t,i){B(this,"program"),B(this,"uniforms",{}),B(this,"isMatcap"),this.program=BO(e,t,i);const n=/uniform[^;]+[ ](\w+);/g,s=/uniform[^;]+[ ](\w+);/,r=t.match(n),a=i.match(n);r&&r.forEach(o=>{const l=o.match(s);this.uniforms[l[1]]=-1}),a&&a.forEach(o=>{const l=o.match(s);this.uniforms[l[1]]=-1});for(const o in this.uniforms)this.uniforms[o]=e.getUniformLocation(this.program,o)}use(e){e.useProgram(this.program)}},dl=`#version 300 es
#line 4
layout(location=0) in vec3 pos;
layout(location=1) in vec3 texCoords;
uniform mat4 mvpMtx;
out vec3 vColor;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vColor = texCoords;
}`,f2=`
	vec4 drawColor(float scalar, float drawOpacity) {
		float nlayer = float(textureSize(colormap, 0).y);
		float layer = (nlayer - 0.5) / nlayer;
		vec4 dcolor = texture(colormap, vec2((scalar * 255.0)/256.0 + 0.5/256.0, layer)).rgba;
		dcolor.a *= drawOpacity;
		return dcolor;
}`,nu=`vec3 GetBackPosition(vec3 startPositionTex) {
	vec3 startPosition = startPositionTex * volScale;
	vec3 invR = 1.0 / rayDir;
	vec3 tbot = invR * (vec3(0.0)-startPosition);
	vec3 ttop = invR * (volScale-startPosition);
	vec3 tmax = max(ttop, tbot);
	vec2 t = min(tmax.xx, tmax.yz);
	vec3 endPosition = startPosition + (rayDir * min(t.x, t.y));
	//convert world position back to texture position:
	endPosition = endPosition / volScale;
	return endPosition;
}

vec4 applyClip (vec3 dir, inout vec4 samplePos, inout float len, inout bool isClip) {
	float cdot = dot(dir,clipPlane.xyz);
	isClip = false;
	if  ((clipPlane.a > 1.0) || (cdot == 0.0)) return samplePos;
	bool frontface = (cdot > 0.0);
	float dis = (-clipPlane.a - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	float thick = clipThick;
	if (thick <= 0.0) thick = 2.0;
	float  disBackFace = (-(clipPlane.a-thick) - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	if (((frontface) && (dis >= len)) || ((!frontface) && (dis <= 0.0))) {
		samplePos.a = len + 1.0;
		return samplePos;
	}
	if (frontface) {
		dis = max(0.0, dis);
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		if (dis > 0.0) isClip = true;
		len = min(disBackFace, len);
	}
	if (!frontface) {
		len = min(dis, len);
		disBackFace = max(0.0, disBackFace);
		if (len == dis) isClip = true;
		samplePos = vec4(samplePos.xyz+dir * disBackFace, disBackFace);
	}
	return samplePos;
}

void clipVolume(inout vec3 startPos, inout vec3 backPos, int dim, float frac, bool isLo) {
	vec3 dir = backPos - startPos;
	float len = length(dir);
	dir = normalize(dir);
	// Discard if both startPos and backPos are outside the clipping plane
	if (isLo && startPos[dim] < frac && backPos[dim] < frac) {
		discard;
	}
	if (!isLo && startPos[dim] > frac && backPos[dim] > frac) {
		discard;
	}
	vec4 plane = vec4(0.0, 0.0, 0.0, 0.5 - frac);
	plane[dim] = 1.0;
	float cdot = dot(dir, plane.xyz);
	float dis = (-plane.w - dot(plane.xyz, startPos - vec3(0.5))) / cdot;
	// Adjust startPos or backPos based on the intersection with the plane
	bool isFrontFace = (cdot > 0.0);
	if (!isLo)
		isFrontFace = !isFrontFace;
	if (dis > 0.0) {
		if (isFrontFace) {
				if (dis <= len) {
					startPos = startPos + dir * dis;
				}
		} else {
			if (dis < len) {
				backPos = startPos + dir * dis;
			}
		}
	}
}

void clipVolumeStart (inout vec3 startPos, inout vec3 backPos) {
	// vec3 clipLo = vec3(0.1, 0.2, 0.4);
	// vec3 clipHi = vec3(0.8, 0.7, 0.7);
	for (int i = 0; i < 3; i++) {
		if (clipLo[i] > 0.0)
			clipVolume(startPos, backPos, i, clipLo[i], true);
	}
	for (int i = 0; i < 3; i++) {
		if (clipHi[i] < 1.0)
			clipVolume(startPos, backPos, i, clipHi[i], false);
	}
}

float frac2ndc(vec3 frac) {
//https://stackoverflow.com/questions/7777913/how-to-render-depth-linearly-in-modern-opengl-with-gl-fragcoord-z-in-fragment-sh
	vec4 pos = vec4(frac.xyz, 1.0); //fraction
	vec4 dim = vec4(vec3(textureSize(volume, 0)), 1.0);
	pos = pos * dim;
	vec4 shim = vec4(-0.5, -0.5, -0.5, 0.0);
	pos += shim;
	vec4 mm = transpose(matRAS) * pos;
	float z_ndc = (mvpMtx * vec4(mm.xyz, 1.0)).z;
	return (z_ndc + 1.0) / 2.0;
}`+f2,d2=`void main() {
	if (fColor.x > 2.0) {
		fColor = vec4(1.0, 0.0, 0.0, 0.5);
		return;
	}
	fColor = vec4(0.0,0.0,0.0,0.0);
	vec4 clipPlaneColorX = clipPlaneColor;
	//if (clipPlaneColor.a < 0.0)
	//	clipPlaneColorX.a = - 1.0;
	bool isColorPlaneInVolume = false;
	if (clipPlaneColorX.a < 0.0) {
		isColorPlaneInVolume = true;
		clipPlaneColorX.a = 0.0;
	}
	//fColor = vec4(vColor.rgb, 1.0); return;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	// fColor = vec4(backPosition, 1.0); return;
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	dir = normalize(dir);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	//if ((clipPos.a != samplePos.a) && (len < 3.0)) {
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	float drawOpacityA = renderDrawAmbientOcclusionXY.y;
	if ((samplePos.a >= len) && (((overlays < 1.0) && (drawOpacityA <= 0.0) ) || (backgroundMasksOverlays > 0)))  {
		if (isClip)
			fColor += clipPlaneColorX;
		return;
	}
	fColor = vec4(1.0, 1.0, 1.0, 1.0);
	//gl_FragDepth = frac2ndc(samplePos.xyz); //crude due to fast pass resolution
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * lenNoClip);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`,wd=`
	if (firstHit.a < len)
		gl_FragDepth = frac2ndc(firstHit.xyz);
	colAcc.a = (colAcc.a / earlyTermination) * backOpacity;
	fColor = colAcc;
	//if (isClip) //CR
	if ((isColorPlaneInVolume) && (clipPos.a != samplePos.a) && (abs(firstHit.a - clipPos.a) < deltaDir.a))
		fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
		//fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, clipPlaneColorX.a * 0.65);
	float renderDrawAmbientOcclusionX = renderDrawAmbientOcclusionXY.x;
	float drawOpacity = renderDrawAmbientOcclusionXY.y;
	if ((overlays < 1.0) && (drawOpacity <= 0.0))
		return;
	//overlay pass
	len = lenNoClip;
	samplePos = vec4(start.xyz, 0.0); //ray position
	//start: OPTIONAL fast pass: rapid traversal until first hit
	stepSizeFast = sliceSize * 1.0;
	deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (drawOpacity > 0.0)
			val = max(val, texture(drawing, samplePos.xyz).r);
		if (val > 0.001)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	if (samplePos.a >= len) {
		if (isClip && (fColor.a == 0.0))
				fColor += clipPlaneColorX;
			return;
	}
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	float overFarthest = len;
	colAcc = vec4(0.0, 0.0, 0.0, 0.0);

	samplePos += deltaDir * ran; //jitter ray
	vec4 overFirstHit = vec4(0.0,0.0,0.0,2.0 * len);
	if (backgroundMasksOverlays > 0)
		samplePos = firstHit;
	bool firstDraw = true;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(overlay, samplePos.xyz);
		if ((colorSample.a < 0.01) && (drawOpacity > 0.0)) {
			float val = texture(drawing, samplePos.xyz).r;
			vec4 draw = drawColor(val, drawOpacity);
			if ((draw.a > 0.0) && (firstDraw)) {
				firstDraw = false;
				float sum = 0.0;
				const float mn = 1.0 / 256.0;
				const float sampleRadius = 1.1;
				float dx = sliceSize * sampleRadius;
				vec3 center = samplePos.xyz;
				//six neighbors that share a face
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,0.0), dir)).r, mn);
				//float proportion = (sum / mn) / 6.0;
				
				//12 neighbors that share an edge
				dx = sliceSize * sampleRadius * sqrt(2.0) * 0.5;
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,-dx,0.0), dir)).r, mn);

				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,-dx,0.0), dir)).r, mn);
				
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,+dx,0.0), dir)).r, mn);
				float proportion = (sum / mn) / 18.0; //proportion of six neighbors is non-zero
				
				//a high proportion of hits means crevice
				//since the AO term adds shadows that darken most voxels, it will result in dark surfaces
				//the term brighten adds a little illumination to balance this
				// without brighten, only the most extreme ridges will not be darker
				const float brighten = 1.2;
				vec3 ao = draw.rgb * (1.0 - proportion) * brighten;
				draw.rgb = mix (draw.rgb, ao , renderDrawAmbientOcclusionX);
			}
			colorSample = draw;
		}
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (overFirstHit.a > len)
				overFirstHit = samplePos;
			colorSample.a *= renderOverlayBlend;
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			overFarthest = samplePos.a;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	//if (samplePos.a >= len) {
	if (colAcc.a <= 0.0) {
		if (isClip && (fColor.a == 0.0))
			fColor += clipPlaneColorX;
		return;
	}
	if (overFirstHit.a < firstHit.a)
		gl_FragDepth = frac2ndc(overFirstHit.xyz);
	float overMix = colAcc.a;
	float overlayDepth = 0.3;
	if (fColor.a <= 0.0)
		overMix = 1.0;
	else if (((overFarthest) > backNearest)) {
		float dx = (overFarthest - backNearest)/1.73;
		dx = fColor.a * pow(dx, overlayDepth);
		overMix *= 1.0 - dx;
	}
	fColor.rgb = mix(fColor.rgb, colAcc.rgb, overMix);
	fColor.a = max(fColor.a, colAcc.a);
}`,VO=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+nu+`
	void main() {
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		fColor = vec4(0.0,0.0,0.0,0.0);
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float dis = len;
	//check if axial plane is closest
	vec4 aClip = vec4(0.0, 0.0, 1.0, (1.0- clipPlane.z) - 0.5);
	float adis = (-aClip.a - dot(aClip.xyz, samplePos.xyz-0.5)) / dot(dir,aClip.xyz);
	if (adis > 0.0)
		dis = min(adis, dis);
	//check of coronal plane is closest
	vec4 cClip = vec4(0.0, 1.0, 0.0, (1.0- clipPlane.y) - 0.5);
	float cdis = (-cClip.a - dot(cClip.xyz, samplePos.xyz-0.5)) / dot(dir,cClip.xyz);
	if (cdis > 0.0)
		dis = min(cdis, dis);
	//check if coronal slice is closest
	vec4 sClip = vec4(1.0, 0.0, 0.0, (1.0- clipPlane.x) - 0.5);
	float sdis = (-sClip.a - dot(sClip.xyz, samplePos.xyz-0.5)) / dot(dir,sClip.xyz);
	if (sdis > 0.0)
		dis = min(sdis, dis);
	if ((dis > 0.0) && (dis < len)) {
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		colAcc = texture(volume, samplePos.xyz);
		colAcc.a = earlyTermination;
		firstHit = samplePos;
		backNearest = min(backNearest, samplePos.a);
	}
	//the following are only used by overlays
	vec4 clipPlaneColorX = clipPlaneColor;
	bool isColorPlaneInVolume = false;
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`+wd,PO=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+nu+d2+`while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
`+wd,gh=192,t6=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 normMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing, gradient;
uniform highp sampler2D colormap;
uniform highp sampler2D matCap;
uniform vec2 renderDrawAmbientOcclusionXY;
uniform float gradientAmount;
uniform float silhouettePower;
uniform float gradientOpacity[${gh}];
in vec3 vColor;
out vec4 fColor;
`,OO=t6+nu+d2+`
	float startPos = samplePos.a;
	float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	float silhouetteThreshold = 1.0 - silhouettePower;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			grad.rgb = normalize(grad.rgb*2.0 - 1.0);
			//if (grad.a < prevGrad.a)
			//	grad.rgb = prevGrad.rgb;
			//prevGrad = grad;
			vec3 n = mat3(normMtx) * grad.rgb;
			n.y = - n.y;
			vec4 mc = vec4(texture(matCap, n.xy * 0.5 + 0.5).rgb, 1.0) * brighten;
			mc = mix(vec4(1.0), mc, gradientAmount);
			if (samplePos.a > clipClose)
				colorSample.rgb *= mc.rgb;
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			int gradIdx = int(grad.a * 255.0);
			colorSample.a *= gradientOpacity[gradIdx];
			float lightNormDot = dot(grad.rgb, rayDir);
			// n.b. "lightNormDor" is cosTheta, "silhouettePower" is Fresnel effect exponent
 			colorSample.a *= pow(1.0 - abs(lightNormDot), silhouettePower);
 			float viewAlign = abs(lightNormDot); // 0 = perpendicular, 1 = aligned
 			// linearly map silhouettePower (0..1) to a threshold range, e.g., [1.0, 0.0]
 			// Cull voxels that are too aligned with the view direction
 			if (viewAlign > silhouetteThreshold)
 				colorSample.a = 0.0;
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+wd,LO=t6+nu+d2+`
	float startPos = samplePos.a;
	float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			colorSample.rgb = abs(normalize(grad.rgb*2.0 - 1.0));
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+wd,_0=`#version 300 es
#line 392
layout(location=0) in vec3 pos;
uniform int axCorSag;
uniform mat4 mvpMtx;
uniform mat4 frac2mm;
uniform float slice;
out vec3 texPos;
void main(void) {
	texPos = vec3(pos.x, pos.y, slice);
	if (axCorSag > 1)
		texPos = vec3(slice, pos.x, pos.y);
	else if (axCorSag > 0)
		texPos = vec3(pos.x, slice, pos.y);
	vec4 mm = frac2mm * vec4(texPos, 1.0);
	gl_Position = mvpMtx * mm;
}`,i6=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler3D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+f2+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 ocolor = vec4(0.0);
	float overlayAlpha = overlayAlphaShader;
	if (overlays > 0.0) {
		ocolor = texture(overlay, texPos);
		//dFdx for "boxing" issue 435 has aliasing on some implementations (coarse vs fine)
		//however, this only identifies 50% of the edges due to aliasing effects
		// http://www.aclockworkberry.com/shader-derivative-functions/
		// https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b
		//if ((ocolor.a >= 1.0) && ((dFdx(ocolor.a) != 0.0) || (dFdy(ocolor.a) != 0.0)  ))
		//	ocolor.rbg = vec3(0.0, 0.0, 0.0);
		bool isOutlineBelowNotAboveThreshold = true;
		if (isOutlineBelowNotAboveThreshold) {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a < 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				//6 voxel neighbors that share a face
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 0.0;
				if (axCorSag != 2) {
					a = max(a, texture(overlay, vxR).a);
					a = max(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = max(a, texture(overlay, vxA).a);
					a = max(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = max(a, texture(overlay, vxS).a);
					a = max(a, texture(overlay, vxI).a);
				}
				bool isCheckCorners = true;
				if (isCheckCorners) {
					//12 voxel neighbors that share an edge
					vec3 vxRA = vec3(texPos.x+vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxLA = vec3(texPos.x-vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxRP = vec3(texPos.x+vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxLP = vec3(texPos.x-vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxRS = vec3(texPos.x+vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxLS = vec3(texPos.x-vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxRI = vec3(texPos.x+vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxLI = vec3(texPos.x-vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxAS = vec3(texPos.x, texPos.y+vx.y, texPos.z+vx.z);
					vec3 vxPS = vec3(texPos.x, texPos.y-vx.y, texPos.z+vx.z);
					vec3 vxAI = vec3(texPos.x, texPos.y+vx.y, texPos.z-vx.z);
					vec3 vxPI = vec3(texPos.x, texPos.y-vx.y, texPos.z-vx.z);

					if (axCorSag == 0) { //axial corners
						a = max(a, texture(overlay, vxRA).a);
						a = max(a, texture(overlay, vxLA).a);
						a = max(a, texture(overlay, vxRP).a);
						a = max(a, texture(overlay, vxLP).a);
					}
					if (axCorSag == 1) { //coronal corners
						a = max(a, texture(overlay, vxRS).a);
						a = max(a, texture(overlay, vxLS).a);
						a = max(a, texture(overlay, vxRI).a);
						a = max(a, texture(overlay, vxLI).a);
					}
					if (axCorSag == 2) { //sagittal corners
						a = max(a, texture(overlay, vxAS).a);
						a = max(a, texture(overlay, vxPS).a);
						a = max(a, texture(overlay, vxAI).a);
						a = max(a, texture(overlay, vxPI).a);
					}
				}
				if (a >= 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}

		} else {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a >= 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 1.0;
				if (axCorSag != 2) {
					a = min(a, texture(overlay, vxR).a);
					a = min(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = min(a, texture(overlay, vxA).a);
					a = min(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = min(a, texture(overlay, vxS).a);
					a = min(a, texture(overlay, vxI).a);
				}
				if (a < 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}
		} //outline above threshold
	}

`,kO=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler2D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler2D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+f2+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos.xy);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 dcolor = drawColor(texture(drawing, texPos.xy).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
}`,n6=`	ocolor.a *= overlayAlpha;
	vec4 dcolor = drawColor(texture(drawing, texPos).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
	if ((backgroundMasksOverlays > 0) && (background.a == 0.0))
		return;
	float a = color.a + ocolor.a * (1.0 - color.a); // premultiplied alpha
	if (a == 0.0) return;
	color.rgb = mix(color.rgb, ocolor.rgb, ocolor.a / a);
	color.a = a;
}`,jO=i6+n6,zO=i6+`	if (ocolor.a > 0.0) {
		//https://gamedev.stackexchange.com/questions/102889/is-it-possible-to-convert-vec4-to-int-in-glsl-using-opengl-es
		uint alpha = uint(ocolor.a * 255.0);
		vec3 xyzFlip = vec3(float((uint(1) & alpha) > uint(0)), float((uint(2) & alpha) > uint(0)), float((uint(4) & alpha) > uint(0)));
		//convert from 0 and 1 to -1 and 1
		xyzFlip = (xyzFlip * 2.0) - 1.0;
		//https://math.stackexchange.com/questions/1905533/find-perpendicular-distance-from-point-to-line-in-3d
		//v1 principle direction of tensor for this voxel
		vec3 v1 = ocolor.rgb;
		//flips encode polarity to convert from 0..1 to -1..1 (27 bits vs 24 bit precision)
		v1 = normalize( v1 * xyzFlip);
		vec3 vxl = fract(texPos * vec3(textureSize(volume, 0))) - 0.5;
		//vxl coordinates now -0.5..+0.5 so 0,0,0 is origin
		vxl.x = -vxl.x;
		float t = dot(vxl,v1);
		vec3 P = t * v1;
		float dx = length(P-vxl);
		ocolor.a = 1.0 - smoothstep(0.2,0.25, dx);
		//if modulation was applied, use that to scale alpha not color:
		ocolor.a *= length(ocolor.rgb);
		ocolor.rgb = normalize(ocolor.rgb);
		//compute distance one half voxel closer to viewer:
		float pan = 0.5;
		if (axCorSag == 0)
			vxl.z -= pan;
		if (axCorSag == 1)
			vxl.y -= pan;
		if (axCorSag == 2)
			vxl.x += pan;
		t = dot(vxl,v1);
		P = t * v1;
		float dx2 = length(P-vxl);
		ocolor.rgb += (dx2-dx-(0.5 * pan)) * 1.0;
	}
`+n6,G0=`#version 300 es
#line 480
precision highp int;
precision highp float;
uniform vec4 lineColor;
out vec4 color;
void main() {
	color = lineColor;
}`,_O=`#version 300 es
#line 723
precision highp int;
precision highp float;

uniform vec4 lineColor;
uniform vec4 leftTopWidthHeight;
uniform float thickness; // line thickness in pixels
uniform vec2 canvasWidthHeight;

out vec4 color;

void main() {
    // fragment position in screen coordinates
    vec2 fragCoord = gl_FragCoord.xy;

    // canvas height
    float canvasHeight = canvasWidthHeight.y;

    // 'top' and 'bottom' to match gl_FragCoord.y coordinate system
    float top = canvasHeight - leftTopWidthHeight.y;
    float bottom = top - leftTopWidthHeight.w;

    // left and right edges
    float left = leftTopWidthHeight.x;
    float right = left + leftTopWidthHeight.z;

    bool withinLeft = fragCoord.x >= left && fragCoord.x <= left + thickness;
    bool withinRight = fragCoord.x <= right && fragCoord.x >= right - thickness;
    bool withinTop = fragCoord.y <= top && fragCoord.y >= top - thickness;
    bool withinBottom = fragCoord.y >= bottom && fragCoord.y <= bottom + thickness;

    bool isOutline = withinLeft || withinRight || withinTop || withinBottom;

    if (isOutline) {
        color = lineColor;
    } else {
        discard; 
    }
}`,GO=`#version 300 es
#line 490
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vColor;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vColor = pos.xy;
}`,HO=`#version 300 es
#line 506
precision highp int;
precision highp float;
uniform highp sampler2D colormap;
uniform float layer;
in vec2 vColor;
out vec4 color;
void main() {
	float nlayer = float(textureSize(colormap, 0).y);
	float fmap = (0.5 + layer) / nlayer;
	color = vec4(texture(colormap, vec2(vColor.x, fmap)).rgb, 1.0);
}`,_x=`#version 300 es
#line 520
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
}`,YO=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec4 startXYendXY;
void main(void) {
	vec2 posXY = mix(startXYendXY.xy, startXYendXY.zw, pos.x);
	vec2 dir = normalize(startXYendXY.xy - startXYendXY.zw);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0
	gl_Position = vec4((posXY * 2.0) - 1.0, 0.0, 1.0);
}`,qO=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec2 startXY;
uniform vec3 endXYZ; // transformed XYZ point
void main(void) {	
	vec2 posXY = mix(startXY.xy, endXYZ.xy, pos.x);
	vec2 startDiff = endXYZ.xy - startXY.xy;
	float startDistance = length(startDiff);
	vec2 diff = endXYZ.xy - posXY;
	float currentDistance = length(diff);
	vec2 dir = normalize(startXY.xy - endXYZ.xy);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0	
	float z = endXYZ.z * ( 1.0 - abs(currentDistance/startDistance)); 
	gl_Position = vec4((posXY * 2.0) - 1.0, z, 1.0);
}`,KO=`#version 300 es
#line 549
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(pos.x, 1.0 - pos.y);
}`,QO=`#version 300 es
#line 565
precision highp int;
precision highp float;
uniform highp sampler2D bmpTexture;
in vec2 vUV;
out vec4 color;
void main() {
	color = texture(bmpTexture, vUV);
}`,XO=`#version 300 es
#line 576
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(uvLeftTopWidthHeight.x + (pos.x * uvLeftTopWidthHeight.z), uvLeftTopWidthHeight.y  + ((1.0 - pos.y) * uvLeftTopWidthHeight.w) );
}`,WO=`#version 300 es
#line 593
precision highp int;
precision highp float;
uniform highp sampler2D fontTexture;
uniform vec4 fontColor;
uniform float screenPxRange;
in vec2 vUV;
out vec4 color;
float median(float r, float g, float b) {
	return max(min(r, g), min(max(r, g), b));
}
void main() {
	vec3 msd = texture(fontTexture, vUV).rgb;
	float sd = median(msd.r, msd.g, msd.b);
	float screenPxDistance = screenPxRange*(sd - 0.5);
	float opacity = clamp(screenPxDistance + 0.5, 0.0, 1.0);
	color = vec4(fontColor.rgb , fontColor.a * opacity);
}`,ZO=`#version 300 es
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = pos.xy;
}`,JO=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 circleColor;
uniform float fillPercent;
in vec2 vUV;
out vec4 color;
void main() {
	/* Check if the pixel is inside the circle
		 and color it with a gradient. Otherwise, color it 
		 transparent   */
	float distance = length(vUV-vec2(0.5,0.5));
	if ( distance < 0.5 && distance >= (1.0 - fillPercent) / 2.0){
			color = vec4(circleColor.r,circleColor.g,circleColor.b,circleColor.a) ;			
	}else{
			color = vec4(0.0,0.0,0.0,0.0);
	}
}
`,va=`#version 300 es
#line 613
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4( (vPos.xy-vec2(0.5,0.5)) * 2.0, 0.0, 1.0);
}`,H0=`#version 300 es
uniform highp usampler3D intensityVol;
`,Gx=`#version 300 es
uniform highp isampler3D intensityVol;
`,$O=`#version 300 es
uniform highp sampler3D intensityVol;
`,Hx=`#line 636
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform vec4 xyzaFrac;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint idx = uint(texture(intensityVol, vx.xyz).r);
	FragColor = vec4(0.0, 0.0, 0.0, 0.0);
	if (idx == uint(0))
		return;
	//idx = ((idx - uint(1)) % uint(100))+uint(1);
	float textureWidth = float(textureSize(colormap, 0).x);
	float fx = (float(idx)+0.5) / textureWidth;
	float nlayer = float(textureSize(colormap, 0).y);
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(fx, y)).rgba;
	float alpha = FragColor.a;
	FragColor.a *= opacity;
	if (xyzaFrac.a > 0.0) { //outline
		vx = vec4(TexCoord.x+xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint R = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x-xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint L = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y+xyzaFrac.y, coordZ, 1.0) * mtx;
		uint A = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y-xyzaFrac.y, coordZ, 1.0) * mtx;
		uint P = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ+xyzaFrac.z, 1.0) * mtx;
		uint S = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ-xyzaFrac.z, 1.0) * mtx;
		uint I = uint(texture(intensityVol, vx.xyz).r);
		if ((idx != R) || (idx != L) || (idx != A) || (idx != P) || (idx != S) || (idx != I))
			FragColor.a = alpha * xyzaFrac.a;
	}
}`,Y0=`#line 691
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform float cal_maxNeg;
uniform float cal_minNeg;
uniform bool isAlphaThreshold;
uniform bool isColorbarFromZero;
uniform bool isAdditiveBlend;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform int modulation;
uniform highp sampler3D modulationVol;
uniform float opacity;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	if ((vx.x < 0.0) || (vx.x > 1.0) || (vx.y < 0.0) || (vx.y > 1.0) || (vx.z < 0.0) || (vx.z > 1.0)) {
		//set transparent if out of range
		//https://webglfundamentals.org/webgl/webgl-3d-textures-repeat-clamp.html
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	float f = (scl_slope * float(texture(intensityVol, vx.xyz).r)) + scl_inter;
	float mn = cal_min;
	float mx = cal_max;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mn = 0.0;
	float r = max(0.00001, abs(mx - mn));
	mn = min(mn, mx);
	float txl = mix(0.0, 1.0, (f - mn) / r);
	if (f > mn) { //issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
	}
	//https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space
	float nlayer = float(textureSize(colormap, 0).y);
	//each volume has two color maps:
	// (layer*2) = negative and (layer * 2) + 1 = positive
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(txl, y)).rgba;
	//negative colors
	mn = cal_minNeg;
	mx = cal_maxNeg;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mx = 0.0;
	//if ((!isnan(cal_minNeg)) && ( f < mx)) {
	if ((cal_minNeg < cal_maxNeg) && ( f < mx)) {
		r = max(0.00001, abs(mx - mn));
		mn = min(mn, mx);
		txl = 1.0 - mix(0.0, 1.0, (f - mn) / r);
		//issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
		y = ((2.0 * layer) + 0.5)/nlayer;
		FragColor = texture(colormap, vec2(txl, y));
	}
	if (layer > 0.7)
		FragColor.a = step(0.00001, FragColor.a);
	//if (modulation > 10)
	//	FragColor.a *= texture(modulationVol, vx.xyz).r;
	//	FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (isAlphaThreshold) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = pow(-f / -cal_maxNeg, 2.0);
		else if ((f > 0.0) && (cal_min > 0.0))
			FragColor.a *= pow(f / cal_min, 2.0); //issue435:  A = (V/X)**2
		//FragColor.g = 0.0;
	} else if (isColorbarFromZero) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = 0.0;
		else if ((f > 0.0) && (cal_min > 0.0) && (f < cal_min))
			FragColor.a *= 0.0;

	}
	if (modulation == 1) {
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	} else if (modulation == 2) {
		FragColor.a = texture(modulationVol, vx.xyz).r;
	}
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	if (isAdditiveBlend)
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
	else
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,eL=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	uvec4 aColor = texture(intensityVol, vx.xyz);
	FragColor = vec4(float(aColor.r) / 255.0, float(aColor.g) / 255.0, float(aColor.b) / 255.0, float(aColor.a) / 255.0);
	if (modulation == 1)
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (!hasAlpha) {
		FragColor.a = (FragColor.r * 0.21 + FragColor.g * 0.72 + FragColor.b * 0.07);
		//next line: we could binarize alpha, but see rendering of visible human
		//FragColor.a = step(0.01, FragColor.a);
	}
	if (modulation == 2)
		FragColor.a = texture(modulationVol, vx.xyz).r;
	FragColor.a *= opacity;
}`,tL=`#version 300 es
#line 808
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4((vPos.x - 0.5) * 2.0, (vPos.y - 0.5) * 2.0, 0.0, 1.0);
}`,iL=`#version 300 es
#line 829
	precision highp float;
	precision highp int;
	precision highp isampler3D;
	layout(location = 0) out int label;
	layout(location = 1) out int strength;
	in vec2 TexCoord;
	uniform int finalPass;
	uniform float coordZ;
	uniform lowp sampler3D in3D;
	uniform highp isampler3D backTex; // background
	uniform highp isampler3D labelTex; // label
	uniform highp isampler3D strengthTex; // strength
void main(void) {
	vec3 interpolatedTextureCoordinate = vec3(TexCoord.xy, coordZ);
	ivec3 size = textureSize(backTex, 0);
	ivec3 texelIndex = ivec3(floor(interpolatedTextureCoordinate * vec3(size)));
	int background = texelFetch(backTex, texelIndex, 0).r;
	label = texelFetch(labelTex, texelIndex, 0).r;
	strength = texelFetch(strengthTex, texelIndex, 0).r;
	for (int k = -1; k <= 1; k++) {
		for (int j = -1; j <= 1; j++) {
			for (int i = -1; i <= 1; i++) {
				if (i != 0 && j != 0 && k != 0) {
					ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
					int neighborBackground = texelFetch(backTex, neighborIndex, 0).r;
					int neighborStrength = texelFetch(strengthTex, neighborIndex, 0).r;
					int strengthCost = abs(neighborBackground - background);
					int takeoverStrength = neighborStrength - strengthCost;
					if (takeoverStrength > strength) {
						strength = takeoverStrength;
						label = texelFetch(labelTex, neighborIndex, 0).r;
					}
				}
			}
		}
	}
	if (finalPass < 1)
		return;
	int ok = 1;
	ivec4 labelCount = ivec4(0,0,0,0);
	for (int k = -1; k <= 1; k++)
		for (int j = -1; j <= 1; j++)
			for (int i = -1; i <= 1; i++) {
				ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
				int ilabel = texelFetch(labelTex, neighborIndex, 0).r;
				if ((ilabel < 0) || (ilabel > 3))
					ok = 0;
				else
					labelCount[ilabel]++;
			}
	if (ok != 1) {
		return;
	}
	int maxIdx = 0;
	for (int i = 1; i < 4; i++) {
		if (labelCount[i] > labelCount[maxIdx])
			maxIdx = i;
	}
	label = maxIdx;
}`,nL=`#version 300 es
layout(location=0) in vec3 pos;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
}`,sL=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 surfaceColor;
out vec4 color;
void main() {
	color = surfaceColor;
}`,rL=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 clr;
out vec4 vClr;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vClr = clr;
}`,aL=`#version 300 es
precision highp int;
precision highp float;
in vec4 vClr;
out vec4 color;
uniform float opacity;
void main() {
	color = vec4(vClr.rgb, opacity);
}`,q0=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
out vec3 vN;
out vec4 vP;
out vec4 vPc;
void main(void) {
	vec3 lightPosition = vec3(0.0, 0.0, -10.0);
	vP = vec4(pos, 1.0);
	vPc = mvpMtx * vec4(pos, 1.0);
	gl_Position = vPc;
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,oL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
out vec4 color;
vec4 packFloatToVec4i(const float value) {
	const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
	const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
	vec4 res = fract(value * bitSh);
	res -= res.xxyz * bitMsk;
	return res;
}
void main() {
	color = packFloatToVec4i(gl_FragCoord.z);
}`,lL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
float stepmix(float edge0, float edge1, float E, float x){
	float T = clamp(0.5 * (x - edge0 + E) / E, 0.0, 1.0);
	return mix(edge0, edge1, T);
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0);
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.5;
	float shininess = 50.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float df = max(0.0, dot(n, l));
	float sf = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	const float A = 0.1;
	const float B = 0.3;
	const float C = 0.6;
	const float D = 1.0;
	float E = fwidth(df);
	if (df > A - E && df < A + E) df = stepmix(A, B, E, df);
	else if (df > B - E && df < B + E) df = stepmix(B, C, E, df);
	else if (df > C - E && df < C + E) df = stepmix(C, D, E, df);
	else if (df < A) df = 0.0;
	else if (df < B) df = B;
	else if (df < C) df = C;
	else df = D;
	E = fwidth(sf);
	if (sf > 0.5 - E && sf < 0.5 + E)
		sf = smoothstep(0.5 - E, 0.5 + E, sf);
	else
		sf = step(0.5, sf);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(df, 0.0) * vClr.rgb * diffuse;
	color.rgb = a + d + (specular * sf);
	color.a = opacity;
}`,cL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.25;
	float shininess = 10.0;
	float PenWidth = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	float view = abs(dot(n,r)); //with respect to viewer
	if (PenWidth < view) discard;
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color.rgb = a + d + s;
	color.a = opacity;
}`,uL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	const float thresh = 0.4;
	const vec3 viewDir = vec3(0.0, 0.0, -1.0);
	vec3 n = normalize(vN);
	// use abs() for two-sided lighting, max() for one sided
	float cosTheta = abs(dot(n, viewDir));
	// float cosTheta = max(dot(n, viewDir), 0.0);
	// optional fresnel equation - adjust exponent
	// cosTheta = 1.0 - pow(1.0 - cosTheta, 2.0);
	// use step for binary edges, smoothstep for feathered edges
	// vec3 d = step(thresh, cosTheta) * vClr.rgb;
	vec3 d = smoothstep(thresh - 0.05, thresh + 0.05, cosTheta) * vClr.rgb;
	color = vec4(d, opacity);
}`,hL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
  const float edge0 = 0.1;
  const float edge1 = 0.25;
  const vec3 viewDir = vec3(0.0, 0.0, -1.0);
  vec3 n = normalize(vN);
  float cosTheta = abs(dot(n, viewDir));
  float alpha = 1.0 - smoothstep(edge0, edge1, cosTheta);
  if (alpha <= 0.0) {
    discard;
  }
  color = vec4(0.0, 0.0, 0.0, opacity * alpha);
}`,fL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float diffuse = 1.0;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 0.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d = lightNormDot * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(d + s, opacity);
}`,dL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float diffuse = 1.4;
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(normalize(vN), l), 0.0);
	color = vec4(lightNormDot * vClr.rgb * diffuse, opacity);
}`,mL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float specularRGB = 0.7;
	float specularWhite = 0.3;
	float shininess = 10.0;
	float diffuse = 1.0;
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	vec3 n = normalize(vN);
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d3 = lightNormDot * vClr.rgb * diffuse;
	float s = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 s3 = specularRGB * s * vClr.rgb;
	s *= specularWhite;
	color = vec4(d3 + s3 + s, opacity);
}`,gL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
in vec4 vPc;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	// Compute curvature
	vec3 dx = dFdx(n);
	vec3 dy = dFdy(n);
	vec3 xneg = n - dx;
	vec3 xpos = n + dx;
	vec3 yneg = n - dy;
	vec3 ypos = n + dy;
	float depth = length(vPc.xyz);
	float curv = (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;
	//at this stage 0.5 for flat, with valleys dark and ridges bright
	curv = 1.0 - (curv + 0.5);
	//clamp
	curv =  min(max(curv, 0.0), 1.0);
	// easing function
	curv = pow(curv, 0.5);
	//modulate ambient and diffuse with curvature
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.6;
	float diffuse = 0.6;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 lightPosition = vec3(0.0, 10.0, -2.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient * curv;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,pL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,vL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
uniform sampler2D matCap;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	vec2 uv = n.xy * 0.5 + 0.5;
	uv.y = 1.0 - uv.y;
	vec3 clr = texture(matCap,uv.xy).rgb * vClr.rgb;
	color = vec4(clr, opacity);
}`,AL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float ambient = 0.35;
	float diffuse = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	color = vec4(a + d, opacity);
}`,xL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 up = vec3(0.0, 1.0, 0.0);
	float ax = dot(n, up) * 0.5 + 0.5;  //Shreiner et al. (2013) OpenGL Programming Guide, 8th Ed., p 388. ISBN-10: 0321773039
	vec3 upClr = vec3(1.0, 1.0, 0.95);
	vec3 downClr = vec3(0.4, 0.4, 0.6);
	vec3 a = vClr.rgb * ambient;
	a *= mix(downClr, upClr, ax);
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,yL=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
//Spherical harmonics constants
const float C1 = 0.429043;
const float C2 = 0.511664;
const float C3 = 0.743125;
const float C4 = 0.886227;
const float C5 = 0.247708;
//Spherical harmonics coefficients
// Ramamoorthi, R., and P. Hanrahan. 2001b. "An Efficient Representation for Irradiance Environment Maps." In Proceedings of SIGGRAPH 2001, pp. 497–500.
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// Constants for Eucalyptus Grove lighting
const vec3 L00  = vec3( 0.3783264,  0.4260425,  0.4504587);
const vec3 L1m1 = vec3( 0.2887813,  0.3586803,  0.4147053);
const vec3 L10  = vec3( 0.0379030,  0.0295216,  0.0098567);
const vec3 L11  = vec3(-0.1033028, -0.1031690, -0.0884924);
const vec3 L2m2 = vec3(-0.0621750, -0.0554432, -0.0396779);
const vec3 L2m1 = vec3( 0.0077820, -0.0148312, -0.0471301);
const vec3 L20  = vec3(-0.0935561, -0.1254260, -0.1525629);
const vec3 L21  = vec3(-0.0572703, -0.0502192, -0.0363410);
const vec3 L22  = vec3( 0.0203348, -0.0044201, -0.0452180);
vec3 SH(vec3 vNormal) {
	vNormal = vec3(vNormal.x,vNormal.z,vNormal.y);
	vec3 diffuseColor = C1 * L22 * (vNormal.x * vNormal.x - vNormal.y * vNormal.y) +
	C3 * L20 * vNormal.z * vNormal.z +
	C4 * L00 -
	C5 * L20 +
	2.0 * C1 * L2m2 * vNormal.x * vNormal.y +
	2.0 * C1 * L21  * vNormal.x * vNormal.z +
	2.0 * C1 * L2m1 * vNormal.y * vNormal.z +
	2.0 * C2 * L11  * vNormal.x +
	2.0 * C2 * L1m1 * vNormal.y +
	2.0 * C2 * L10  * vNormal.z;
	return diffuseColor;
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.1;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 a = vClr.rgb * ambient;
	vec3 d = vClr.rgb * diffuse * SH(-reflect(n, vec3(l.x, l.y, -l.z)) );
	color = vec4(a + d + s, opacity);
}`,bL=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
flat out vec3 vN;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,Yx=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
flat in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,wL=`#version 300 es
#line 1260
//precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 volScale;
uniform vec3 texVox;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform mat4 matRAS;
uniform mat4 mvpMtx;
uniform float drawOpacity, renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform int backgroundMasksOverlays;
in vec3 vColor;
out vec4 fColor;
`+nu+`
void main() {
	int id = 254;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	fColor = vec4(0.0, 0.0, 0.0, 0.0); //assume no hit: ID = 0
	float fid = float(id & 255)/ 255.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) return;//discard; //length limit for parallel rays
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	dir = normalize(dir);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	if (isClip) fColor = vec4(samplePos.xyz, 253.0 / 255.0); //assume no hit: ID = 0
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			break;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//end: fast pass
	if ((overlays < 1.0) || (backgroundMasksOverlays > 0)) {
		return; //background hit, no overlays
	}
	//overlay pass
	len = min(lenNoClip, samplePos.a); //only find overlay closer than background
	samplePos = vec4(start.xyz, 0.0); //ray position
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			return;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//if (fColor.a == 0.0) discard; //no hit in either background or overlays
	//you only get here if there is a hit with the background that is closer than any overlay
}`,SL=`#version 300 es
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
layout(location=0)  in vec3 a_position;
layout(location=1)  in vec3 a_color;
// A matrix to transform the positions by
uniform mat4 u_matrix;
out vec3 vColor;
// all shaders have a main function
void main() {
	// Multiply the position by the matrix.
	vec4 pos = vec4(a_position, 1.0);
	gl_Position = u_matrix * vec4(pos);
	vColor = a_color;
}
`,CL=`#version 300 es
precision highp float;
uniform vec4 u_color;
in vec3 vColor;
out vec4 outColor;
void main() {
	outColor = vec4(vColor, 1.0);
}`,EL=`#version 300 es
#line 1359
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	vec2 viewCoord = (vPos.xy - 0.5) * 2.0;
	gl_Position = vec4((vPos.xy - 0.5) * 2.0, 0.0, 1.0);
}`,TL=`#version 300 es
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform lowp sampler3D in3D;
void main(void) {
 FragColor = texture(in3D, vec3(TexCoord.xy, coordZ));
}`,ju=`#version 300 es
#line 286
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
    TexCoord = vPos.xy;
    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);
}`,ML=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
 FragColor = samp*0.125;
}`,DL=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 XYZ = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 vec4 OYZ = texture(intensityVol,vx+vec3(0.0,+dY,+dZ));
 vec4 xYZ = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 vec4 XOZ = texture(intensityVol,vx+vec3(+dX,0.0,+dZ));
 vec4 OOZ = texture(intensityVol,vx+vec3(0.0,0.0,+dZ));
 vec4 xOZ = texture(intensityVol,vx+vec3(-dX,0.0,+dZ));
 vec4 XyZ = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 vec4 OyZ = texture(intensityVol,vx+vec3(0.0,-dY,+dZ));
 vec4 xyZ = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));

 vec4 XYO = texture(intensityVol,vx+vec3(+dX,+dY,0.0));
 vec4 OYO = texture(intensityVol,vx+vec3(0.0,+dY,0.0));
 vec4 xYO = texture(intensityVol,vx+vec3(-dX,+dY,0.0));
 vec4 XOO = texture(intensityVol,vx+vec3(+dX,0.0,0.0));
 vec4 OOO = texture(intensityVol,vx+vec3(0.0,0.0,0.0));
 vec4 xOO = texture(intensityVol,vx+vec3(-dX,0.0,0.0));
 vec4 XyO = texture(intensityVol,vx+vec3(+dX,-dY,0.0));
 vec4 OyO = texture(intensityVol,vx+vec3(0.0,-dY,0.0));
 vec4 xyO = texture(intensityVol,vx+vec3(-dX,-dY,0.0));

 vec4 XYz = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 vec4 OYz = texture(intensityVol,vx+vec3(0.0,+dY,-dZ));
 vec4 xYz = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 vec4 XOz = texture(intensityVol,vx+vec3(+dX,0.0,-dZ));
 vec4 OOz = texture(intensityVol,vx+vec3(0.0,0.0,-dZ));
 vec4 xOz = texture(intensityVol,vx+vec3(-dX,0.0,-dZ));
 vec4 Xyz = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 vec4 Oyz = texture(intensityVol,vx+vec3(0.0,-dY,-dZ));
 vec4 xyz = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));

 vec4 blurred = vec4 (0.0, 0.0, 0.0, 0.0);
 blurred.r = 2.0*(xOz.r +xOZ.r +xyO.r +xYO.r +xOO.r +XOz.r +XOZ.r +XyO.r +XYO.r +XOO.r) +xyz.r +xyZ.r +xYz.r +xYZ.r +Xyz.r +XyZ.r +XYz.r +XYZ.r;
 blurred.g = 2.0*(Oyz.r +OyZ.r +xyO.r +XyO.r +OyO.r +OYz.r +OYZ.r +xYO.r +XYO.r +OYO.r) +xyz.r +Xyz.r +xyZ.r +XyZ.r +xYz.r +XYz.r +xYZ.r +XYZ.r;
 blurred.b = 2.0*(Oyz.r +OYz.r +xOz.r +XOz.r +OOz.r +OyZ.r +OYZ.r +xOZ.r +XOZ.r +OOZ.r) +xyz.r +Xyz.r +xYz.r +XYz.r +xyZ.r +XyZ.r +XyZ.r +XYZ.r;
 blurred.a = 0.32*(abs(blurred.r)+abs(blurred.g)+abs(blurred.b));
 // 0.0357 = 1/28 to account for weights, rescale to 2**16,
 FragColor = 0.0357*blurred;
}`,s6=`
  gradientSample.a = log2(gradientSample.r*gradientSample.r + gradientSample.g*gradientSample.g + gradientSample.b*gradientSample.b + 1.922337562475971e-06) + 18.988706873717717;
`,RL=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;
  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;
  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;
  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;
  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;
  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;
  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;
  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;
  gradientSample.g = TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;
  gradientSample.b = TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;
${s6}
	// 0.04242020977371934 = 1/(log2(3*8) - log2(1/(255**2*8))) // 3*8 -> max for 1st order gradient
	gradientSample.a *= 0.04242020977371934;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb = (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,NL=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform float dX2;
uniform float dY2;
uniform float dZ2;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  vec4 TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
  vec4 TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
  vec4 TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
  vec4 TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
  vec4 BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
  vec4 BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
  vec4 BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
  vec4 BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
  vec4 T = texture(intensityVol,vx+vec3(+dX2,0.0,0.0));
  vec4 A = texture(intensityVol,vx+vec3(0.0,+dY2,0.0));
  vec4 R = texture(intensityVol,vx+vec3(0.0,0.0,+dZ2));
  vec4 B = texture(intensityVol,vx+vec3(-dX2,0.0,0.0));
  vec4 P = texture(intensityVol,vx+vec3(0.0,-dY2,0.0));
  vec4 L = texture(intensityVol,vx+vec3(0.0,0.0,-dZ2));
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = -4.0*B.r +8.0*(BAR.r+BAL.r+BPR.r+BPL.r) -8.0*(TAR.r+TAL.r+TPR.r+TPL.r) +4.0*T.r;
  gradientSample.g = -4.0*P.g +8.0*(TPR.g+TPL.g+BPR.g+BPL.g) -8.0*(TAR.g+TAL.g+BAR.g+BAL.g) +4.0*A.g;
  gradientSample.b = -4.0*L.b +8.0*(TAL.b+TPL.b+BAL.b+BPL.b) -8.0*(TAR.b+TPR.b+BAR.b+BPR.b) +4.0*R.b;
${s6}
	gradientSample.a *= 0.0325;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,IL=new Float32Array([-1,-1,-1,.28,.28,.28,-1,-1,-1,.28,.28,.28,-1,1,-1,.28,.28,.28,1,-1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,-1,-1,1,.8,.8,.8,-1,-1,1,.8,.8,.8,1,-1,1,.8,.8,.8,-1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,-1,1,-1,0,0,.74,-1,1,-1,0,0,.74,-1,1,1,0,0,.74,1,1,-1,0,0,.74,1,1,1,0,0,.74,1,1,1,0,0,.74,-1,-1,-1,.42,0,.42,-1,-1,-1,.42,0,.42,1,-1,-1,.42,0,.42,-1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,-1,-1,-1,.64,0,0,-1,-1,-1,.64,0,0,-1,-1,1,.64,0,0,-1,1,-1,.64,0,0,-1,1,1,.64,0,0,-1,1,1,.64,0,0,1,-1,-1,0,.5,0,1,-1,-1,0,.5,0,1,1,-1,0,.5,0,1,-1,1,0,.5,0,1,1,1,0,.5,0,1,1,1,0,.5,0,-.45,1,-.8,0,0,0,-.45,1,-.8,0,0,0,-.45,1,.8,0,0,0,-.25,1,-.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.6,0,0,0,-.25,1,.6,0,0,0,-.25,1,.8,0,0,0,.45,1,.6,0,0,0,.25,1,.8,0,0,0,.25,1,.8,0,0,0,.25,1,.1,0,0,0,.25,1,.1,0,0,0,.25,1,.6,0,0,0,.45,1,.1,0,0,0,.45,1,.6,0,0,0,.45,1,.6,0,0,0,-.25,1,-.1,0,0,0,-.25,1,-.1,0,0,0,-.25,1,.1,0,0,0,.25,1,-.1,0,0,0,.45,1,.1,0,0,0,.45,1,.1,0,0,0,.45,-1,-.8,0,0,0,.45,-1,-.8,0,0,0,.05,-1,.8,0,0,0,.25,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,-.25,-1,-.8,0,0,0,-.25,-1,-.8,0,0,0,.05,-1,.8,0,0,0,-.45,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,.13,-1,-.3,0,0,0,.13,-1,-.3,0,0,0,.07,-1,-.1,0,0,0,-.33,-1,-.3,0,0,0,-.27,-1,-.1,0,0,0,-.27,-1,-.1,0,0,0,-.45,.6,1,0,0,0,-.45,.6,1,0,0,0,-.45,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.4,1,0,0,0,-.25,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.8,1,0,0,0,-.25,.6,1,0,0,0,.25,.8,1,0,0,0,.45,.6,1,0,0,0,.45,.6,1,0,0,0,.25,.8,1,0,0,0,.25,.8,1,0,0,0,.25,-.1,1,0,0,0,.45,.6,1,0,0,0,.45,.1,1,0,0,0,.45,.1,1,0,0,0,-.25,.1,1,0,0,0,-.25,.1,1,0,0,0,-.45,-.1,1,0,0,0,.25,.1,1,0,0,0,.25,-.1,1,0,0,0,.25,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.6,1,0,0,0,-.25,-.1,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.8,1,0,0,0,.45,-.6,1,0,0,0,.25,-.8,1,0,0,0,.25,-.8,1,0,0,0,.25,-.4,1,0,0,0,.25,-.4,1,0,0,0,.25,-.6,1,0,0,0,.45,-.4,1,0,0,0,.45,-.6,1,0,0,0,.45,-.6,1,0,0,0,-.1,-.8,-1,0,0,0,-.1,-.8,-1,0,0,0,-.1,.8,-1,0,0,0,.1,-.8,-1,0,0,0,.1,.8,-1,0,0,0,.1,.8,-1,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.6,0,0,0,-1,.45,-.8,0,0,0,-1,.45,-.6,0,0,0,-1,.45,-.6,0,0,0,1,.45,-.8,0,0,0,1,.45,-.8,0,0,0,1,.45,.8,0,0,0,1,.25,-.8,0,0,0,1,.25,.8,0,0,0,1,.25,.8,0,0,0,1,.25,.6,0,0,0,1,.25,.6,0,0,0,1,.25,.8,0,0,0,1,-.45,.6,0,0,0,1,-.25,.8,0,0,0,1,-.25,.8,0,0,0,1,-.25,.1,0,0,0,1,-.25,.1,0,0,0,1,-.25,.6,0,0,0,1,-.45,.1,0,0,0,1,-.45,.6,0,0,0,1,-.45,.6,0,0,0,1,.25,-.1,0,0,0,1,.25,-.1,0,0,0,1,.25,.1,0,0,0,1,-.25,-.1,0,0,0,1,-.45,.1,0,0,0,1,-.45,.1,0,0,0,1,-.25,-.8,0,0,0,1,-.25,-.8,0,0,0,1,-.05,-.1,0,0,0,1,-.45,-.8,0,0,0,1,-.25,-.1,0,0,0,1,-.25,-.1,0,0,0]),Ie=class{constructor(t,i,n,s,r=null,a=null){B(this,"sphereIdx",[]),B(this,"sphereVtx",[]),B(this,"renderShaders",[]),B(this,"isVisible",!0),B(this,"isPickable",!0),B(this,"vertexBuffer"),B(this,"indexCount"),B(this,"indexBuffer"),B(this,"vao"),B(this,"mode"),B(this,"glFlags",0),B(this,"id"),B(this,"colorId"),B(this,"modelMatrix",Se()),B(this,"scale",[1,1,1]),B(this,"position",[0,0,0]),B(this,"rotation",[0,0,0]),B(this,"rotationRadians",0),B(this,"extentsMin",[]),B(this,"extentsMax",[]),B(this,"furthestVertexFromOrigin"),B(this,"originNegate"),B(this,"fieldOfViewDeObliqueMM"),B(this,"mm"),this.vertexBuffer=i,this.indexCount=s,this.indexBuffer=r,this.vao=a,this.mode=n,this.id=t,this.colorId=[(t>>0&255)/255,(t>>8&255)/255,(t>>16&255)/255,(t>>24&255)/255]}};B(Ie,"BLEND",1);B(Ie,"CULL_FACE",2);B(Ie,"CULL_FRONT",4);B(Ie,"CULL_BACK",8);B(Ie,"ENABLE_DEPTH_TEST",16);B(Ie,"generateCrosshairs",function(e,t,i,n,s,r,a=20,o=0){const l=Ie.generateCrosshairsGeometry(e,i,n,s,r,a,o);return new Ie(t,l.vertexBuffer,e.TRIANGLES,l.indexCount,l.indexBuffer,l.vao)});B(Ie,"generateCrosshairsGeometry",function(e,t,i,n,s,r=20,a=0){const o=[],l=[],c=s*a;if(c<=0){let d=Q(i[0],t[1],t[2]),g=Q(n[0],t[1],t[2]);Ie.makeCylinder(o,l,d,g,s,r),d=Q(t[0],i[1],t[2]),g=Q(t[0],n[1],t[2]),Ie.makeCylinder(o,l,d,g,s,r),d=Q(t[0],t[1],i[2]),g=Q(t[0],t[1],n[2]),Ie.makeCylinder(o,l,d,g,s,r)}else{let d=Q(i[0],t[1],t[2]),g=Q(t[0]-c,t[1],t[2]);Ie.makeCylinder(o,l,d,g,s,r,!1),d=Q(t[0]+c,t[1],t[2]),g=Q(n[0],t[1],t[2]),Ie.makeCylinder(o,l,d,g,s,r,!1),d=Q(t[0],i[1],t[2]),g=Q(t[0],t[1]-c,t[2]),Ie.makeCylinder(o,l,d,g,s,r,!1),d=Q(t[0],t[1]+c,t[2]),g=Q(t[0],n[1],t[2]),Ie.makeCylinder(o,l,d,g,s,r,!1),d=Q(t[0],t[1],i[2]),g=Q(t[0],t[1],t[2]-c),Ie.makeCylinder(o,l,d,g,s,r,!1),d=Q(t[0],t[1],t[2]+c),g=Q(t[0],t[1],n[2]),Ie.makeCylinder(o,l,d,g,s,r,!1)}const u=e.createBuffer();if(u===null)throw new Error("could not instantiate vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW);const h=e.createBuffer();if(h===null)throw new Error("could not instantiate index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(l),e.STATIC_DRAW);const f=e.createVertexArray();return e.bindVertexArray(f),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bindBuffer(e.ARRAY_BUFFER,u),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),{vertexBuffer:u,indexBuffer:h,indexCount:l.length,vao:f}});B(Ie,"getFirstPerpVector",function(e){const t=Q(0,0,0);return e[0]===0?t[0]=1:e[1]===0?t[1]=1:e[2]===0?t[2]=1:(t[0]=e[2],t[1]=e[2],t[2]=-(e[0]+e[1]),Vi(t,t)),t});B(Ie,"subdivide",function(e,t){let i=e.length/3,n=t.length/3;const s=n,r=_e(),a=_e();for(let o=0;o<s;o++){const l=t[o*3+0],c=t[o*3+1],u=t[o*3+2],h=Q(e[l*3+0],e[l*3+1],e[l*3+2]),f=Q(e[c*3+0],e[c*3+1],e[c*3+2]),d=Q(e[u*3+0],e[u*3+1],e[u*3+2]);zr(r,h,f),Vi(a,r),e.push(...a),zr(r,f,d),Vi(a,r),e.push(...a),zr(r,h,d),Vi(a,r),e.push(...a);let g=[i,i+1,i+2];t.push(...g),g=[l,i,i+2],t.push(...g),g=[i,c,i+1],t.push(...g),t[o*3+0]=i+2,t[o*3+1]=i+1,t[o*3+2]=u,n=n+3,i=i+3}});B(Ie,"weldVertices",function(e,t){const i=e.length/3;let n=0;const s=new Int32Array(i);for(let o=0;o<i-1;o++){if(s[o]!==0)continue;s[o]=n;let l=o*3;const c=e[l],u=e[l+1],h=e[l+2];for(let f=o+1;f<i;f++)l+=3,c===e[l]&&u===e[l+1]&&h===e[l+2]&&(s[f]=n);n++}if(n===i)return e;const r=t.length;for(let o=0;o<r;o++)t[o]=s[t[o]];const a=e.slice(0,n*3-1);for(let o=0;o<i-1;o++){const l=o*3,c=s[o]*3;a[c]=e[l],a[c+1]=e[l+1],a[c+2]=e[l+2]}return a});B(Ie,"makeSphere",function(e,t,i,n=[0,0,0]){let s=[0,0,1,.894,0,.447,.276,.851,.447,-.724,.526,.447,-.724,-.526,.447,.276,-.851,.447,.724,.526,-.447,-.276,.851,-.447,-.894,0,-.447,-.276,-.851,-.447,.724,-.526,-.447,0,0,-1];const r=[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,7,6,11,8,7,11,9,8,11,10,9,11,6,10,11,6,2,1,7,3,2,8,4,3,9,5,4,10,1,5,6,7,2,7,8,3,8,9,4,9,10,5,10,6,1];Ie.subdivide(s,r),Ie.subdivide(s,r),s=Ie.weldVertices(s,r);for(let c=0;c<s.length;c++)s[c]=s[c]*i;const a=s.length/3;let o=0;for(let c=0;c<a;c++)s[o]=s[o]+n[0],o++,s[o]=s[o]+n[1],o++,s[o]=s[o]+n[2],o++;const l=Math.floor(e.length/3);for(let c=0;c<r.length;c++)r[c]=r[c]+l;t.push(...r),e.push(...s)});B(Ie,"makeCylinder",function(e,t,i,n,s,r=20,a=!0){r<3&&(r=3);const o=_e();He(o,n,i),Vi(o,o);const l=Ie.getFirstPerpVector(o),c=_e();hh(c,o,l),Vi(c,c);let u=2*r,h=2*r;a&&(h+=2*r,u+=2);const f=Math.floor(e.length/3),d=new Uint32Array(h*3),g=new Float32Array(u*3);function m(b,E){g[b*3+0]=E[0],g[b*3+1]=E[1],g[b*3+2]=E[2]}function A(b,E,w,S){d[b*3+0]=E+f,d[b*3+1]=w+f,d[b*3+2]=S+f}const p=2*r,v=p+1;a&&(m(p,i),m(v,n));const x=_e(),y=_e();for(let b=0;b<r;b++){const E=Math.cos(b/r*2*Math.PI),w=Math.sin(b/r*2*Math.PI);x[0]=s*(E*l[0]+w*c[0]),x[1]=s*(E*l[1]+w*c[1]),x[2]=s*(E*l[2]+w*c[2]),zr(y,i,x),m(b,y),zr(y,n,x),m(b+r,y);let S=0;b<r-1&&(S=b+1),A(b*2,b,S,b+r),A(b*2+1,S,S+r,b+r),a&&(A(r*2+b,b,p,S),A(r*2+b+r,v,b+r,S+r))}t.push(...d),e.push(...g)});B(Ie,"makeColoredCylinder",function(e,t,i,n,s,r,a=[192,0,0,255],o=20,l=!1){let c=e.length/3;Ie.makeCylinder(e,t,n,s,r,o,l),c=e.length/3-c;const u=[];for(let h=0;h<c*4-1;h+=4)u[h]=a[0],u[h+1]=a[1],u[h+2]=a[2],u[h+3]=a[3];i.push(...u)});B(Ie,"makeColoredSphere",function(e,t,i,n,s=[0,0,0],r=[0,0,192,255]){let a=e.length/3;Ie.makeSphere(e,t,n,s),a=e.length/3-a;const o=[];for(let l=0;l<a*4-1;l+=4)o[l]=r[0],o[l+1]=r[1],o[l+2]=r[2],o[l+3]=r[3];i.push(...o)});var ia=Ie,ph={};bd(ph,{$itksnap:()=>FL,$slicer3d:()=>UL,actc:()=>BL,afni_blues_inv:()=>Kk,afni_reds_inv:()=>Qk,batlow:()=>VL,bcgwhw:()=>OL,bcgwhw_dark:()=>PL,blue:()=>_L,blue2cyan:()=>jL,blue2magenta:()=>kL,blue2red:()=>LL,bluegrn:()=>zL,bone:()=>GL,bronze:()=>HL,cet_l17:()=>YL,cividis:()=>qL,cool:()=>KL,copper:()=>XL,copper2:()=>QL,ct_airways:()=>WL,ct_artery:()=>ZL,ct_bones:()=>JL,ct_brain:()=>ek,ct_brain_gray:()=>$L,ct_cardiac:()=>tk,ct_head:()=>ik,ct_kidneys:()=>nk,ct_liver:()=>sk,ct_muscles:()=>rk,ct_scalp:()=>ak,ct_skull:()=>ok,ct_soft:()=>lk,ct_soft_tissue:()=>ck,ct_surface:()=>uk,ct_vessels:()=>hk,ct_w_contrast:()=>fk,cubehelix:()=>dk,electric_blue:()=>mk,freesurfer:()=>gk,ge_color:()=>pk,gold:()=>vk,gray:()=>Ak,green:()=>xk,green2cyan:()=>yk,green2orange:()=>bk,hot:()=>Sk,hotiron:()=>wk,hsv:()=>Ck,inferno:()=>Ek,jet:()=>Tk,kry:()=>Mk,linspecer:()=>Dk,lipari:()=>Rk,magma:()=>Nk,mako:()=>Ik,navia:()=>Fk,nih:()=>Uk,plasma:()=>Bk,random:()=>Vk,red:()=>Pk,redyell:()=>Ok,rocket:()=>Lk,roi_i256:()=>Xk,surface:()=>kk,thermal:()=>jk,turbo:()=>zk,violet:()=>_k,viridis:()=>Gk,warm:()=>Hk,winter:()=>Yk,x_rain:()=>qk});var FL={R:[0,255,0,0,255,0,255,255,0,205,210,102,0,0,46,255,106,221,233,165,255,147,218,75,255,60,255,255,218,0,188,255,255,222,127,139,124,255,70,0,238,238,240,245,184,32,255,25,112,34,248,245,255,144,173,65,255,250,128,50,244,255,123,255,173,255,127,255,143,220,253,255,0,0,128,255,250,148,178,255,135,100,240,250,255,107,135,0,139,245,186,255,255,0,210,255,47,72,175,128,176,255,139,240,255,216,119,219,72,255,199,154,189,240,230,0,85,64,153,205,250,95,0,255,224,176,138,30,240,152,160],G:[0,0,255,0,255,255,0,239,0,133,180,205,0,139,139,228,90,160,150,42,250,112,112,0,182,179,235,228,165,128,143,105,218,184,255,69,252,255,130,100,130,232,255,222,134,178,20,25,128,139,248,255,160,238,255,105,99,240,0,205,164,255,104,165,216,192,255,140,188,20,245,250,206,255,0,250,128,0,34,127,206,149,230,235,245,142,206,0,0,245,85,228,222,191,105,248,79,61,238,128,224,240,0,255,215,191,136,112,209,0,21,205,183,248,230,250,107,224,50,92,250,158,128,69,255,196,43,144,128,251,82],B:[0,0,0,255,0,255,255,213,205,63,140,170,128,139,87,225,205,221,122,42,250,219,214,130,193,113,205,196,32,128,143,180,185,135,0,19,0,224,180,0,238,170,240,179,11,170,147,112,144,34,255,250,122,144,47,225,71,230,0,50,96,240,238,0,230,203,212,0,143,60,230,240,209,127,128,205,114,211,34,80,235,237,140,215,238,35,250,139,139,220,211,181,173,255,30,220,79,139,238,0,230,245,0,255,0,216,153,147,204,255,133,50,107,255,250,154,47,208,204,92,210,160,0,0,255,222,226,255,128,152,45],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130]},UL={labels:["background","tissue","bone","skin","connective tissue","blood","organ","mass","muscle","foreign object","waste","teeth","fat","gray matter","white matter","nerve","vein","artery","capillary","ligament","tendon","cartilage","meniscus","lymph node","lymphatic vessel","cerebro-spinal fluid","bile","urine","feces","gas","fluid","edema","bleeding","necrosis","clot","embolism","head","central nervous system","brain","gray matter of brain","telencephalon","cerebral cortex","right frontal lobe","left frontal lobe","right temporal lobe","left temporal lobe","right parietal lobe","left parietal lobe","right occipital lobe","left occipital lobe","right insular lobe","left insular lobe","right limbic lobe","left limbic lobe","right striatum","left striatum","right caudate nucleus","left caudate nucleus","right putamen","left putamen","right pallidum","left pallidum","right amygdaloid complex","left amygdaloid complex","diencephalon","thalamus","right thalamus","left thalamus","pineal gland","midbrain","substantia nigra","right substantia nigra","left substantia nigra","cerebral white matter","right superior longitudinal fasciculus","left superior longitudinal fasciculus","right inferior longitudinal fasciculus","left inferior longitudinal fasciculus","right arcuate fasciculus","left arcuate fasciculus","right uncinate fasciculus","left uncinate fasciculus","right cingulum bundle","left cingulum bundle","projection fibers","right corticospinal tract","left corticospinal tract","right optic radiation","left optic radiation","right medial lemniscus","left medial lemniscus","right superior cerebellar peduncle","left superior cerebellar peduncle","right middle cerebellar peduncle","left middle cerebellar peduncle","right inferior cerebellar peduncle","left inferior cerebellar peduncle","optic chiasm","right optic tract","left optic tract","right fornix","left fornix","commissural fibers","corpus callosum","posterior commissure","cerebellar white matter","CSF space","ventricles of brain","right lateral ventricle","left lateral ventricle","right third ventricle","left third ventricle","cerebral aqueduct","fourth ventricle","subarachnoid space","spinal cord","gray matter of spinal cord","white matter of spinal cord","endocrine system of brain","pituitary gland","adenohypophysis","neurohypophysis","meninges","dura mater","arachnoid","pia mater","muscles of head","salivary glands","lips","nose","tongue","soft palate","right inner ear","left inner ear","right external ear","left external ear","right middle ear","left middle ear","right eyeball","left eyeball","skull","right frontal bone","left frontal bone","right parietal bone","left parietal bone","right temporal bone","left temporal bone","right sphenoid bone","left sphenoid bone","right ethmoid bone","left ethmoid bone","occipital bone","maxilla","right zygomatic bone","right lacrimal bone","vomer bone","right palatine bone","left palatine bone","mandible","neck","muscles of neck","pharynx","larynx","thyroid gland","right parathyroid glands","left parathyroid glands","skeleton of neck","hyoid bone","cervical vertebral column","thorax","trachea","bronchi","right lung","left lung","superior lobe of right lung","superior lobe of left lung","middle lobe of right lung","inferior lobe of right lung","inferior lobe of left lung","pleura","heart","right atrium","left atrium","atrial septum","ventricular septum","right ventricle of heart","left ventricle of heart","mitral valve","tricuspid valve","aortic valve","pulmonary valve","aorta","pericardium","pericardial cavity","esophagus","thymus","mediastinum","skin of thoracic wall","muscles of thoracic wall","skeleton of thorax","thoracic vertebral column","ribs","sternum","right clavicle","left clavicle","abdominal cavity","abdomen","peritoneum","omentum","peritoneal cavity","retroperitoneal space","stomach","duodenum","small bowel","colon","anus","liver","biliary tree","gallbladder","pancreas","spleen","urinary system","right kidney","left kidney","right ureter","left ureter","urinary bladder","urethra","right adrenal gland","left adrenal gland","female internal genitalia","uterus","right fallopian tube","left fallopian tube","right ovary","left ovary","vagina","male internal genitalia","prostate","right seminal vesicle","left seminal vesicle","right deferent duct","left deferent duct","skin of abdominal wall","muscles of abdominal wall","skeleton of abdomen","lumbar vertebral column","female external genitalia","male external genitalia","skeleton of upper limb","muscles of upper limb","right upper limb","left upper limb","right shoulder","left shoulder","right arm"],R:[0,128,241,177,111,216,221,144,192,220,78,255,230,200,250,244,0,216,183,183,152,111,178,68,111,85,0,214,78,218,170,140,188,216,145,150,177,244,250,200,68,128,83,83,162,162,141,141,182,182,188,188,154,154,177,177,30,30,210,210,48,48,98,98,69,166,122,122,253,145,46,0,0,250,127,127,159,159,125,125,106,106,154,154,126,201,201,78,78,174,174,139,139,148,148,186,186,99,156,156,64,64,138,97,126,194,85,88,88,88,88,88,88,88,88,244,200,250,82,57,60,92,255,255,255,255,201,70,188,177,166,182,229,229,174,174,201,201,194,194,241,203,203,229,229,255,255,209,209,248,248,255,196,255,255,255,242,242,222,177,213,184,150,62,62,62,242,250,255,177,182,175,197,197,172,172,202,224,224,255,206,210,203,233,195,181,152,159,166,218,225,224,255,184,211,47,255,173,188,255,226,253,244,205,205,186,177,255,234,204,180,216,255,205,204,255,221,0,139,249,157,203,185,185,247,247,222,124,249,249,244,255,255,227,213,213,193,216,230,245,245,241,241,177,171,217,212,185,185,198,194,177,177,177,177,177],G:[0,174,214,122,184,101,130,238,104,245,63,250,220,200,250,214,151,101,156,214,189,184,212,172,197,188,145,230,63,255,250,224,65,191,60,98,122,214,250,200,131,174,146,146,115,115,93,93,166,166,135,135,150,150,140,140,111,111,157,157,129,129,153,153,110,113,101,101,135,92,101,108,108,250,150,150,116,116,102,102,174,174,146,146,126,160,160,152,152,140,140,126,126,120,120,135,135,106,171,171,123,123,95,113,161,195,188,106,106,106,106,106,106,106,106,214,200,250,174,157,143,162,244,244,244,244,121,163,91,122,84,105,147,147,122,122,112,112,142,142,213,179,179,204,204,243,243,185,185,223,223,230,172,255,250,237,217,217,198,122,124,105,208,162,162,162,206,210,255,122,228,216,165,165,138,138,164,186,186,245,110,115,108,138,100,85,55,63,70,123,130,97,244,122,171,150,244,121,95,239,202,232,217,179,179,124,122,255,234,142,119,132,253,167,168,224,130,145,150,180,108,136,102,102,182,182,154,186,186,186,170,181,190,153,141,141,123,146,158,172,172,172,172,124,85,198,188,135,135,175,98,122,122,122,122,122],B:[0,128,145,101,210,79,101,144,88,20,0,220,70,235,210,49,206,79,220,211,207,210,242,100,131,255,30,130,0,255,250,228,28,216,66,83,101,49,225,215,98,128,164,164,105,105,137,137,110,110,166,166,201,201,190,190,85,85,166,166,126,126,112,112,53,137,38,38,192,109,131,112,112,225,88,88,163,163,154,154,155,155,83,83,55,133,133,141,141,103,103,177,177,72,72,135,135,24,108,108,147,147,74,158,197,164,255,215,215,215,215,215,215,215,215,49,215,225,128,110,83,109,209,209,209,209,77,117,95,101,94,107,118,118,90,90,73,73,0,0,144,77,77,109,109,152,152,85,85,131,131,138,68,167,160,145,123,123,101,101,109,108,243,114,114,114,142,139,207,101,255,244,145,145,115,115,140,162,162,217,84,89,81,112,73,57,13,27,38,97,104,76,209,154,143,103,209,88,76,172,134,158,154,108,108,161,101,220,194,178,153,105,229,142,143,199,101,30,98,111,162,116,83,83,164,164,132,223,150,150,147,158,165,130,113,113,103,127,140,147,147,151,151,92,68,131,102,134,134,125,79,101,101,101,101,101],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},BL={R:[0,0,24,248,255],G:[0,0,177,254,0],B:[0,136,0,0,0],A:[0,32,64,78,128],I:[0,64,128,156,255]},VL={R:[1,10,15,17,21,27,36,49,65,82,99,118,140,161,183,203,222,238,248,253,253,253,252,250],G:[25,42,56,68,79,88,97,105,111,116,122,127,133,138,142,146,150,155,162,170,178,186,195,204],B:[89,92,95,96,98,98,96,91,83,74,64,55,46,43,49,62,79,100,126,151,175,199,223,250],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},PL={R:[0,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[0,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},OL={R:[255,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[255,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[255,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},LL={R:[0,0,0,0,196,255],G:[0,32,128,128,128,32],B:[0,255,196,0,0,0],A:[0,128,64,64,64,128],I:[0,1,64,128,192,255]},kL={R:[0,255],G:[0,0],B:[255,255],A:[0,128],I:[0,255]},jL={R:[0,0],G:[0,255],B:[255,255],A:[0,128],I:[0,255]},zL={R:[0,0,0,0],G:[0,1,128,255],B:[0,222,127,32],A:[0,0,64,128],I:[0,1,128,255]},_L={R:[0,0,0],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},GL={R:[0,103,255],G:[0,126,255],B:[0,165,255],A:[0,76,128],I:[0,153,255]},HL={R:[0,43,103,199,216,255],G:[0,0,37,155,213,255],B:[0,0,20,97,201,255],A:[0,44,48,54,56,56],I:[0,64,128,196,240,255]},YL={R:[0,9,24,33,40,46,52,57,62,66,70,74,78,81,85,88,91,94,98,101,103,106,109,112,114,117,119,121,124,126,128,130,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,164,166,168,169,171,172,174,175,177,178,180,181,183,184,186,187,189,190,191,193,194,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,222,223,224,224,225,226,226,227,228,228,229,229,230,231,231,232,233,233,234,234,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,243,243,243,243,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,241,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,243,243,244,244,245,246,246,247,247,248,249,249,250,250,251,251,252,252,253,253,254,254,254],G:[42,41,41,41,40,40,40,39,39,39,38,38,37,37,36,36,35,35,34,34,33,32,32,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,24,24,25,25,26,27,27,28,28,29,30,30,31,31,32,33,33,34,34,35,36,36,37,38,39,40,42,43,44,45,47,48,49,50,51,53,54,55,56,57,58,59,60,62,63,64,65,66,68,69,71,72,73,75,76,77,79,80,81,83,84,85,87,88,89,90,92,93,94,95,97,98,100,101,102,104,105,107,108,109,111,112,113,115,116,117,119,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,147,149,150,151,153,154,155,156,158,159,160,161,163,164,165,167,168,169,170,172,173,174,175,176,178,179,180,181,183,184,185,186,187,189,190,191,192,193,194,196,197,198,199,200,201,203,204,205,206,207,208,209,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,238,239,240,241,241,242,243,244,244,245,246,247,248,248,249,250,251,251,252,253,254,255],B:[167,167,166,166,166,165,165,165,164,164,164,163,163,162,162,162,161,161,161,160,160,160,159,159,158,158,157,157,156,155,155,154,154,153,153,152,151,151,150,150,149,149,148,147,147,146,146,145,144,144,143,143,142,141,141,140,139,139,138,137,137,136,135,135,134,133,133,132,131,131,130,130,129,128,128,127,127,126,125,125,124,124,123,123,122,121,121,120,119,119,118,118,117,116,116,116,115,115,114,114,113,113,113,112,112,111,111,110,110,109,109,109,108,108,107,107,106,106,106,106,106,105,105,105,105,105,105,105,104,104,104,104,104,103,103,103,103,103,102,102,102,103,103,103,103,104,104,104,104,104,105,105,105,105,106,106,106,106,106,107,107,107,107,108,108,109,110,111,111,112,113,113,114,115,115,116,117,117,118,119,120,120,121,122,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,144,146,147,148,149,150,152,153,155,157,158,160,162,163,165,167,168,170,172,173,175,177,178,180,182,183,185,187,188,190,193,196,199,201,204,207,210,212,215,218,221,224,226,229,232,235,238,240,243,246,249,252,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},qL={R:[0,86,166,255],G:[32,92,156,233],B:[76,108,117,69],A:[0,56,80,88],I:[0,64,192,255]},KL={R:[0,0,0],G:[127,196,254],B:[255,255,255],A:[0,64,128],I:[0,128,255]},QL={R:[0,61,122,183,244,255],G:[0,41,81,122,163,255],B:[0,25,51,76,102,255],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},XL={R:[0,61,122,183,244,255],G:[0,41,81,122,163,203],B:[0,25,51,76,102,127],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},WL={min:-643,max:-235,R:[0,0,0],G:[154,154,154],B:[179,179,101],A:[0,32,0],I:[0,163,255]},ZL={min:114,max:800,R:[0,255,255,255],G:[0,0,129,255],B:[0,0,0,255],A:[0,64,88,228],I:[0,80,160,255]},JL={min:180,max:600,R:[0,0,113,255],G:[0,0,109,250],B:[0,0,101,245],A:[0,0,100,160],I:[0,1,128,255]},$L={min:-10,max:110,R:[0,127,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},ek={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},tk={min:-80,max:1e3,R:[0,189,150,150,150,150,255],G:[0,169,54,54,54,54,240],B:[0,153,52,52,52,52,242],A:[0,32,64,0,0,64,64],I:[0,1,82,92,234,242,255]},ik={min:-590,max:600,R:[0,241,241,248,248,178,178,232,255,255,255],G:[0,156,156,222,222,36,36,51,255,255,255],B:[0,130,130,169,169,24,24,37,255,255,255],A:[0,8,0,0,0,64,64,0,0,222,222],I:[0,2,3,64,122,142,172,182,252,253,255]},nk={min:114,max:302,R:[0,255,255],G:[0,129,255],B:[0,0,255],A:[0,88,228],I:[0,103,255]},sk={min:-23,max:246,R:[0,44,255,255,255],G:[0,128,90,255,255],B:[0,0,70,0,255],A:[0,0,82,184,228],I:[0,64,131,196,255]},rk={min:-100,max:246,R:[0,128,159,255,255,255,255],G:[0,0,56,90,0,255,255],B:[0,0,41,70,0,0,255],A:[0,63,105,135,167,184,228],I:[0,100,128,155,180,209,255]},ak={min:-590,max:600,R:[0,241,241,248,248,178,232,255,255],G:[0,156,156,222,222,36,51,255,255],B:[0,130,130,169,169,24,37,255,255],A:[0,63,105,135,167,184,228,228,228],I:[0,1,52,127,137,162,172,252,255]},ok={min:140,max:1024,R:[0,2,113,255],G:[0,1,109,250],B:[0,1,101,245],A:[0,1,96,168],I:[0,1,128,255]},lk={min:-923,max:679,R:[0,0,0,0,0,255,255,255],G:[154,154,154,154,0,0,254,255],B:[179,179,179,179,0,0,0,255],A:[0,3,8,0,0,10,15,20],I:[0,30,62,88,170,200,232,255]},ck={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},uk={min:-600,max:100,R:[0,134,255],G:[0,109,250],B:[0,101,245],A:[0,60,148],I:[0,128,255]},hk={min:114,max:246,R:[0,255,255],G:[0,128,255],B:[0,128,255],A:[0,64,96],I:[0,87,255]},fk={min:50,max:1e3,R:[98,210,169,128,255],G:[94,26,77,128,255],B:[45,21,74,128,255],A:[0,25,0,4,168],I:[0,41,87,154,255]},dk={R:[0,13,21,26,27,25,22,21,22,28,39,54,75,98,124,148,171,189,202,210,213,211,206,200,195,193,195,201,211,225,240,255],G:[0,5,11,20,31,44,58,72,86,99,109,116,120,122,122,122,121,121,124,129,137,147,161,175,190,205,218,229,238,245,251,255],B:[0,14,30,46,61,71,77,78,75,68,60,52,48,47,53,65,83,105,131,157,183,205,222,235,241,243,242,240,239,240,245,255],A:[0,4,8,12,17,21,25,29,33,37,41,45,50,54,58,62,66,70,74,78,83,87,91,95,99,103,107,111,116,120,124,128],I:[0,8,16,25,33,41,49,58,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,197,206,214,222,230,239,247,255]},mk={R:[0,10,136,255],G:[0,39,220,255],B:[0,223,253,255],A:[0,48,64,70],I:[0,92,192,255]},gk={R:[0,245,205,120,196,220,230,0,122,236,12,204,42,119,220,103,60,255,165,160,0,245,205,120,196,220,230,0,122,236,13,220,103,255,165,160,0,120,200,255,255,164,164,164,234,0,0,0,0,0],G:[0,245,62,18,58,248,148,118,186,13,48,182,204,159,216,255,60,165,42,32,200,245,62,18,58,248,148,118,186,13,48,216,255,165,42,32,200,190,70,148,148,108,108,108,169,0,0,0,0,0],B:[0,245,78,134,250,164,34,14,220,176,255,142,164,176,20,255,60,0,42,240,200,245,78,134,250,164,34,14,220,176,255,20,255,0,42,240,221,150,255,10,10,226,226,226,30,64,112,160,208,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,24,26,28,30,31,41,42,43,44,46,47,49,50,51,52,53,54,58,60,62,63,72,77,78,79,80,81,82,85,251,252,253,254,255]},pk={R:[0,0,128,255,255],G:[0,128,0,128,255],B:[0,125,255,0,255],A:[0,32,64,96,128],I:[0,63,128,192,255]},vk={R:[0,142,227,255],G:[0,85,170,255],B:[0,14,76,255],A:[0,42,84,128],I:[0,85,170,255]},Ak={R:[0,255],G:[0,255],B:[0,255],A:[0,128],I:[0,255]},xk={R:[0,0,0],G:[0,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},yk={R:[0,0,0],G:[72,72,255],B:[0,255,255],A:[0,64,128],I:[0,88,255]},bk={R:[0,255,255],G:[72,88,255],B:[0,0,0],A:[0,64,128],I:[0,88,255]},wk={R:[0,255,255,255],G:[0,0,126,255],B:[0,0,0,255],A:[0,64,96,128],I:[0,128,191,255]},Sk={R:[3,255,255,255],G:[0,0,255,255],B:[0,0,0,255],A:[0,48,96,128],I:[0,95,191,255]},Ck={R:[255,255,0,0,0,255,255],G:[0,255,255,255,0,0,0],B:[0,0,0,255,255,255,0],A:[0,14,28,43,57,71,85],I:[0,43,85,128,170,213,255]},Ek={R:[0,120,237,240],G:[0,28,105,249],B:[4,109,37,33],A:[0,56,80,88],I:[0,64,192,255]},Tk={R:[0,0,127,255,127],G:[0,127,255,127,0],B:[127,255,127,0,0],A:[0,32,64,96,128],I:[0,63,128,192,255]},Mk={R:[0,255,255],G:[0,0,255],B:[0,0,0],A:[0,64,64],I:[0,86,255]},Dk={R:[94,50,90,152,215,238,249,254,252,241,209,158],G:[79,131,186,214,240,244,237,210,157,100,57,1],B:[162,189,167,164,155,169,168,123,86,68,79,66],A:[0,12,23,35,47,58,70,81,93,105,116,128],I:[0,23,46,70,93,116,139,162,185,209,232,255]},Rk={R:[3,7,13,25,45,67,84,98,110,124,138,154,173,191,210,225,233,233,231,229,230,235,243,253],G:[19,33,48,63,77,87,92,94,95,96,96,97,99,101,106,118,133,149,163,177,192,208,225,245],B:[38,58,79,99,114,122,122,120,117,113,110,105,101,97,94,96,103,112,122,134,149,169,192,218],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Nk={R:[0,148,183,223,247,252],G:[0,44,55,74,112,253],B:[4,128,121,104,92,191],A:[0,44,53,64,75,107],I:[0,107,128,154,179,255]},Ik={R:[11,59,55,222],G:[4,45,165,245],B:[5,91,172,229],A:[0,23,70,107],I:[0,56,167,255]},Fk={R:[3,5,6,8,12,19,28,36,42,48,54,61,68,76,86,96,110,129,154,181,205,224,239,252],G:[19,32,44,58,72,86,98,108,116,122,128,134,141,149,157,167,178,191,204,216,225,232,239,244],B:[39,60,82,104,123,137,144,145,142,138,134,130,126,121,116,110,105,104,112,131,155,178,198,217],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Uk={R:[0,85,0,0,0,0,0,0,85,255,255,255,172],G:[0,0,0,0,85,170,255,255,255,255,85,0,0],B:[0,170,85,255,255,170,170,0,85,0,0,0,0],A:[0,5,10,21,26,32,37,42,48,53,64,72,85],I:[0,15,31,63,79,95,111,127,143,159,191,217,255]},Bk={R:[13,156,237,240],G:[8,23,121,249],B:[135,158,83,33],A:[0,56,80,88],I:[0,64,192,255]},Vk={R:[208,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248],G:[182,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21],B:[191,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},Pk={R:[0,128,255],G:[0,0,0],B:[0,0,0],A:[0,64,128],I:[0,128,255]},Ok={R:[192,224,255],G:[1,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},Lk={R:[3,112,144,188,236,246,255],G:[5,31,29,22,76,158,250],B:[26,87,91,86,62,117,235],A:[0,30,38,49,67,85,107],I:[0,73,92,118,160,205,255]},kk={R:[1,240,255],G:[1,128,255],B:[1,128,255],A:[0,76,128],I:[0,153,255]},jk={R:[0,5,18,34,53,72,90,107,126,144,161,178,194,209,222,233,242,248,251,251,249,244,241,252],G:[0,4,10,11,9,11,17,23,30,36,43,50,59,70,83,98,117,136,157,177,199,220,240,254],B:[3,24,50,76,96,106,109,110,108,104,97,89,79,67,55,42,26,12,6,22,47,79,121,164],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},zk={R:[48,48,64,70,65,25,132,195,244,254,218,122],G:[18,18,64,107,150,226,255,241,199,158,57,4],B:[59,59,162,227,255,187,81,52,58,47,7,3],A:[0,22,26,30,34,43,52,57,63,67,77,86],I:[0,1,16,32,49,83,118,140,164,181,219,255]},_k={R:[0,128,255],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},Gk={R:[68,49,53,253],G:[1,104,183,231],B:[84,142,121,37],A:[0,56,80,88],I:[0,64,192,255]},Hk={R:[255,255,255],G:[127,196,254],B:[0,0,0],A:[0,64,128],I:[0,128,255]},Yk={R:[0,0,0],G:[0,128,255],B:[255,196,128],A:[0,64,128],I:[0,128,255]},qk={R:[3,64,0,0,255,255,255],G:[0,0,0,255,255,192,3],B:[0,32,48,56,64,96,128],A:[0,8,16,24,32,52,80],I:[0,32,64,96,160,192,255]},Kk={min:0,max:0,R:[0,37],G:[242,0],B:[255,255],A:[0,64],I:[0,255]},Qk={R:[255,255],G:[255,11],B:[0,0],A:[0,64],I:[0,255]},Xk={min:0,max:0,R:[65,10,223,120,216,207,251,93,252,217,21,253,131,165,173,143,144,217,86,89,63,254,172,1,142,107,42,78,221,8,222,71,127,126,167,33,104,2,208,216,0,251,7,105,2,101,248,190,253,62,255,224,166,37,110,138,45,34,6,37,69,201,43,122,199,37,173,194,103,211,75,159,96,4,239,98,110,193,253,166,40,255,48,130,140,243,101,9,177,220,133,32,4,81,48,48,210,109,60,132,1,119,1,159,247,33,212,187,253,144,196,254,168,79,64,196,39,97,73,173,104,216,217,43,101,119,254,5,237,103,203,122,57,87,251,164,19,75,200,2,252,150,66,0,255,157,23,254,55,16,240,161,69,253,207,195,5,60,255,251,200,217,134,123,253,180,27,246,130,136,250,232,4,125,140,22,253,255,13,180,123,61,254,111,10,185,76,192,255,223,186,61,198,5,172,13,83,172,171,6,23,73,134,133,109,61,213,55,57,132,36,209,2,144,1,253,68,155,3,160,2,77,121,70,67,176,223,131,4,162,232,255,150,94,235,191,207,10,246,0,225,4,209,116,57,112,172,253,1,6,92,227,73,62,135,223],G:[162,50,112,245,4,124,176,243,56,125,183,139,182,68,189,4,225,10,20,223,7,46,31,193,225,250,219,41,2,100,83,181,34,150,72,223,168,248,80,253,7,117,214,2,248,10,3,59,179,160,90,244,146,4,207,4,125,255,96,100,1,208,130,51,116,181,236,53,244,5,165,28,181,86,96,42,254,1,134,194,214,92,41,204,137,86,207,3,143,3,100,239,164,94,65,251,131,244,173,57,143,107,217,53,210,0,148,250,45,198,81,40,61,218,252,88,171,0,248,24,248,4,41,100,187,46,208,145,43,168,121,46,175,250,125,107,233,112,207,231,174,215,53,9,43,153,52,124,128,65,210,147,255,147,63,200,148,254,0,179,241,42,239,2,230,8,82,135,87,16,3,87,86,151,254,8,255,86,53,19,7,192,171,201,253,247,197,103,251,126,0,149,54,183,61,126,79,113,10,103,184,75,11,195,222,136,149,131,8,99,240,177,252,255,198,16,7,68,178,66,191,150,73,26,211,109,78,209,240,254,1,166,247,131,2,0,167,127,133,10,43,99,235,3,214,142,176,82,132,38,10,249,255,215,44,81],B:[176,182,248,37,117,35,96,69,32,152,108,20,237,250,2,89,141,216,111,251,211,149,10,44,214,103,31,251,3,32,252,246,97,1,219,167,197,4,36,116,206,118,106,43,205,204,114,69,127,205,87,80,41,251,145,204,253,161,247,1,149,9,43,253,97,72,136,161,171,181,26,255,108,80,218,214,231,255,84,31,109,4,218,3,217,36,68,85,241,39,221,2,240,2,173,42,206,5,110,46,103,27,212,184,2,207,246,45,116,72,110,253,38,105,248,159,243,81,192,93,141,145,24,157,234,131,57,178,62,75,65,176,148,40,253,66,76,240,51,154,17,251,139,253,207,9,114,49,200,254,96,73,138,118,204,102,137,89,145,161,4,112,66,234,147,178,212,205,185,11,203,131,2,250,118,169,1,185,154,53,171,197,61,175,249,96,15,254,95,5,222,75,246,194,2,61,180,25,133,165,15,233,59,35,221,140,109,7,114,255,198,0,115,168,252,23,242,80,75,142,137,255,12,182,68,201,4,111,37,228,83,248,24,192,249,5,54,223,160,122,160,114,145,119,252,31,253,250,10,214,8,47,0,142,222,70],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},Wk=class{constructor(){B(this,"gamma",1),B(this,"version",.1),B(this,"cluts",{});const t=Object.keys(ph).filter(i=>!i.startsWith("$")).sort(new Intl.Collator("en").compare);for(const i of t)this.cluts[i]=ph[i]}addColormap(e,t){this.cluts[e]=t}colormaps(){return Object.keys(this.cluts)}colorMaps(){return this.colormaps()}colormapFromKey(e){let t=this.cluts[e];return t!==void 0||(t=this.cluts[e.toLowerCase()],t!==void 0)?t:(e.length>0&&P.warn("No color map named "+e),{min:0,max:0,R:[0,255],G:[0,255],B:[0,255],A:[0,255],I:[0,255]})}colormap(e="",t=!1){const i=this.colormapFromKey(e);return this.makeLut(i.R,i.G,i.B,i.A,i.I,t)}makeLabelLut(e,t=255){if(e.R===void 0||e.G===void 0||e.B===void 0)throw new Error(`Invalid colormap table: ${e}`);const i=e.R.length,n=e.I??[...Array(i).keys()];if(i!==e.G.length||i!==e.B.length||i!==n.length)throw new Error(`colormap does not make sense: ${e} Rs ${e.R.length} Gs ${e.G.length} Bs ${e.B.length} Is ${n.length}`);let s=new Uint8ClampedArray(i).fill(t);s[0]=0,e.A!==void 0&&(s=Uint8ClampedArray.from(e.A));const r=Math.min(...n),a=Math.max(...n),o=a-r+1,l=new Uint8ClampedArray(o*4).fill(0);for(let u=0;u<i;u++){let h=(n[u]-r)*4;l[h++]=e.R[u],l[h++]=e.G[u],l[h++]=e.B[u],l[h++]=s[u]}const c={lut:l,min:r,max:a};if(e.labels){const u=e.labels.length;if(u===o)c.labels=e.labels;else if(u===i){c.labels=Array(o).fill("?");for(let h=0;h<i;h++){const f=n[h];c.labels[f]=e.labels[h]}}}return c}async makeLabelLutFromUrl(e){const i=await(await fetch(e)).json();return this.makeLabelLut(i)}makeDrawLut(e){let t=typeof e=="object"?e:ph[e];t===void 0&&(t={min:0,max:0,R:[0,255,0,0,255,0,255],G:[0,0,255,0,255,255,0],B:[0,0,0,255,0,255,255],A:[0,255,255,255,255,255,255],I:[0,255]});const i=this.makeLabelLut(t,255);if(i.labels===void 0&&(i.labels=[]),i.labels.length<256){const a=i.labels.length;for(let o=a;o<256;o++)i.labels.push(o.toString())}const n=new Uint8ClampedArray(256*4);let s=0;for(let a=0;a<256;a++)n[s++]=255,n[s++]=0,n[s++]=0,n[s++]=255;n[3]=0;const r=Math.min(i.lut.length,256*4);if(r>0)for(let a=0;a<r;a++)n[a]=i.lut[a];return{lut:n,labels:i.labels}}makeLut(e,t,i,n,s,r){const a=e.length,o=[...e],l=[...t],c=[...i];if(!s){s=new Array(a);for(let d=0;d<a;d++)s[d]=d/(a-1)*255}n||(n=new Array(a).fill(64),n[0]=0);let u=Uint8ClampedArray.from(n),h=Uint8ClampedArray.from(s);if(r)for(let d=0;d<a;d++)o[d]=e[a-1-d],l[d]=t[a-1-d],c[d]=i[a-1-d],u[d]=255-n[a-1-d],h[d]=255-s[a-1-d];const f=new Uint8ClampedArray(256*4);if(typeof h>"u"){h=new Uint8ClampedArray(a).fill(0);for(let d=0;d<a;d++)h[d]=Math.round(d*255/(a-1))}typeof u>"u"&&(u=new Uint8ClampedArray(a).fill(64),u[0]=0);for(let d=0;d<a-1;d++){const g=h[d];let m=h[d+1];d===0&&g!==0&&P.warn("colormap issue: indices expected to start with 0 not ",g),d===h.length-2&&m!==255&&(P.warn("padding colormap: indices expected end with 255 not ",m),m=255);const A=m-g;let p=g*4;for(let v=g;v<=m;v++){const x=(v-g)/A;f[p++]=o[d]+x*(o[d+1]-o[d]),f[p++]=l[d]+x*(l[d+1]-l[d]),f[p++]=c[d]+x*(c[d+1]-c[d]),f[p++]=u[d]+x*(u[d+1]-u[d])}}if(this.gamma===1)return f;for(let d=0;d<255*4;d++)d%4!==3&&(f[d]=Math.pow(f[d]/255,1/this.gamma)*255);return f}},Ve=new Wk,gr=class{static getClusterBoundaryU8(e,t){const i=new Array(e.length).fill(!1),n=new Array(e.length).fill(!1);for(let a=0;a<e.length;a++)e[a]>0&&(n[a]=!0);const s=t.length/3;let r=0;for(let a=0;a<s;a++){const o=t[r],l=t[r+1],c=t[r+2];r+=3,!(n[o]===n[l]&&n[o]===n[c]&&n[l]===n[c])&&(i[o]=!0,i[l]=!0,i[c]=!0)}return i}static async gzip(e){const t=new CompressionStream("gzip"),i=t.writable.getWriter();i.write(e).catch(console.error);const n=i.close().catch(console.error),s=new Response(t.readable),r=new Uint8Array(await s.arrayBuffer());return await n,r}static createMZ3(e,t,i=!1,n=null){const r=n instanceof Uint8Array&&n.length===e.length/3*4,a=r?7:3,o=t.length/3,l=e.length/3,c=0,u=16,h=o*3*4,f=l*3*4,d=u+h+f,g=new ArrayBuffer(d),m=new DataView(g);m.setUint16(0,23117,!0),m.setUint16(2,a,!0),m.setUint32(4,o,!0),m.setUint32(8,l,!0),m.setUint32(12,c,!0);let A=u;if(new Uint32Array(g,A,t.length).set(t),A+=h,new Float32Array(g,A,e.length).set(e),r&&(A+=f,new Uint8Array(g,A,n.length).set(n)),i)throw new Error("Call async createMZ3Async() for compression");return g}static async createMZ3Async(e,t,i=!1,n=null){const s=this.createMZ3(e,t,i,n);return i?await this.gzip(new Uint8Array(s)):s}static createOBJ(e,t){let i="";for(let r=0;r<e.length;r+=3)i+=`v ${e[r]} ${e[r+1]} ${e[r+2]}
`;for(let r=0;r<t.length;r+=3)i+=`f ${t[r]+1} ${t[r+1]+1} ${t[r+2]+1}
`;return new TextEncoder().encode(i).buffer}static createSTL(e,t){const i=t.length/3,n=84+i*50,s=new ArrayBuffer(n),r=new DataView(s);for(let o=0;o<80;o++)r.setUint8(o,0);r.setUint32(80,i,!0);let a=84;for(let o=0;o<t.length;o+=3){const l=t[o]*3,c=t[o+1]*3,u=t[o+2]*3;r.setFloat32(a,0,!0),r.setFloat32(a+4,0,!0),r.setFloat32(a+8,0,!0),a+=12,r.setFloat32(a,e[l],!0),r.setFloat32(a+4,e[l+1],!0),r.setFloat32(a+8,e[l+2],!0),a+=12,r.setFloat32(a,e[c],!0),r.setFloat32(a+4,e[c+1],!0),r.setFloat32(a+8,e[c+2],!0),a+=12,r.setFloat32(a,e[u],!0),r.setFloat32(a+4,e[u+1],!0),r.setFloat32(a+8,e[u+2],!0),a+=12,r.setUint16(a,0,!0),a+=2}return s}static downloadArrayBuffer(e,t){const i=new Blob([e],{type:"application/octet-stream"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=t,document.body.appendChild(s),s.style.display="none",s.click(),setTimeout(()=>{document.body.removeChild(s),URL.revokeObjectURL(n)},0)}static async saveMesh(e,t,i=".mz3",n=!1){let s=new ArrayBuffer(0);return/\.obj$/i.test(i)?s=this.createOBJ(e,t):/\.stl$/i.test(i)?s=this.createSTL(e,t):(/\.mz3$/i.test(i)||(i+=".mz3"),s=await this.createMZ3Async(e,t,n)),i.length>4&&this.downloadArrayBuffer(s,i),s}static getClusterBoundary(e,t){const i=new Uint32Array(e.buffer),n=new Array(i.length).fill(!1),s=t.length/3;let r=0;for(let a=0;a<s;a++){const o=t[r],l=t[r+1],c=t[r+2];r+=3,!(i[o]===i[l]&&i[o]===i[c]&&i[l]===i[c])&&(n[o]=!0,n[l]=!0,n[c]=!0)}return n}static getExtents(e){if(!ArrayBuffer.isView(e)&&!Array.isArray(e)||e.length<3)return{mxDx:0,extentsMin:0,extentsMax:0};let t=0;const i=Q(e[0],e[1],e[2]),n=Q(e[0],e[1],e[2]);for(let a=0;a<e.length;a+=3){const o=Q(e[a],e[a+1],e[a+2]);t=Math.max(t,dc(o)),Wp(i,i,o),Zp(n,n,o)}const s=[i[0],i[1],i[2]],r=[n[0],n[1],n[2]];return{mxDx:t,extentsMin:s,extentsMax:r}}static generateNormals(e,t){const i=[];let n;const s=e.length;let r,a,o,l,c,u,h,f,d;const g=new Float32Array(s),m=t.length;for(n=0;n<m;n+=3){h=t[n]*3,f=t[n+1]*3,d=t[n+2]*3;const A=[e[h],e[h+1],e[h+2]],p=[e[f],e[f+1],e[f+2]],v=[e[d],e[d+1],e[d+2]];r=p[0]-A[0],a=p[1]-A[1],o=p[2]-A[2],l=v[0]-A[0],c=v[1]-A[1],u=v[2]-A[2],i[0]=c*o-u*a,i[1]=u*r-l*o,i[2]=l*a-c*r,g[h]+=i[0],g[h+1]+=i[1],g[h+2]+=i[2],g[f]+=i[0],g[f+1]+=i[1],g[f+2]+=i[2],g[d]+=i[0],g[d+1]+=i[1],g[d+2]+=i[2]}for(n=0;n<s;n+=3){i[0]=-1*g[n],i[1]=-1*g[n+1],i[2]=-1*g[n+2];let A=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];A>0&&(A=1/Math.sqrt(A),i[0]*=A,i[1]*=A,i[2]*=A),g[n]=i[0],g[n+1]=i[1],g[n+2]=i[2]}return g}},de,Qt,vh,W1,Ml,r6=class{constructor(e){fl(this,de),fl(this,Qt,0),fl(this,vh,[]),fl(this,W1,[]),fl(this,Ml),pa(this,de,new DataView(e)),this.read()}async extract(e){const t=new Uint8Array(ce(this,de).buffer.slice(e.startsAt,e.startsAt+e.compressedSize));if(e.compressionMethod===0)return t;if(e.compressionMethod===8){const i=new DecompressionStream("deflate-raw"),n=i.writable.getWriter();n.write(t).catch(console.error);const s=n.close().catch(console.error),r=new Response(i.readable),a=new Uint8Array(await r.arrayBuffer());return await s,a}throw new Error(`Unsupported compression method: ${e.compressionMethod}`)}read(){for(;!ce(this,Ml)&&ce(this,Qt)<ce(this,de).byteLength;){const e=ce(this,de).getUint32(ce(this,Qt),!0);if(e===67324752){const t=this.readLocalFile(ce(this,Qt));t.extract=this.extract.bind(this,t),ce(this,vh).push(t);const i=(t.generalPurpose&8)!==0;if(t.startsAt=ce(this,Qt)+30+t.fileNameLength+t.extraLength,t.compressedSize===0&&i){let n=t.startsAt;for(;n+20<=ce(this,de).byteLength;){if(ce(this,de).getUint32(n,!0)===134695760&&ce(this,de).getUint16(n+16,!0)===19280){n+=4;break}n++}t.crc=ce(this,de).getUint32(n,!0),t.compressedSize=ce(this,de).getUint32(n+4,!0),t.uncompressedSize=ce(this,de).getUint32(n+8,!0),pa(this,Qt,n+12)}else pa(this,Qt,t.startsAt+t.compressedSize)}else if(e===33639248){const t=this.readCentralDirectory(ce(this,Qt));ce(this,W1).push(t),pa(this,Qt,ce(this,Qt)+(46+t.fileNameLength+t.extraLength+t.fileCommentLength))}else if(e===101010256){pa(this,Ml,this.readEndCentralDirectory(ce(this,Qt)));break}else if(e===101075792){pa(this,Ml,this.readEndCentralDirectory64(ce(this,Qt)));break}else{console.error(`Unexpected ZIP signature 0x${e.toString(16).padStart(8,"0")} at index ${ce(this,Qt)}`);break}}}readLocalFile(e){let t=ce(this,de).getUint32(e+18,!0),i=ce(this,de).getUint32(e+22,!0);const n=ce(this,de).getUint16(e+26,!0),s=ce(this,de).getUint16(e+28,!0),r=e+30+n;if(this.readString(r,s),t===4294967295&&i===4294967295){let a=r,o=!1;for(;a<r+s-4;){const l=ce(this,de).getUint16(a,!0),c=ce(this,de).getUint16(a+2,!0);if(a+=4,l===1)if(c>=16){i=Number(ce(this,de).getBigUint64(a,!0)),a+=8,t=Number(ce(this,de).getBigUint64(a,!0)),o=!0;break}else throw new Error(`ZIP64 extra field found but is too small (expected at least 16 bytes, got ${c}).`);a+=c}if(!o)throw new Error("ZIP64 format missing extra field with signature 0x0001.")}return{signature:this.readString(e,4),version:ce(this,de).getUint16(e+4,!0),generalPurpose:ce(this,de).getUint16(e+6,!0),compressionMethod:ce(this,de).getUint16(e+8,!0),lastModifiedTime:ce(this,de).getUint16(e+10,!0),lastModifiedDate:ce(this,de).getUint16(e+12,!0),crc:ce(this,de).getUint32(e+14,!0),compressedSize:t,uncompressedSize:i,fileNameLength:n,extraLength:s,fileName:this.readString(e+30,n),extra:this.readString(e+30+n,s)}}readCentralDirectory(e){return{versionCreated:ce(this,de).getUint16(e+4,!0),versionNeeded:ce(this,de).getUint16(e+6,!0),fileNameLength:ce(this,de).getUint16(e+28,!0),extraLength:ce(this,de).getUint16(e+30,!0),fileCommentLength:ce(this,de).getUint16(e+32,!0),diskNumber:ce(this,de).getUint16(e+34,!0),internalAttributes:ce(this,de).getUint16(e+36,!0),externalAttributes:ce(this,de).getUint32(e+38,!0),offset:ce(this,de).getUint32(e+42,!0),comments:this.readString(e+46,ce(this,de).getUint16(e+32,!0))}}readEndCentralDirectory(e){const t=ce(this,de).getUint16(e+20,!0);return{numberOfDisks:ce(this,de).getUint16(e+4,!0),centralDirectoryStartDisk:ce(this,de).getUint16(e+6,!0),numberCentralDirectoryRecordsOnThisDisk:ce(this,de).getUint16(e+8,!0),numberCentralDirectoryRecords:ce(this,de).getUint16(e+10,!0),centralDirectorySize:ce(this,de).getUint32(e+12,!0),centralDirectoryOffset:ce(this,de).getUint32(e+16,!0),commentLength:t,comment:this.readString(e+22,t)}}readEndCentralDirectory64(e){const t=Number(ce(this,de).getBigUint64(e+0,!0));return{numberOfDisks:ce(this,de).getUint32(e+16,!0),centralDirectoryStartDisk:ce(this,de).getUint32(e+20,!0),numberCentralDirectoryRecordsOnThisDisk:Number(ce(this,de).getBigUint64(e+24,!0)),numberCentralDirectoryRecords:Number(ce(this,de).getBigUint64(e+32,!0)),centralDirectorySize:Number(ce(this,de).getBigUint64(e+40,!0)),centralDirectoryOffset:Number(ce(this,de).getBigUint64(e+48,!0)),commentLength:t,comment:""}}readString(e,t){return Array.from({length:t},(i,n)=>String.fromCharCode(ce(this,de).getUint8(e+n))).join("")}get entries(){return ce(this,vh)}};de=new WeakMap;Qt=new WeakMap;vh=new WeakMap;W1=new WeakMap;Ml=new WeakMap;var ae=class Ta{static arrayBufferToBase64(t){const i=new Uint8Array(t);return Ta.uint8tob64(i)}static async decompress(t){const i=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",n=new DecompressionStream(i),s=n.writable.getWriter();s.write(t).catch(console.error);const r=s.close().catch(console.error),a=new Response(n.readable),o=new Uint8Array(await a.arrayBuffer());return await r,o}static async decompressToBuffer(t){const i=await Ta.decompress(t);return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}static async readMatV4(t,i=!1){let n=t.byteLength;if(n<40)throw new Error("File too small to be MAT v4: bytes = "+t.byteLength);let s=new DataView(t),r=s.getUint16(0,!0),a=t;if(r===35615||r===8075){const g=await this.decompress(new Uint8Array(t));s=new DataView(g.buffer),r=s.getUint16(0,!0),a=g.buffer,n=a.byteLength}const o=new TextDecoder("utf-8"),l=new Uint8Array(a);let c=0;const u={};function h(g){return Math.floor(g/10)%10}function f(g,m,A){const p=new Uint8Array(l.subarray(m,A));return g===1?new Float32Array(p.buffer):g===2?new Int32Array(p.buffer):g===3?new Int16Array(p.buffer):g===4?new Uint16Array(p.buffer):g===5?new Uint8Array(p.buffer):new Float64Array(p.buffer)}function d(){const g=s.getUint32(c,!0),m=s.getUint32(c+4,!0),A=s.getUint32(c+8,!0),p=s.getUint32(c+12,!0),v=s.getUint32(c+16,!0);if(c+=20,p!==0)throw new Error("Matlab V4 reader does not support imaginary numbers");const x=m*A;if(x<1)throw new Error("mrows * ncols must be greater than one");const y=new Uint8Array(l.subarray(c,c+v));let b=o.decode(y).trim().replaceAll("\0","");i&&(b=b.replaceAll(".","_"));const E=h(g);let w=8;if(E>=1&&E<=2)w=4;else if(E>=3&&E<=4)w=2;else if(E===5)w=1;else if(E!==0)throw new Error("impossible Matlab v4 datatype");if(c+=v,g>50)throw new Error("Does not appear to be little-endian V4 Matlab file");const S=c+x*w;u[b]=f(E,c,S),c=S}for(;c+20<n;)d();return u}static b64toUint8(t){const i=atob(t),n=i.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=i.charCodeAt(r);return s}static uint8tob64(t){let i="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=t.byteLength,r=s%3,a=s-r;let o,l,c,u,h;for(let f=0;f<a;f=f+3)h=t[f]<<16|t[f+1]<<8|t[f+2],o=(h&16515072)>>18,l=(h&258048)>>12,c=(h&4032)>>6,u=h&63,i+=n[o]+n[l]+n[c]+n[u];return r===1?(h=t[a],o=(h&252)>>2,l=(h&3)<<4,i+=n[o]+n[l]+"=="):r===2&&(h=t[a]<<8|t[a+1],o=(h&64512)>>10,l=(h&1008)>>4,c=(h&15)<<2,i+=n[o]+n[l]+n[c]+"="),i}static download(t,i,n){const s=document.createElement("a"),r=Array.isArray(t)?t:[t],a=new Blob(r,{type:n});s.href=URL.createObjectURL(a),s.download=i,s.click()}static readFileAsync(t){return new Promise((i,n)=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.onerror=n,s.readAsArrayBuffer(t)})}static blobToBase64(t){return new Promise(i=>{const n=new FileReader;n.onloadend=()=>i(n.result),n.readAsDataURL(t)})}static async decompressBase64String(t){const i=atob(t),n=new ArrayBuffer(i.length),s=new Uint8Array(n);for(let r=0;r<i.length;r++)s[r]=i.charCodeAt(r);return Ta.decompressArrayBuffer(s)}static async compressToBase64String(t){const i=await Ta.compressStringToArrayBuffer(t);return Ta.uint8tob64(new Uint8Array(i))}static strToU8(t,i){if(i){const l=new Uint8Array(t.length);for(let c=0;c<t.length;++c)l[c]=t.charCodeAt(c);return l}const n=t.length,s=(l,c,u)=>((u==null||u>l.length)&&(u=l.length),new Uint8Array(l.subarray(c,u)));let r=new Uint8Array(t.length+(t.length>>1)),a=0;const o=l=>{r[a++]=l};for(let l=0;l<n;++l){if(a+5>r.length){const u=new Uint8Array(a+8+(n-l<<1));u.set(r),r=u}let c=t.charCodeAt(l);c<128||i?o(c):c<2048?(o(192|c>>6),o(128|c&63)):(c>55295&&c<57344,c=65536+(c&1047552)|t.charCodeAt(++l)&1023,o(240|c>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|c&63))}return s(r,0,a)}static async compress(t,i="gzip"){const n=new CompressionStream(i),s=n.writable.getWriter();s.write(t).catch(console.error);const r=s.close().catch(console.error),o=await new Response(n.readable).arrayBuffer();return await r,o}static async compressStringToArrayBuffer(t){const i=this.strToU8(t);return await this.compress(i)}static isArrayBufferCompressed(t){if(t&&t.byteLength){const i=new Uint8Array(t);return(i[0]<<8|i[1])===8075}else return!1}static strFromU8(t,i){if(i){let n="";for(let s=0;s<t.length;s+=16384)n+=String.fromCharCode.apply(null,t.subarray(s,s+16384));return n}else{const n=(o,l,c)=>((l==null||l<0)&&(l=0),(c==null||c>o.length)&&(c=o.length),new Uint8Array(o.subarray(l,c))),s=o=>{for(let l="",c=0;;){let u=o[c++];const h=(u>127)+(u>223)+(u>239);if(c+h>o.length)return{s:l,r:n(o,c-1)};h?h===3?(u=((u&15)<<18|(o[c++]&63)<<12|(o[c++]&63)<<6|o[c++]&63)-65536,l+=String.fromCharCode(55296|u>>10,56320|u&1023)):h&1?l+=String.fromCharCode((u&31)<<6|o[c++]&63):l+=String.fromCharCode((u&15)<<12|(o[c++]&63)<<6|o[c++]&63):l+=String.fromCharCode(u)}},{s:r,r:a}=s(t);if(a.length)throw new Error("Unexpected trailing bytes in UTF-8 decoding");return r}}static async decompressArrayBuffer(t){const i=await this.decompress(new Uint8Array(t));return this.strFromU8(i)}static arraysAreEqual(t,i){return uP(t,i)}static range(t,i,n){return Array.from({length:(i-t)/n+1},(s,r)=>t+r*n)}static sph2cartDeg(t,i){const n=-i*(Math.PI/180),s=(t-90)%360*(Math.PI/180),r=[Math.cos(n)*Math.cos(s),Math.cos(n)*Math.sin(s),Math.sin(n)],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return a<=0||(r[0]/=a,r[1]/=a,r[2]/=a),r}static vox2mm(t,i){const n=ot(i);mi(n,n);const s=Ye(t[0],t[1],t[2],1);return bt(s,s,n),Q(s[0],s[1],s[2])}},ml=P,We=class At{static readTRACT(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be niml.tract: bytes = "+i);const n=new DataView(t),s=new Uint8Array(t);let r=0;function a(){for(;r<i&&s[r]!==60;)r++;const m=r;for(;r<i&&s[r]!==62;)r++;return r++,r-m<1?"":new TextDecoder().decode(t.slice(m,r-1)).trim()}let o=a();function l(m){const A=o.indexOf(m);if(A<0)return 0;const p=o.indexOf('"',A)+1,v=o.indexOf('"',p),x=o.slice(p,v);return parseInt(x)}const c=l("N_tracts=");(!o.startsWith("<network")||c<1)&&P.warn("This is not a valid niml.tract file "+o);let u=0;const h=[];h.push(u);const f=[],d=[];for(let m=0;m<c;m++){o=a();const A=l("ni_dimen="),p=l("Bundle_Tag="),v=o.includes("binary.lsbfirst");for(let x=0;x<A;x++){r+=4;const y=n.getUint32(r,v)/3;r+=4;for(let b=0;b<y;b++)f.push(n.getFloat32(r,v)),r+=4,f.push(-n.getFloat32(r,v)),r+=4,f.push(n.getFloat32(r,v)),r+=4;u+=y,h.push(u),d.push(p)}o=a()}const g=[];return g.push({id:"tract",vals:Float32Array.from(d)}),{pts:new Float32Array(f),offsetPt0:new Uint32Array(h),dps:g}}static async readTT(t){let i=new Uint32Array(0),n=new Float32Array(0);const s=await ae.readMatV4(t);if(!("trans_to_mni"in s))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in s))throw new Error("TT format file must have 'voxel_size'");if(!("track"in s))throw new Error("TT format file must have 'track'");let r=Se();const a=s.trans_to_mni;r=pi(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),mi(r,r);function o(l){const c=new DataView(l.buffer),u=[];let h=0,f=0;for(;f<l.length;){u.push(f);const m=c.getUint32(f,!0);f=f+m+13,h+=m}i=new Uint32Array(u.length+1),n=new Float32Array(h);let d=0;for(let m=0;m<u.length;m++){i[m]=d/3;let A=u[m];const p=c.getUint32(A,!0)/3;let v=c.getInt32(A+4,!0),x=c.getInt32(A+8,!0),y=c.getInt32(A+12,!0);A+=16,n[d++]=v,n[d++]=x,n[d++]=y;for(let b=2;b<=p;b++)v=v+c.getInt8(A++),x=x+c.getInt8(A++),y=y+c.getInt8(A++),n[d++]=v,n[d++]=x,n[d++]=y}for(let m=0;m<d;m++)n[m]=n[m]/32;let g=0;for(let m=0;m<d/3;m++){const A=Ye(n[g],n[g+1],n[g+2],1);bt(A,A,r),n[g++]=A[0],n[g++]=A[1],n[g++]=A[2]}i[u.length]=d/3}return o(s.track),{pts:n,offsetPt0:i}}static async readTRX(t){function i(d){const g=(d&31744)>>10,m=d&1023;return(d>>15?-1:1)*(g?g===31?m?NaN:1/0:Math.pow(2,g-15)*(1+m/1024):6103515625e-14*(m/1024))}let n=0,s=0,r=new Float32Array([]);const a=[],o=[],l=[],c=[];let u=[],h=!1;const f=new r6(t);for(let d=0;d<f.entries.length;d++){const g=f.entries[d];if(g.uncompressedSize===0)continue;const m=g.fileName.split("/"),A=m.slice(-1)[0];if(A.startsWith("."))continue;const p=m.slice(-2)[0],v=A.split(".")[0],x=await g.extract();if(A.includes("header.json")){const E=new TextDecoder().decode(x);u=JSON.parse(E);continue}let y=0,b=[];if(A.endsWith(".uint64")||A.endsWith(".int64")){y=x.length/8,b=new Uint32Array(y);const E=new Uint32Array(x.buffer);let w=0;for(let S=0;S<y;S++)b[S]=E[w],E[w+1]!==0&&(h=!0),w+=2}else if(A.endsWith(".uint32"))b=new Uint32Array(x.buffer);else if(A.endsWith(".uint16"))b=new Uint16Array(x.buffer);else if(A.endsWith(".uint8"))b=new Uint8Array(x.buffer);else if(A.endsWith(".int32"))b=new Int32Array(x.buffer);else if(A.endsWith(".int16"))b=new Int16Array(x.buffer);else if(A.endsWith(".int8"))b=new Int8Array(x.buffer);else if(A.endsWith(".float64"))b=new Float64Array(x.buffer);else if(A.endsWith(".float32"))b=new Float32Array(x.buffer);else if(A.endsWith(".float16")){y=x.length/2,b=new Float32Array(y);const E=new Uint16Array(x.buffer),w=new Float32Array(65536);for(let S=0;S<65536;S++)w[S]=i(S);for(let S=0;S<y;S++)b[S]=w[E[S]]}else continue;if(y=b.length,p.includes("groups")){o.push({id:v,vals:Float32Array.from(b.slice())});continue}if(p.includes("dpv")){c.push({id:v,vals:Float32Array.from(b.slice())});continue}if(p.includes("dps")){l.push({id:v,vals:Float32Array.from(b.slice())});continue}if(A.startsWith("offsets.")){n=y;for(let E=0;E<y;E++)a[E]=b[E]}A.startsWith("positions.3.")&&(s=y,r=new Float32Array(b))}if(n===0||s===0)throw new Error("Failure reading TRX format (no offsets or points).");if(h)throw new Error("Too many vertices: JavaScript does not support 64 bit integers");return a[n]=s/3,{pts:r,offsetPt0:new Uint32Array(a),dpg:o,dps:l,dpv:c,header:u}}static readTSF(t,i=0){const n=new Float32Array(i),s=t.byteLength;if(s<20)throw new Error("File too small to be TSF: bytes = "+s);const r=new Uint8Array(t);let a=0;function o(){for(;a<s&&r[a]===10;)a++;const f=a;for(;a<s&&r[a]!==10;)a++;return a++,a-f<1?"":new TextDecoder().decode(t.slice(f,a-1))}let l=o();if(!l.includes("mrtrix track scalars"))throw new Error("Not a valid TSF file");let c=-1;for(;a<s&&!l.includes("END");)if(l=o(),l.toLowerCase().startsWith("file:")&&(c=parseInt(l.split(" ").pop())),l.toLowerCase().startsWith("datatype:")&&!l.endsWith("Float32LE"))throw new Error("Only supports TSF files with Float32LE");if(c<20)throw new Error("Not a valid TSF file (missing file offset)");a=c;const u=new DataView(t);let h=0;for(;a+4<=s&&h<i;){const f=u.getFloat32(a,!0);if(a+=4,isFinite(f))n[h++]=f;else if(!isNaN(f))break}return n}static readTCK(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be TCK: bytes = "+i);const n=new Uint8Array(t);let s=0;function r(){for(;s<i&&n[s]===10;)s++;const g=s;for(;s<i&&n[s]!==10;)s++;return s++,s-g<1?"":new TextDecoder().decode(t.slice(g,s-1))}let a=r();if(!a.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let o=-1;for(;s<i&&!a.includes("END");)a=r(),a.toLowerCase().startsWith("file:")&&(o=parseInt(a.split(" ").pop()));if(o<20)throw new Error("Not a valid TCK file (missing file offset)");s=o;const l=new DataView(t);let c=0,u=new Uint32Array(i/(4*4)),h=0,f=0,d=new Float32Array(i/4);for(u[0]=0;s+12<i;){const g=l.getFloat32(s,!0);s+=4;const m=l.getFloat32(s,!0);s+=4;const A=l.getFloat32(s,!0);if(s+=4,isFinite(g))d[f++]=g,d[f++]=m,d[f++]=A,c++;else if(u[h++]=c,!isNaN(g))break}return d=d.slice(0,f),u=u.slice(0,h),{pts:d,offsetPt0:u}}static async readTRK(t){let i=new DataView(t),n=i.getUint32(0,!0);if(n!==1128354388){let R;if(n===4247762216)throw new Error("zstd TRK decompression is not supported");R=await ae.decompress(new Uint8Array(t)),t=R.buffer,i=new DataView(t),n=i.getUint32(0,!0)}const s=i.getUint32(992,!0),r=i.getUint32(996,!0);if(s>2||r!==1e3||n!==1128354388)throw new Error("Not a valid TRK file");const a=i.getInt16(36,!0),o=[];for(let R=0;R<a;R++){const D=new Uint8Array(t.slice(38+R*20,58+R*20)),I=new TextDecoder().decode(D).split("\0").shift();o.push({id:I.trim(),vals:[]})}const l=i.getFloat32(12,!0),c=i.getFloat32(16,!0),u=i.getFloat32(20,!0),h=pi(1/l,0,0,-.5,0,1/c,0,-.5,0,0,1/u,-.5,0,0,0,1),f=i.getInt16(238,!0),d=[];for(let R=0;R<f;R++){const D=new Uint8Array(t.slice(240+R*20,260+R*20)),I=new TextDecoder().decode(D).split("\0").shift();d.push({id:I.trim(),vals:[]})}const g=Se();for(let R=0;R<16;R++)g[R]=i.getFloat32(440+R*4,!0);g[15]===0&&(P.warn("TRK vox_to_ras not set"),NC(g));const m=Se();IC(m,h,g);let A=null,p=null;A=new Int32Array(t.slice(r)),p=new Float32Array(A.buffer);const v=A.length;if(v<1)throw new Error("Empty TRK file.");let x=0,y=0,b=new Uint32Array(A.length/4),E=0,w=new Float32Array(A.length),S=0;for(;x<v;){const R=A[x];x=x+1,b[E++]=y;for(let D=0;D<R;D++){const I=p[x+0],U=p[x+1],L=p[x+2];if(x+=3,w[S++]=I*m[0]+U*m[1]+L*m[2]+m[3],w[S++]=I*m[4]+U*m[5]+L*m[6]+m[7],w[S++]=I*m[8]+U*m[9]+L*m[10]+m[11],a>0)for(let V=0;V<a;V++)o[V].vals.push(p[x]),x++;y++}if(f>0)for(let D=0;D<f;D++)d[D].vals.push(p[x]),x++}const M=[];for(let R=0;R<d.length;R++)M.push({id:d[R].id,vals:Float32Array.from(d[R].vals)});const T=[];for(let R=0;R<o.length;R++)T.push({id:o[R].id,vals:Float32Array.from(o[R].vals)});return b[E++]=y,w=w.slice(0,S),b=b.slice(0,E),{pts:w,offsetPt0:b,dps:M,dpv:T}}static readTxtVTK(t){const s=new TextDecoder("utf-8").decode(t).split(`
`);if(s.length<7||!s[0].startsWith("# vtk DataFile"))throw new Error("Invalid VTK image");if(!s[2].startsWith("ASCII"))throw new Error("Not ASCII VTK mesh");let a=3;for(;s[a].length<1;)a++;if(!s[a].includes("POLYDATA"))throw new Error("Not ASCII VTK polydata");for(a++;s[a].length<1;)a++;if(!s[a].startsWith("POINTS"))throw new Error("Not VTK POINTS");let o=s[a].trim().split(/\s+/);const l=parseInt(o[1]),c=l*3,u=new Float32Array(l*3);let h=0;for(;h<l*3;){a++;const m=s[a].trim().trim().split(/\s+/);for(let A=0;A<m.length&&!(h>=c);A++)u[h]=parseFloat(m[A]),h++}const f=[];for(a++;s[a].length<1;)a++;if(s[a].startsWith("METADATA")){for(;s[a].length>1;)a++;a++}if(o=s[a].trim().split(/\s+/),a++,o[0].includes("LINES")){const g=parseInt(o[1]);if(g<1)throw new Error("Corrupted VTK ASCII");let m=s[a].trim();const A=[];let p=[];if(m.startsWith("OFFSETS")){a++;let v=0;for(;v<g;){m=s[a].trim(),a++;const x=m.trim().split(/\s+/);for(let y=0;y<x.length&&(A[v]=parseInt(x[y]),v++,!(v>=g));y++);}p=Array.from(u)}else{let v=function(){m=s[a].trim();const E=m.trim().split(/\s+/);y=[];for(let w=0;w<E.length;w++)y.push(parseInt(E[w]));b=0,a++},x=0;A[0]=0;let y=[],b=0;v();for(let E=0;E<g;E++){b>=y.length&&v();const w=y[b++];x+=w,A[E+1]=x;for(let S=0;S<w;S++){b>=y.length&&v();const M=y[b++]*3;p.push(u[M+0]),p.push(u[M+1]),p.push(u[M+2])}}}return{pts:Float32Array.from(p),offsetPt0:Uint32Array.from(A)}}else if(o[0].includes("TRIANGLE_STRIPS")){const g=parseInt(o[1]);for(let m=0;m<g;m++){const A=s[a].trim();a++;const p=A.trim().split(/\s+/),v=parseInt(p[0])-2;let x=1;for(let y=0;y<v;y++)y%2?(f.push(parseInt(p[x+2])),f.push(parseInt(p[x+1])),f.push(parseInt(p[x]))):(f.push(parseInt(p[x])),f.push(parseInt(p[x+1])),f.push(parseInt(p[x+2]))),x+=1}}else if(o[0].includes("POLYGONS")){const g=parseInt(o[1]);for(let m=0;m<g;m++){const A=s[a].trim();a++;const p=A.trim().split(/\s+/),v=parseInt(p[0])-2,x=parseInt(p[1]);let y=parseInt(p[2]);for(let b=0;b<v;b++){const E=parseInt(p[3+b]);f.push(x),f.push(y),f.push(E),y=E}}}else throw new Error("Unsupported ASCII VTK datatype "+o[0]);const d=new Uint32Array(f);return{positions:u,indices:d}}static async readLayer(t="",i,n,s=.5,r="warm",a="winter",o=!1,l=null,c=null,u=0){const h={...cj,colormapInvert:!1,colormapType:0,isTransparentBelowCalMin:!0,isAdditiveBlend:!1,colorbarVisible:!0,colormapLabel:null},f=/(?:\.([^.]+))?$/;let d=f.exec(t)[1];d=d.toUpperCase(),d==="GZ"&&(d=f.exec(t.slice(0,-3))[1],d=d.toUpperCase());const g=n.vertexCount/3;if(n.offsetPt0){if(d!=="TSF")throw new Error("readLayer for streamlines only supports TSF files.");const p=n.pts.length/3,v=t.split("/");let x="Unknown";v.length>1&&v.pop()&&(x=x.split(".").slice(0,-1).join("."));const y=At.readTSF(i,p);n.dpv||(n.dpv=[]);const b=y.reduce((w,S)=>Math.min(w,S)),E=y.reduce((w,S)=>Math.max(w,S));return n.dpv.push({id:x,vals:Float32Array.from(y.slice()),global_min:b,global_max:E,cal_min:b,cal_max:E}),h}if(g<3){P.error("n_vert < 3 in layer");return}if(d==="MZ3"){const p=await At.readMZ3(i,g);h.values=p.scalars,"colormapLabel"in p&&(h.colormapLabel=p.colormapLabel)}else if(d==="ANNOT"){const p=At.readANNOT(i,g,!0);p instanceof Uint32Array?h.values=p:(h.values=p.scalars,h.colormapLabel=p.colormapLabel)}else if(d==="CRV"||d==="CURV"||d==="THICKNESS"||d==="AREA")h.values=At.readCURV(i,g),h.isTransparentBelowCalMin=!1;else if(d==="GII"){const p=await At.readGII(i,g);h.values=p.scalars,h.colormapLabel=p.colormapLabel}else if(d==="MGH"||d==="MGZ"){const p=await At.readMGH(i,g,!0);"scalars"in p?(h.values=p.scalars,h.colormapLabel=p.colormapLabel):h.values=p}else if(d==="NII")h.values=await At.readNII(i,g,n.anatomicalStructurePrimary);else if(d==="SMP")h.values=await At.readSMP(i,g);else if(d==="STC")h.values=At.readSTC(i,g);else if(At.isCurv(i))h.values=At.readCURV(i,g),h.isTransparentBelowCalMin=!1;else return P.warn("Unknown layer overlay format "+t),h;if(!h.values){P.error("no values in layer");return}h.nFrame4D=h.values.length/g,h.frame4D=0,h.outlineBorder=u;let m=h.values[0],A=h.values[0];for(let p=0;p<h.values.length;p++)m=Math.min(m,h.values[p]),A=Math.max(A,h.values[p]);return h.global_min=m,h.global_max=A,h.cal_min=l||0,l||(h.cal_min=m),h.cal_max=c||0,c||(h.cal_max=A),h.cal_minNeg=NaN,h.cal_maxNeg=NaN,h.opacity=s,h.colormap=r,h.colormapNegative=a,h.useNegativeCmap=o,h}static async readSMP(t,i){const n=t.byteLength;let s=new DataView(t),r=s.getUint16(0,!0);if(r>5){const h=await ae.decompress(new Uint8Array(t));s=new DataView(h.buffer),r=s.getUint16(0,!0),t=h.buffer}r>5&&P.error("Unsupported or invalid BrainVoyager SMP version "+r);const a=s.getUint32(2,!0);a!==i&&P.error("SMP file has "+a+" vertices, background mesh has "+i);const o=s.getUint16(6,!0),l=new Float32Array(a*o);let c=9;function u(){const h=c;for(;c<n&&s.getUint8(c)!==0;)c++;return c++,new TextDecoder().decode(t.slice(h,c-1))}u();for(let h=0;h<o;h++){const f={};f.mapType=s.getUint32(c,!0),c+=4,r>=3&&f.mapType===3&&(f.nLags=s.getUint32(c,!0),c+=4,f.mnLag=s.getUint32(c,!0),c+=4,f.mxLag=s.getUint32(c,!0),c+=4,f.ccOverlay=s.getUint32(c,!0),c+=4),f.clusterSize=s.getUint32(c,!0),c+=4,f.clusterCheck=s.getUint8(c),c+=1,f.critThresh=s.getFloat32(c,!0),c+=4,f.maxThresh=s.getFloat32(c,!0),c+=4,r>=4&&(f.includeValuesGreaterThreshMax=s.getUint32(c,!0),c+=4),f.df1=s.getUint32(c,!0),c+=4,f.df2=s.getUint32(c,!0),c+=4,r>=5?(f.posNegFlag=s.getUint32(c,!0),c+=4):f.posNegFlag=3,f.cortexBonferroni=s.getUint32(c,!0),c+=4,f.posMinRGB=[0,0,0],f.posMaxRGB=[0,0,0],f.negMinRGB=[0,0,0],f.negMaxRGB=[0,0,0],r>=2&&(f.posMinRGB[0]=s.getUint8(c),c++,f.posMinRGB[1]=s.getUint8(c),c++,f.posMinRGB[2]=s.getUint8(c),c++,f.posMaxRGB[0]=s.getUint8(c),c++,f.posMaxRGB[1]=s.getUint8(c),c++,f.posMaxRGB[2]=s.getUint8(c),c++,r>=4&&(f.negMinRGB[0]=s.getUint8(c),c++,f.negMinRGB[1]=s.getUint8(c),c++,f.negMinRGB[2]=s.getUint8(c),c++,f.negMaxRGB[0]=s.getUint8(c),c++,f.negMaxRGB[1]=s.getUint8(c),c++,f.negMaxRGB[2]=s.getUint8(c),c++),f.enableSMPColor=s.getUint8(c),c++,r>=4&&(f.lut=u()),f.colorAlpha=s.getFloat32(c,!0),c+=4),f.name=u();const d=new Float32Array(t,c,a);l.set(d,h*a),c+=a*4}return l}static readSTC(t,i){const n=new DataView(t),s=n.getInt32(8,!1);if(s!==i)throw new Error("Overlay has "+s+" vertices, expected "+i);let r=12+s*4;const a=n.getUint32(r,!1);r+=4;const o=new Float32Array(a*s);for(let l=0;l<a*s;l++)o[l]=n.getFloat32(r,!1),r+=4;return o}static isCurv(t){const i=new DataView(t),n=i.getUint8(0),s=i.getUint8(1),r=i.getUint8(2);return n!==255||s!==255||r!==255?(ml.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),!1):!0}static readCURV(t,i){const n=new DataView(t),s=n.getUint8(0),r=n.getUint8(1),a=n.getUint8(2),o=n.getUint32(3,!1),l=n.getUint32(11,!1);if((s!==255||r!==255||a!==255)&&ml.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),i!==o)throw new Error("CURV file has different number of vertices ( "+o+")than mesh ("+i+")");if(t.byteLength<15+4*o*l)throw new Error("CURV file smaller than specified");const c=new Float32Array(l*o);let u=15;for(let g=0;g<l*o;g++)c[g]=n.getFloat32(u,!1),u+=4;let h=c[0],f=c[0];for(let g=0;g<c.length;g++)h=Math.min(h,c[g]),f=Math.max(f,c[g]);const d=1/(f-h);for(let g=0;g<c.length;g++)c[g]=1-(c[g]-h)*d;return c}static readANNOT(t,i,n=!1){const s=new DataView(t),r=s.getUint32(0,!1),a=this.decimateLayerVertices(r,i);if(i!==a)throw new Error("ANNOT file has different number of vertices than mesh");if(t.byteLength<4+8*r)throw new Error("ANNOT file smaller than specified");let o=0;const l=new Uint32Array(r);for(let x=0;x<r;x++){const y=s.getUint32(o+=4,!1);l[y]=s.getUint32(o+=4,!1)}if(!n)return l;let c=0;try{c=s.getInt32(o+=4,!1)}catch{return l}if(c!==1||s.getInt32(o+=4,!1)>0)return l;const f=s.getInt32(o+=4,!1),d=s.getInt32(o+=4,!1);o+=d;const g=s.getInt32(o+=4,!1);if(g<1)return l;const m={R:Array(f).fill(0),G:Array(f).fill(0),B:Array(f).fill(0),A:Array(f).fill(0),I:Array(f).fill(0),labels:Array(f).fill("")};for(let x=0;x<g;x++){const y=s.getInt32(o+=4,!1),b=s.getInt32(o+=4,!1);o+=4;let E="";for(let R=0;R<b;R++){const D=s.getUint8(o++);if(D===0)break;E+=String.fromCharCode(D)}o-=4;const w=s.getInt32(o+=4,!1),S=s.getInt32(o+=4,!1),M=s.getInt32(o+=4,!1),T=s.getInt32(o+=4,!1);if(y<0||y>=f){P.warn("annot entry out of range");continue}m.R[y]=w,m.G[y]=S,m.B[y]=M,m.A[y]=T,m.I[y]=(T<<24)+(M<<16)+(S<<8)+w,m.labels[y]=E}const A=new Float32Array(r);A.fill(-1);let p=0;for(let x=0;x<i;x++){const y=l[x];for(let b=0;b<f;b++)if(m.I[b]===y){A[x]=b;break}A[x]<0&&(p++,A[x]=0)}p>0&&P.error(`annot vertex colors do not match ${p} of ${r} vertices.`);for(let x=0;x<f;x++)m.I[x]=x;const v=Ve.makeLabelLut(m);return{scalars:A,colormapLabel:v}}static readNV(t){const i=t.byteLength,n=new Uint8Array(t);let s=0;function r(){for(;s<i&&n[s]===10;)s++;const f=s;for(;s<i&&n[s]!==10;)s++;return s++,s-f<1?"":new TextDecoder().decode(t.slice(f,s-1))}let a=0,o=0,l=0,c=0,u,h;for(;s<i;){const f=r();if(f.startsWith("#"))continue;const d=f.trim().split(/\s+/);if(a<1){a=parseInt(d[0]),u=new Float32Array(a*3);continue}if(l<a*3){u[l]=parseFloat(d[0]),u[l+1]=parseFloat(d[1]),u[l+2]=parseFloat(d[2]),l+=3;continue}if(o<1){o=parseInt(d[0]),h=new Uint32Array(o*3);continue}if(c>=o*3)break;h[c+2]=parseInt(d[0])-1,h[c+1]=parseInt(d[1])-1,h[c+0]=parseInt(d[2])-1,c+=3}return{positions:u,indices:h}}static readASC(t){const i=t.byteLength,n=new Uint8Array(t);let s=0;function r(){for(;s<i&&n[s]===10;)s++;const d=s;for(;s<i&&n[s]!==10;)s++;return s++,s-d<1?"":new TextDecoder().decode(t.slice(d,s-1))}let a=r();a.startsWith("#!ascii")||P.warn("Invalid ASC mesh"),a=r();let o=a.trim().split(/\s+/);const l=parseInt(o[0]),c=parseInt(o[1]),u=new Float32Array(l*3);let h=0;for(let d=0;d<l;d++)a=r(),o=a.trim().split(/\s+/),u[h]=parseFloat(o[0]),u[h+1]=parseFloat(o[1]),u[h+2]=parseFloat(o[2]),h+=3;const f=new Uint32Array(c*3);h=0;for(let d=0;d<c;d++)a=r(),o=a.trim().split(/\s+/),f[h]=parseInt(o[0]),f[h+1]=parseInt(o[1]),f[h+2]=parseInt(o[2]),h+=3;return{positions:u,indices:f}}static readVTK(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const n=new Uint8Array(t);let s=0;function r(m=!0){if(m)for(;s<i&&n[s]===10;)s++;const A=s;for(;s<i&&n[s]!==10;)s++;return s++,s-A<1?"":new TextDecoder().decode(t.slice(A,s-1))}let a=r();if(!a.startsWith("# vtk DataFile"))throw new Error("Invalid VTK mesh");if(a=r(!1),a=r(),a.startsWith("ASCII"))return At.readTxtVTK(t);if(!a.startsWith("BINARY"))throw new Error("Invalid VTK image, expected ASCII or BINARY "+a);if(a=r(),!a.includes("POLYDATA"))throw new Error("Only able to read VTK POLYDATA "+a);a=r(),(!a.includes("POINTS")||!a.includes("double")&&!a.includes("float"))&&P.warn("Only able to read VTK float or double POINTS"+a);const o=a.includes("double");let l=a.trim().split(/\s+/);const u=parseInt(l[1])*3,h=new Float32Array(u),f=new DataView(t);if(o)for(let m=0;m<u;m++)h[m]=f.getFloat64(s,!1),s+=8;else for(let m=0;m<u;m++)h[m]=f.getFloat32(s,!1),s+=4;a=r(),l=a.trim().split(/\s+/);const d=[];if(l[0].includes("LINES")){const m=parseInt(l[1]),A=s;if(a=r(),a.startsWith("OFFSETS")){let y=!1;a.includes("int64")&&(y=!0);const b=new Uint32Array(m);if(y){let w=!1;for(let S=0;S<m;S++){let M=f.getInt32(s,!1);M!==0&&(w=!0),s+=4,M=f.getInt32(s,!1),s+=4,b[S]=M}w&&P.warn("int32 overflow: JavaScript does not support int64")}else for(let w=0;w<m;w++){const S=f.getInt32(s,!1);s+=4,b[w]=S}return{pts:h,offsetPt0:b}}s=A;let p=0;const v=[],x=[];v.push(p);for(let y=0;y<m;y++){const b=f.getInt32(s,!1);s+=4,p+=b,v.push(p);for(let E=0;E<b;E++){const w=f.getInt32(s,!1)*3;s+=4,x.push(h[w+0]),x.push(h[w+1]),x.push(h[w+2])}}return{pts:Float32Array.from(x),offsetPt0:Uint32Array.from(v)}}else if(l[0].includes("TRIANGLE_STRIPS")){const m=parseInt(l[1]);for(let A=0;A<m;A++){const p=f.getInt32(s,!1)-2;s+=4;for(let v=0;v<p;v++)v%2?(d.push(f.getInt32(s+8,!1)),d.push(f.getInt32(s+4,!1)),d.push(f.getInt32(s,!1))):(d.push(f.getInt32(s,!1)),d.push(f.getInt32(s+4,!1)),d.push(f.getInt32(s+8,!1))),s+=4;s+=8}}else if(l[0].includes("POLYGONS")){const m=parseInt(l[1]),A=s,p=r();if(p.startsWith("OFFSETS")){let v=p.includes("int64");const x=new Uint32Array(m);let y=!1;for(let S=0;S<m;S++)v&&(f.getInt32(s,!1)!==0&&(y=!0),s+=4),x[S]=f.getInt32(s,!1),s+=4;if(!Number.isSafeInteger(m)||m>=2147483648||y)throw new Error("values exceed 2GB limit");const b=r();if(!b.startsWith("CONNECTIVITY"))throw new Error("Expected CONNECTIVITY after OFFSETS");v=b.includes("int64");const E=x[m-1],w=new Uint32Array(E);for(let S=0;S<E;S++)v&&(s+=4),w[S]=f.getInt32(s,!1),s+=4;for(let S=0;S<m;S++){const M=S===0?0:x[S-1],T=x[S];for(let R=1;R<T-M-1;R++)d.push(w[M]),d.push(w[M+R]),d.push(w[M+R+1])}}else{s=A;for(let v=0;v<m;v++){const x=f.getInt32(s,!1)-2;if(v===0&&x>65535)throw new Error("Invalid VTK binary polygons using little-endian data (MRtrix)");s+=4;const y=f.getInt32(s,!1);s+=4;let b=f.getInt32(s,!1);s+=4;for(let E=0;E<x;E++){const w=f.getInt32(s,!1);s+=4,d.push(y,b,w),b=w}}}}else throw new Error("Unsupported binary VTK datatype "+l[0]);const g=new Uint32Array(d);return{positions:h,indices:g}}static readWRL(t){const i=new TextDecoder("utf-8").decode(t),n=/coord\s+Coordinate\s*\{\s*point\s*\[([\s\S]*?)\]/,s=/coordIndex\s*\[([\s\S]*?)\]/,r=/color\s+Color\s*\{\s*color\s*\[([\s\S]*?)\]/,a=n.exec(i),o=s.exec(i),l=r.exec(i);if(!a||!o)throw new Error("Invalid WRL file: Could not find vertices or indices.");const c=new Float32Array(a[1].trim().split(/[\s,]+/).map(Number));let u=null;if(l){u=new Float32Array(l[1].trim().split(/[\s,]+/).map(Number));const f=c.length/3;u.length!==f*3&&(console.warn(`Unexpected color count: expected ${f*3}, got ${u.length}`),u=null)}const h=new Uint32Array(o[1].trim().split(/[\s,]+/).map(Number).filter(f=>f!==-1));return{positions:c,indices:h,colors:u}}static readDFS(t){const i=new DataView(t),n=i.getUint32(0,!0),s=i.getUint16(4,!0);(n!==1599292996||s!==17740)&&P.warn("Not a little-endian brainsuite DFS mesh");const r=i.getUint32(12,!0),a=i.getUint32(24,!0),o=i.getUint32(28,!0),l=i.getUint32(48,!0);let c=r;const u=new Uint32Array(t,c,a*3);c+=a*3*4;const h=new Float32Array(t,c,o*3);for(let d=0;d<o*3;d+=3){const g=h[d];h[d]=h[d+1],h[d+1]=g}let f;return l>=0&&(f=new Float32Array(t,l,o*3)),{positions:h,indices:u,colors:f}}static async readMZ3(t,i=0){if(t.byteLength<20)throw new Error("File too small to be mz3: bytes = "+t.byteLength);let n=new DataView(t),s=t,r=n.getUint16(0,!0);if(r===35615||r===8075){const M=await ae.decompress(new Uint8Array(t));n=new DataView(M.buffer),r=n.getUint16(0,!0),s=M.buffer}const a=n.getUint16(2,!0),o=n.getUint32(4,!0);let l=n.getUint32(8,!0);const c=n.getUint32(12,!0);if(ml.debug("MZ3 magic %d attr %d face %d vert %d skip %d",r,a,o,l,c),r!==23117)throw new Error("Invalid MZ3 file");const u=(a&1)!==0,h=(a&2)!==0,f=(a&4)!==0;let d=(a&8)!==0;const g=(a&16)!==0,m=(a&32)!==0,A=(a&64)!==0;if(ml.debug(`isFace=${u} isVert=${h} isRGBA=${f} isSCALAR=${d} isDOUBLE=${g} isAOMAP=${m} isLOOKUP=${A}`),a>127)throw new Error("Unsupported future version of MZ3 file");let p=4;g&&(p=8);let v=0;if(i>0&&!u&&o<1&&!f&&(d=!0),d){const M=i||l,T=16+c+(u?o*12:0)+(h?M*12:0)+(f?M*4:0),R=Math.floor((s.byteLength-T)/p);l!==i&&R%i===0&&(l=i),v=Math.floor(R/l),v<1&&(P.warn("Corrupt MZ3: file reports NSCALAR but not enough bytes"),d=!1)}if(l<3&&i<3)throw new Error("Not a mesh MZ3 file (maybe scalar)");i>0&&i!==l&&P.warn("Layer has "+l+"vertices, but background mesh has "+i);let x=16+c;const y=new DataView(s);let b=null;if(u){b=new Uint32Array(o*3);for(let M=0;M<o*3;M++)b[M]=y.getUint32(x,!0),x+=4}let E=null;if(h){E=new Float32Array(l*3);for(let M=0;M<l*3;M++)E[M]=y.getFloat32(x,!0),x+=4}let w=null;if(f){w=new Float32Array(l*3);for(let M=0;M<l;M++){for(let T=0;T<3;T++)w[M*3+T]=y.getUint8(x++)/255;x++}}let S=new Float32Array;if(d&&v>0)if(g){const M=new Float64Array(v*l);for(let T=0;T<v*l;T++)M[T]=y.getFloat64(x,!0),x+=8;S=Float32Array.from(M)}else{S=new Float32Array(v*l);for(let M=0;M<v*l;M++)S[M]=y.getFloat32(x,!0),x+=4}if(i>0&&A&&d){const M=new TextDecoder("utf-8"),T=new Uint8Array(s,16,c),R=M.decode(T),D=JSON.parse(R),I=Ve.makeLabelLut(D);return{scalars:S,colormapLabel:I}}if(i>0&&f&&d){let M=S[0];for(let D=0;D<l;D++)M=Math.max(M,S[D]);const T={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let D=0;D<=M;D++)for(let I=0;I<l;I++)if(D===S[I]){const U=I*3;T.I.push(D),T.R.push(w[U]*255),T.G.push(w[U+1]*255),T.B.push(w[U+2]*255),T.A.push(255),T.labels.push(`${D}`);break}const R=Ve.makeLabelLut(T);return{scalars:S,colormapLabel:R}}return i>0?{scalars:S}:{positions:E,indices:b,scalars:S,colors:w}}static readPLY(t){const i=t.byteLength,n=new Uint8Array(t);let s=0;function r(){for(;s<i&&n[s]===10;)s++;const S=s;for(;s<i&&n[s]!==10;)s++;return s++,s-S<1?"":new TextDecoder().decode(t.slice(S,s-1))}let a=r();if(!a.startsWith("ply"))throw new Error("Not a valid PLY file");a=r();const o=a.includes("ascii");function l(S){if(S==="char"||S==="uchar"||S==="int8"||S==="uint8")return 1;if(S==="short"||S==="ushort"||S==="int16"||S==="uint16")return 2;if(S==="int"||S==="uint"||S==="int32"||S==="uint32"||S==="float"||S==="float32")return 4;if(S==="double")return 8;throw new Error("Unknown data type: "+S)}const c=a.includes("binary_little_endian");let u=0,h=!1,f=0,d=0,g=0,m=0,A=0,p=0,v=0;for(;s<i&&!a.startsWith("end_header");){if(a=r(),a.startsWith("comment"))continue;let S=a.split(/\s/);if(a.startsWith("element vertex"))for(u=parseInt(S[S.length-1]),a=r(),S=a.split(/\s/);a.startsWith("property");){const M=S[1];S[2]==="x"&&M.startsWith("double")?h=!0:S[2]==="x"&&!M.startsWith("float")&&P.error("Error: expect ply xyz to be float or double: "+a),f+=l(M),a=r(),S=a.split(/\s/)}if(a.startsWith("element face"))for(v=parseInt(S[S.length-1]),a=r(),S=a.split(/\s/);a.startsWith("property");){if(S[1]==="list")g=l(S[2]),m=l(S[3]),d+=g+3*m;else{const M=l(S[1]);d+=M,m===0&&(A+=M,p++)}a=r(),S=a.split(/\s/)}}if(o){v<1&&P.error(`Malformed ply format: faces ${v} `);const S=new Float32Array(u*3);let M=0;for(let D=0;D<u;D++){a=r();const I=a.split(/\s/);S[M]=parseFloat(I[0]),S[M+1]=parseFloat(I[1]),S[M+2]=parseFloat(I[2]),M+=3}let T=new Uint32Array(v*3),R=0;for(let D=0;D<v;D++){a=r();const I=a.split(/\s/),U=parseInt(I[p])-2;if(U<1)break;if(R+U*3>T.length){const k=new Uint32Array(T.length+T.length);k.set(T),T=k.slice()}const L=parseInt(I[p+1]);let V=parseInt(I[p+2]);for(let k=0;k<U;k++){const F=parseInt(I[p+3+k]);T[R+0]=L,T[R+1]=V,T[R+2]=F,V=F,R+=3}}return T.length!==R&&(T=T.slice(0,R)),{positions:S,indices:T}}(f<12||g<1||m<1||v<1)&&P.warn(`Malformed ply format: stride ${f} count ${g} iBytes ${m} iStrideBytes ${d} iPadBytes ${A} faces ${v}`);const x=new DataView(t);let y;if(s%4===0&&f===12&&c)y=new Float32Array(t,s,u*3),s+=u*f;else{y=new Float32Array(u*3);let S=0;for(let M=0;M<u;M++)h?(y[S]=x.getFloat64(s,c),y[S+1]=x.getFloat64(s+8,c),y[S+2]=x.getFloat64(s+16,c)):(y[S]=x.getFloat32(s,c),y[S+1]=x.getFloat32(s+4,c),y[S+2]=x.getFloat32(s+8,c)),S+=3,s+=f}const b=new Uint32Array(v*3);let E=!0,w=0;if(g===1&&m===4&&d===13)for(let S=0;S<v;S++){const M=x.getUint8(s);s+=g,M!==3&&(E=!1),b[w]=x.getUint32(s,c),s+=4,b[w+1]=x.getUint32(s,c),s+=4,b[w+2]=x.getUint32(s,c),s+=4,w+=3}else{let S=s;for(let M=0;M<v;M++){s=S+A;let T=0;g===1?T=x.getUint8(s):g===2?T=x.getUint16(s,c):g===4&&(T=x.getUint32(s,c)),s+=g,T!==3&&(E=!1);for(let R=0;R<3;R++)m===1?b[w]=x.getUint8(s):m===2?b[w]=x.getUint16(s,c):m===4&&(b[w]=x.getUint32(s,c)),w++,s+=m;S+=d}}return E||P.warn("Only able to read PLY meshes limited to triangles."),{positions:y,indices:b}}static readICO(t){const s=new TextDecoder("utf-8").decode(t).split(`
`);let r=s[0].trim().split(/\s+/);r.length>1&&P.warn("This is not a valid FreeSurfer ICO/TRI mesh.");const a=parseInt(r[0]),o=new Float32Array(a*3);let l=1;for(let h=0;h<a;h++){const f=s[l].trim().split(/\s+/);l++;let d=parseInt(f[0])-1;const g=parseFloat(f[1]),m=parseFloat(f[2]),A=parseFloat(f[3]);if(d<0||d>=a){P.error("ICO vertices corrupted");break}d*=3,o[d]=g,o[d+1]=m,o[d+2]=A}r=s[l].trim().split(/\s+/),l++;const c=parseInt(r[0]),u=new Uint32Array(c*3);for(let h=0;h<c;h++){const f=s[l].trim().split(/\s+/);l++;let d=parseInt(f[0])-1;const g=parseInt(f[1])-1,m=parseInt(f[2])-1,A=parseInt(f[3])-1;if(d<0||d>=c){P.error("ICO indices corrupted");break}d*=3,u[d]=g,u[d+1]=m,u[d+2]=A}for(let h=0;h<u.length;h+=3){const f=u[h];u[h]=u[h+1],u[h+1]=f}return{positions:o,indices:u}}static readGEO(t,i=!1){const r=new TextDecoder("utf-8").decode(t).split(`
`),a=r[0].trim().split(/\s+/),o=parseInt(a[0]);let l=parseInt(a[1]),c=parseInt(a[2]);const u=parseInt(a[3]);(o>1||u!==c*3)&&P.warn("Multi-part BYU/GEO header or not a triangular mesh.");const h=[];l*=3;let f=0,d=2;for(;f<l;){const v=r[d].trim().split(/\s+/);d++;for(let x=0;x<v.length&&(h.push(parseFloat(v[x])),f++,!(f>=l));x++);}const g=[];c*=3;let m=0;for(;m<c;){const v=r[d].trim().split(/\s+/);d++;for(let x=0;x<v.length&&(g.push(Math.abs(parseInt(v[x]))-1),m++,!(m>=c));x++);}if(i)for(let v=0;v<g.length;v+=3){const x=g[v];g[v]=g[v+1],g[v+1]=x}const A=new Float32Array(h),p=new Uint32Array(g);return{positions:A,indices:p}}static readOFF(t){const s=new TextDecoder("utf-8").decode(t).split(`
`),r=[],a=[];let o=0;s[o].includes("OFF")?o++:P.warn("File does not start with OFF");let l=s[o].trim().split(/\s+/);const c=parseInt(l[0]),u=parseInt(l[1]);o++;for(let d=0;d<c;d++)l=s[o].trim().split(/\s+/),r.push(parseFloat(l[0])),r.push(parseFloat(l[1])),r.push(parseFloat(l[2])),o++;for(let d=0;d<u;d++)l=s[o].trim().split(/\s+/),parseInt(l[0])!==3&&P.warn("Only able to read OFF files with triangular meshes"),a.push(parseInt(l[1])),a.push(parseInt(l[2])),a.push(parseInt(l[3])),o++;const h=new Float32Array(r),f=new Uint32Array(a);return{positions:h,indices:f}}static readOBJMNI(t){const s=new TextDecoder("utf-8").decode(t).trim().split(/\s*,\s*|\s+/);(s.length<1||s[0]!=="P")&&P.warn("This is not a valid MNI OBJ mesh.");let r=6;const a=parseInt(s[r++]),o=a*3,l=new Float32Array(o);for(let g=0;g<o;g++)l[g]=parseFloat(s[r++]);r+=o;const c=parseInt(s[r++]),u=parseInt(s[r++]);(c<1||u<0||u>2)&&P.warn("This is not a valid MNI OBJ mesh.");let h=1;u===1?h=c:u===1&&(h=a),r+=h*4,r+=c;const f=c*3,d=new Uint32Array(f);for(let g=0;g<f;g++)d[g]=parseInt(s[r++]);return{positions:l,indices:d}}static async readOBJ(t){const i=new Uint8Array(t,0,2);i[0]===31&&i[1]===139&&(t=await ae.decompressToBuffer(new Uint8Array(t)));const s=new TextDecoder("utf-8").decode(t);if(s[0]==="P")return this.readOBJMNI(t);const r=s.split(`
`),a=r.length,o=[],l=[];for(let d=0;d<a;d++){const g=r[d];if(g[0]==="v"&&g[1]===" "){const m=g.trim().split(/\s+/);o.push(parseFloat(m[1])),o.push(parseFloat(m[2])),o.push(parseFloat(m[3]))}if(g[0]==="f"){const m=g.trim().split(/\s+/),A=m.length-3;if(A<1)break;let p=m[1].split("/");const v=parseInt(p[0])-1;p=m[2].split("/");let x=parseInt(p[0])-1;for(let y=0;y<A;y++){p=m[3+y].split("/");const b=parseInt(p[0])-1;l.push(v),l.push(x),l.push(b),x=b}}}const c=new Float32Array(o),u=new Uint32Array(l);let h=u[0],f=u[0];for(let d=1;d<u.length;d++)u[d]<h&&(h=u[d]),u[d]>f&&(f=u[d]);if(f-h+1>c.length/3)throw new Error("Not a valid OBJ file");for(let d=0;d<u.length;d++)u[d]-=h;return{positions:c,indices:u}}static readFreeSurfer(t){const i=new Uint8Array(t);if(i[0]===35&&i[1]===33&&i[2]===97)return At.readASC(t);const n=new DataView(t),s=n.getUint32(0,!1),r=n.getUint32(4,!1);(s!==4294966883||r!==1919246708)&&ml.debug("Unable to recognize file type: does not appear to be FreeSurfer format.");let a=0;for(;n.getUint8(a)!==10;)a++;a+=2;let o=n.getUint32(a,!1);a+=4;let l=n.getUint32(a,!1);a+=4,o*=3;const c=new Float32Array(o);for(let d=0;d<o;d++)c[d]=n.getFloat32(a,!1),a+=4;l*=3;const u=new Uint32Array(l);for(let d=0;d<l;d++)u[d]=n.getUint32(a,!1),a+=4;const h=n.getUint32(a,!1);a+=4;let f=h===20;if(!f){const d=n.getUint32(a,!1);a+=4;const g=n.getUint32(a,!1);a+=4,f=h===2&&d===0&&g===20}if(!f)P.warn("Unknown FreeSurfer Mesh extension code.");else{const g=new TextDecoder().decode(t.slice(a)).trim().split(`
`);for(let m=0;m<g.length;m++){if(!g[m].startsWith("cras"))continue;const p=g[m].split("=")[1].trim().split(" ").map(Number),v=Math.floor(c.length/3);let x=0;for(let y=0;y<v;y++)c[x]+=p[0],x++,c[x]+=p[1],x++,c[x]+=p[2],x++}}return{positions:c,indices:u}}static async readSRF(t){const i=new Uint8Array(t);if(i[0]===35&&i[1]===33&&i[2]===97)return At.readASC(t);i[0]===31&&i[1]===139&&(t=(await ae.decompress(new Uint8Array(t))).buffer);const n=new DataView(t),s=n.getFloat32(0,!0),r=n.getUint32(8,!0),a=n.getUint32(12,!0),o=n.getFloat32(16,!0),l=n.getFloat32(20,!0),c=n.getFloat32(24,!0),u=new Float32Array(r*3);let h=28,f=1;for(let E=0;E<r;E++)u[f]=-n.getFloat32(h,!0)+o,f+=3,h+=4;f=2;for(let E=0;E<r;E++)u[f]=-n.getFloat32(h,!0)+l,f+=3,h+=4;f=0;for(let E=0;E<r;E++)u[f]=-n.getFloat32(h,!0)+c,f+=3,h+=4;h=28+4*6*r;const d=n.getFloat32(h,!0),g=n.getFloat32(h+4,!0),m=n.getFloat32(h+8,!0),A=n.getFloat32(h+16,!0),p=n.getFloat32(h+20,!0),v=n.getFloat32(h+24,!0);h+=8*4;const x=new Float32Array(r*3),y=new Uint32Array(t,h,r);f=0;for(let E=0;E<r;E++){const w=y[E];w>1056964608&&(x[f+0]=(w>>16&255)/255,x[f+1]=(w>>8&255)/255,x[f+2]=(w&255)/255),w===0&&(x[f+0]=d,x[f+1]=g,x[f+2]=m),w===1&&(x[f+0]=A,x[f+1]=p,x[f+2]=v),f+=3}h+=r*4;for(let E=0;E<r;E++){const w=n.getUint32(h,!0);h+=4+4*w}const b=new Uint32Array(a*3);for(let E=0;E<a*3;E++)b[E]=n.getInt32(h,!0),h+=4;return s!==4&&P.warn("Not valid SRF"),{positions:u,indices:b,colors:x}}static readTxtSTL(t){const s=new TextDecoder("utf-8").decode(t).split(`
`);if(!s[0].startsWith("solid"))throw new Error("Not a valid STL file");const r=[];for(let c=1;c<s.length;c++){if(!s[c].includes("vertex"))continue;const u=s[c].trim().split(/\s+/);for(let h=1;h<u.length;h++)r.push(parseFloat(u[h]))}const a=Math.floor(r.length/3);if(a*3!==r.length)throw new Error("Unable to parse ASCII STL file.");const o=new Float32Array(r),l=new Uint32Array(a);for(let c=0;c<a;c++)l[c]=c;return{positions:o,indices:l}}static readSTL(t){if(t.byteLength<134)throw new Error("File too small to be STL: bytes = "+t.byteLength);const i=new DataView(t);if(i.getUint32(0,!0)===1768714099)return At.readTxtSTL(t);const s=i.getUint32(80,!0),r=3*s;if(t.byteLength<84+s*50)throw new Error("STL file too small to store triangles = "+s);const a=new Uint32Array(r),o=new Float32Array(r*3);let l=96,c=0;for(let u=0;u<s;u++){for(let h=0;h<9;h++)o[c]=i.getFloat32(l,!0),c+=1,l+=4;l+=14}for(let u=0;u<r;u++)a[u]=u;return{positions:o,indices:a}}static decimateLayerVertices(t,i){if(t%i===0)return t;const n=12,s=Math.round(Math.log((t-2)/(n-2))/Math.log(4)),r=Math.round(Math.log((i-2)/(n-2))/Math.log(4)),a=Math.pow(4,s)*(n-2)+2,o=Math.pow(4,r)*(n-2)+2;return a!==t||o!==i?t:i}static async readNII2(t,i=0,n=""){let s=new Float32Array;const r=t.byteLength;let a=!0;const o=new DataView(t);let l=o.getUint16(0,a);if(l===469893120&&(a=!1,l=o.getUint16(0,a)),l!==540)throw new Error("Not a valid NIfTI-2 dataset");const c=Number(o.getBigInt64(168,a)),u=o.getFloat64(176,a),h=o.getFloat64(184,a);(u!==1||h!==0)&&P.warn("ignoring scale slope and intercept");const f=o.getUint32(504,a),d=o.getUint16(12,a);if(d!==2&&d!==4&&d!==8&&d!==16)throw new Error("Unsupported NIfTI datatype "+d);let g=1;const m=[1,1,1,1,1,1,1,1];for(let A=1;A<8;A++)m[A]=Math.max(Number(o.getBigInt64(16+A*8,a)),1),g*=m[A];if(f>=3e3&&f<=3099&&c>580){let A=function(){for(;M<r&&S[M]===10;)M++;const V=M;for(;M<r&&S[M]!==10;)M++;return M++,M-V<1?"":new TextDecoder().decode(t.slice(V,M-1)).trim()},p=function(){let V=A();if(!V.startsWith("<")||V.endsWith(">"))return V;for(;M<r&&!V.endsWith(">");)V+=A();return V},v=function(V,k=!1){const F=T.indexOf(V);if(F<0)return 1;const z=T.indexOf('"',F)+1,G=T.indexOf('"',z),X=T.slice(z,G);return k?X:parseInt(X)},x=0,y=0,b=0,E="",w=new Uint32Array;const S=new Uint8Array(t);let M=552,T;const R=m[5],D=new Float32Array(i*R);for(;M<r&&(T=p(),!T.includes("</CIFTI>"));)if(T.includes("<BrainModel")){const V=v("SurfaceNumberOfVertices="),k=v("BrainStructure=",!0).toUpperCase();if(V%i!==0)continue;let F=!1;if(n.includes("CORTEX")&&k.includes("CORTEX")&&(F=!0),!F||(F=!1,n.includes("LEFT")&&k.includes("LEFT")&&(F=!0),n.includes("RIGHT")&&k.includes("RIGHT")&&(F=!0),!F))continue;if(b=V,x=v("IndexOffset="),y=v("IndexCount="),E=k,T.includes("<VertexIndices>")||(T=p()),!T.startsWith("<VertexIndices>")||!T.endsWith("</VertexIndices>"))return P.warn("Unable to find CIfTI <VertexIndices>"),D;T=T.slice(15,-16);const z=T.trim().split(/\s+/);z.length<y&&P.error("Error parsing VertexIndices"),w=new Uint32Array(y);for(let G=0;G<y;G++)w[G]=parseInt(z[G])}if(b===0||w.length===0)return P.warn("Unable to find CIfTI structure that matches the mesh."),D;if(d!==16)return P.warn("Only able to read float32 CIfTI (only known datatype)."),D;const I=new Float32Array(y*R),U=c+R*x*4;for(let V=0;V<y*R;V++)I[V]=o.getFloat32(U+V*4,a);let L=0;for(let V=0;V<y;V++)for(let k=0;k<R;k++)D[w[V]+k*i]=I[L],L++;return P.debug("CIfTI diagnostics",b,E,x,y,x,n),D}if(g=this.decimateLayerVertices(g,i),g%i!==0)throw new Error("Vertices in layer ("+g+") is not a multiple of number of vertices ("+i+")");if(a)d===16?s=new Float32Array(t,c,g):d===8?s=new Int32Array(t,c,g):d===4&&(s=new Int16Array(t,c,g));else if(d===16){s=new Float32Array(g);for(let A=0;A<g;A++)s[A]=o.getFloat32(c+A*4,a)}else if(d===8){s=new Int32Array(g);for(let A=0;A<g;A++)s[A]=o.getInt32(c+A*4,a)}else if(d===4){s=new Int16Array(g);for(let A=0;A<g;A++)s[A]=o.getInt16(c+A*2,a)}return d===2&&(s=new Uint8Array(t,c,g)),s}static async readNII(t,i=0,n=""){let s=new Float32Array,r=!0,a=new DataView(t),o=a.getUint16(0,r);if(o===540||o===469893120)return At.readNII2(t,i,n);if(o===23553&&(r=!1,o=a.getUint16(0,r)),o!==348){const d=await ae.decompress(new Uint8Array(t));if(a=new DataView(d.buffer),t=d.buffer,o=a.getUint16(0,r),o===540||o===469893120)return At.readNII2(t,i,n);o===23553&&(r=!1,o=a.getUint16(0,r))}o!==348&&P.error("Not a valid NIfTI image.");const l=a.getFloat32(108,r),c=a.getFloat32(112,r),u=a.getFloat32(116,r);(c!==1||u!==0)&&P.warn("ignoring scale slope and intercept");const h=a.getUint16(70,r);if(h!==2&&h!==4&&h!==8&&h!==16)throw new Error("Unsupported NIfTI datatype "+h);let f=1;for(let d=1;d<8;d++){const g=a.getUint16(40+d*2,r);f*=Math.max(g,1)}if(f=this.decimateLayerVertices(f,i),f%i!==0)throw new Error("Vertices in layer ("+f+") is not a multiple of number of vertices ("+i+")");if(r)h===16?s=new Float32Array(t,l,f):h===8?s=new Int32Array(t,l,f):h===4&&(s=new Int16Array(t,l,f));else if(h===16){s=new Float32Array(f);for(let d=0;d<f;d++)s[d]=a.getFloat32(l+d*4,r)}else if(h===8){s=new Int32Array(f);for(let d=0;d<f;d++)s[d]=a.getInt32(l+d*4,r)}else if(h===4){s=new Int16Array(f);for(let d=0;d<f;d++)s[d]=a.getInt16(l+d*2,r)}return h===2&&(s=new Uint8Array(t,l,f)),s}static async readMGH(t,i=0,n=!1){let s=new DataView(t),r=t;if(s.getUint8(0)===31&&s.getUint8(1)===139){const w=await ae.decompress(new Uint8Array(t));r=new ArrayBuffer(w.byteLength),new Uint8Array(r).set(new Uint8Array(w)),s=new DataView(w.buffer)}const a=s.getInt32(0,!1),o=Math.max(1,s.getInt32(4,!1)),l=Math.max(1,s.getInt32(8,!1)),c=Math.max(1,s.getInt32(12,!1)),u=Math.max(1,s.getInt32(16,!1)),h=s.getInt32(20,!1);let f=284;const d=!1;(a!==1||h<0||h>4)&&P.warn("Not a valid MGH file");let g=o*l*c*u,m=[];if(g=this.decimateLayerVertices(g,i),g%i!==0)return P.warn("Vertices in layer ("+g+") is not a multiple of number of vertices ("+i+")"),m;if(h===3){m=new Float32Array(g);for(let w=0;w<g;w++)m[w]=s.getFloat32(f+w*4,d)}else if(h===1){m=new Int32Array(g);for(let w=0;w<g;w++)m[w]=s.getInt32(f+w*4,d)}else if(h===4){m=new Int16Array(g);for(let w=0;w<g;w++)m[w]=s.getInt16(f+w*2,d)}else h===0&&(m=new Uint8Array(t,f,g));if(!n)return m;let A=4;h===4&&(A=2),h===0&&(A=1),f+=A*g,f+=4*4;const p=1,v=2,x=20,y=30,b=r.byteLength;let E;for(;f<b-8;){const w=s.getInt32(f+=4,d);let S=0;switch(w){case y:S=s.getInt32(f+=4,d)-1;break;case x:case v:S=0;break;case p:S=0;{let M=s.getInt32(f+=4,d);if(M>0)return P.warn("unsupported CTABreadFromBinaryV1"),m;if(M=-M,M!==2)return P.warn("CTABreadFromBinary: unknown version"),m;const T=s.getInt32(f+=4,d);if(T<0)return P.warn("CTABreadFromBinaryV2: nentries was ",T),m;const R=s.getInt32(f+=4,d);f+=R;const D=s.getInt32(f+=4,d);if(D<0)return m;const I={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let U=0;U<D;U++){const L=s.getInt32(f+=4,d),V=s.getInt32(f+=4,d);let k=f+4,F="";for(let oe=0;oe<V;oe++){const ne=s.getUint8(k++);if(ne===0)break;F+=String.fromCharCode(ne)}f+=V;const z=s.getInt32(f+=4,d),G=s.getInt32(f+=4,d),X=s.getInt32(f+=4,d),le=255-s.getInt32(f+=4,d);I.I.push(L),I.R.push(z),I.G.push(G),I.B.push(X),I.A.push(le),I.labels.push(F)}E=Ve.makeLabelLut(I)}break;default:S=s.getInt32(f+=8,d)}f+=S}return{scalars:m,colormapLabel:E}}static readX3D(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be X3D: bytes = "+i);const n=new Uint8Array(t);let s=0;function r(){for(;s<i&&n[s]!==60;)s++;const x=s;for(;s<i&&n[s]!==62;)s++;const y=s;return new TextDecoder().decode(t.slice(x,y+1)).trim()}let a=r();function o(x){const y=a.indexOf(x+"=");if(y<0)return"";const b=a[y+x.length+1],E=a.indexOf(b,y)+1,w=a.indexOf(b,E);return a.slice(E,w)}function l(x){const y=a.indexOf(x+"=");if(y<0)return 1;const b=a[y+x.length+1],E=a.indexOf(b,y)+1,w=a.indexOf(b,E);let S=a.slice(E,w).trim();S=S.replace(/,\s*$/,"");const M=S.trim().split(/\s*,\s*|\s+/);if(M.length<2)return parseFloat(S);let T=new Array(M.length),R=0;for(let D=0;D<M.length;D++){const I=parseFloat(M[D]);isFinite(I)&&(T[R]=I,R++)}return T=T.slice(0,R),T}a.includes("xml version")||P.warn("Not a X3D image");let c=[],u=[],h=[],f=[],d=[0,0,0,0],g=[0,0,0,0],m=[255,255,255,255],A=[255,255,255,255];const p={};function v(){if(!a.endsWith("/>"))if(a.startsWith("<Appearance>"))for(;s<i&&!a.endsWith("</Appearance>");)a+=r();else for(;s<i&&!a.endsWith("/>");)a+=r();const x=o("USE");if(x.length>1){x in p?m=p[x]:P.warn("Unable to find DEF for "+x);return}const y=l("diffuseColor");if(y.length<3)return;m[0]=Math.round(y[0]*255),m[1]=Math.round(y[1]*255),m[2]=Math.round(y[2]*255);const b=o("DEF");b.length<1||(p[b]=m)}for(;s<i;)if(a=r(),m=A.slice(),a.startsWith("<Transform")&&(d=l("translation"),g=l("rotation")),a.startsWith("<Appearance")&&(v(),A=m.slice()),a.startsWith("<Shape")){let x=1,y=1,b=[],E=[];for(;s<i&&(a=r(),a.startsWith("<Appearance")&&v(),!a.startsWith("</Shape"));){if(a.startsWith("<Sphere")&&(x=l("radius"),y=-1),a.startsWith("<Cylinder")&&(x=l("radius"),y=l("height")),a.startsWith("<IndexedFaceSet")&&(y=-2,b=l("coordIndex")),a.startsWith("<IndexedTriangleSet")&&(y=-7,b=l("index")),a.startsWith("<IndexedTriangleStripSet")&&(y=-3,b=l("index")),a.startsWith("<Coordinate")){E=l("point");const w=E.length%3;w!==0&&(E=E.slice(0,-w))}a.startsWith("<Color")&&(f=l("color")),a.startsWith("<Box")&&(y=-4,P.warn("Unsupported x3d shape: Box")),a.startsWith("<Cone")&&(y=-5,P.warn("Unsupported x3d shape: Cone")),a.startsWith("<ElevationGrid")&&(y=-6,P.warn("Unsupported x3d shape: ElevationGrid"))}if(!(y<-3&&y!==-7))if(y<-1){if(b.length<1||E.length<3||E.length===void 0){P.warn("Indexed mesh must specify indices and points");break}const w=Math.floor(c.length/3);let S=2;if(y===-7)u=[...u,...b];else if(y===-2){let R=0;for(;S<b.length;)b[S]>=0?(u.push(b[R]+w),u.push(b[S-1]+w),u.push(b[S-0]+w),S+=1):(S+=3,R=S-2)}else for(;S<b.length;)b[S]>=0?(u.push(b[S-2]+w),u.push(b[S-1]+w),u.push(b[S-0]+w),S+=1):S+=3;c=[...c,...E];const M=Math.floor(E.length/3),T=Array(M).fill(m).flat();if(f.length===M*3){let R=0,D=0;for(let I=0;I<M;I++){for(let U=0;U<3;U++)T[D]=Math.round(f[R]*255),R++,D++;D++}}h=[...h,...T]}else if(y<0)ia.makeColoredSphere(c,u,h,x,d,m);else{const w=Se();WV(w,g[3],[g[0],g[1],g[2]]);const S=Ye(0,-y*.5,0,1),M=Ye(0,+y*.5,0,1);bt(S,S,w),bt(M,M,w),Sx(S,S,d),Sx(M,M,d);const T=Q(S[0],S[1],S[2]),R=Q(M[0],M[1],M[2]);ia.makeColoredCylinder(c,u,h,T,R,x,m)}}return{positions:Float32Array.from(c),indices:Uint32Array.from(u),rgba255:Uint8Array.from(h)}}static async readGII(t,i=0){let n=t.byteLength;if(n<20)throw new Error("File too small to be GII: bytes = "+n);let s=new TextDecoder("ascii").decode(t);if(s[0].charCodeAt(0)===31){const D=await ae.decompress(new Uint8Array(t));t=D.buffer,s=new TextDecoder("ascii").decode(D.buffer)}let r=0;function a(){let D=!0,I=r;for(;D;){for(;r<n&&s[r]!=="<";)r++;for(I=r;r<n&&s[r]!==">";)r++;if(D=s[r-1]==="/",I+1<n&&s[I+1]==="/"&&(r+=1,D=!0),r>=n)break}const U=new TextDecoder().decode(t.slice(I+1,r)).trim(),L=U.split(" ")[0].trim(),V=r;let k=r,F=r;if(s[I+1]!=="?"&&s[I+1]!=="!"){const z="</"+L+">";k=s.indexOf(z,V),F=k+z.length-1}return{name:U,startPos:I,contentStartPos:V,contentEndPos:k,endPos:F}}let o=a();if(!o.name.startsWith("?xml"))throw new Error("readGII: Invalid XML file");for(;!o.name.startsWith("GIFTI")&&o.endPos<n;)o=a();if(!o.name.startsWith("GIFTI")||o.contentStartPos===o.contentEndPos)throw new Error("readGII: XML file does not include GIFTI tag");n=o.contentEndPos;let l=new Float32Array,c=new Uint32Array,u=new Float32Array,h="",f=!1,d=!1,g=!1,m=!1,A=[1,1,1];const p=[0,0,0];let v=0,x=!1,y=!1,b=0,E=!1;o.endPos=o.contentStartPos;let w="";function S(D,I=!1){const U=w.indexOf(D);if(U<0)return 1;const L=w.indexOf('"',U)+1,V=w.indexOf('"',L),k=w.slice(L,V);return I?parseFloat(k):parseInt(k)}function M(D){const I=w.indexOf(D);if(I<0)return"";const U=I+D.length,L=w.indexOf("]",U);return w.slice(U,L)}const T={R:[],G:[],B:[],A:[],I:[],labels:[]};for(;o.endPos<n&&o.name.length>1;){if(o=a(),o.name.startsWith("Label Key")&&(w=o.name,T.I.push(S("Key=")),T.R.push(Math.round(255*S("Red=",!0))),T.G.push(Math.round(255*S("Green=",!0))),T.B.push(Math.round(255*S("Blue=",!0))),T.A.push(Math.round(255*S("Alpha",!0))),w=new TextDecoder().decode(t.slice(o.contentStartPos+1,o.contentEndPos)).trim(),T.labels.push(M("<![CDATA["))),o.name.trim()==="Data"){if(g)continue;w=new TextDecoder().decode(t.slice(o.contentStartPos+1,o.contentEndPos)).trim();let D;if(y){const I=A[0]*A[1]*A[2],U=w.split(/\s+/);if(I!==U.length)throw new Error("Unable to parse ASCII GIfTI");if(v===2&&(v=8),v===32&&(v=16),v===8){D=new Int32Array(I);for(let L=0;L<I;L++)D[L]=parseInt(U[L])}if(v===16){D=new Float32Array(I);for(let L=0;L<I;L++)D[L]=parseFloat(U[L])}}else if(typeof Buffer>"u"){let I=function(U){const L=atob(U),V=L.length,k=new Uint8Array(V);for(let F=0;F<V;F++)k[F]=L.charCodeAt(F);return k};if(x){const U=I(w.slice());D=await ae.decompress(new Uint8Array(U))}else D=I(w.slice())}else if(x){const I=Buffer.from(w.slice(),"base64");D=await ae.decompress(new Uint8Array(I))}else D=Buffer.from(w.slice(),"base64");if(d){if(v!==16&&P.warn("expect positions as FLOAT32"),l=new Float32Array(D.buffer),m){const I=l.slice(),U=I.length/3;let L=0;for(let V=0;V<U;V++)for(let k=0;k<3;k++)l[L]=I[k*U+V],L++}}else if(f){if(v!==8&&P.warn("expect indices as INT32"),c=new Uint32Array(D.buffer),m){const I=c.slice(),U=I.length/3;let L=0;for(let V=0;V<U;V++)for(let k=0;k<3;k++)c[L]=I[k*U+V],L++}}else{let I=function(L,V){const k=L.length,F=new Float32Array(k+V.length);return F.set(L),F.set(V,k),F};b=A[0]*A[1]*A[2],i!==0&&b%i!==0&&P.warn("Number of vertices in scalar overlay ("+b+") does not match mesh ("+i+")");let U;if(v===2){const L=new Uint8Array(D.buffer);U=Float32Array.from(L)}else if(v===8){const L=new Int32Array(D.buffer);U=Float32Array.from(L)}else if(v===16)U=new Float32Array(D.buffer);else if(v===32){const L=new Float64Array(D.buffer);U=Float32Array.from(L)}else throw new Error(`Invalid dataType: ${v}`);u=I(u,U)}continue}if(o.name.trim()==="DataSpace"&&(w=new TextDecoder().decode(t.slice(o.contentStartPos+1,o.contentEndPos)).trim(),w.includes("NIFTI_XFORM_SCANNER_ANAT")&&(E=!0)),o.name.trim()==="MD"&&(w=new TextDecoder().decode(t.slice(o.contentStartPos+1,o.contentEndPos)).trim(),w.includes("AnatomicalStructurePrimary")&&w.includes("CDATA[")&&(h=M("<Value><![CDATA[").toUpperCase()),w.includes("VolGeom")&&w.includes("CDATA["))){let D=-1;if(w.includes("VolGeomC_R")&&(D=0),w.includes("VolGeomC_A")&&(D=1),w.includes("VolGeomC_S")&&(D=2),D<0)continue;p[D]=parseFloat(M("<Value><![CDATA["))}o.name.startsWith("DataArray")&&(w=o.name,A=[1,1,1],x=w.includes('Encoding="GZipBase64Binary"'),y=w.includes('Encoding="ASCII"'),f=w.includes('Intent="NIFTI_INTENT_TRIANGLE"'),d=w.includes('Intent="NIFTI_INTENT_POINTSET"'),g=w.includes('Intent="NIFTI_INTENT_VECTOR"'),m=w.includes('ArrayIndexingOrder="ColumnMajorOrder"'),w.includes('DataType="NIFTI_TYPE_UINT8"')&&(v=2),w.includes('DataType="NIFTI_TYPE_INT32"')&&(v=8),w.includes('DataType="NIFTI_TYPE_FLOAT32"')&&(v=16),w.includes('DataType="NIFTI_TYPE_FLOAT64"')&&(v=32),A[0]=S("Dim0="),A[1]=S("Dim1="),A[2]=S("Dim2="))}let R;if(T.I.length>1&&(R=Ve.makeLabelLut(T)),i>0)return{scalars:u,colormapLabel:R,anatomicalStructurePrimary:h};if(l.length>2&&!E&&(p[0]!==0||p[1]!==0||p[2]!==0)){b=Math.floor(l.length/3);let D=0;for(let I=0;I<b;I++)l[D]+=p[0],D++,l[D]+=p[1],D++,l[D]+=p[2],D++}return{positions:l,indices:c,scalars:u,colormapLabel:R,anatomicalStructurePrimary:h}}},m2=class{constructor(e,t,i,n,s){B(this,"text"),B(this,"style"),B(this,"points"),B(this,"anchor"),B(this,"onClick"),this.text=e,this.style=t,this.points=i,this.anchor=n||0,this.onClick=s}},Zk=()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256},a6=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.NII=1]="NII",e[e.DCM=2]="DCM",e[e.DCM_MANIFEST=3]="DCM_MANIFEST",e[e.MIH=4]="MIH",e[e.MIF=5]="MIF",e[e.NHDR=6]="NHDR",e[e.NRRD=7]="NRRD",e[e.MHD=8]="MHD",e[e.MHA=9]="MHA",e[e.MGH=10]="MGH",e[e.MGZ=11]="MGZ",e[e.V=12]="V",e[e.V16=13]="V16",e[e.VMR=14]="VMR",e[e.HEAD=15]="HEAD",e[e.DCM_FOLDER=16]="DCM_FOLDER",e[e.SRC=17]="SRC",e[e.FIB=18]="FIB",e[e.BMP=19]="BMP",e[e.ZARR=20]="ZARR",e[e.NPY=21]="NPY",e[e.NPZ=22]="NPZ",e))(a6||{}),pe=Object.freeze({...a6,parse:e=>{let t=0;switch(e.toUpperCase()){case"":case"DCM":t=2;break;case"TXT":t=3;break;case"FZ":case"GQI":case"QSDR":case"FIB":t=18;break;case"NII":t=1;break;case"MIH":t=4;break;case"MIF":t=5;break;case"NHDR":t=6;break;case"NRRD":t=7;break;case"MHD":t=8;break;case"MHA":t=9;break;case"MGH":t=10;break;case"MGZ":t=11;break;case"NPY":t=21;break;case"NPZ":t=22;break;case"SRC":t=17;break;case"V":t=12;break;case"V16":t=13;break;case"VMR":t=14;break;case"HEAD":t=15;break;case"PNG":case"BMP":case"GIF":case"JPG":case"JPEG":t=19;break;case"ZARR":t=20;break}return t}}),Ah=(e,t="",i="",n="gray",s=1,r=NaN,a=NaN,o=!0,l=.02,c=!1,u=!1,h="",f=0,d=pe.UNKNOWN,g=NaN,m=NaN,A=!0,p=!1,v=null)=>({url:e,urlImageData:t,name:i,colormap:n,colorMap:n,opacity:s,cal_min:r,cal_max:a,trustCalMinMax:o,percentileFrac:l,ignoreZeroVoxels:c,useQFormNotSForm:u,colormapNegative:h,imageType:d,cal_minNeg:g,cal_maxNeg:m,colorbarVisible:A,frame4D:f,alphaThreshold:p,colormapLabel:v});function qx(e,t=80){e=e.replace(/[`$]/g,"");const i=[],n=Math.min(t,e.length);for(let s=0;s<n;s++){const r=e.charCodeAt(s);i.push(r&255)}return i}function Sf(e,t=!1,i=!1){let r=!0;i&&(r=e.littleEndian);const a=new Uint8Array(348),o=new DataView(a.buffer);o.setInt32(0,348,r),o.setUint8(38,114),o.setUint8(39,e.dim_info);for(let c=0;c<8;c++)o.setUint16(40+2*c,e.dims[c],r);o.setFloat32(56,e.intent_p1,r),o.setFloat32(60,e.intent_p2,r),o.setFloat32(64,e.intent_p3,r),o.setInt16(68,e.intent_code,r),t?(o.setInt16(70,2,r),o.setInt16(72,8,r)):(o.setInt16(70,e.datatypeCode,r),o.setInt16(72,e.numBitsPerVoxel,r)),o.setInt16(74,e.slice_start,r);for(let c=0;c<8;c++)o.setFloat32(76+4*c,e.pixDims[c],r);t?(o.setFloat32(108,352,r),o.setFloat32(112,1,r),o.setFloat32(116,0,r)):(o.setFloat32(108,352,r),o.setFloat32(112,e.scl_slope,r),o.setFloat32(116,e.scl_inter,r)),o.setInt16(120,e.slice_end,r),o.setUint8(122,e.slice_code),e.xyzt_units===0?o.setUint8(123,10):o.setUint8(123,e.xyzt_units),t?(o.setFloat32(124,0,r),o.setFloat32(128,0,r)):(o.setFloat32(124,e.cal_max,r),o.setFloat32(128,e.cal_min,r)),o.setFloat32(132,e.slice_duration,r),o.setFloat32(136,e.toffset,r),a.set(qx(e.description),148),a.set(qx(e.aux_file),228),o.setInt16(252,e.qform_code,r),e.sform_code<1||e.sform_code<1?o.setInt16(254,1,r):o.setInt16(254,e.sform_code,r),o.setFloat32(256,e.quatern_b,r),o.setFloat32(260,e.quatern_c,r),o.setFloat32(264,e.quatern_d,r),o.setFloat32(268,e.qoffset_x,r),o.setFloat32(272,e.qoffset_y,r),o.setFloat32(276,e.qoffset_z,r);const l=e.affine.flat();for(let c=0;c<12;c++)o.setFloat32(280+4*c,l[c],r);return o.setInt32(344,3222382,!0),a}function Jk(e,t=!0){const i=Math.round(e.length/3),n=Q(0,0,0),s=_e(),r=_e();let a=0,o=1;t&&(o=2);for(let h=0;h<o;h++){a=0;for(let d=0;d<i;d++){const g=Q(e[d*3],e[d*3+1],e[d*3+2]);d===0&&(bx(s,g),bx(r,g)),Wp(s,s,g),Zp(r,r,g),He(g,g,n);const m=dc(g);a=Math.max(a,m)}if(h+1>=o)break;let f=!0;for(let d=0;d<3;++d)s[d]>n[d]&&(f=!1),r[d]<n[d]&&(f=!1);if(f)break;iP(n,s,r,.5),P.debug("origin moved inside volume: ",n)}const l=[s[0],s[1],s[2]],c=[r[0],r[1],r[2]];return{min:l,max:c,furthestVertexFromOrigin:a,origin:n}}function Kx(e){const t=[!1,!1,!1,!1],i=[!1,!1,!1,!1];for(let n=0;n<4;n++)for(let s=0;s<4;s++)if(isNaN(e[n][s]))return!1;for(let n=0;n<3;n++)for(let s=0;s<3;s++)e[n][s]!==0&&(t[n]=!0,i[s]=!0);for(let n=0;n<3;n++)if(!t[n]||!i[n])return!1;return!0}async function K0(e){const t=e.getReader(),{done:i,value:n}=await t.read();if(i)return t.releaseLock(),new ReadableStream({start(a){a.close()}});if(!n||n.length<2)return t.releaseLock(),new ReadableStream({start(a){n&&a.enqueue(n),a.close()}});const s=n[0]===31&&n[1]===139,r=new ReadableStream({async start(a){try{for(a.enqueue(n);;){const{done:o,value:l}=await t.read();if(o){a.close(),t.releaseLock();break}a.enqueue(l)}}catch(o){a.error(o),t.releaseLock()}}});return s?r.pipeThrough(new DecompressionStream("gzip")):r}function o6(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],n=2){const s=new ve;s.littleEndian=!0,s.dims=[3,1,1,1,0,0,0,0],s.dims[0]=Math.max(3,e.length);for(let a=0;a<e.length;a++)s.dims[a+1]=e[a];s.pixDims=[1,1,1,1,1,0,0,0];for(let a=0;a<e.length;a++)s.pixDims[a+1]=t[a];if(i.length===16){let a=0;for(let o=0;o<4;o++)for(let l=0;l<4;l++)s.affine[o][l]=i[a],a++}let r=8;return n===256||n===2?r=8:n===512||n===4?r=16:n===16||n===768||n===8||n===2304?r=32:n===64?r=64:P.warn("Unsupported NIfTI datatypeCode for header creation: "+n),s.datatypeCode=n,s.numBitsPerVoxel=r,s.scl_inter=0,s.scl_slope=1,s.sform_code=2,s.magic="n+1",s.vox_offset=352,s}function $k(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],n=2,s=new Uint8Array){const r=o6(e,t,i,n),a=Sf(r,!1);r.vox_offset=Math.max(352,a.length);const o=Sf(r,!1);if(s.length<1)return o;const l=Math.max(0,r.vox_offset-o.length),c=new Uint8Array(l),u=new Uint8Array(s.buffer,s.byteOffset,s.byteLength),h=r.vox_offset+u.length,f=new Uint8Array(h);return f.set(o,0),f.set(c,o.length),f.set(u,r.vox_offset),f}function l6(e,t=null){if(!e.hdr)throw new Error("NVImage header is not defined for toUint8Array");if(!e.img&&t===null)throw new Error("NVImage image data is not defined for toUint8Array");const i=t!==null,n=JSON.parse(JSON.stringify(e.hdr));n.vox_offset=Math.max(352,n.vox_offset),i&&(n.datatypeCode=2,n.numBitsPerVoxel=8,n.scl_slope=1,n.scl_inter=0);const s=Sf(n,i);let r;if(i){const h=t,f=e.permRAS;if(f&&(f[0]!==1||f[1]!==2||f[2]!==3)){P.debug("Reorienting drawing bytes back to native space for saving...");const d=e.hdr.dims,g=d[1]*d[2]*d[3],m=e.dimsRAS?e.dimsRAS[1]*e.dimsRAS[2]*e.dimsRAS[3]:g;if(h.length!==m)console.warn(`Drawing length (${h.length}) does not match expected RAS voxel count (${m}). Cannot reorient drawing reliably.`),r=h;else if(!e.img2RASstep||!e.img2RASstart||!e.dimsRAS)console.warn("Missing RAS transformation info (img2RASstep, img2RASstart, dimsRAS). Cannot reorient drawing reliably."),r=h;else{const A=e.img2RASstep,p=e.img2RASstart,v=e.dimsRAS,x=new Uint8Array(g);x.fill(0);const y=h;let b=0;for(let E=0;E<v[3];E++){const w=p[2]+E*A[2];for(let S=0;S<v[2];S++){const M=p[1]+S*A[1];for(let T=0;T<v[1];T++){const D=p[0]+T*A[0]+M+w;D>=0&&D<g?x[D]=y[b]:b<y.length&&console.warn(`Calculated native index ${D} is out of bounds [0..${g-1}] during drawing reorientation.`),b++}}}r=x}}else r=h}else{if(!e.img)throw new Error("NVImage image data is null when trying to save non-drawing.");r=new Uint8Array(e.img.buffer,e.img.byteOffset,e.img.byteLength)}const a=s.length,o=Math.max(0,n.vox_offset-a),l=new Uint8Array(o),c=n.vox_offset+r.length,u=new Uint8Array(c);return u.set(s,0),u.set(l,a),u.set(r,n.vox_offset),u}async function c6(e,t,i=null){const n=l6(e,i);if(t.toLowerCase().endsWith(".gz"))try{const r=await ae.compress(n,"gzip");return new Uint8Array(r)}catch(r){return P.error("Compression failed:",r),P.warn("Returning uncompressed data due to compression error."),n}else return n}async function ej(e,t="",i=null){const n=await c6(e,t,i);if(!t)return P.debug("saveToDisk: empty file name, returning data as Uint8Array rather than triggering download"),n;try{const s=new Blob([n.buffer],{type:"application/octet-stream"}),r=URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>URL.revokeObjectURL(r),100)}catch(s){P.error("Failed to trigger download:",s)}return n}function tj(e,t,i,n,s=0,r=!1){if(!e.hdr)throw new Error("getValue: NVImage header is not defined.");if(!r&&!e.img)throw new Error("getValue: NVImage image data is not defined.");if(r&&!e.imaginary)return P.warn("getValue: Attempted to read imaginary data, but none exists."),0;const a=e.hdr.dims[1],o=e.hdr.dims[2],l=e.hdr.dims[3],c=e.permRAS.slice();if(c[0]!==1||c[1]!==2||c[2]!==3){const v=Ye(t,i,n,1);bt(v,v,e.toRASvox),t=v[0],i=v[1],n=v[2]}t=Math.max(0,Math.min(Math.round(t),a-1)),i=Math.max(0,Math.min(Math.round(i),o-1)),n=Math.max(0,Math.min(Math.round(n),l-1)),s=Math.max(0,s);let u=t+i*a+n*a*o;if(e.hdr.datatypeCode===2304){if(!e.img)return 0;if(u*=4,u+2>=e.img.length)return P.warn(`getValue: Calculated index ${u} out of bounds for RGBA data.`),0;const v=e.img[u]*.2126+e.img[u+1]*.7152+e.img[u+2]*.0722;return Math.round(v)}if(e.hdr.datatypeCode===128){if(!e.img)return 0;if(u*=3,u+2>=e.img.length)return P.warn(`getValue: Calculated index ${u} out of bounds for RGB data.`),0;const v=e.img[u]*.2126+e.img[u+1]*.7152+e.img[u+2]*.0722;return Math.round(v)}const h=a*o*l,f=s*h,d=u+f,g=r?e.imaginary:e.img;if(d<0||d>=g.length)return 0;const m=g[d],A=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,p=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;return A*m+p}function ij(e,t=[-1,0,0],i=[0,0,0],n="same"){const s=[new Uint8Array,[0,0,0]];if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart)return P.error("getVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start)."),s;if(t=t.slice(0,3),i=i.slice(0,3),Math.min(...t)<0||Math.min(...i)<0)return P.warn("getVolumeData: Invalid start or end coordinates provided."),s;const r=e.dimsRAS.slice(1,4);for(let A=0;A<3;A++)if(t[A]=Math.max(0,Math.min(Math.round(t[A]),r[A]-1)),i[A]=Math.max(0,Math.min(Math.round(i[A]),r[A]-1)),i[A]<t[A]){const p=i[A];i[A]=t[A],t[A]=p}const a=[i[0]-t[0]+1,i[1]-t[1]+1,i[2]-t[2]+1],o=a[0]*a[1]*a[2];if(o<=0)return P.warn("getVolumeData: Calculated slab size is zero or negative."),s;let l=e.img.constructor;n==="uint8"?l=Uint8Array:n==="int16"?l=Int16Array:n==="uint16"?l=Uint16Array:n==="float32"||n==="scaled"||n==="normalized"||n==="windowed"?l=Float32Array:n==="float64"?l=Float64Array:n!=="same"&&P.warn(`getVolumeData: Unsupported dataType '${n}'. Using 'same'.`);let c;try{c=new l(o)}catch(A){return P.error(`getVolumeData: Failed to create output array for dataType '${n}'.`,A),s}const u=e.img2RASstep,h=e.img2RASstart,f=e.img;let d=0;for(let A=t[2];A<=i[2];A++){const p=h[2]+A*u[2];for(let v=t[1];v<=i[1];v++){const x=h[1]+v*u[1];for(let y=t[0];y<=i[0];y++){const E=h[0]+y*u[0]+x+p;let w=0;E>=0&&E<f.length&&(w=f[E]),c[d++]=w}}}const g=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,m=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;if(n==="scaled"||n==="normalized"||n==="windowed"){c instanceof Float32Array||(P.warn(`getVolumeData: Converting output to Float32 for scaling type '${n}'.`),c=Float32Array.from(c));for(let A=0;A<c.length;A++)c[A]=c[A]*g+m}if(n==="normalized"||n==="windowed"){let A=e.cal_min,p=e.cal_max;n==="normalized"&&(A=e.global_min,p=e.global_max);const v=p-A,x=v===0?0:1/v;for(let y=0;y<c.length;y++)c[y]=(c[y]-A)*x,c[y]=Math.max(0,Math.min(c[y],1))}return[c,a]}function nj(e,t=[-1,0,0],i=[0,0,0],n=new Uint8Array){if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart){P.error("setVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start).");return}if(n.length<1){P.warn("setVolumeData: Input slabData is empty.");return}if(t=t.slice(0,3),i=i.slice(0,3),Math.min(...t)<0||Math.min(...i)<0){P.warn("setVolumeData: Invalid start or end coordinates provided.");return}const s=e.dimsRAS.slice(1,4);for(let h=0;h<3;h++)if(t[h]=Math.max(0,Math.min(Math.round(t[h]),s[h]-1)),i[h]=Math.max(0,Math.min(Math.round(i[h]),s[h]-1)),i[h]<t[h]){const f=i[h];i[h]=t[h],t[h]=f}const r=[i[0]-t[0]+1,i[1]-t[1]+1,i[2]-t[2]+1],a=r[0]*r[1]*r[2];if(a<=0){P.warn("setVolumeData: Calculated slab size is zero or negative.");return}if(n.length<a){P.error(`setVolumeData: Input slabData length (${n.length}) is less than the calculated slab size (${a}).`);return}const o=e.img2RASstep,l=e.img2RASstart,c=e.img;let u=0;for(let h=t[2];h<=i[2];h++){const f=l[2]+h*o[2];for(let d=t[1];d<=i[1];d++){const g=l[1]+d*o[1];for(let m=t[0];m<=i[0];m++){const p=l[0]+m*o[0]+g+f;p>=0&&p<c.length&&(c[p]=n[u]),u++}}}}var u6={};bd(u6,{readMgh:()=>rj});function sj(e,t,i){const n=t+i;let s=t;for(;s+12<=n;){const r=e.getInt32(s,!1),a=e.getInt32(s+8,!1);if(s+=12,r!==1){s+=a;continue}if(s+4>n)return"";const o=e.getInt32(s,!1);if(s+=4,o<=1||s+o>n)return"";const l=new Uint8Array(e.buffer,s,o);return new TextDecoder("utf-8").decode(l.slice(0,-1))}return""}async function rj(e,t){e.hdr||(P.warn("readMgh called before nvImage.hdr was initialized. Creating default."),e.hdr=new ve);const i=e.hdr;i.littleEndian=!1;let n=t,s=new DataView(n);if(n.byteLength>=2&&s.getUint8(0)===31&&s.getUint8(1)===139)try{n=await ae.decompressToBuffer(new Uint8Array(t)),s=new DataView(n)}catch(z){return P.error("Failed to decompress MGZ file.",z),null}if(n.byteLength<284)return P.error("File too small to be a valid MGH/MGZ header."),null;const r=s.getInt32(0,!1),a=s.getInt32(4,!1),o=s.getInt32(8,!1),l=s.getInt32(12,!1),c=s.getInt32(16,!1),u=s.getInt32(20,!1),h=s.getFloat32(30,!1),f=s.getFloat32(34,!1),d=s.getFloat32(38,!1),g=s.getFloat32(42,!1),m=s.getFloat32(46,!1),A=s.getFloat32(50,!1),p=s.getFloat32(54,!1),v=s.getFloat32(58,!1),x=s.getFloat32(62,!1),y=s.getFloat32(66,!1),b=s.getFloat32(70,!1),E=s.getFloat32(74,!1),w=s.getFloat32(78,!1),S=s.getFloat32(82,!1),M=s.getFloat32(86,!1);if(r!==1&&P.warn(`Unexpected MGH version: ${r}.`),a<=0||o<=0||l<=0)return P.error(`Invalid MGH dimensions: ${a}x${o}x${l}`),null;switch(u){case 0:i.numBitsPerVoxel=8,i.datatypeCode=2;break;case 4:i.numBitsPerVoxel=16,i.datatypeCode=4;break;case 1:i.numBitsPerVoxel=32,i.datatypeCode=8;break;case 3:i.numBitsPerVoxel=32,i.datatypeCode=16;break;default:return P.error(`Unsupported MGH data type: ${u}`),null}i.dims[1]=a,i.dims[2]=o,i.dims[3]=l,i.dims[4]=Math.max(1,c),i.dims[0]=i.dims[4]>1?4:3,i.pixDims[1]=Math.abs(h),i.pixDims[2]=Math.abs(f),i.pixDims[3]=Math.abs(d),i.pixDims[4]=0,i.sform_code=1,i.qform_code=0;const T=pi(g*i.pixDims[1],p*i.pixDims[2],y*i.pixDims[3],0,m*i.pixDims[1],v*i.pixDims[2],b*i.pixDims[3],0,A*i.pixDims[1],x*i.pixDims[2],E*i.pixDims[3],0,0,0,0,1),R=Ye(i.dims[1]/2,i.dims[2]/2,i.dims[3]/2,1),D=Cn();bt(D,R,T);const I=Q(w-D[0],S-D[1],M-D[2]);i.affine=[[T[0],T[1],T[2],I[0]],[T[4],T[5],T[6],I[1]],[T[8],T[9],T[10],I[2]],[0,0,0,1]],i.vox_offset=284,i.magic="n+1";const U=i.numBitsPerVoxel/8,V=a*o*l*i.dims[4]*U,k=n.byteLength-i.vox_offset;if(k<V)return P.error(`MGH image data size mismatch: expected ${V}, found ${k}`),null;if(k>V){P.warn(`MGH file has extra ${k-V} bytes after image data. Truncating.`);const z=i.vox_offset+V+20,G=n.byteLength-z;if(G>12){const X=sj(s,z,G),le=X.toLowerCase().endsWith("lut.txt");le&&(i.intent_code=1002),P.debug(`First tag 1 string: ${X} isLUT: ${le}`)}}return n.slice(i.vox_offset,i.vox_offset+V)}var h6={};bd(h6,{readNifti:()=>aj});async function aj(e,t){let i=t,n=null;try{if(i2(i)&&(P.debug(`Decompressing NIfTI file: ${e.name}`),i=await LP(i),P.debug(`Decompression complete for: ${e.name}`)),!i||i.byteLength===0)throw new Error("Buffer became invalid after decompression attempt.");if(e.hdr=await El(i),e.hdr===null)throw new Error(`Failed to read NIfTI header: ${e.name}`);if(e.hdr.cal_min===0&&e.hdr.cal_max===255&&e.hdr.datatypeCode!==2&&(P.debug(`Resetting suspicious cal_min/max (0/255) for non-uint8 NIfTI: ${e.name}`),e.hdr.cal_min=0,e.hdr.cal_max=0),n=jP(e.hdr,i),n===null)throw new Error(`nifti-reader-js readImage returned null for ${e.name}`);return n}catch(s){return P.error(`Error processing NIfTI file ${e.name}:`,s),e.hdr=null,null}}var f6={};bd(f6,{readNrrd:()=>oj});async function oj(e,t,i=null){e.hdr||(P.warn("readNrrd called before nvImage.hdr was initialized. Creating default."),e.hdr=new ve);const n=e.hdr;n.pixDims=[1,1,1,1,1,0,0,0];const s=t.byteLength;let r=null;const a=new Uint8Array(t);for(let E=1;E<s;E++)if(a[E-1]===10&&a[E]===10){const w=t.slice(0,E-1);r=new TextDecoder().decode(w),n.vox_offset=E+1;break}if(r===null)return P.error("readNrrd: could not extract txt"),null;const o=r.split(`
`);if(!o[0].startsWith("NRRD"))return P.error("Invalid NRRD image (magic signature missing)"),null;const l=o.length;let c=!1,u=!1,h=!1;const f=Ar(NaN,0,0,0,1,0,0,0,1),d=Q(0,0,0);let g=QV();for(let E=1;E<l;E++){let w=o[E];if((w.length===0||w[0]==="#")&&(w.startsWith("#")||w.trim().length===0))continue;w=w.toLowerCase();const S=w.split(":");if(S.length<2)continue;const M=S[0].trim();let T=S[1].trim();switch(T=T.replaceAll(")"," "),T=T.replaceAll("("," "),T=T.trim(),M){case"data file":h=!0;break;case"encoding":if(T.includes("raw"))c=!1;else if(T.includes("gz"))c=!0;else return P.error("Unsupported NRRD encoding"),null;break;case"type":switch(T){case"uchar":case"unsigned char":case"uint8":case"uint8_t":n.numBitsPerVoxel=8,n.datatypeCode=2;break;case"signed char":case"int8":case"int8_t":n.numBitsPerVoxel=8,n.datatypeCode=256;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":n.numBitsPerVoxel=16,n.datatypeCode=4;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":n.numBitsPerVoxel=16,n.datatypeCode=512;break;case"int":case"signed int":case"int32":case"int32_t":n.numBitsPerVoxel=32,n.datatypeCode=8;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":n.numBitsPerVoxel=32,n.datatypeCode=768;break;case"float":n.numBitsPerVoxel=32,n.datatypeCode=16;break;case"double":n.numBitsPerVoxel=64,n.datatypeCode=64;break;default:return P.error("Unsupported NRRD data type: "+T),null}break;case"spacings":{const R=T.split(/[ ,]+/);for(let D=0;D<R.length;D++)n.pixDims[D+1]=parseFloat(R[D])}break;case"sizes":{const R=T.split(/[ ,]+/);n.dims[0]=R.length;for(let D=0;D<R.length;D++)n.dims[D+1]=parseInt(R[D])}break;case"endian":T.includes("little")?n.littleEndian=!0:T.includes("big")&&(n.littleEndian=!1);break;case"space directions":{const R=T.split(/[ ,]+/);if(R.length===9)for(let D=0;D<9;D++)f[D]=parseFloat(R[D])}break;case"space origin":{const R=T.split(/[ ,]+/);R.length===3&&(d[0]=parseFloat(R[0]),d[1]=parseFloat(R[1]),d[2]=parseFloat(R[2]))}break;case"space units":T.includes("microns")&&(u=!0);break;case"space":T.includes("right-anterior-superior")||T.includes("ras")?g=Ar(1,0,0,0,1,0,0,0,1):T.includes("left-anterior-superior")||T.includes("las")?g=Ar(-1,0,0,0,1,0,0,0,1):T.includes("left-posterior-superior")||T.includes("lps")?g=Ar(-1,0,0,0,-1,0,0,0,1):P.warn("Unsupported NRRD space value:",T);break;default:P.warn("Unknown:",M);break}}if(!isNaN(f[0])){n.sform_code=2,u&&(JV(f,f,.001),d[0]*=.001,d[1]*=.001,d[2]*=.001),g[0]<0&&(d[0]=-d[0]),g[4]<0&&(d[1]=-d[1]),g[8]<0&&(d[2]=-d[2]),RC(f,g,f);const E=pi(f[0],f[3],f[6],d[0],f[1],f[4],f[7],d[1],f[2],f[5],f[8],d[2],0,0,0,1);if(!e.vox2mm)return null;const w=e.vox2mm([0,0,0],E),S=e.vox2mm([1,0,0],E);He(S,S,w);const M=e.vox2mm([0,1,0],E);He(M,M,w);const T=e.vox2mm([0,0,1],E);He(T,T,w),n.pixDims[1]=Ws(S),n.pixDims[2]=Ws(M),n.pixDims[3]=Ws(T),n.affine=[[E[0],E[1],E[2],E[3]],[E[4],E[5],E[6],E[7]],[E[8],E[9],E[10],E[11]],[0,0,0,1]]}let m=null;const A=h?i:t,p=h?0:n.vox_offset;if(h&&!A)return P.warn("Missing data: NRRD header describes detached data file but only one URL provided"),null;if(!A||p>=A.byteLength)return P.error(`NRRD data offset (${p}) invalid for buffer length (${(A==null?void 0:A.byteLength)??0})`),null;let v=A.slice(p);if(c)try{P.debug("Decompressing NRRD data..."),v=await ae.decompressToBuffer(new Uint8Array(v)),P.debug("Decompression complete.")}catch(E){return P.error("Failed to decompress NRRD data.",E),null}const x=n.numBitsPerVoxel/8,b=n.dims.slice(1,n.dims[0]+1).reduce((E,w)=>E*Math.max(1,w),1)*x;return v.byteLength<b?(P.error(`NRRD image data size mismatch: expected ${b}, found ${v.byteLength}`),null):(v.byteLength>b&&(P.warn(`NRRD has extra ${v.byteLength-b} bytes after expected image data. Truncating.`),v=v.slice(0,b)),m=v,n.datatypeCode?n.numBitsPerVoxel?m:(P.error("NRRD parsing failed to set numBitsPerVoxel."),null):(P.error("NRRD parsing failed to set datatypeCode."),null))}var It=class xh{constructor(t=null,i="",n="gray",s=1,r=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,h=!1,f="",d=0,g=pe.UNKNOWN,m=NaN,A=NaN,p=!0,v=null,x=0){B(this,"name"),B(this,"id"),B(this,"url"),B(this,"headers"),B(this,"_colormap"),B(this,"_opacity"),B(this,"percentileFrac"),B(this,"ignoreZeroVoxels"),B(this,"trustCalMinMax"),B(this,"colormapNegative"),B(this,"colormapLabel"),B(this,"colormapInvert"),B(this,"nFrame4D"),B(this,"frame4D"),B(this,"nTotalFrame4D"),B(this,"cal_minNeg"),B(this,"cal_maxNeg"),B(this,"colorbarVisible",!0),B(this,"modulationImage",null),B(this,"modulateAlpha",0),B(this,"series",[]),B(this,"nVox3D"),B(this,"oblique_angle"),B(this,"maxShearDeg"),B(this,"useQFormNotSForm"),B(this,"colormapType"),B(this,"pixDims"),B(this,"matRAS"),B(this,"pixDimsRAS"),B(this,"obliqueRAS"),B(this,"dimsRAS"),B(this,"permRAS"),B(this,"img2RASstep"),B(this,"img2RASstart"),B(this,"toRAS"),B(this,"toRASvox"),B(this,"frac2mm"),B(this,"frac2mmOrtho"),B(this,"extentsMinOrtho"),B(this,"extentsMaxOrtho"),B(this,"mm2ortho"),B(this,"hdr",null),B(this,"imageType"),B(this,"img"),B(this,"imaginary"),B(this,"v1"),B(this,"fileObject"),B(this,"dims"),B(this,"onColormapChange",()=>{}),B(this,"onOpacityChange",()=>{}),B(this,"mm000"),B(this,"mm100"),B(this,"mm010"),B(this,"mm001"),B(this,"cal_min"),B(this,"cal_max"),B(this,"robust_min"),B(this,"robust_max"),B(this,"global_min"),B(this,"global_max"),B(this,"urlImgData"),B(this,"isManifest"),B(this,"limitFrames4D"),this.init(t,i,n,s,r,a,o,l,c,u,h,f,d,g,m,A,p,v,x)}init(t=null,i="",n="",s=1,r=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,h=!1,f="",d=0,g=pe.UNKNOWN,m=NaN,A=NaN,p=!0,v=null,x=0,y=null){const b=n==="";if(b&&(n="gray"),this.name=i,this.imageType=g,this.id=_1(),this._colormap=n,this._opacity=s>1?1:s,this.percentileFrac=c,this.ignoreZeroVoxels=u,this.trustCalMinMax=l,this.colormapNegative=f,this.colormapLabel=v,this.frame4D=d,this.cal_minNeg=m,this.cal_maxNeg=A,this.colorbarVisible=p,this.colormapType=x,this.useQFormNotSForm=h,!t)return;if(b&&this.hdr&&this.hdr.intent_code===1002&&(n="random",this._colormap=n),this.hdr&&typeof this.hdr.magic=="number"&&(this.hdr.magic="n+1"),this.nFrame4D=1,this.hdr)for(let M=4;M<7;M++)this.hdr.dims[M]>1&&(this.nFrame4D*=this.hdr.dims[M]);if(this.frame4D=Math.min(this.frame4D,this.nFrame4D-1),this.nTotalFrame4D=this.nFrame4D,!this.hdr||!y)return;this.nVox3D=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const E=this.nVox3D*(this.hdr.numBitsPerVoxel/8),w=y.byteLength/E;w!==this.nFrame4D&&(w>0&&w*E===y.byteLength?P.debug("Loading the first "+w+" of "+this.nFrame4D+" volumes"):P.warn("This header does not match voxel data",this.hdr,y.byteLength),this.nFrame4D=w),(this.hdr.intent_code===1007||this.hdr.intent_code===2003)&&this.nFrame4D===3&&this.hdr.datatypeCode===16&&(y=this.float32V1asRGBA(new Float32Array(y)).buffer),(this.hdr.pixDims[1]===0||this.hdr.pixDims[2]===0||this.hdr.pixDims[3]===0)&&P.error("pixDims not plausible",this.hdr),(isNaN(this.hdr.scl_slope)||this.hdr.scl_slope===0)&&(this.hdr.scl_slope=1),isNaN(this.hdr.scl_inter)&&(this.hdr.scl_inter=0);let S=Kx(this.hdr.affine);if(h||!S||this.hdr.qform_code>this.hdr.sform_code){P.debug("spatial transform based on QForm");const M=this.hdr.quatern_b,T=this.hdr.quatern_c,R=this.hdr.quatern_d,D=Math.sqrt(1-(Math.pow(M,2)+Math.pow(T,2)+Math.pow(R,2))),I=this.hdr.pixDims[0]===0?1:this.hdr.pixDims[0],U=[[D*D+M*M-T*T-R*R,2*M*T-2*D*R,2*M*R+2*D*T],[2*M*T+2*D*R,D*D+T*T-M*M-R*R,2*T*R-2*D*M],[2*M*R-2*D*T,2*T*R+2*D*M,D*D+R*R-T*T-M*M]],L=this.hdr.affine;for(let V=0;V<3;V+=1)for(let k=0;k<3;k+=1)L[V][k]=U[V][k]*this.hdr.pixDims[k+1],k===2&&(L[V][k]*=I);L[0][3]=this.hdr.qoffset_x,L[1][3]=this.hdr.qoffset_y,L[2][3]=this.hdr.qoffset_z,this.hdr.affine=L}if(S=Kx(this.hdr.affine),!S){P.debug("Defective NIfTI: spatial transform does not make sense");let M=this.hdr.pixDims[1],T=this.hdr.pixDims[2],R=this.hdr.pixDims[3];(isNaN(M)||M===0)&&(M=1),(isNaN(T)||T===0)&&(T=1),(isNaN(R)||R===0)&&(R=1),this.hdr.pixDims[1]=M,this.hdr.pixDims[2]=T,this.hdr.pixDims[3]=R;const D=[[M,0,0,0],[0,T,0,0],[0,0,R,0],[0,0,0,1]];this.hdr.affine=D}if(this.hdr.datatypeCode!==128&&this.hdr.datatypeCode!==2304&&this.hdr.littleEndian!==Zk()&&this.hdr.numBitsPerVoxel>8){if(this.hdr.numBitsPerVoxel===16){const M=new Uint16Array(y);for(let T=0;T<M.length;T++){const R=M[T];M[T]=((R&255)<<8|R>>8&255)<<16>>16}}else if(this.hdr.numBitsPerVoxel===32){const M=new Uint32Array(y);for(let T=0;T<M.length;T++){const R=M[T];M[T]=(R&255)<<24|(R&65280)<<8|R>>8&65280|R>>24&255}}else if(this.hdr.numBitsPerVoxel===64){const M=this.hdr.numBitsPerVoxel/8,T=new Uint8Array(y);for(let R=0;R<T.length;R+=M){let D=M-1;for(let I=0;I<D;I++){const U=T[R+I];T[R+I]=T[R+D],T[R+D]=U,D--}}}}switch(this.hdr.datatypeCode){case 2:this.img=new Uint8Array(y);break;case 4:this.img=new Int16Array(y);break;case 16:this.img=new Float32Array(y);break;case 64:this.img=new Float64Array(y);break;case 128:this.img=new Uint8Array(y);break;case 512:this.img=new Uint16Array(y);break;case 2304:this.img=new Uint8Array(y);break;case 256:{const M=new Int8Array(y),T=M.length;this.img=new Int16Array(T);for(let R=0;R<T;R++)this.img[R]=M[R];this.hdr.datatypeCode=4,this.hdr.numBitsPerVoxel=16;break}case 1:{const M=this.hdr.dims[1]*this.hdr.dims[2]*Math.max(1,this.hdr.dims[3])*Math.max(1,this.hdr.dims[4]),T=new Uint8Array(y);this.img=new Uint8Array(M);const R=new Uint8Array(8);for(let I=0;I<8;I++)R[I]=Math.pow(2,I);let D=-1;for(let I=0;I<M;I++){const U=I%8;U===0&&D++,T[D]&R[U]&&(this.img[I]=1)}this.hdr.datatypeCode=2,this.hdr.numBitsPerVoxel=8;break}case 768:{const M=new Uint32Array(y),T=M.length;this.img=new Float64Array(T);for(let R=0;R<T-1;R++)this.img[R]=M[R];this.hdr.datatypeCode=64;break}case 8:{const M=new Int32Array(y),T=M.length;this.img=new Float64Array(T);for(let R=0;R<T-1;R++)this.img[R]=M[R];this.hdr.datatypeCode=64;break}case 1024:{const M=new BigInt64Array(y),T=M.length;this.img=new Float64Array(T);for(let R=0;R<T-1;R++)this.img[R]=Number(M[R]);this.hdr.datatypeCode=64;break}case 32:{const M=new Float32Array(y),T=Math.floor(M.length/2);this.imaginary=new Float32Array(T),this.img=new Float32Array(T);let R=0;for(let D=0;D<T-1;D++)this.img[D]=M[R],this.imaginary[D]=M[R+1],R+=2;this.hdr.datatypeCode=16;break}default:throw new Error("datatype "+this.hdr.datatypeCode+" not supported")}this.calculateRAS(),isNaN(a)||(this.hdr.cal_min=a),isNaN(o)||(this.hdr.cal_max=o),this.calMinMax()}static async new(t=null,i="",n="",s=1,r=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,h=!1,f="",d=0,g=pe.UNKNOWN,m=NaN,A=NaN,p=!0,v=null,x=0,y){const b=new xh,E=/(?:\.([^.]+))?$/;let w=E.exec(i)[1]||"";w=w.toUpperCase(),w==="GZ"&&(w=E.exec(i.slice(0,-3))[1],w=w.toUpperCase());let S=null;if(g===pe.UNKNOWN&&(g=pe.parse(w)),t instanceof ArrayBuffer&&t.byteLength>=2&&g===pe.DCM){const M=new Uint8Array(t);(M[0]===92&&M[1]===1||M[1]===92&&M[0]===1)&&(g=pe.NII)}switch(b.imageType=g,g){case pe.DCM_FOLDER:case pe.DCM_MANIFEST:case pe.DCM:return;case pe.FIB:[S,b.v1]=await b.readFIB(t);break;case pe.MIH:case pe.MIF:S=await b.readMIF(t,r);break;case pe.NHDR:case pe.NRRD:if(S=await f6.readNrrd(b,t),S===null)throw new Error(`Failed to parse NHDR/NRRD file ${i}`);break;case pe.MHD:case pe.MHA:S=await b.readMHA(t,r);break;case pe.MGH:case pe.MGZ:if(S=await u6.readMgh(b,t),S===null)throw new Error(`Failed to parse MGH/MGZ file ${i}`);break;case pe.SRC:S=await b.readSRC(t);break;case pe.V:S=b.readECAT(t);break;case pe.V16:S=b.readV16(t);break;case pe.VMR:S=b.readVMR(t);break;case pe.HEAD:S=await b.readHEAD(t,r);break;case pe.BMP:S=await b.readBMP(t);break;case pe.NPY:S=await b.readNPY(t);break;case pe.NPZ:S=await b.readNPZ(t);break;case pe.ZARR:S=await b.readZARR(t,y);break;case pe.NII:if(S=await h6.readNifti(b,t),S===null)throw new Error(`Failed to parse NIfTI file ${i}.`);break;default:throw new Error("Image type not supported")}return b.init(t,i,n,s,r,a,o,l,c,u,h,f,d,g,m,A,p,v,x,S),b}computeObliqueAngle(t){const i=ot(t);mi(i,t);const n=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),s=Math.max(Math.max(Math.abs(i[0]),Math.abs(i[1])),Math.abs(i[2]))/n,r=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),a=Math.max(Math.max(Math.abs(i[4]),Math.abs(i[5])),Math.abs(i[6]))/r,o=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),l=Math.max(Math.max(Math.abs(i[8]),Math.abs(i[9])),Math.abs(i[10]))/o,c=Math.min(Math.min(s,a),l);let u=Math.abs(Math.acos(c)*180/3.141592653);return u>.01?P.warn("Warning voxels not aligned with world space: "+u+` degrees from plumb.
`):u=0,u}float32V1asRGBA(t){t.length!==this.nVox3D*3&&P.warn("float32V1asRGBA() expects "+this.nVox3D*3+"voxels, got ",+t.length);const i=t.slice();this.hdr.datatypeCode=2304,this.nFrame4D=1;for(let l=4;l<7;l++)this.hdr.dims[l]=1;this.hdr.dims[0]=3;const n=new Uint8Array(this.nVox3D*4);let s=1;for(let l=0;l<this.nVox3D*3;l++)isNaN(i[l])||(s=Math.max(s,Math.abs(i[l])));const r=255/s,a=this.nVox3D*2;let o=0;for(let l=0;l<this.nVox3D;l++){const c=i[l],u=i[l+this.nVox3D],h=i[l+a];n[o]=Math.abs(c*r),n[o+1]=Math.abs(u*r),n[o+2]=Math.abs(h*r);const f=+(c>0)*1,d=+(u>0)*2,g=+(h>0)*4;let m=248+f+d+g;Math.abs(c)+Math.abs(u)+Math.abs(h)<.1&&(m=0),n[o+3]=m,o+=4}return n}loadImgV1(t=!1,i=!1,n=!1){let s=this.v1;if(!s&&this.nFrame4D===3&&this.img.constructor===Float32Array&&(s=this.img.slice()),!s)return P.warn("Image does not have V1 data"),!1;if(t)for(let r=0;r<this.nVox3D;r++)s[r]=-s[r];if(i)for(let r=this.nVox3D;r<2*this.nVox3D;r++)s[r]=-s[r];if(n)for(let r=2*this.nVox3D;r<3*this.nVox3D;r++)s[r]=-s[r];return this.img=this.float32V1asRGBA(s),!0}calculateOblique(){if(!this.matRAS)throw new Error("matRAS not defined");if(this.pixDimsRAS===void 0)throw new Error("pixDimsRAS not defined");if(!this.dimsRAS)throw new Error("dimsRAS not defined");this.oblique_angle=this.computeObliqueAngle(this.matRAS);const t=this.vox2mm([0,0,0],this.matRAS),i=this.vox2mm([1/this.pixDimsRAS[1],0,0],this.matRAS),n=this.vox2mm([0,1/this.pixDimsRAS[2],0],this.matRAS),s=this.vox2mm([0,0,1/this.pixDimsRAS[3]],this.matRAS);He(i,i,t),He(n,n,t),He(s,s,t);const r=pi(i[0],i[1],i[2],0,n[0],n[1],n[2],0,s[0],s[1],s[2],0,0,0,0,1);this.obliqueRAS=ot(r);const a=Math.abs(90-O0(i,n)*(180/Math.PI)),o=Math.abs(90-O0(i,s)*(180/Math.PI)),l=Math.abs(90-O0(n,s)*(180/Math.PI));this.maxShearDeg=Math.max(Math.max(a,o),l),this.maxShearDeg>.1&&P.warn("Warning: voxels are rhomboidal, maximum shear is %f degrees.",this.maxShearDeg);const c=Ye(this.dimsRAS[1],this.dimsRAS[2],this.dimsRAS[3],1),u=ot(this.matRAS);mi(u,u);const h=Ye(-.5,-.5,-.5,0);Ea(u,u,Q(h[0],h[1],h[2])),u[0]*=c[0],u[1]*=c[0],u[2]*=c[0],u[4]*=c[1],u[5]*=c[1],u[6]*=c[1],u[8]*=c[2],u[9]*=c[2],u[10]*=c[2],this.frac2mm=ot(u);const f=this.pixDimsRAS[1],d=this.pixDimsRAS[2],g=this.pixDimsRAS[3],m=ot(u);m[0]=f*c[0],m[1]=0,m[2]=0,m[4]=0,m[5]=d*c[1],m[6]=0,m[8]=0,m[9]=0,m[10]=g*c[2];const A=this.mm2vox([0,0,0],!0);m[12]=(-A[0]-.5)*f,m[13]=(-A[1]-.5)*d,m[14]=(-A[2]-.5)*g,this.frac2mmOrtho=ot(m),this.extentsMinOrtho=[m[12],m[13],m[14]],this.extentsMaxOrtho=[m[0]+m[12],m[5]+m[13],m[10]+m[14]],this.mm2ortho=Se(),ti(this.mm2ortho,r)}THD_daxes_to_NIFTI(t,i,n){const s=this.hdr;if(s===null)throw new Error("HDR is not set");s.sform_code=2;const r="xxyyzzg";let a=-1,o=-1,l=-1;const c=["x","y","z"];c[0]=r[n[0]],c[1]=r[n[1]],c[2]=r[n[2]];const u=t.slice(0,3),h=i.slice(0,3);for(let f=0;f<3;f++)c[f]==="x"?a=f:c[f]==="y"?o=f:l=f;a<0||o<0||l<0||a===o||a===l||o===l||(s.pixDims[1]=Math.abs(u[0]),s.pixDims[2]=Math.abs(u[1]),s.pixDims[3]=Math.abs(u[2]),s.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s.affine[0][a]=-u[a],s.affine[1][o]=-u[o],s.affine[2][l]=u[l],s.affine[0][3]=-h[a],s.affine[1][3]=-h[o],s.affine[2][3]=h[l])}SetPixDimFromSForm(){if(!this.hdr)throw new Error("hdr not defined");const t=this.hdr.affine,i=pi(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3]),n=this.vox2mm([0,0,0],i),s=this.vox2mm([1,0,0],i);He(s,s,n);const r=this.vox2mm([0,1,0],i);He(r,r,n);const a=this.vox2mm([0,0,1],i);He(a,a,n),this.hdr.pixDims[1]=Ws(s),this.hdr.pixDims[2]=Ws(r),this.hdr.pixDims[3]=Ws(a)}readECAT(t){this.hdr=new ve;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const n=new DataView(t),s=n.getInt32(0,!1),r=n.getInt16(50,!1);if(s!==1296127058||r<1||r>14)throw new Error("Not a valid ECAT file");let a=512,o=0;const l=[];let c=new Float32Array;for(;;){const u=n.getInt32(a,!1),h=n.getInt32(a+12,!1);if(u+h!==31)break;let f=a+20,d=0,g=0;for(;d<31&&(g=n.getInt32(f,!1),f+=16,g!==0);){d++;let m=g*512;const A=m-512,p=n.getUint16(A,!1);i.dims[1]=n.getUint16(A+4,!1),i.dims[2]=n.getUint16(A+6,!1),i.dims[3]=n.getUint16(A+8,!1);const v=n.getFloat32(A+26,!1);i.pixDims[1]=n.getFloat32(A+34,!1)*10,i.pixDims[2]=n.getFloat32(A+38,!1)*10,i.pixDims[3]=n.getFloat32(A+42,!1)*10,i.pixDims[4]=n.getUint32(A+46,!1)/1e3,l.push(i.pixDims[4]);const x=i.dims[1]*i.dims[2]*i.dims[3],y=new Float32Array(x);if(p===1)for(let E=0;E<x;E++)y[E]=n.getUint8(m)*v,m++;else if(p===6)for(let E=0;E<x;E++)y[E]=n.getUint16(m,!1)*v,m+=2;else if(p===7)for(let E=0;E<x;E++)y[E]=n.getUint32(m,!1)*v,m+=4;else P.warn("Unknown ECAT data type "+p);const b=c.slice(0);c=new Float32Array(b.length+y.length),c.set(b),c.set(y,b.length),o++}if(g===0)break;a+=512}if(i.dims[4]=o,i.pixDims[4]=l[0],o>1){i.dims[0]=4;let u=!1;for(let h=0;h<o;h++)l[h]!==l[0]&&(u=!0);u&&P.warn("Frame durations vary")}return i.sform_code=1,i.affine=[[-i.pixDims[1],0,0,(i.dims[1]-2)*.5*i.pixDims[1]],[0,-i.pixDims[2],0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,0,-i.pixDims[3],(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],i.numBitsPerVoxel=32,i.datatypeCode=16,c.buffer}readV16(t){this.hdr=new ve;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const n=new DataView(t);return i.dims[1]=n.getUint16(0,!0),i.dims[2]=n.getUint16(2,!0),i.dims[3]=n.getUint16(4,!0),2*i.dims[1]*i.dims[2]*i.dims[3]+6!==t.byteLength&&P.warn("This does not look like a valid BrainVoyager V16 file"),i.numBitsPerVoxel=16,i.datatypeCode=512,P.warn("Warning: V16 files have no spatial transforms"),i.affine=[[0,0,-i.pixDims[1],(i.dims[1]-2)*.5*i.pixDims[1]],[-i.pixDims[2],0,0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,-i.pixDims[3],0,(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],i.littleEndian=!0,t.slice(6)}async readNPY(t){function i(y){return{"|b1":1,"<i1":1,"<u1":1,"<i2":2,"<u2":2,"<i4":4,"<u4":4,"<f4":4,"<f8":8}[y]??1}function n(y){return{"|b1":2,"<i1":256,"<u1":2,"<i2":4,"<u2":512,"<i4":8,"<u4":768,"<f4":16,"<f8":64}[y]??16}const s=new DataView(t),r=[s.getUint8(0),s.getUint8(1),s.getUint8(2),s.getUint8(3),s.getUint8(4),s.getUint8(5)],a=[147,78,85,77,80,89];if(!r.every((y,b)=>y===a[b]))throw new Error("Not a valid NPY file: Magic number mismatch");const o=s.getUint16(8,!0),l=new TextDecoder("utf-8").decode(t.slice(10,10+o)),c=l.match(/'shape': \((.*?)\)/);if(!c)throw new Error("Invalid NPY header: Shape not found");const u=c[1].split(",").map(y=>y.trim()).filter(y=>y!=="").map(Number),h=l.match(/'descr': '([^']+)'/);if(!h)throw new Error("Invalid NPY header: Data type not found");const f=h[1],d=u.reduce((y,b)=>y*b,1),g=10+o,m=t.slice(g,g+d*i(f)),A=u.length>0?u[u.length-1]:1,p=u.length>1?u[u.length-2]:1,v=u.length>2?u[u.length-3]:1;this.hdr=new ve;const x=this.hdr;return x.dims=[3,A,p,v,0,0,0,0],x.pixDims=[1,1,1,1,1,0,0,0],x.affine=[[x.pixDims[1],0,0,-(x.dims[1]-2)*.5*x.pixDims[1]],[0,-x.pixDims[2],0,(x.dims[2]-2)*.5*x.pixDims[2]],[0,0,-x.pixDims[3],(x.dims[3]-2)*.5*x.pixDims[3]],[0,0,0,1]],x.numBitsPerVoxel=i(f)*8,x.datatypeCode=n(f),m}async readNPZ(t){const i=new r6(t);for(let n=0;n<i.entries.length;n++){const s=i.entries[n];if(s.fileName.toLowerCase().endsWith(".npy")){const r=await s.extract();return await this.readNPY(r.buffer)}}}async imageDataFromArrayBuffer(t){return new Promise((i,n)=>{const s=new Blob([t]),r=URL.createObjectURL(s),a=new Image;a.crossOrigin="Anonymous",a.src=r,a.onload=()=>{URL.revokeObjectURL(r);const o=document.createElement("canvas");o.width=a.width,o.height=a.height;const l=o.getContext("2d");if(!l){n(new Error("Failed to get 2D context"));return}l.drawImage(a,0,0),i(l.getImageData(0,0,a.width,a.height))},a.onerror=o=>{URL.revokeObjectURL(r),n(o)}})}async readBMP(t){const i=await this.imageDataFromArrayBuffer(t),{width:n,height:s,data:r}=i;this.hdr=new ve;const a=this.hdr;a.dims=[3,n,s,1,0,0,0,0],a.pixDims=[1,1,1,1,1,0,0,0],a.affine=[[a.pixDims[1],0,0,-(a.dims[1]-2)*.5*a.pixDims[1]],[0,-a.pixDims[2],0,(a.dims[2]-2)*.5*a.pixDims[2]],[0,0,-a.pixDims[3],(a.dims[3]-2)*.5*a.pixDims[3]],[0,0,0,1]],a.numBitsPerVoxel=8,a.datatypeCode=2304;let o=!0;for(let l=0;l<r.length;l+=4)if(r[l]!==r[l+1]||r[l]!==r[l+2]){o=!1;break}if(o){a.datatypeCode=2;const l=new Uint8Array(n*s);for(let c=0,u=0;c<r.length;c+=4,u++)l[u]=r[c];return l.buffer}return r.buffer}async readZARR(t,i){let{width:n,height:s,depth:r=1,data:a}=i??{},o=n*s*r*3,l=o===a.length;if(l||(o=n*s*r,r===3&&(l=!0,r=1)),o!==a.length)throw new Error(`Expected RGB ${n}×${s}×${r}×3 =  ${o}, but ZARR length ${a.length}`);this.hdr=new ve;const c=this.hdr;if(c.dims=[3,n,s,r,1,1,1,1],c.pixDims=[1,1,1,1,0,0,0,0],c.affine=[[c.pixDims[1],0,0,-(c.dims[1]-2)*.5*c.pixDims[1]],[0,-c.pixDims[2],0,(c.dims[2]-2)*.5*c.pixDims[2]],[0,0,-c.pixDims[3],(c.dims[3]-2)*.5*c.pixDims[3]],[0,0,0,1]],!l){if(c.numBitsPerVoxel=8,c.datatypeCode=2,a instanceof Uint8Array){const g=new ArrayBuffer(a.length);return new Uint8Array(g).set(a),g}return a}c.numBitsPerVoxel=24,c.datatypeCode=128;function u(g,m,A,p){const v=m*A,x=new Uint8Array(v*p*3),y=new Array(p);for(let w=0;w<p;w++)y[w]=v*3*w;let b=0,E=0;for(let w=0;w<v;w++){for(let S=0;S<p;S++)x[y[S]+E]=g[b++],x[y[S]+E+1]=g[b++],x[y[S]+E+2]=g[b++];E+=3}return x}const h=u(a,c.dims[1],c.dims[2],c.dims[3]),f=new ArrayBuffer(h.length);return new Uint8Array(f).set(h),f}readVMR(t){this.hdr=new ve;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const n=new DataView(t),s=n.getUint16(0,!0);s!==4&&P.warn("Not a valid version 4 VMR image"),i.dims[1]=n.getUint16(2,!0),i.dims[2]=n.getUint16(4,!0),i.dims[3]=n.getUint16(6,!0);const r=i.dims[1]*i.dims[2]*i.dims[3];if(s>=4){let a=8+r;const o=n.getUint32(a+88,!0);if(a=a+92,o>0){const l=t.byteLength;for(let c=0;c<o;c++){for(;a<l&&n.getUint8(a)!==0;)a++;for(a++,a+=4;a<l&&n.getUint8(a)!==0;)a++;a++;const u=n.getUint32(a,!0);a+=4;for(let h=0;h<u;h++)a+=4}}i.pixDims[1]=n.getFloat32(a+2,!0),i.pixDims[2]=n.getFloat32(a+6,!0),i.pixDims[3]=n.getFloat32(a+10,!0)}return P.warn("Warning: VMR spatial transform not implemented"),i.affine=[[0,0,-i.pixDims[1],(i.dims[1]-2)*.5*i.pixDims[1]],[-i.pixDims[2],0,0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,-i.pixDims[3],0,(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],P.debug(i),i.numBitsPerVoxel=8,i.datatypeCode=2,t.slice(8,8+r)}async readFIB(t){this.hdr=new ve;const i=this.hdr;i.littleEndian=!1,i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const n=await ae.readMatV4(t,!0);if(!("dimension"in n)||!("dti_fa"in n))throw new Error("Not a valid DSIstudio FIB file");const s="index0"in n&&"index1"in n&&"index2"in n&&"odf_vertices"in n;i.numBitsPerVoxel=32,i.datatypeCode=16,i.dims[1]=n.dimension[0],i.dims[2]=n.dimension[1],i.dims[3]=n.dimension[2],i.dims[4]=1,i.pixDims[1]=n.voxel_size[0],i.pixDims[2]=n.voxel_size[1],i.pixDims[3]=n.voxel_size[2],i.sform_code=1;const r=(i.dims[1]-1)*.5*i.pixDims[1],a=(i.dims[2]-1)*.5*i.pixDims[2],o=(i.dims[3]-1)*.5*i.pixDims[3];i.affine=[[i.pixDims[1],0,0,-r],[0,-i.pixDims[2],0,a],[0,0,i.pixDims[2],-o],[0,0,0,1]],i.littleEndian=!0;const l=i.dims[1]*i.dims[2]*i.dims[3],c=l*Math.ceil(i.numBitsPerVoxel/8),u=c*i.dims[4],h=new Uint8Array(new ArrayBuffer(l*4*3));if(s){const m=i.dims[1]*i.dims[2]*i.dims[3],A=new Float32Array(m),p=new Float32Array(m),v=new Float32Array(m),x=n.index0,y=n.odf_vertices;for(let b=0;b<m;b++){const E=x[b]*3;A[b]=y[E+0],p[b]=y[E+1],v[b]=-y[E+2]}h.set(new Uint8Array(A.buffer,A.byteOffset,A.byteLength),0*c),h.set(new Uint8Array(p.buffer,p.byteOffset,p.byteLength),1*c),h.set(new Uint8Array(v.buffer,v.byteOffset,v.byteLength),2*c)}"report"in n&&(i.description=new TextDecoder().decode(n.report.subarray(0,Math.min(79,n.report.byteLength))));const f=new Uint8Array(new ArrayBuffer(u)),d=Float32Array.from(n.dti_fa);if("mask"in n){let m=1;"dti_fa_slope"in n&&(m=n.dti_fa_slope[0]);let A=1;"dti_fa_inter"in n&&(A=n.dti_fa_inter[0]);const p=i.dims[1]*i.dims[2]*i.dims[3],v=n.mask,x=new Float32Array(p);let y=0;for(let b=0;b<p;b++)v[b]!==0&&(x[b]=d[y]*m+A,y++);return[x.buffer,new Float32Array(h.buffer)]}const g=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);return f.set(g,0),[f.buffer,new Float32Array(h.buffer)]}async readSRC(t){this.hdr=new ve;const i=this.hdr;i.littleEndian=!1,i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const n=await ae.readMatV4(t);if(!("dimension"in n)||!("image0"in n))throw new Error("Not a valid DSIstudio SRC file");let s=0,r=0;for(const[d,g]of Object.entries(n))if(d.startsWith("image")){if(s===0?r=g.length:r!==g.length&&(r=-1),g.constructor!==Uint16Array)throw new Error("DSIstudio SRC files always use Uint16 datatype");s++}if(r<1||s<1)throw new Error("SRC file not valid DSI Studio data. The image(s) should have the same length");i.numBitsPerVoxel=16,i.datatypeCode=512,i.dims[1]=n.dimension[0],i.dims[2]=n.dimension[1],i.dims[3]=n.dimension[2],i.dims[4]=s,i.dims[4]>1&&(i.dims[0]=4),i.pixDims[1]=n.voxel_size[0],i.pixDims[2]=n.voxel_size[1],i.pixDims[3]=n.voxel_size[2],i.sform_code=1;const a=(i.dims[1]-1)*.5*i.pixDims[1],o=(i.dims[2]-1)*.5*i.pixDims[2],l=(i.dims[3]-1)*.5*i.pixDims[3];i.affine=[[i.pixDims[1],0,0,-a],[0,-i.pixDims[2],0,o],[0,0,i.pixDims[2],-l],[0,0,0,1]],i.littleEndian=!0;const c=i.dims[1]*i.dims[2]*i.dims[3]*(i.numBitsPerVoxel/8),u=c*i.dims[4],h=new Uint8Array(new ArrayBuffer(u));let f=0;for(let d=0;d<s;d++){const g=n[`image${d}`],m=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);h.set(m,f),f+=c}return"report"in n&&(i.description=new TextDecoder().decode(n.report.subarray(0,Math.min(79,n.report.byteLength)))),h.buffer}async readHEAD(t,i){this.hdr=new ve;const n=this.hdr;n.dims[0]=3,n.pixDims=[1,1,1,1,1,0,0,0];let s=[0,0,0],r=[0,0,0],a=[1,1,1];const l=new TextDecoder().decode(t).split(/\r?\n/),c=(t.byteLength+8)%16,u=t.byteLength+(16-c);P.debug(t.byteLength,"len",u);const h=new ArrayBuffer(u);new Uint8Array(h).set(new Uint8Array(t));const f=new GC(u+8,42,h,!0);n.addExtension(f),n.extensionCode=42,n.extensionFlag[0]=1,n.extensionSize=u+8;const d=l.length;let g=0,m=!1;for(;g<d;){let p=l[g];if(g++,!p.startsWith("type"))continue;const v=p.includes("integer-attribute"),x=p.includes("float-attribute");if(p=l[g],g++,!p.startsWith("name"))continue;let y=p.split("= ");const b=y[1];p=l[g],g++,y=p.split("= ");let E=parseInt(y[1]);if(!(E<1)){if(p=l[g],g++,y=p.trim().split(/\s+/),x||v){for(;y.length<E;){p=l[g],g++;const w=p.trim().split(/\s+/);y.push(...w)}for(let w=0;w<E;w++)y[w]=parseFloat(y[w])}switch(b){case"BYTEORDER_STRING":y[0].includes("LSB_FIRST")?n.littleEndian=!0:y[0].includes("MSB_FIRST")&&(n.littleEndian=!1);break;case"BRICK_TYPES":{n.dims[4]=E;const w=parseInt(y[0]);w===0?(n.numBitsPerVoxel=8,n.datatypeCode=2):w===1?(n.numBitsPerVoxel=16,n.datatypeCode=4):w===3?(n.numBitsPerVoxel=32,n.datatypeCode=16):P.warn("Unknown BRICK_TYPES ",w)}break;case"IJK_TO_DICOM_REAL":if(E<12)break;m=!0,n.sform_code=2,n.affine=[[-y[0],-y[1],-y[2],-y[3]],[-y[4],-y[5],-y[6],-y[7]],[y[8],y[9],y[10],y[11]],[0,0,0,1]];break;case"DATASET_DIMENSIONS":E=Math.max(E,3);for(let w=0;w<E;w++)n.dims[w+1]=y[w];break;case"ORIENT_SPECIFIC":s=y;break;case"ORIGIN":r=y;break;case"DELTA":a=y;break;case"TAXIS_FLOATS":n.pixDims[4]=y[0];break;default:P.warn("Unknown:",b)}}}m?this.SetPixDimFromSForm():this.THD_daxes_to_NIFTI(a,r,s);const A=n.numBitsPerVoxel/8*n.dims[1]*n.dims[2]*n.dims[3]*n.dims[4];if(!i)throw new Error("pairedImgData not set");return i.byteLength<A?await ae.decompressToBuffer(new Uint8Array(i)):i.slice(0)}async readMHA(t,i){const n=t.byteLength;if(n<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const s=new Uint8Array(t);let r=0;function a(m){return m===10||m===13}function o(){for(;r<n&&a(s[r]);)r++;const m=r;for(;r<n&&!a(s[r]);)r++;return r-m<2?"":new TextDecoder().decode(t.slice(m,r))}let l=o();this.hdr=new ve;const c=this.hdr;c.pixDims=[1,1,1,1,1,0,0,0],c.dims=[1,1,1,1,1,1,1,1],c.littleEndian=!0;let u=!1,h=!1;const f=Ar(NaN,0,0,0,1,0,0,0,1),d=Q(0,0,0);for(;l!=="";){let m=l.split(" ");if(m.length>2&&(m=m.slice(2)),l.startsWith("BinaryDataByteOrderMSB")&&m[0].includes("False")&&(c.littleEndian=!0),l.startsWith("BinaryDataByteOrderMSB")&&m[0].includes("True")&&(c.littleEndian=!1),l.startsWith("CompressedData")&&m[0].includes("True")&&(u=!0),l.startsWith("TransformMatrix"))for(let A=0;A<9;A++)f[A]=parseFloat(m[A]);if(l.startsWith("Offset"))for(let A=0;A<Math.min(m.length,3);A++)d[A]=parseFloat(m[A]);if(l.startsWith("ElementSpacing"))for(let A=0;A<m.length;A++)c.pixDims[A+1]=parseFloat(m[A]);if(l.startsWith("DimSize")){c.dims[0]=m.length;for(let A=0;A<m.length;A++)c.dims[A+1]=parseInt(m[A])}if(l.startsWith("ElementType"))switch(m[0]){case"MET_UCHAR":c.numBitsPerVoxel=8,c.datatypeCode=2;break;case"MET_CHAR":c.numBitsPerVoxel=8,c.datatypeCode=256;break;case"MET_SHORT":c.numBitsPerVoxel=16,c.datatypeCode=4;break;case"MET_USHORT":c.numBitsPerVoxel=16,c.datatypeCode=512;break;case"MET_INT":c.numBitsPerVoxel=32,c.datatypeCode=8;break;case"MET_UINT":c.numBitsPerVoxel=32,c.datatypeCode=768;break;case"MET_FLOAT":c.numBitsPerVoxel=32,c.datatypeCode=16;break;case"MET_DOUBLE":c.numBitsPerVoxel=64,c.datatypeCode=64;break;default:throw new Error("Unsupported MHA data type: "+m[0])}if(l.startsWith("ObjectType")&&!m[0].includes("Image")&&P.warn("Only able to read ObjectType = Image, not "+l),l.startsWith("ElementDataFile")){m[0]!=="LOCAL"&&(h=!0);break}l=o()}const g=Ar(c.pixDims[1],0,0,0,c.pixDims[2],0,0,0,c.pixDims[3]);for(RC(f,f,g),c.affine=[[-f[0],-f[3],-f[6],-d[0]],[-f[1],-f[4],-f[7],-d[1]],[f[2],f[5],f[8],d[2]],[0,0,0,1]];s[r]===10;)r++;return c.vox_offset=r,h&&i?u?await ae.decompressToBuffer(new Uint8Array(i.slice(0))):i.slice(0):u?await ae.decompressToBuffer(new Uint8Array(t.slice(c.vox_offset))):t.slice(c.vox_offset)}async readMIF(t,i){this.hdr=new ve;const n=this.hdr;n.pixDims=[1,1,1,1,1,0,0,0],n.dims=[1,1,1,1,1,1,1,1];let s=t.byteLength;if(s<20)throw new Error("File too small to be MIF: bytes = "+s);const r=new Uint8Array(t);r[0]===31&&r[1]===139&&(P.debug("MIF with GZ decompression"),t=await ae.decompressToBuffer(new Uint8Array(t)),s=t.byteLength);let a=0;function o(){for(;a<s&&r[a]===10;)a++;const D=a;for(;a<s&&r[a]!==10;)a++;return a++,a-D<1?"":new TextDecoder().decode(t.slice(D,a-1))}let l=o();if(!l.startsWith("mrtrix image"))throw new Error("Not a valid MIF file");const c=[];let u=!1,h=0,f=0,d=!1;for(l=o();a<s&&!l.startsWith("END");){let D=l.split(":");if(l=o(),D.length<2)break;const I=D[0];D=D[1].split(",");for(let U=0;U<D.length;U++)D[U]=D[U].trim();switch(I){case"dim":n.dims[0]=D.length;for(let U=0;U<D.length;U++)n.dims[U+1]=parseInt(D[U]);break;case"vox":for(let U=0;U<D.length;U++)n.pixDims[U+1]=parseFloat(D[U]),isNaN(n.pixDims[U+1])&&(n.pixDims[U+1]=0);break;case"layout":for(let U=0;U<D.length;U++)c.push(parseInt(D[U]));break;case"datatype":{const U=D[0];U.startsWith("Bit")?(u=!0,n.datatypeCode=2):U.startsWith("Int8")?n.datatypeCode=256:U.startsWith("UInt8")?n.datatypeCode=2:U.startsWith("Int16")?n.datatypeCode=4:U.startsWith("UInt16")?n.datatypeCode=512:U.startsWith("Int32")?n.datatypeCode=8:U.startsWith("UInt32")?n.datatypeCode=768:U.startsWith("Float32")?n.datatypeCode=16:U.startsWith("Float64")?n.datatypeCode=64:P.warn("Unsupported datatype "+U),U.includes("8")?n.numBitsPerVoxel=8:U.includes("16")?n.numBitsPerVoxel=16:U.includes("32")?n.numBitsPerVoxel=32:U.includes("64")&&(n.numBitsPerVoxel=64),n.littleEndian=!0,U.endsWith("LE")&&(n.littleEndian=!0),U.endsWith("BE")&&(n.littleEndian=!1)}break;case"transform":if(h>2||D.length!==4)break;n.affine[h][0]=parseFloat(D[0]),n.affine[h][1]=parseFloat(D[1]),n.affine[h][2]=parseFloat(D[2]),n.affine[h][3]=parseFloat(D[3]),h++;break;case"comments":n.description=D[0].substring(0,Math.min(79,D[0].length));break;case"RepetitionTime":f=parseFloat(D[0]);break;case"file":d=!D[0].startsWith(". "),d||(D=D[0].split(" "),n.vox_offset=parseInt(D[1]));break}}const g=n.dims[0];g>5&&P.warn("reader only designed for a maximum of 5 dimensions (XYZTD)");let m=1;for(let D=0;D<g;D++)m*=Math.max(n.dims[D+1],1);for(let D=0;D<3;D++)for(let I=0;I<3;I++)n.affine[D][I]*=n.pixDims[I+1];P.debug("mif affine:"+n.affine[0]),f>0&&(n.pixDims[4]=f),d&&!i&&P.warn("MIH header provided without paired image data");let A;if(i&&d)A=i.slice(0);else if(u){n.numBitsPerVoxel=8;const D=new Uint8Array(m),I=t.slice(n.vox_offset,n.vox_offset+Math.ceil(m/8)),U=new Uint8Array(I);let L=0;for(let V=0;V<m;V++){const k=V%8;D[V]=U[L]>>7-k&1,k===7&&L++}A=D.buffer}else A=t.slice(n.vox_offset,n.vox_offset+m*(n.numBitsPerVoxel/8));c.length!==n.dims[0]&&P.warn("dims does not match layout");let p=1;const v=[1,1,1,1,1],x=[!1,!1,!1,!1,!1];for(let D=0;D<c.length;D++)for(let I=0;I<c.length;I++)Math.abs(c[I])===D&&(v[I]=p,(c[I]<0||Object.is(c[I],-0))&&(x[I]=!0),p*=n.dims[I+1]);let y=ae.range(0,n.dims[1]-1,1);x[0]&&(y=ae.range(n.dims[1]-1,0,-1));for(let D=0;D<n.dims[1];D++)y[D]*=v[0];let b=ae.range(0,n.dims[2]-1,1);x[1]&&(b=ae.range(n.dims[2]-1,0,-1));for(let D=0;D<n.dims[2];D++)b[D]*=v[1];let E=ae.range(0,n.dims[3]-1,1);x[2]&&(E=ae.range(n.dims[3]-1,0,-1));for(let D=0;D<n.dims[3];D++)E[D]*=v[2];let w=ae.range(0,n.dims[4]-1,1);x[3]&&(w=ae.range(n.dims[4]-1,0,-1));for(let D=0;D<n.dims[4];D++)w[D]*=v[3];let S=ae.range(0,n.dims[5]-1,1);x[4]&&(S=ae.range(n.dims[5]-1,0,-1));for(let D=0;D<n.dims[5];D++)S[D]*=v[4];let M=0,T,R;switch(n.datatypeCode){case 256:T=new Int8Array(A),R=new Int8Array(m);break;case 2:T=new Uint8Array(A),R=new Uint8Array(m);break;case 4:T=new Int16Array(A),R=new Int16Array(m);break;case 512:T=new Uint16Array(A),R=new Uint16Array(m);break;case 8:T=new Int32Array(A),R=new Int32Array(m);break;case 768:T=new Uint32Array(A),R=new Uint32Array(m);break;case 16:T=new Float32Array(A),R=new Float32Array(m);break;case 64:T=new Float64Array(A),R=new Float64Array(m);break;default:throw new Error("unknown datatypeCode")}for(let D=0;D<n.dims[5];D++)for(let I=0;I<n.dims[4];I++)for(let U=0;U<n.dims[3];U++)for(let L=0;L<n.dims[2];L++)for(let V=0;V<n.dims[1];V++)R[M]=T[y[V]+b[L]+E[U]+w[I]+S[D]],M++;return R.buffer}calculateRAS(){if(!this.hdr)throw new Error("hdr not set");const t=this.hdr.affine,i=this.hdr,n=Ar(Math.abs(t[0][0]),Math.abs(t[0][1]),Math.abs(t[0][2]),Math.abs(t[1][0]),Math.abs(t[1][1]),Math.abs(t[1][2]),Math.abs(t[2][0]),Math.abs(t[2][1]),Math.abs(t[2][2])),s=[1,1,1];n[3]>n[0]&&(s[0]=2),n[6]>n[0]&&n[6]>n[3]&&(s[0]=3),s[1]=1,s[0]===1?n[4]>n[7]?s[1]=2:s[1]=3:s[0]===2?n[1]>n[7]?s[1]=1:s[1]=3:n[1]>n[4]?s[1]=1:s[1]=2,s[2]=6-s[1]-s[0];let r=[1,2,3];r[s[0]-1]=1,r[s[1]-1]=2,r[s[2]-1]=3;let a=pi(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],0,0,0,1);this.mm000=this.vox2mm([-.5,-.5,-.5],a),this.mm100=this.vox2mm([i.dims[1]-.5,-.5,-.5],a),this.mm010=this.vox2mm([-.5,i.dims[2]-.5,-.5],a),this.mm001=this.vox2mm([-.5,-.5,i.dims[3]-.5],a);const o=Se();XV(o,a);for(let A=0;A<3;A++)for(let p=0;p<3;p++)o[A*4+p]=a[A*4+r[p]-1];const l=[0,0,0];o[0]<0&&(l[0]=1),o[5]<0&&(l[1]=1),o[10]<0&&(l[2]=1),this.dimsRAS=[i.dims[0],i.dims[r[0]],i.dims[r[1]],i.dims[r[2]]],this.pixDimsRAS=[i.pixDims[0],i.pixDims[r[0]],i.pixDims[r[1]],i.pixDims[r[2]]],this.permRAS=r.slice();for(let A=0;A<3;A++)l[A]===1&&(this.permRAS[A]=-this.permRAS[A]);if(this.arrayEquals(r,[1,2,3])&&this.arrayEquals(l,[0,0,0])){this.toRAS=Se(),this.matRAS=ot(a),this.calculateOblique(),this.img2RASstep=[1,this.dimsRAS[1],this.dimsRAS[1]*this.dimsRAS[2]],this.img2RASstart=[0,0,0];return}NC(a),a[0+0*4]=1-l[0]*2,a[1+1*4]=1-l[1]*2,a[2+2*4]=1-l[2]*2,a[3+0*4]=(i.dims[r[0]]-1)*l[0],a[3+1*4]=(i.dims[r[1]]-1)*l[1],a[3+2*4]=(i.dims[r[2]]-1)*l[2];const c=Se();ti(c,a),As(c,c,o),this.matRAS=ot(c),a=pi(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),a[r[0]-1+0*4]=-l[0]*2+1,a[r[1]-1+1*4]=-l[1]*2+1,a[r[2]-1+2*4]=-l[2]*2+1,a[3+0*4]=l[0],a[3+1*4]=l[1],a[3+2*4]=l[2],this.toRAS=ot(a),a[3]=0,a[7]=0,a[11]=0,a[12]=0,(this.permRAS[0]===-1||this.permRAS[1]===-1||this.permRAS[2]===-1)&&(a[12]=i.dims[1]-1),a[13]=0,(this.permRAS[0]===-2||this.permRAS[1]===-2||this.permRAS[2]===-2)&&(a[13]=i.dims[2]-1),a[14]=0,(this.permRAS[0]===-3||this.permRAS[1]===-3||this.permRAS[2]===-3)&&(a[14]=i.dims[3]-1),this.toRASvox=ot(a),P.debug(this.hdr.dims),P.debug(this.dimsRAS);const u=this.hdr;r=this.permRAS;const h=[Math.abs(r[0]),Math.abs(r[1]),Math.abs(r[2])],f=[u.dims[h[0]],u.dims[h[1]],u.dims[h[2]]],d=[1,u.dims[1],u.dims[1]*u.dims[2]],g=[d[h[0]-1],d[h[1]-1],d[h[2]-1]],m=[0,0,0];for(let A=0;A<3;A++)r[A]<0&&(m[A]=g[A]*(f[A]-1),g[A]=-g[A]);this.img2RASstep=g,this.img2RASstart=m,this.calculateOblique()}async hdr2RAS(t=1){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.hdr)throw new Error("hdr undefined");const i=Sf({...this.hdr,vox_offset:352},!1),n=await El(i.buffer,!0);t===1?(n.dims[0]=3,n.dims[4]=1):t>1&&(n.dims[0]=4,n.dims[4]=t);const s=this.permRAS.slice();if(s[0]===1&&s[1]===2&&s[2]===3)return n;n.qform_code=0;for(let a=1;a<4;a++)n.dims[a]=this.dimsRAS[a];for(let a=0;a<this.pixDimsRAS.length;a++)n.pixDims[a]=this.pixDimsRAS[a];let r=0;for(let a=0;a<4;a++)for(let o=0;o<4;o++)n.affine[a][o]=this.matRAS[r],r++;return n}img2RAS(t=0){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.img)throw new Error("img undefined");if(!this.hdr)throw new Error("hdr undefined");const i=this.permRAS.slice();if(i[0]===1&&i[1]===2&&i[2]===3)return this.img;const n=this.hdr,s=n.dims[1]*n.dims[2]*n.dims[3];let r=t*s;(r+s>this.img.length||r<0)&&(r=0,P.warn(`img2RAS nVolume (${t}) out of bounds (${t}+1)×${s} > ${this.img.length}`));const a=this.img.slice(0,s),o=[Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2])],l=[n.dims[o[0]],n.dims[o[1]],n.dims[o[2]]],c=[1,n.dims[1],n.dims[1]*n.dims[2]],u=[c[o[0]-1],c[o[1]-1],c[o[2]-1]],h=[0,0,0];for(let d=0;d<3;d++)i[d]<0&&(h[d]=u[d]*(l[d]-1),u[d]=-u[d]);let f=0;for(let d=0;d<l[2];d++){const g=h[2]+d*u[2];for(let m=0;m<l[1];m++){const A=h[1]+m*u[1];for(let p=0;p<l[0];p++){const v=h[0]+p*u[0];a[f]=this.img[v+A+g+r],f++}}}return a}vox2mm(t,i){const n=ot(i);mi(n,n);const s=Ye(t[0],t[1],t[2],1);return bt(s,s,n),Q(s[0],s[1],s[2])}mm2vox(t,i=!1){if(!this.matRAS)throw new Error("matRAS undefined");const n=ot(this.matRAS),s=ot(n);mi(s,n),ti(s,s);const r=Ye(t[0],t[1],t[2],1);bt(r,r,s);const a=Q(r[0],r[1],r[2]);return i?a:[Math.round(a[0]),Math.round(a[1]),Math.round(a[2])]}arrayEquals(t,i){return Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((n,s)=>n===i[s])}setColormap(t){this._colormap=t,this.calMinMax(),this.onColormapChange&&this.onColormapChange(this)}setColormapLabel(t){this.colormapLabel=Ve.makeLabelLut(t)}async setColormapLabelFromUrl(t){this.colormapLabel=await Ve.makeLabelLutFromUrl(t)}get colormap(){return this._colormap}get colorMap(){return this._colormap}set colormap(t){this.setColormap(t)}set colorMap(t){this.setColormap(t)}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.onOpacityChange&&this.onOpacityChange(this)}calMinMax(t=Number.POSITIVE_INFINITY,i=!0){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=0,a=0,o=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const l=Math.floor(this.img.length/o);t>=l&&(t=this.frame4D),t=Math.min(t,l-1);const c=t*o;let u=[];if(i){const I=[Math.floor(.25*this.hdr.dims[1]),Math.floor(.25*this.hdr.dims[2]),Math.floor(.25*this.hdr.dims[3])],U=[this.hdr.dims[1]-2*I[0],this.hdr.dims[2]-2*I[1],this.hdr.dims[3]-2*I[2]],L=[U[0]+I[0],U[1]+I[1],U[2]+I[2]];o=U[0]*U[1]*U[2],u=new this.img.constructor(o);let V=-1,k=0;for(let F=0;F<this.hdr.dims[3];F++)for(let z=0;z<this.hdr.dims[2];z++)for(let G=0;G<this.hdr.dims[1];G++)V++,!(G<I[0]||z<I[1]||F<I[2])&&(G>=L[0]||z>=L[1]||F>=L[2]||(u[k]=this.img[V+c],k++))}else{u=new this.img.constructor(o);for(let D=0;D<o;D++)u[D]=this.img[D+c]}const h=u.constructor!==Float64Array&&u.constructor!==Float32Array&&this.ignoreZeroVoxels;if(h)for(let D=0;D<o;D++)n=Math.min(u[D],n),s=Math.max(u[D],s),u[D]===0&&r++;else for(let D=0;D<o;D++){if(isNaN(u[D])){a++;continue}u[D]===0&&(r++,this.ignoreZeroVoxels)||(n=Math.min(u[D],n),s=Math.max(u[D],s))}this.ignoreZeroVoxels&&n===s&&r>0&&(n=0);const f=this.intensityRaw2Scaled(n),d=this.intensityRaw2Scaled(s),g=Ve.colormapFromKey(this._colormap);let m=0,A=0;if(g.min!==void 0&&(m=g.min),g.max!==void 0&&(A=g.max),m===A&&this.trustCalMinMax&&isFinite(this.hdr.cal_min)&&isFinite(this.hdr.cal_max)&&this.hdr.cal_max>this.hdr.cal_min)return this.cal_min=this.hdr.cal_min,this.cal_max=this.hdr.cal_max,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=d,[this.hdr.cal_min,this.hdr.cal_max,this.hdr.cal_min,this.hdr.cal_max];if(m!==A)return this.cal_min=m,this.cal_max=A,this.robust_min=this.cal_min,this.robust_max=this.cal_max,[m,A,m,A];const p=100*r/(o-0);let v=!1;p>60&&!this.ignoreZeroVoxels&&(P.warn(`${Math.round(p)}% of voxels are zero: ignoring zeros for cal_max`),v=!0,this.ignoreZeroVoxels=!0),this.ignoreZeroVoxels||(r=0),r+=a;const x=Math.round((o-0-r)*this.percentileFrac);if(x<1||n===s)return P.debug("no variability in image intensity?"),this.cal_min=f,this.cal_max=d,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=d,[f,d,f,d];const y=1001,b=(y-1)/(s-n),E=new Array(y);for(let D=0;D<y;D++)E[D]=0;if(h)for(let D=0;D<o;D++)E[Math.round((u[D]-n)*b)]++;else if(this.ignoreZeroVoxels)for(let D=0;D<o;D++)u[D]!==0&&(isNaN(u[D])||E[Math.round((u[D]-n)*b)]++);else for(let D=0;D<o;D++)isNaN(u[D])||E[Math.round((u[D]-n)*b)]++;let w=0,S=0;for(;w<x;)w+=E[S],S++;S--,w=0;let M=y;for(;w<x;)M--,w+=E[M];if(S===M){let D=-1;for(;D!==0;)S>0&&(S--,E[S]>0&&(D=0)),D!==0&&M<y-1&&(M++,E[M]>0&&(D=0)),S===0&&M===y-1&&(D=0)}let T=this.intensityRaw2Scaled(S/b+n),R=this.intensityRaw2Scaled(M/b+n);return this.hdr.cal_min<this.hdr.cal_max&&this.hdr.cal_min>=f&&this.hdr.cal_max<=d&&(T=this.hdr.cal_min,R=this.hdr.cal_max),v&&(T=Math.min(T,0)),this.cal_min=T,this.cal_max=R,this.hdr.intent_code===1002&&(this.cal_min=f,this.cal_max=d),this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=d,[T,R,f,d]}intensityRaw2Scaled(t){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),t*this.hdr.scl_slope+this.hdr.scl_inter}intensityScaled2Raw(t){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),(t-this.hdr.scl_inter)/this.hdr.scl_slope}async saveToUint8Array(t,i=null){return c6(this,t,i)}async saveToDisk(t="",i=null){return ej(this,t,i)}static async fetchDicomData(t,i={}){if(t==="")throw Error("url must not be empty");let s=/^(?:[a-z+]+:)?\/\//i.test(t)?t:new URL(t,window.location.href);/(?:.([^.]+))?$/.exec(s.pathname)||(s=new URL("niivue-manifest.txt",t));let o=await fetch(s,{headers:i});if(!o.ok)throw Error(o.statusText);const c=(await o.text()).split(`
`),h=/(.*\/).*/.exec(s)[0],f=[];for(const d of c){const g=new URL(d,h);if(o=await fetch(g,{headers:i}),!o.ok)throw Error(o.statusText);const m=await o.arrayBuffer();f.push({name:d,data:m})}return f}static async readFirstDecompressedBytes(t,i){const n=t.getReader(),s=new RP,r=[];let a=0,o=!1,l,c;const u=new Promise((f,d)=>{l=f,c=d});function h(){const f=new Uint8Array(a);let d=0;for(const g of r)f.set(g,d),d+=g.length;l(f)}return s.ondata=f=>{r.push(f),a+=f.length,a>=i&&(o=!0,n.cancel().catch(()=>{}),h())},(async()=>{try{for(;!o;){const{done:f,value:d}=await n.read();if(f){o=!0,s.push(new Uint8Array,!0);return}s.push(d,!1)}}catch(f){c(f)}})().catch(()=>{}),u}static extractFilenameFromUrl(t){const n=new URL(t).searchParams.get("response-content-disposition");if(n){const s=n.match(/filename\*?=(?:UTF-8'')?"?([^";]+)"?/);if(s)return decodeURIComponent(s[1])}return t.split("/").pop().split("?")[0]}static async loadInitialVolumesGz(t="",i={},n=NaN){if(isNaN(n))return null;const s=await fetch(t,{headers:i,cache:"force-cache"});let r=352,a=await this.readFirstDecompressedBytes(s.body,r);const o=new DataView(a.buffer,a.byteOffset,a.byteLength),l=o.getUint16(0,!0),c=l===348;if(!c&&!(l===23553)||(a.length>111&&(r=o.getFloat32(108,c)),r>a.length&&(a=await this.readFirstDecompressedBytes(s.body,r)),!(a[0]===92&&a[1]===1||a[1]===92&&a[0]===1)))return null;const f=await El(a.buffer);if(!f)throw new Error("Could not read NIfTI header");const d=f.numBitsPerVoxel/8,g=[1,2,3].reduce((y,b)=>y*(f.dims[b]>1?f.dims[b]:1),1),m=[4,5,6].reduce((y,b)=>y*(f.dims[b]>1?f.dims[b]:1),1),A=Math.max(Math.min(n,m),1),p=f.vox_offset+A*g*d;if(A===m)return null;const v=await fetch(t,{headers:i,cache:"force-cache"});return(await this.readFirstDecompressedBytes(v.body,p)).buffer.slice(0,p)}static async loadInitialVolumes(t="",i={},n=NaN){if(isNaN(n))return null;const r=(await fetch(t,{headers:i,cache:"force-cache"})).body.getReader(),{value:a,done:o}=await r.read();let l=a;if(o||!l||l.length<2)throw new Error("Not enough data to determine compression");const c=new DataView(l.buffer,l.byteOffset,l.byteLength),u=c.getUint16(0,!0);if(u===35615)return await r.cancel(),this.loadInitialVolumesGz(t,i,n);const f=u===348;if(!f&&!(u===23553))return await r.cancel(),null;let g=352;for(l.length>111&&(g=c.getFloat32(108,f));l.length<g;){let S=function(R,D){const I=new Uint8Array(R.length+D.length);return I.set(R,0),I.set(D,R.length),I};const{value:M,done:T}=await r.read();if(T||!M)break;l=S(l,M)}const m=await El(l.buffer);if(!m)throw new Error("Could not read NIfTI header");const A=m.numBitsPerVoxel/8,p=[1,2,3].reduce((S,M)=>S*(m.dims[M]>1?m.dims[M]:1),1),v=[4,5,6].reduce((S,M)=>S*(m.dims[M]>1?m.dims[M]:1),1),x=Math.max(Math.min(n,v),1),y=m.vox_offset+x*p*A,b=new Uint8Array(y),E=Math.min(l.length,y);b.set(l.subarray(0,E),0);let w=E;for(;w<y;){const{value:S,done:M}=await r.read();if(M||!S)return await r.cancel(),null;const T=Math.min(S.length,y-w);b.set(S.subarray(0,T),w),w+=T}return await r.cancel(),b.buffer}static async loadFromUrl({url:t="",urlImgData:i="",headers:n={},name:s="",colormap:r="",opacity:a=1,cal_min:o=NaN,cal_max:l=NaN,trustCalMinMax:c=!0,percentileFrac:u=.02,ignoreZeroVoxels:h=!1,useQFormNotSForm:f=!1,colormapNegative:d="",frame4D:g=0,isManifest:m=!1,limitFrames4D:A=NaN,imageType:p=pe.UNKNOWN,colorbarVisible:v=!0,buffer:x=new ArrayBuffer(0)}={}){if(t==="")throw Error("url must not be empty");let y=null,b=null,E=null;if(t instanceof Uint8Array&&(t=t.slice().buffer),x.byteLength>0&&(t=x),t instanceof ArrayBuffer)if(b=t,s!=="")t=s;else{const R=new Uint8Array(b);t=R[0]===31&&R[1]===139?"array.nii.gz":"array.nii"}function w(R){const D=R.match(/\.([^.]+)(?:\.gz|\.bz2|\.xz)?$/);return D?D[1]:""}let S="";if(s===""?S=w(t):S=w(s),p===pe.UNKNOWN&&(p=pe.parse(S)),p===pe.UNKNOWN&&typeof t=="string"){const R=await fetch(t,{});if(R.redirected){const D=this.extractFilenameFromUrl(R.url);D&&D.length>0&&s===""&&(s=D,S=w(s),p=pe.parse(S))}}if(p===pe.ZARR){const R=new URL(t).searchParams,D=R.get("z"),I=R.get("y"),U=R.get("x"),L=D?Kl(parseInt(D),parseInt(D)+1):null,V=I?Kl(parseInt(I),parseInt(I)+1):null,k=U?Kl(parseInt(U),parseInt(U)+1):null,F=t.split("?")[0],z=new IO(F),G=sO(z);let X;try{X=await Ls(G.resolve(t),{kind:"array"})}catch{X=await Ls(G,{kind:"array"})}let le;if(X.shape.length===4){const te=X.shape[2],he=X.shape[1],Z=X.shape[0];L&&L[0]>=te&&(L[0]=te-1),V&&V[0]>=he&&(V[0]=he-1),k&&k[0]>=Z&&(k[0]=Z-1),le=await Lx(X,[k,V,L,null])}else le=await Lx(X,[k,V,L]);b=le.data;const[oe,ne,ie,me]=le.shape;E={data:b,width:ne,height:oe,depth:ie,channels:me}}const M=p===pe.DCM||pe.NII;if(!b&&M&&(b=await this.loadInitialVolumes(t,n,A)),!b)if(m)b=await xh.fetchDicomData(t,n),p=pe.DCM_MANIFEST;else{const R=await fetch(t,{headers:n});if(!R.ok)throw Error(R.statusText);if(!R.body)throw new Error("No readable stream available");const D=await K0(R.body),I=[],U=D.getReader();for(;;){const{done:F,value:z}=await U.read();if(F)break;I.push(z)}const L=I.reduce((F,z)=>F+z.length,0);b=new ArrayBuffer(L);const V=new Uint8Array(b);let k=0;for(const F of I)V.set(F,k),k+=F.length}S.toUpperCase()==="HEAD"&&i===""&&(i=t.substring(0,t.lastIndexOf("HEAD"))+"BRIK");let T=null;if(i)try{let R=await fetch(i,{headers:n});if(R.status===404&&i.includes("BRIK")&&(R=await fetch(`${i}.gz`,{headers:n})),R.ok&&R.body){const D=await K0(R.body),I=[],U=D.getReader();for(;;){const{done:F,value:z}=await U.read();if(F)break;I.push(z)}const L=I.reduce((F,z)=>F+z.length,0);T=new ArrayBuffer(L);const V=new Uint8Array(T);let k=0;for(const F of I)V.set(F,k),k+=F.length}}catch(R){console.error("Error loading paired image data:",R)}if(!b)throw new Error("Unable to load buffer properly from volume");if(!s){let R;try{R=new URL(t).pathname.split("/")}catch{R=t.split("/")}s=R.slice(-1)[0],s.indexOf("?")>-1&&(s=s.slice(0,s.indexOf("?")))}return y=await this.new(b,s,r,a,T,o,l,c,u,h,f,d,g,p,NaN,NaN,!0,null,0,E),y.url=t,y.colorbarVisible=v,y}static async readFileAsync(t,i=NaN){let n=t.stream();if(!isNaN(i)){let h=0;const f=new TransformStream({transform(d,g){if(h>=i){g.terminate();return}const m=i-h;d.length>m?(g.enqueue(d.slice(0,m)),g.terminate()):g.enqueue(d),h+=d.length}});n=n.pipeThrough(f)}const s=await K0(n),r=[],a=s.getReader();for(;;){const{done:h,value:f}=await a.read();if(h)break;r.push(f)}const o=r.reduce((h,f)=>h+f.length,0),l=new ArrayBuffer(o),c=new Uint8Array(l);let u=0;for(const h of r)c.set(h,u),u+=h.length;return l}static async loadFromFile({file:t,name:i="",colormap:n="",opacity:s=1,urlImgData:r=null,cal_min:a=NaN,cal_max:o=NaN,trustCalMinMax:l=!0,percentileFrac:c=.02,ignoreZeroVoxels:u=!1,useQFormNotSForm:h=!1,colormapNegative:f="",frame4D:d=0,limitFrames4D:g=NaN,imageType:m=pe.UNKNOWN}){let A=null,p=[];try{if(Array.isArray(t))p=await Promise.all(t.map(x=>this.readFileAsync(x)));else{if(isNaN(g))p=await this.readFileAsync(t);else{const x=await this.readFileAsync(t,512),y=new Uint8Array(x);if(!(y[0]===92&&y[1]===1||y[1]===92&&y[0]===1))p=await this.readFileAsync(t);else{const E=await El(x);if(!E)throw new Error("could not read nifti header");const w=E.numBitsPerVoxel/8,S=[1,2,3].reduce((D,I)=>D*(E.dims[I]>1?E.dims[I]:1),1),M=[4,5,6].reduce((D,I)=>D*(E.dims[I]>1?E.dims[I]:1),1),T=Math.max(Math.min(g,M),1),R=E.vox_offset+T*S*w;p=await this.readFileAsync(t,R)}}i=t.name}let v=null;r&&(v=await this.readFileAsync(r)),A=await this.new(p,i,n,s,v,a,o,l,c,u,h,f,d,m,NaN,NaN,!0,null,0,null),A.fileObject=t}catch(v){throw P.error(v),new Error("could not build NVImage")}if(A===null)throw new Error("could not build NVImage");return A}static createNiftiArray(t=[256,256,256],i=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],s=2,r=new Uint8Array){return $k(t,i,n,s,r)}static createNiftiHeader(t=[256,256,256],i=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],s=2){return o6(t,i,n,s)}getVolumeData(t=[-1,0,0],i=[0,0,0],n="same"){return ij(this,t,i,n)}setVolumeData(t=[-1,0,0],i=[0,0,0],n=new Uint8Array){nj(this,t,i,n)}static async loadFromBase64({base64:t,name:i="",colormap:n="",opacity:s=1,cal_min:r=NaN,cal_max:a=NaN,trustCalMinMax:o=!0,percentileFrac:l=.02,ignoreZeroVoxels:c=!1,useQFormNotSForm:u=!1,colormapNegative:h="",frame4D:f=0,imageType:d=pe.UNKNOWN,cal_minNeg:g=NaN,cal_maxNeg:m=NaN,colorbarVisible:A=!0,colormapLabel:p=null}){function v(y){const b=window.atob(y),E=b.length,w=new Uint8Array(E);for(let S=0;S<E;S++)w[S]=b.charCodeAt(S);return w.buffer}let x=null;try{const y=v(t);x=await this.new(y,i,n,s,null,r,a,o,l,c,u,h,f,d,g,m,A,p,0,null)}catch(y){P.debug(y)}if(x===null)throw new Error("could not load NVImage");return x}clone(){const t=new xh;return t.id=_1(),t.hdr=Object.assign({},this.hdr),t.img=this.img.slice(),t.calculateRAS(),t.calMinMax(),t}zeroImage(){this.img.fill(0)}getImageMetadata(){if(!this.hdr)throw new Error("hdr undefined");const t=this.id,i=this.hdr.datatypeCode,n=this.hdr.dims,s=n[1],r=n[2],a=n[3],o=Math.max(1,n[4]),l=this.hdr.pixDims,c=l[1],u=l[2],h=l[3],f=l[4],d=Math.floor(this.hdr.numBitsPerVoxel/8);return{id:t,datatypeCode:i,nx:s,ny:r,nz:a,nt:o,dx:c,dy:u,dz:h,dt:f,bpv:d}}static zerosLike(t,i="same"){const n=t.clone();return n.zeroImage(),i==="uint8"&&(n.img=Uint8Array.from(n.img),n.hdr.datatypeCode=2,n.hdr.numBitsPerVoxel=8),i==="float32"&&(n.img=Float32Array.from(n.img),n.hdr.datatypeCode=16,n.hdr.numBitsPerVoxel=32),n}getValue(t,i,n,s=0,r=!1){return tj(this,t,i,n,s,r)}applyOptionsUpdate(t){this.hdr.cal_min=t.cal_min,this.hdr.cal_max=t.cal_max,Object.assign(this,t)}getImageOptions(){return Ah("","",this.name,this._colormap,this.opacity,this.hdr.cal_min,this.hdr.cal_max,this.trustCalMinMax,this.percentileFrac,this.ignoreZeroVoxels,this.useQFormNotSForm,this.colormapNegative,this.frame4D,this.imageType,this.colormapType)}toUint8Array(t=null){return l6(this,t)}convertVox2Frac(t){return Q((t[0]+.5)/this.dimsRAS[1],(t[1]+.5)/this.dimsRAS[2],(t[2]+.5)/this.dimsRAS[3])}convertFrac2Vox(t){return Q(Math.round(t[0]*this.dims[1]-.5),Math.round(t[1]*this.dims[2]-.5),Math.round(t[2]*this.dims[3]-.5))}convertFrac2MM(t,i=!1){const n=Ye(t[0],t[1],t[2],1);return i?bt(n,n,this.frac2mm):bt(n,n,this.frac2mmOrtho),n}convertMM2Frac(t,i=!1){const n=Ye(t[0],t[1],t[2],1),s=this.dimsRAS,r=Q(0,0,0);if(typeof s>"u")return r;if(!i){const o=ot(this.frac2mmOrtho);return ti(o,o),bt(n,n,o),r[0]=n[0],r[1]=n[1],r[2]=n[2],r}if(s[1]<1||s[2]<1||s[3]<1)return r;const a=ot(this.matRAS);return ti(a,a),mi(a,a),bt(n,n,a),r[0]=(n[0]+.5)/s[1],r[1]=(n[1]+.5)/s[2],r[2]=(n[2]+.5)/s[3],r}},d6=(e=>(e[e.none=0]="none",e[e.contrast=1]="contrast",e[e.measurement=2]="measurement",e[e.pan=3]="pan",e[e.slicer3D=4]="slicer3D",e[e.callbackOnly=5]="callbackOnly",e[e.roiSelection=6]="roiSelection",e))(d6||{}),un={textHeight:.06,colorbarHeight:.05,colorbarWidth:-1,showColorbarBorder:!0,crosshairWidth:1,crosshairWidthUnit:"voxels",crosshairGap:0,rulerWidth:4,show3Dcrosshair:!1,backColor:[0,0,0,1],crosshairColor:[1,0,0,1],fontColor:[.5,.5,.5,1],selectionBoxColor:[1,1,1,.5],clipPlaneColor:[.7,0,.7,.5],clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1],rulerColor:[1,0,0,.8],colorbarMargin:.05,trustCalMinMax:!0,clipPlaneHotKey:"KeyC",viewModeHotKey:"KeyV",doubleTouchTimeout:500,longTouchTimeout:1e3,keyDebounceTime:50,isNearestInterpolation:!1,isResizeCanvas:!0,atlasOutline:0,isRuler:!1,isColorbar:!1,isOrientCube:!1,tileMargin:0,multiplanarPadPixels:0,multiplanarForceRender:!1,multiplanarEqualSize:!1,multiplanarShowRender:2,isRadiologicalConvention:!1,meshThicknessOn2D:1/0,dragMode:1,dragModePrimary:0,yoke3Dto2DZoom:!1,isDepthPickMesh:!1,isCornerOrientationText:!1,isOrientationTextVisible:!0,heroImageFraction:0,heroSliceType:4,sagittalNoseLeft:!1,isSliceMM:!1,isV1SliceShader:!1,forceDevicePixelRatio:0,logLevel:"info",loadingText:"loading ...",isForceMouseClickToVoxelCenters:!1,dragAndDropEnabled:!0,drawingEnabled:!1,penValue:1,floodFillNeighbors:6,isFilledPen:!1,thumbnail:"",maxDrawUndoBitmaps:8,sliceType:3,meshXRay:0,isAntiAlias:null,limitFrames4D:NaN,isAdditiveBlend:!1,showLegend:!0,legendBackgroundColor:[.3,.3,.3,.5],legendTextColor:[1,1,1,1],multiplanarLayout:0,renderOverlayBlend:1,sliceMosaicString:"",centerMosaic:!1,penSize:1,interactive:!0,clickToSegment:!1,clickToSegmentRadius:3,clickToSegmentBright:!0,clickToSegmentAutoIntensity:!1,clickToSegmentIntensityMax:NaN,clickToSegmentIntensityMin:NaN,clickToSegmentPercent:0,clickToSegmentMaxDistanceMM:Number.POSITIVE_INFINITY,clickToSegmentIs2D:!1,selectionBoxLineThickness:4,selectionBoxIsOutline:!1,scrollRequiresFocus:!1,showMeasureUnits:!0,measureTextJustify:"center",measureTextColor:[1,0,0,1],measureLineColor:[1,0,0,1],measureTextHeight:.03,isAlphaClipDark:!1,gradientOrder:1,gradientOpacity:0,renderSilhouette:0,gradientAmount:0,invertScrollDirection:!1,is2DSliceShader:!1},Dl={gamma:1,azimuth:110,elevation:10,crosshairPos:Q(.5,.5,.5),clipPlane:[0,0,0,0],clipPlaneDepthAziElev:[2,0,0],volScaleMultiplier:1,pan2Dxyzmm:Ye(0,0,0,1),clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1]};function lj(e,t){const i={};for(const n in e){const s=e[n],r=t[n],a=Array.isArray(s)&&Array.isArray(r);(a&&s.some((o,l)=>o!==r[l])||!a&&s!==r)&&(i[n]=s)}return i}var Q0=class gs{constructor(){B(this,"data",{title:"Untitled document",imageOptionsArray:[],meshOptionsArray:[],opts:{...un},previewImageDataURL:"",labels:[],encodedImageBlobs:[],encodedDrawingBlob:""}),B(this,"scene"),B(this,"volumes",[]),B(this,"meshDataObjects"),B(this,"meshes",[]),B(this,"drawBitmap",null),B(this,"imageOptionsMap",new Map),B(this,"meshOptionsMap",new Map),this.scene={onAzimuthElevationChange:()=>{},onZoom3DChange:()=>{},sceneData:{...Dl,pan2Dxyzmm:Ye(0,0,0,1),crosshairPos:Q(.5,.5,.5)},get renderAzimuth(){return this.sceneData.azimuth},set renderAzimuth(t){this.sceneData.azimuth=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get renderElevation(){return this.sceneData.elevation},set renderElevation(t){this.sceneData.elevation=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get volScaleMultiplier(){return this.sceneData.volScaleMultiplier},set volScaleMultiplier(t){this.sceneData.volScaleMultiplier=t,this.onZoom3DChange(t)},get crosshairPos(){return this.sceneData.crosshairPos},set crosshairPos(t){this.sceneData.crosshairPos=t},get clipPlane(){return this.sceneData.clipPlane},set clipPlane(t){this.sceneData.clipPlane=t},get clipPlaneDepthAziElev(){return this.sceneData.clipPlaneDepthAziElev},set clipPlaneDepthAziElev(t){this.sceneData.clipPlaneDepthAziElev=t},get pan2Dxyzmm(){return this.sceneData.pan2Dxyzmm},set pan2Dxyzmm(t){this.sceneData.pan2Dxyzmm=t},get gamma(){return this.sceneData.gamma},set gamma(t){this.sceneData.gamma=t}}}get title(){return this.data.title}get previewImageDataURL(){return this.data.previewImageDataURL}set previewImageDataURL(t){this.data.previewImageDataURL=t}set title(t){this.data.title=t}get imageOptionsArray(){return this.data.imageOptionsArray}get encodedImageBlobs(){return this.data.encodedImageBlobs}get encodedDrawingBlob(){return this.data.encodedDrawingBlob}get opts(){return this.data.opts}set opts(t){this.data.opts={...t}}get labels(){return this.data.labels}set labels(t){this.data.labels=t}get customData(){return this.data.customData}set customData(t){this.data.customData=t}hasImage(t){return this.volumes.find(i=>i.id===t.id)!==void 0}hasImageFromUrl(t){return this.data.imageOptionsArray.find(i=>i.url===t)!==void 0}addImageOptions(t,i){if(!this.hasImage(t)&&!i.name)if(i.url){const s=/^(?:[a-z+]+:)?\/\//i.test(i.url)?new URL(i.url):new URL(i.url,window.location.href);i.name=s.pathname.split("/").pop(),i.name.toLowerCase().endsWith(".gz")&&(i.name=i.name.slice(0,-3)),i.name.toLowerCase().endsWith(".nii")||(i.name+=".nii")}else i.name="untitled.nii";i.imageType=pe.NII,this.data.imageOptionsArray.push(i),this.imageOptionsMap.set(t.id,this.data.imageOptionsArray.length-1)}removeImage(t){if(this.imageOptionsMap.has(t.id)){const i=this.imageOptionsMap.get(t.id);this.data.imageOptionsArray.length>i&&this.data.imageOptionsArray.splice(i,1),this.imageOptionsMap.delete(t.id)}this.volumes=this.volumes.filter(i=>i.id!==t.id)}async fetchLinkedData(){var t;if(this.data.encodedImageBlobs=[],!!((t=this.imageOptionsArray)!=null&&t.length)){for(const i of this.imageOptionsArray)if(i.url)try{const n=await fetch(i.url);if(!n.ok){console.warn("Failed to fetch image:",i.url);continue}const s=await n.arrayBuffer(),r=new Uint8Array(s),a=ae.uint8tob64(r);this.data.encodedImageBlobs.push(a),console.info("fetch linked data fetched from ",i.url)}catch(n){console.warn(`Failed to fetch/encode image from ${i.url}:`,n)}}}getImageOptions(t){return this.imageOptionsMap.has(t.id)?this.data.imageOptionsArray[this.imageOptionsMap.get(t.id)]:null}json(t=!0){const i={encodedImageBlobs:[],previewImageDataURL:this.data.previewImageDataURL,imageOptionsMap:new Map},n=[];i.sceneData={...this.scene.sceneData},i.opts=lj(this.opts,un),this.opts.meshThicknessOn2D===1/0&&(i.opts.meshThicknessOn2D="infinity"),this.opts.meshThicknessOn2D===1/0&&(i.opts.meshThicknessOn2D="infinity"),i.labels=[...this.data.labels];for(const r of i.labels)delete r.onClick;if(i.customData=this.customData,this.volumes.length)for(let r=0;r<this.volumes.length;r++){const a=this.volumes[r];let o=this.getImageOptions(a);if(o===null?(P.warn("no options found for image, using default"),o={name:"",colormap:"gray",opacity:1,pairedImgData:null,cal_min:NaN,cal_max:NaN,trustCalMinMax:!0,percentileFrac:.02,ignoreZeroVoxels:!1,useQFormNotSForm:!1,colormapNegative:"",colormapLabel:null,imageType:pe.NII,frame4D:0,limitFrames4D:NaN,url:"",urlImageData:"",alphaThreshold:!1,cal_minNeg:NaN,cal_maxNeg:NaN,colorbarVisible:!0}):"imageType"in o||(o.imageType=pe.NII),o.colormap=a.colormap,o.colormapLabel=a.colormapLabel,o.opacity=a.opacity,o.cal_max=a.cal_max||NaN,o.cal_min=a.cal_min||NaN,n.push(o),t){const l=ae.uint8tob64(a.toUint8Array());i.encodedImageBlobs.push(l)}i.imageOptionsMap.set(a.id,r)}i.imageOptionsArray=[...n];const s=[];i.connectomes=[];for(const r of this.meshes){if(r.type==="connectome"){i.connectomes.push(JSON.stringify(r.json()));continue}const a={pts:r.pts,tris:r.tris,name:r.name,rgba255:Uint8Array.from(r.rgba255),opacity:r.opacity,connectome:r.connectome,dpg:r.dpg,dps:r.dps,dpv:r.dpv,meshShaderIndex:r.meshShaderIndex,layers:r.layers.map(o=>({values:o.values,nFrame4D:o.nFrame4D,frame4D:0,outlineBorder:o.outlineBorder,global_min:o.global_min,global_max:o.global_max,cal_min:o.cal_min,cal_max:o.cal_max,opacity:o.opacity,colormap:o.colormap,colormapNegative:o.colormapNegative,colormapLabel:o.colormapLabel,useNegativeCmap:o.useNegativeCmap})),hasConnectome:r.hasConnectome,edgeColormap:r.edgeColormap,edgeColormapNegative:r.edgeColormapNegative,edgeMax:r.edgeMax,edgeMin:r.edgeMin,edges:r.edges&&Array.isArray(r.edges)?[...r.edges]:[],extentsMax:r.extentsMax,extentsMin:r.extentsMin,furthestVertexFromOrigin:r.furthestVertexFromOrigin,nodeColormap:r.nodeColormap,nodeColormapNegative:r.nodeColormapNegative,nodeMaxColor:r.nodeMaxColor,nodeMinColor:r.nodeMinColor,nodeScale:r.nodeScale,legendLineThickness:r.legendLineThickness,offsetPt0:r.offsetPt0,nodes:r.nodes};r.offsetPt0&&r.offsetPt0.length>0&&(a.offsetPt0=r.offsetPt0,a.fiberGroupColormap=r.fiberGroupColormap,a.fiberColor=r.fiberColor,a.fiberDither=r.fiberDither,a.fiberRadius=r.fiberRadius,a.colormap=r.colormap),s.push(a)}return i.meshesString=JSON.stringify(pP(s)),this.drawBitmap&&(i.encodedDrawingBlob=ae.uint8tob64(this.drawBitmap)),i}async download(t,i,n={embedImages:!0}){const s=this.json(n.embedImages),r=JSON.stringify(s),a=i?"application/gzip":"application/json",o=i?await ae.compressStringToArrayBuffer(r):r;ae.download(o,t,a)}static deserializeMeshDataObjects(t){if(!t.data.meshesString||t.data.meshesString==="[]"){t.meshDataObjects=[];return}if(t.data.meshesString){t.meshDataObjects=fP(JSON.parse(t.data.meshesString));for(const i of t.meshDataObjects)for(const n of i.layers)"colorMap"in n&&(n.colormap=n.colorMap,delete n.colorMap),"colorMapNegative"in n&&(n.colormapNegative=n.colorMapNegative,delete n.colorMapNegative)}}static async loadFromUrl(t){const n=await(await fetch(t)).arrayBuffer();let s;if(ae.isArrayBufferCompressed(n)){const r=await ae.decompressArrayBuffer(n);s=JSON.parse(r)}else{const r=new TextDecoder;s=JSON.parse(r.decode(n))}return gs.loadFromJSON(s)}static async loadFromFile(t){const i=await ae.readFileAsync(t);let n;const s=new gs;return ae.isArrayBufferCompressed(i)?n=await ae.decompressArrayBuffer(i):n=new TextDecoder().decode(i),s.data=JSON.parse(n),s.data.opts.meshThicknessOn2D==="infinity"&&(s.data.opts.meshThicknessOn2D=1/0),s.scene.sceneData={...Dl,...s.data.sceneData},gs.deserializeMeshDataObjects(s),s}static loadFromJSON(t){const i=new gs;return Object.assign(i.data,{...t,imageOptionsArray:t.imageOptionsArray??[],encodedImageBlobs:t.encodedImageBlobs??[],labels:t.labels??[],meshOptionsArray:t.meshOptionsArray??[],connectomes:t.connectomes??[],encodedDrawingBlob:t.encodedDrawingBlob??"",previewImageDataURL:t.previewImageDataURL??"",customData:t.customData??"",title:t.title??"untitled"}),i.data.opts={...un,...t.opts||{}},i.data.opts.meshThicknessOn2D==="infinity"&&(i.data.opts.meshThicknessOn2D=1/0),i.scene.sceneData={...Dl,...t.sceneData||{}},i.data.meshesString&&gs.deserializeMeshDataObjects(i),i}static oldloadFromJSON(t){const i=new gs;return i.data=t,i.data.opts.meshThicknessOn2D==="infinity"&&(i.data.opts.meshThicknessOn2D=1/0),i.scene.sceneData={...Dl,...t.sceneData},gs.deserializeMeshDataObjects(i),i}},cj={colormap:"gray",opacity:0,nFrame4D:0,frame4D:0,outlineBorder:0,cal_min:0,cal_max:0,cal_minNeg:0,cal_maxNeg:0,colormapType:0,values:new Array,useNegativeCmap:!1,showLegend:!0},Ma=class ln{constructor(t,i,n="",s=new Uint8Array([255,255,255,255]),r=1,a=!0,o,l=null,c=null,u=null,h=null,f=!0,d=""){B(this,"id"),B(this,"name"),B(this,"anatomicalStructurePrimary"),B(this,"colorbarVisible"),B(this,"furthestVertexFromOrigin"),B(this,"extentsMin"),B(this,"extentsMax"),B(this,"opacity"),B(this,"visible"),B(this,"meshShaderIndex",0),B(this,"offsetPt0",null),B(this,"colormapInvert",!1),B(this,"fiberGroupColormap",null),B(this,"indexBuffer"),B(this,"vertexBuffer"),B(this,"vao"),B(this,"vaoFiber"),B(this,"pts"),B(this,"tris"),B(this,"layers"),B(this,"type","mesh"),B(this,"data_type"),B(this,"rgba255"),B(this,"fiberLength"),B(this,"fiberLengths"),B(this,"fiberDensity"),B(this,"fiberDither",.1),B(this,"fiberColor","Global"),B(this,"fiberDecimationStride",1),B(this,"fiberSides",5),B(this,"fiberRadius",0),B(this,"fiberOcclusion",0),B(this,"f32PerVertex",5),B(this,"fiberMask"),B(this,"colormap"),B(this,"dpg"),B(this,"dps"),B(this,"dpv"),B(this,"hasConnectome",!1),B(this,"connectome"),B(this,"indexCount"),B(this,"vertexCount",1),B(this,"nodeScale",4),B(this,"edgeScale",1),B(this,"legendLineThickness",0),B(this,"showLegend",!0),B(this,"nodeColormap","warm"),B(this,"edgeColormap","warm"),B(this,"nodeColormapNegative"),B(this,"edgeColormapNegative"),B(this,"nodeMinColor"),B(this,"nodeMaxColor"),B(this,"edgeMin"),B(this,"edgeMax"),B(this,"nodes"),B(this,"edges"),B(this,"points"),this.anatomicalStructurePrimary=d,this.name=n,this.colorbarVisible=f,this.id=_1();const g=gr.getExtents(t);if(this.furthestVertexFromOrigin=g.mxDx,this.extentsMin=g.extentsMin,this.extentsMax=g.extentsMax,this.opacity=r>1?1:r,this.visible=a,this.meshShaderIndex=0,this.indexBuffer=o.createBuffer(),this.vertexBuffer=o.createBuffer(),this.vao=o.createVertexArray(),o.bindVertexArray(this.vao),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(0),o.enableVertexAttribArray(1),this.f32PerVertex!==7?(o.vertexAttribPointer(0,3,o.FLOAT,!1,20,0),o.vertexAttribPointer(1,4,o.BYTE,!0,20,12),o.enableVertexAttribArray(2),o.vertexAttribPointer(2,4,o.UNSIGNED_BYTE,!0,20,16)):(o.vertexAttribPointer(0,3,o.FLOAT,!1,28,0),o.vertexAttribPointer(1,3,o.FLOAT,!1,28,12),o.enableVertexAttribArray(2),o.vertexAttribPointer(2,4,o.UNSIGNED_BYTE,!0,28,24)),o.bindVertexArray(null),this.vaoFiber=o.createVertexArray(),this.offsetPt0=null,this.hasConnectome=!1,this.colormapInvert=!1,this.fiberGroupColormap=null,this.pts=t,this.layers=[],this.type="mesh",this.tris=i,s[3]<1){this.rgba255=s,this.fiberLength=2,this.fiberDither=.1,this.fiberColor="Global",this.fiberDecimationStride=1,this.fiberMask=[],this.colormap=l,this.dpg=c,this.dps=u,this.dpv=h,c&&this.initValuesArray(c),u&&this.initValuesArray(u),h&&this.initValuesArray(h),this.offsetPt0=new Uint32Array(i),this.tris=new Uint32Array(0),this.updateFibers(o),o.bindVertexArray(this.vaoFiber),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(0),o.vertexAttribPointer(0,3,o.FLOAT,!1,16,0),o.enableVertexAttribArray(1),o.vertexAttribPointer(1,4,o.UNSIGNED_BYTE,!0,16,12),o.bindVertexArray(null);return}if(l){this.connectome=l,this.hasConnectome=!0;const A=Object.keys(l);for(let p=0,v=A.length;p<v;p++)this[A[p]]=l[A[p]]}this.rgba255=s,this.updateMesh(o)}initValuesArray(t){for(let i=0;i<t.length;i++){const n=t[i].vals.reduce((r,a)=>Math.min(r,a)),s=t[i].vals.reduce((r,a)=>Math.max(r,a));t[i].global_min=n,t[i].global_max=s,t[i].cal_min=n,t[i].cal_max=s}return t}linesToCylinders(t,i,n){function s(M){return Q(M[0],M[1],M[2])}const r=Math.pow(2,32)-1,a=n.length;let o=0,l=0;for(let M=0;M<a;M++){if(n[M]===r){l++;continue}o++}const c=this.fiberSides,u=c*o,h=this.f32PerVertex;if(h!==5)throw Error("fiberSides > 1 requires f32PerVertex == 5");const f=new Float32Array(u*h),d=new Uint8Array(f.buffer);let g=0,m=Cn(),A=Cn(),p=Cn();const v=_e();let x=_e(),y=0;const b=this.fiberRadius;for(let M=0;M<a;M++){const T=n[M]===r;if(T&&y<1)continue;let R=n[M]*4;if(y++,y<=1){m=Ye(i[R+0],i[R+1],i[R+2],i[R+3]),A=jn(m),M+1<a&&n[M+1]!==r&&(R=n[M+1]*4,p=Ye(i[R+0],i[R+1],i[R+2],i[R+3]),He(v,s(m),s(p)),Vi(v,v),x=ia.getFirstPerpVector(v));continue}T?p=jn(A):p=Ye(i[R+0],i[R+1],i[R+2],i[R+3]),He(v,s(m),s(p)),Vi(v,v);const D=_e();hh(D,x,v);const I=_e();hh(I,v,D),x=Yl(x);const U=_e();hh(U,v,I),Vi(U,U);const L=_e();for(let V=0;V<c;V++){const k=Math.cos(V/c*2*Math.PI),F=Math.sin(V/c*2*Math.PI);L[0]=b*(k*I[0]+F*U[0]),L[1]=b*(k*I[1]+F*U[1]),L[2]=b*(k*I[2]+F*U[2]),zr(L,s(A),L);const z=g*h;f[z+0]=L[0],f[z+1]=L[1],f[z+2]=L[2];const G=_e();He(G,L,s(A)),Vi(G,G);const X=(z+3)*4;d[X+0]=G[0]*127,d[X+1]=G[1]*127,d[X+2]=G[2]*127,f[z+4]=A[3],g++}m=jn(A),A=jn(p),T&&(y=0)}const E=(o-l)*c*2*3,w=new Uint32Array(E);let S=0;g=0;for(let M=1;M<a;M++){if(n[M]===r){g+=c;continue}if(n[M-1]===r)continue;let T=g,R=g+c;const D=R,I=R+c;for(let U=0;U<c;U++)w[S++]=T,w[S++]=R++,R===I&&(R=I-c),w[S++]=R,w[S++]=T++,T===D&&(T=D-c),w[S++]=R,w[S++]=T;g+=c}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(w),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,d,t.STATIC_DRAW),this.indexCount=E}createFiberDensityMap(){if(this.fiberDensity)return;const t=this.pts,i=t.length/3;let n=0;for(let v=0;v<3;v++){const x=this.extentsMax[v]-this.extentsMin[v];n=Math.max(n,x)}if(this.fiberDensity=new Float32Array(i),n===0)return;const s=64,a=n/(s-1)/2,o=(s-1)/n;let l=new Float32Array(s*s*s);const c=[this.extentsMin[0]-a,this.extentsMin[1]-a,this.extentsMin[2]-a],u=[0,0,0],h=-1,f=s*s;let d=0;for(let v=0;v<i;v++){u[0]=Math.round((t[d++]-c[0])*o),u[1]=Math.round((t[d++]-c[1])*o),u[2]=Math.round((t[d++]-c[2])*o);const x=u[0]+u[1]*s+u[2]*f;x!==h&&l[x]++}function g(v,x){let y=v.slice(),b=-1;const E=x-1;for(let S=0;S<x;S++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)b++,!(T<1||T>=E)&&(v[b]=y[b-1]+y[b]+y[b]+y[b+1]);b=-1,y=v.slice();for(let S=0;S<x;S++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)b++,!(M<1||M>=E)&&(v[b]=y[b-x]+y[b]+y[b]+y[b+x]);const w=x*x;b=-1,y=v.slice();for(let S=0;S<x;S++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)b++,!(S<1||S>=E)&&(v[b]=y[b-w]+y[b]+y[b]+y[w]);return v}l=g(l,s),l=g(l,s);let m=0,A=1/0;const p=s*s*s;for(let v=0;v<p;v++)l[v]<=0||(m=Math.max(m,l[v]),A=Math.min(A,l[v]));if(!(m<=1||m<=A)){d=0;for(let v=0;v<p;v++)l[v]=Math.max(0,l[v]-A);m-=A;for(let v=0;v<i;v++){u[0]=Math.round((t[d++]-c[0])*o),u[1]=Math.round((t[d++]-c[1])*o),u[2]=Math.round((t[d++]-c[2])*o);const x=u[0]+u[1]*s+u[2]*f;this.fiberDensity[v]=l[x]/m}}}updateFibers(t){if(!this.offsetPt0||!this.fiberLength)return;const i=this.pts,n=this.offsetPt0,s=n.length-1,r=i.length/3;if(!this.fiberLengths){this.fiberLengths=new Uint32Array(s);for(let E=0;E<s;E++){const w=n[E]*3,S=(n[E+1]-1)*3;let M=0;for(let T=w;T<S;T+=3){const R=Q(i[T+0]-i[T+3],i[T+1]-i[T+4],i[T+2]-i[T+5]);M+=dc(R)}this.fiberLengths[E]=M}}const a=new Float32Array(r*4),o=new Uint32Array(a.buffer);let l=0,c=0;for(let E=0;E<r;E++)a[c+0]=i[l+0],a[c+1]=i[l+1],a[c+2]=i[l+2],l+=3,c+=4;const u=this.fiberDither,h=u*.5;function f(E,w,S){const T=255*(u*Math.random()-h);return E=Math.max(Math.min(E+T,255),0),w=Math.max(Math.min(w+T,255),0),S=Math.max(Math.min(S+T,255),0),E+(w<<8)+(S<<16)}function d(E,w,S,M,T,R,D){const I=Q(Math.abs(E-M),Math.abs(w-T),Math.abs(S-R));Vi(I,I);const U=D-h;for(let L=0;L<3;L++)I[L]=255*Math.max(Math.min(Math.abs(I[L])+U,1),0);return I[0]+(I[1]<<8)+(I[2]<<16)}const g=this.fiberColor.toLowerCase();let m=null,A=null;if(g.startsWith("dps")&&this.dps&&this.dps.length>0){const E=parseInt(g.substring(3));E<this.dps.length&&this.dps[E].vals.length===s&&(m=this.dps[E].vals)}if(g.startsWith("dpv")&&this.dpv&&this.dpv.length>0){const E=parseInt(g.substring(3));E<this.dpv.length&&this.dpv[E].vals.length===r&&(A=this.dpv[E])}const p=new Int16Array(s);if(this.dpg&&this.fiberGroupColormap!==null){const E=new Uint8ClampedArray(this.dpg.length*4),w=new Array(this.dpg.length).fill(!1),S=this.fiberGroupColormap;S.A===void 0&&(S.A=Array.from(new Uint8ClampedArray(S.I.length).fill(255)));for(let M=0;M<S.I.length;M++){let T=S.I[M];T<0||T>=this.dpg.length||S.A[M]<1||(w[T]=!0,T*=4,E[T]=S.R[M],E[T+1]=S.G[M],E[T+2]=S.B[M],E[T+3]=255)}p.fill(-1);for(let M=0;M<this.dpg.length;M++)if(w[M])for(let T=0;T<this.dpg[M].vals.length;T++)p[this.dpg[M].vals[T]]=M;for(let M=0;M<s;M++){if(p[M]<0)continue;const T=p[M]%256*4,R=f(E[T],E[T+1],E[T+2]),D=n[M],I=n[M+1]-1,U=D*4+3,L=I*4+3;for(let V=U;V<=L;V+=4)o[V]=R}}else if(A){const E=Ve.colormap(this.colormap,this.colormapInvert),w=A.cal_min,S=A.cal_max;let M=3;for(let T=0;T<r;T++){let R=Math.min(Math.max((A.vals[T]-w)/(S-w),0),1);R=Math.round(Math.max(Math.min(255,R*255)))*4;const D=E[R]+(E[R+1]<<8)+(E[R+2]<<16);o[M]=D,M+=4}}else if(m){const E=Ve.colormap(this.colormap,this.colormapInvert);let w=m[0],S=m[0];for(let M=0;M<s;M++)w=Math.min(w,m[M]),S=Math.max(S,m[M]);S===w&&(w-=1);for(let M=0;M<s;M++){let T=(m[M]-w)/(S-w);T=Math.round(Math.max(Math.min(255,T*255)))*4;const R=E[T]+(E[T+1]<<8)+(E[T+2]<<16),D=n[M],I=n[M+1]-1,U=D*4+3,L=I*4+3;for(let V=U;V<=L;V+=4)o[V]=R}}else if(g.includes("fixed"))if(u===0){const E=this.rgba255[0]+(this.rgba255[1]<<8)+(this.rgba255[2]<<16);let w=3;for(let S=0;S<r;S++)o[w]=E,w+=4}else for(let E=0;E<s;E++){const w=f(this.rgba255[0],this.rgba255[1],this.rgba255[2]),S=n[E],M=n[E+1]-1,T=S*4+3,R=M*4+3;for(let D=T;D<=R;D+=4)o[D]=w}else if(g.includes("local"))for(let E=0;E<s;E++){const w=n[E],S=n[E+1]-1;let M=w*3;const T=S*3,R=u*Math.random();let D=d(i[M],i[M+1],i[M+2],i[M+4],i[M+5],i[M+6],R),I=w*4+3;for(;M<T;)o[I]=D,I+=4,M+=3,D=d(i[M-3],i[M-2],i[M-1],i[M+3],i[M+4],i[M+5],R);o[I]=o[I-4]}else for(let E=0;E<s;E++){const w=n[E],S=n[E+1]-1,M=w*3,T=S*3,R=d(i[M],i[M+1],i[M+2],i[T],i[T+1],i[T+2],u*Math.random()),D=w*4+3,I=S*4+3;for(let U=D;U<=I;U+=4)o[U]=R}if(this.fiberOcclusion>0){let E=function(w,S){const M=S*(w&255),T=S*(w>>8&255),R=S*(w>>16&255);return M+(T<<8)+(R<<16)};this.createFiberDensityMap();for(let w=0;w<s;w++){const S=n[w],M=n[w+1]-1,T=S*4+3,R=M*4+3;let D=S;const I=Math.min(this.fiberOcclusion,.99);for(let U=T;U<=R;U+=4){let L=this.fiberDensity[D++];if(L<=0)continue;L=L/((1/I-2)*(1-L)+1);const V=1-Math.min(L,.9);let k=o[U];k=E(k,V),o[U]=k}}}const v=this.fiberLength,x=Math.pow(2,32)-1,y=[];let b=-1;for(let E=0;E<s;E++)if(!(p[E]<0)&&!(this.fiberLengths[E]<v)&&(b++,b%this.fiberDecimationStride===0)){for(let w=n[E];w<n[E+1];w++)y.push(w);y.push(x)}this.fiberSides>2&&this.fiberRadius>0?this.linesToCylinders(t,a,y):(this.indexCount=y.length,t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Uint32Array.from(o),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(y),t.STATIC_DRAW))}indexNearestXYZmm(t,i,n){const s=this.pts,r=this.pts.length/3;let a=0,o=1/0,l=0;for(let c=0;c<r;c++){const u=Math.pow(s[a]-t,2)+Math.pow(s[a+1]-i,2)+Math.pow(s[a+2]-n,2);u<o&&(o=u,l=c),a+=3}return o=Math.sqrt(o),[l,o]}unloadMesh(t){if(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindVertexArray(null),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteVertexArray(this.vao),t.deleteVertexArray(this.vaoFiber),this.offsetPt0=null,this.tris=null,this.pts=null,this.layers&&this.layers.length>0)for(let i=0;i<this.layers.length;i++)this.layers[i].values=null;if(this.dpg&&this.dpg.length>0)for(let i=0;i<this.dpg.length;i++)this.dpg[i].vals=null;if(this.dps&&this.dps.length>0)for(let i=0;i<this.dps.length;i++)this.dps[i].vals=null}scalars2RGBA(t,i,n,s=!1){const r=n.length;if(4*r<t.length)return P.error(`colormap2RGBA incorrectly specified ${r}*4 != ${t.length}`),t;const a=Math.round(i.opacity*255);let o=i.cal_min,l=i.cal_max,c=Ve.colormap(i.colormap,this.colormapInvert),u=1;if(s){if(!i.useNegativeCmap)return t;u=-1,c=Ve.colormap(i.colormapNegative,i.colormapInvert),o=i.cal_min,l=i.cal_max,isFinite(i.cal_minNeg)&&isFinite(i.cal_minNeg)&&(o=-i.cal_minNeg,l=-i.cal_maxNeg)}let h=o;i.isTransparentBelowCalMin||(h=Number.NEGATIVE_INFINITY);const f=i.colormapType===2;i.colormapType!==0&&(o=Math.min(o,0));const d=255/(l-o);for(let g=0;g<r;g++){let m=n[g]*u;if(isNaN(m))continue;let A=a;if(m<h)if(m>0&&f)A=Math.round(i.opacity*255*Math.pow(m/h,2));else continue;if(m=(m-o)*d,m<0&&i.isTransparentBelowCalMin)continue;m=Math.min(255,Math.max(0,Math.round(m)))*4;const p=g*4;t[p+0]=c[m+0],t[p+1]=c[m+1],t[p+2]=c[m+2],t[p+3]=A}return t}blendColormap(t,i,n,s,r,a,o=!1){const l=this.pts.length/3,c=Math.min(n.opacity,1);function u(x,y,b){return x*(1-b)+y*b}function h(x,y){return Math.min(x+y,255)}const f=o?-1:1,d=Math.min(Math.max(n.frame4D,0),n.nFrame4D-1),g=l*d;let m=s;n.isTransparentBelowCalMin||(m=Number.NEGATIVE_INFINITY),n.colormapType!==0&&(s=Math.min(s,0));const A=255/(r-s);let p=new Array(l).fill(!1);if(n.outlineBorder!==0){const x=new Uint8Array(l).fill(0);for(let y=0;y<l;y++)f*n.values[y+g]>=m&&(x[y]=1);p=gr.getClusterBoundaryU8(x,this.tris);for(let y=0;y<l;y++)f*n.values[y+g]<m&&(p[y]=!1)}const v=new Float32Array(256).fill(c);if(m>s&&n.colormapType===2){let x=Math.round((m-s)*A);x=Math.max(x,1);for(let y=1;y<x;y++)v[y]=c*Math.pow(y/x,2);v[0]=0,m=s+Number.EPSILON}for(let x=0;x<l;x++){const y=f*n.values[x+g];if(y<m)continue;let b=Math.round((y-s)*A);if(b<0&&n.isTransparentBelowCalMin)continue;b=Math.max(0,b),b=Math.min(255,b);let E=v[b];b*=4;let w=x*28+24;if(this.f32PerVertex!==7&&(w=x*20+16),n.isAdditiveBlend){const S=x*4;i[S+0]=h(i[S+0],a[b+0]),i[S+1]=h(i[S+1],a[b+1]),i[S+2]=h(i[S+2],a[b+2]),i[S+3]=h(i[S+3],255)}else{if(p[x]&&(E=n.outlineBorder,n.outlineBorder<0)){t[w+0]=0,t[w+1]=0,t[w+2]=0;continue}t[w+0]=u(t[w+0],a[b+0],E),t[w+1]=u(t[w+1],a[b+1],E),t[w+2]=u(t[w+2],a[b+2],E)}}}updateMesh(t){if(this.offsetPt0){this.updateFibers(t);return}if(this.hasConnectome)return;if(!this.pts||!this.tris||!this.rgba255){P.warn("underspecified mesh");return}function i(c,u,h){return c*(1-h)+u*h}const n=this.generatePosNormClr(this.pts,this.tris,this.rgba255),s=this.pts.length/3,r=new Uint8Array(n.buffer);let a=0;const o=new Uint8Array(s*4);let l=this.tris;if(this.layers&&this.layers.length>0)for(let c=0;c<this.layers.length;c++){const u=this.layers[c],h=u.opacity;if(h<=0||u.cal_min>u.cal_max)continue;if(u.outlineBorder===void 0&&(u.outlineBorder=0),u.isAdditiveBlend===void 0&&(u.isAdditiveBlend=!1),u.colormapLabel&&u.colormapLabel.R&&!u.colormapLabel.lut&&(u.colormapLabel=Ve.makeLabelLut(u.colormapLabel)),u.colormapLabel&&u.colormapLabel.lut){const d=u.colormapLabel;let g=0;u.colormapLabel.min&&(g=u.colormapLabel.min);let m=d.lut;const A=Math.round(u.opacity*255);m[3]>0&&(m[3]=A);for(let w=7;w<m.length;w+=4)m[w]=A;const p=Math.floor(m.length/4);if(u.atlasValues&&p>0&&p===u.atlasValues.length&&u.colormap){const w=u.atlasValues;let S=!1,M=!0;for(let T=0;T<p;T++)isNaN(w[T])?S=!0:M=!1;if(M){P.debug("invisible mesh: all atlasValues are NaN.");return}if(S){P.debug("some vertices have NaN atlasValues (mesh will be decimated).");const T=new Array(s).fill(!1);for(let L=0;L<s;L++){const V=Math.round(u.values[L])-g;isNaN(w[V])&&(T[L]=!0)}const R=new Array(l.length).fill(!1);for(let L=0;L<l.length;L++)T[l[L]]&&(R[L]=!0);const D=this.tris;let I=0;for(let L=0;L<D.length;L+=3)!R[L]&&!R[L+1]&&!R[L+2]&&I++;I===0&&P.debug("invisible mesh: all triangles of a vertex with a NaN atlasValue."),l=new Uint32Array(I*3);let U=0;for(let L=0;L<D.length;L+=3)!R[L]&&!R[L+1]&&!R[L+2]&&(l[U++]=D[L],l[U++]=D[L+1],l[U++]=D[L+2])}m.fill(0),m=this.scalars2RGBA(m,u,w),u.useNegativeCmap&&(m=this.scalars2RGBA(m,u,w,!0))}else u.atlasValues&&P.warn(`Expected ${p} atlasValues but got ${u.atlasValues.length} for mesh layer`);if(u.showLegend&&p===u.colormapLabel.labels.length){u.labels=[];for(let w=0;w<p;w++){const S=Array.from(m.slice(w*4,w*4+4)).map(R=>R/255),M=u.colormapLabel.labels[w];if(S[3]===0||!M||M.startsWith("_"))continue;S[3]=1;const T=new m2(M,{textColor:S,bulletScale:1,bulletColor:S,lineWidth:0,lineColor:S,textScale:1,textAlignment:"left",lineTerminator:"none"});u.labels.push(T),P.debug("label for mesh layer:",T)}}else delete u.labels;const v=Math.min(Math.max(u.frame4D,0),u.nFrame4D-1),x=s*v,y=new Uint8Array(s*4);let b=0;for(let w=0;w<s;w++){const S=u.values[w+x]-g,M=4*Math.min(Math.max(S,0),p-1);y[b+0]=m[M+0],y[b+1]=m[M+1],y[b+2]=m[M+2],y[b+3]=m[M+3],b+=4}let E=new Array(s).fill(!1);u.outlineBorder!==0&&(E=gr.getClusterBoundary(y,this.tris)),b=0;for(let w=0;w<s;w++){let S=w*28+24;this.f32PerVertex!==7&&(S=w*20+16);let M=y[b+3]/255;if(E[w]&&(M=u.outlineBorder,u.outlineBorder<0)){r[S+0]=0,r[S+1]=0,r[S+2]=0,b+=4;continue}r[S+0]=i(r[S+0],y[b+0],M),r[S+1]=i(r[S+1],y[b+1],M),r[S+2]=i(r[S+2],y[b+2],M),b+=4}continue}if(u.values instanceof Uint8Array){const d=new Uint8Array(u.values.buffer);let g=new Array(s).fill(!0);u.outlineBorder!==0&&(g=gr.getClusterBoundary(d,this.tris));let m=0;for(let A=0;A<u.values.length;A++){let p=A*28+24;this.f32PerVertex!==7&&(p=A*20+16);let v=h;if(g[A]&&(v=u.outlineBorder,u.outlineBorder<0)){r[p+0]=0,r[p+1]=0,r[p+2]=0,m+=4;continue}r[p+0]=i(r[p+0],d[m+0],v),r[p+1]=i(r[p+1],d[m+1],v),r[p+2]=i(r[p+2],d[m+2],v),m+=4}continue}u.useNegativeCmap&&(u.cal_min=Math.max(Number.EPSILON,u.cal_min),u.cal_max=Math.max(u.cal_min+1e-6,u.cal_max)),u.isTransparentBelowCalMin===void 0&&(u.isTransparentBelowCalMin=!0);const f=Ve.colormap(u.colormap,u.colormapInvert);if(u.isAdditiveBlend&&a++,this.blendColormap(r,o,u,u.cal_min,u.cal_max,f),u.useNegativeCmap){const d=Ve.colormap(u.colormapNegative,u.colormapInvert);let g=u.cal_min,m=u.cal_max;isFinite(u.cal_minNeg)&&isFinite(u.cal_minNeg)&&(g=-u.cal_minNeg,m=-u.cal_maxNeg),this.blendColormap(r,o,u,g,m,d,!0)}}if(a>0)for(let c=0;c<s;c++){let u=function(g,m){return Math.min(g*m*.00392156862745098,255)},h=c*28+24;this.f32PerVertex!==7&&(h=c*20+16);const f=c*4,d=Math.min(a,o[f+3]/255);d<=0||(r[h+0]=u(r[h+0],o[f+0]),r[h+1]=u(r[h+1],o[f+1]),r[h+2]=u(r[h+2],o[f+2]),r[h+0]=i(r[h+0],o[f+0],d),r[h+1]=i(r[h+1],o[f+1],d),r[h+2]=i(r[h+2],o[f+2],d))}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(l),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.indexCount=l.length,this.vertexCount=this.pts.length}reverseFaces(t){if(this.offsetPt0||this.hasConnectome)return;const i=this.tris||[];for(let n=0;n<i.length;n+=3){const s=i[n];i[n]=i[n+1],i[n+1]=s}this.updateMesh(t)}hierarchicalOrder(){const n=this.tris.length/3,s=Math.log(n/20)/Math.log(4);if(n!==Math.pow(4,s)*20)return NaN;if(this.pts.length/3!==Math.pow(4,s)*10+2)return NaN;for(let a=0;a<15;a+=3)if(this.tris[a]!==0)return NaN;for(let a=15;a<24;a+=3)if(this.tris[a]!==3)return NaN;for(let a=24;a<30;a+=3)if(this.tris[a]!==4)return NaN;return s}decimateFaces(t,i){let n=this.tris;const s=12,r=20;for(let a=t-1;a>=i;a--){const o=Math.pow(4,a+1)*(s-2)+2,l=Math.pow(4,a)*(s-2)+2,c=n.length/3,u=Math.pow(4,a)*r;console.log(`order ${a+1} -> ${a} vertices ${o} -> ${l} faces ${c} -> ${u}`);const h=Array.from({length:o},(d,g)=>g+1);for(let d=0;d<c;d++){const g=n[3*d],m=n[3*d+1],A=n[3*d+2];h[g-1]=Math.min(h[g-1],m,A)}const f=new Uint32Array(u*3);for(let d=0;d<u;d++)f[3*d]=h[n[3*d]-1],f[3*d+1]=h[n[3*d+1]-1],f[3*d+2]=h[n[3*d+2]-1];n=f}this.tris=new Uint32Array(n)}decimateHierarchicalMesh(t,i=4){const n=this.hierarchicalOrder();if(isNaN(n))return P.warn("Unable to decimate mesh: it does not have a hierarchical structure"),!1;if(i>=n)return P.warn(`Unable to decimate mesh: input order (${n}) must be larger than downsampled order (${i})`),!1;const s=this.pts.length/3,a=Math.pow(4,i)*(12-2)+2;if(this.pts=new Float32Array(this.pts.slice(0,a*3)),this.decimateFaces(n,i),this.layers&&this.layers.length>0)for(let o=0;o<this.layers.length;o++){const l=this.layers[o];l.values instanceof Float32Array||l.values.length!==s?l.values=new Float32Array(l.values.slice(0,a)):P.warn("decimation logic needs to be updated")}return this.updateMesh(t),!0}async setLayerProperty(t,i,n,s){const r=this.layers[t];if(!r||!(i in r)){P.warn("mesh does not have property ",i," for layer ",r);return}if(i==="colormapLabel")if(typeof n=="object")r[i]=Ve.makeLabelLut(n);else if(typeof n=="string"){const a=await Ve.makeLabelLutFromUrl(n);r[i]=a,this.updateMesh(s);return}else P.error("colormapLabel requires a string or object");else r[i]=n;this.updateMesh(s)}setProperty(t,i,n){if(!(t in this)){console.warn("Mesh does not have property:",t,this);return}this[t]=i,this.updateMesh(n)}generatePosNormClr(t,i,n){(t.length<3||n.length<4)&&(P.error("Catastrophic failure generatePosNormClr()"),P.debug("this",this),P.debug("pts",t),P.debug("rgba",n));const s=gr.generateNormals(t,i),r=t.length/3,a=r===n.length/4,o=this.f32PerVertex,l=new Float32Array(r*o),c=new Uint8Array(l.buffer);let u=0,h=0,f=0,d=(o-1)*4;for(let g=0;g<r;g++)l[f+0]=t[u+0],l[f+1]=t[u+1],l[f+2]=t[u+2],o!==7?(c[d-4]=s[u+0]*127,c[d-3]=s[u+1]*127,c[d-2]=s[u+2]*127):(l[f+3]=s[u+0],l[f+4]=s[u+1],l[f+5]=s[u+2]),c[d]=n[h+0],c[d+1]=n[h+1],c[d+2]=n[h+2],c[d+3]=n[h+3],a&&(h+=4),u+=3,f+=o,d+=o*4;return l}static async readMesh(t,i,n,s=1,r=new Uint8Array([255,255,255,255]),a=!0){let o=new Uint32Array([]),l=new Float32Array([]),c="",u;const h=/(?:\.([^.]+))?$/;let f=h.exec(i)[1];if(f=f.toUpperCase(),f==="GZ"&&(f=h.exec(i.slice(0,-3))[1],f=f.toUpperCase()),f==="JCON"&&P.error("you should never see this message: load using nvconnectome not nvmesh"),f==="JSON"&&P.error("you should never see this message: load using nvconnectome not nvmesh"),r[3]=Math.max(1,r[3]),f==="TCK"||f==="TRK"||f==="TT"||f==="TRX"||f==="TRACT"){if(f==="TCK"?u=We.readTCK(t):f==="TRACT"?u=We.readTRACT(t):f==="TT"?u=await We.readTT(t):f==="TRX"?u=await We.readTRX(t):u=await We.readTRK(t),typeof u>"u"){const A=new Float32Array([0,0,0,0,0,0]),p=new Uint32Array([0]);u={pts:A,offsetPt0:p},P.error("Creating empty tracts")}return r[3]=0,new ln(u.pts,u.offsetPt0,i,r,s,a,n,"inferno",u.dpg||null,u.dps||null,u.dpv||null)}if(f==="GII")u=await We.readGII(t);else if(f==="MZ3")u=await We.readMZ3(t),"positions"in u||P.warn("MZ3 does not have positions (statistical overlay?)");else if(f==="ASC")u=We.readASC(t);else if(f==="DFS")u=We.readDFS(t);else if(f==="BYU"||f==="G")u=We.readGEO(t);else if(f==="GEO")u=We.readGEO(t,!0);else if(f==="ICO"||f==="TRI")u=We.readICO(t);else if(f==="OFF")u=We.readOFF(t);else if(f==="NV")u=We.readNV(t);else if(f==="OBJ")u=await We.readOBJ(t);else if(f==="PLY")u=We.readPLY(t);else if(f==="WRL")u=We.readWRL(t);else if(f==="X3D")u=We.readX3D(t);else if(f==="FIB"||f==="VTK"){if(u=We.readVTK(t),"offsetPt0"in u)return r[3]=0,new ln(u.pts,u.offsetPt0,i,r,s,a,n,"inferno")}else f==="SRF"?u=await We.readSRF(t):f==="STL"?u=We.readSTL(t):u=We.readFreeSurfer(t);if(u.anatomicalStructurePrimary&&(c=u.anatomicalStructurePrimary),u instanceof Float32Array)throw new Error("fatal: unknown mesh type loaded");if(!("positions"in u))throw new Error("positions not loaded");if(!u.indices)throw new Error("indices not loaded");if(l=u.positions,o=u.indices,"rgba255"in u&&u.rgba255.length>0&&(r=u.rgba255),"colors"in u&&u.colors&&u.colors.length===l.length){const A=l.length/3;r=new Uint8Array(A*4);let p=0,v=0;for(let x=0;x<A;x++)r[v++]=u.colors[p]*255,r[v++]=u.colors[p+1]*255,r[v++]=u.colors[p+2]*255,r[v++]=255,p+=3}const d=l.length/3;if(o.length/3<1||d<3)throw new Error("Mesh should have at least one triangle and three vertices");r[3]=Math.max(1,r[3]);const m=new ln(l,o,i,r,s,a,n,null,null,null,null,!0,c);if("scalars"in u&&u.scalars.length>0){const A=await We.readLayer(i,t,m,s,"gray");typeof A>"u"?P.warn("readLayer() failed to convert scalars"):(m.layers.push(A),m.updateMesh(n))}return m}static async loadLayer(t,i){let n=new Uint8Array().buffer;function s(g){const m=window.atob(g),A=m.length,p=new Uint8Array(A);for(let v=0;v<A;v++)p[v]=m.charCodeAt(v);return p.buffer}if(t.base64!==void 0)n=s(t.base64);else{if(!t.url)throw new Error("layer: missing url");const g=await fetch(t.url,{headers:t.headers});if(!g.ok)throw Error(g.statusText);n=await g.arrayBuffer()}let r,a=[];if(t.name&&t.name!=="")r=t.name;else{if(!t.url)throw new Error("layer: missing url");try{a=new URL(t.url).pathname.split("/")}catch{a=t.url.split("/")}finally{r=a.slice(-1)[0]}}r.indexOf("?")>-1&&(r=r.slice(0,r.indexOf("?")));let o=.5;"opacity"in t&&(o=t.opacity);let l="warm";"colormap"in t&&(l=t.colormap);let c="winter";"colormapNegative"in t&&(c=t.colormapNegative);let u=!1;"useNegativeCmap"in t&&(u=t.useNegativeCmap);let h=null;"cal_min"in t&&(h=t.cal_min);let f=null;"cal_max"in t&&(f=t.cal_max);const d=await We.readLayer(r,n,i,o,l,c,u,h,f);d&&i.layers.push(d)}static async loadFromUrl({url:t="",headers:i={},gl:n,name:s="",opacity:r=1,rgba255:a=[255,255,255,255],visible:o=!0,layers:l=[],buffer:c=new ArrayBuffer(0)}={}){let u=t.split("/");if(s===""){try{u=new URL(t).pathname.split("/")}catch{u=t.split("/")}s=u.slice(-1)[0],s.indexOf("?")>-1&&(s=s.slice(0,s.indexOf("?")))}if(t==="")throw Error("url must not be empty");if(!n)throw Error("gl context is null");let h;if(c.byteLength>0)h=c;else{const d=await fetch(t,{headers:i});if(!d.ok)throw Error(d.statusText);h=await d.arrayBuffer()}const f=await this.readMesh(h,s,n,r,new Uint8Array(a),o);if(!l||l.length<1)return f;for(let d=0;d<l.length;d++)await ln.loadLayer(l[d],f);return f.updateMesh(n),f}static async readFileAsync(t){return new Promise((i,n)=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.onerror=n,s.readAsArrayBuffer(t)})}static async loadFromFile({file:t,gl:i,name:n="",opacity:s=1,rgba255:r=[255,255,255,255],visible:a=!0,layers:o=[]}={}){if(!t)throw new Error("file must be set");if(!i)throw new Error("rendering context must be set");const l=await ln.readFileAsync(t),c=await ln.readMesh(l,n,i,s,new Uint8Array(r),a);if(!o||o.length<1)return c;for(let u=0;u<o.length;u++)await ln.loadLayer(o[u],c);return c.updateMesh(i),c}async loadFromBase64({base64:t,gl:i,name:n="",opacity:s=1,rgba255:r=[255,255,255,255],visible:a=!0,layers:o=[]}={}){if(!t)throw new Error("base64 must bet set");if(!i)throw new Error("rendering context must be set");function l(h){const f=window.atob(h),d=f.length,g=new Uint8Array(d);for(let m=0;m<d;m++)g[m]=f.charCodeAt(m);return g.buffer}const c=l(t),u=await ln.readMesh(c,n,i,s,new Uint8Array(r),a);if(!o||o.length<1)return u;for(let h=0;h<o.length;h++)await ln.loadLayer(o[h],u);return u.updateMesh(i),u}},uj="data:image/jpeg;base64,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ZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAAAAAEAAQBIAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAACAAA4QklNBDAAAAAAAAEBADhCSU0ELQAAAAAABgABAAAAMjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAACAAAAAgAAAAAEAG0AYwA2ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAIAAAAAAFJnaHRsb25nAAACAAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAA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bnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMTJUMjA6MDc6NDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OGNjMGI3YS1iYTJkLWZmNDAtYmNkNC1jNGQzMzIyZjBiNzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzFjM2NhNS1hYTg4LWI5NGMtOGE4MS05YmU4MjA3ZGZiODciPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YThjMGNhZTYtODNjYy1hYzQ4LWI2YzAtN2FiODNlOWJkMGM3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMxYzNjYTUtYWE4OC1iOTRjLThhODEtOWJlODIwN2RmYjg3IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTEyVDIwOjA3OjQ3KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmI3MzZlZC0zOTRhLTM2NDgtYThiOC02Mzk1MmY0NDcxMjIiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTY6MTM6NTgrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0xM1QxNzo1NDoyNyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTc6NTQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg3NjM1NDk5LWZiMTItYWU0MC04NWEzLThkMWFiN2NkZGVhOSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjMWMzY2E1LWFhODgtYjk0Yy04YTgxLTliZTgyMDdkZmI4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVhcwAABAwAAAAkdGVjaAAABDAAAAAMclRSQwAABDwAAAgMZ1RSQwAABDwAAAgMYlRSQwAABDwAAAgMdGV4dAAAAABDb3B5cmlnaHQgKGMpIDE5OTggSGV3bGV0dC1Q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",Qx="data:image/png;base64,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",Xx={atlas:{type:"msdf",distanceRange:2,size:59.65625,width:512,height:256,yOrigin:"bottom"},metrics:{emSize:1,lineHeight:1.171875,ascender:.927734375,descender:-.244140625,underlineY:-.09765625,underlineThickness:.048828125},glyphs:[{unicode:32,advance:.24755859375},{unicode:33,advance:.25732421875,planeBounds:{left:.056159633438645884,bottom:-.02437761405677056,right:.20702396031135412,top:.7299440203067705},atlasBounds:{left:488.5,bottom:145.5,right:497.5,top:190.5}},{unicode:34,advance:.31982421875,planeBounds:{left:.049409125974004715,bottom:.48691155587022,right:.2840869677759953,top:.77187750662978},atlasBounds:{left:486.5,bottom:213.5,right:500.5,top:230.5}},{unicode:35,advance:.61572265625,planeBounds:{left:.037219103997511785,bottom:-.02169206718177056,right:.6239137085024882,top:.7326295671817705},atlasBounds:{left:66.5,bottom:51.5,right:101.5,top:96.5}},{unicode:36,advance:.5615234375,planeBounds:{left:.02956531458715296,bottom:-.12381369908983761,right:.5324464041628472,top:.8484230740898377},atlasBounds:{left:109.5,bottom:197.5,right:139.5,top:255.5}},{unicode:37,advance:.732421875,planeBounds:{left:.026481776289942378,bottom:-.030073418674698794,right:.7137525987100576,top:.7410109186746989},atlasBounds:{left:88.5,bottom:144.5,right:129.5,top:190.5}},{unicode:38,advance:.62158203125,planeBounds:{left:.03225572125458355,bottom:-.030073418674698794,right:.6357130287454166,top:.7410109186746989},atlasBounds:{left:130.5,bottom:144.5,right:166.5,top:190.5}},{unicode:39,advance:.17431640625,planeBounds:{left:.028244602049502358,bottom:.49895501673814824,right:.14558352295049765,top:.7671582645118518},atlasBounds:{left:498.5,bottom:62.5,right:505.5,top:78.5}},{unicode:40,advance:.341796875,planeBounds:{left:.042983329377291775,bottom:-.250029542422407,right:.34471198312270823,top:.8227834486724072},atlasBounds:{left:.5,bottom:191.5,right:18.5,top:255.5}},{unicode:41,advance:.34765625,planeBounds:{left:-.003159248747708225,bottom:-.250029542422407,right:.29856940499770823,top:.8227834486724072},atlasBounds:{left:19.5,bottom:191.5,right:37.5,top:255.5}},{unicode:42,advance:.4306640625,planeBounds:{left:-.011208599684062338,bottom:.27785390031593765,right:.44138438093406235,top:.7304468809340623},atlasBounds:{left:449.5,bottom:23.5,right:476.5,top:50.5}},{unicode:43,advance:.56689453125,planeBounds:{left:.01353503347629649,bottom:.053493525733368255,right:.5499415290237036,top:.6066627242666317},atlasBounds:{left:361.5,bottom:17.5,right:393.5,top:50.5}},{unicode:44,advance:.1962890625,planeBounds:{left:-.009919475797210583,bottom:-.15981695975478,right:.1744702570472106,top:.12514899100478},atlasBounds:{left:498.5,bottom:79.5,right:509.5,top:96.5}},{unicode:45,advance:.27587890625,planeBounds:{left:-.00527594412977999,bottom:.24333249267450235,right:.27969000662978,top:.36067141357549765},atlasBounds:{left:52.5,bottom:7.5,right:69.5,top:14.5}},{unicode:46,advance:.26318359375,planeBounds:{left:.051032680313645884,bottom:-.027092319686354116,right:.20189700718635412,top:.12377200718635412},atlasBounds:{left:501.5,bottom:221.5,right:510.5,top:230.5}},{unicode:47,advance:.412109375,planeBounds:{left:-.013733006073205867,bottom:-.08573505127848349,right:.4053345685732059,top:.7356373950284835},atlasBounds:{left:252.5,bottom:206.5,right:277.5,top:255.5}},{unicode:48,advance:.5615234375,planeBounds:{left:.037458384830081196,bottom:-.030073418674698794,right:.5235767714199189,top:.7410109186746989},atlasBounds:{left:167.5,bottom:144.5,right:196.5,top:190.5}},{unicode:49,advance:.5615234375,planeBounds:{left:.06023674350936354,bottom:-.01998308280677056,right:.37872810024063647,top:.7343385515567705},atlasBounds:{left:488.5,bottom:97.5,right:507.5,top:142.5}},{unicode:50,advance:.5615234375,planeBounds:{left:.025334353719224725,bottom:-.01680925468177056,right:.5449781462807752,top:.7375123796817705},atlasBounds:{left:278.5,bottom:51.5,right:309.5,top:96.5}},{unicode:51,advance:.5615234375,planeBounds:{left:.028181041080081196,bottom:-.030073418674698794,right:.5142994276699189,top:.7410109186746989},atlasBounds:{left:197.5,bottom:144.5,right:226.5,top:190.5}},{unicode:52,advance:.5615234375,planeBounds:{left:.005886103858368255,bottom:-.02169206718177056,right:.5590553023916317,top:.7326295671817705},atlasBounds:{left:310.5,bottom:51.5,right:343.5,top:96.5}},{unicode:53,advance:.5615234375,planeBounds:{left:.055524791080081196,bottom:-.02657487968177056,right:.5416431776699189,top:.7277467546817705},atlasBounds:{left:344.5,bottom:51.5,right:373.5,top:96.5}},{unicode:54,advance:.5615234375,planeBounds:{left:.046003306705081196,bottom:-.034712090549698794,right:.5321216932949189,top:.7363722467996989},atlasBounds:{left:227.5,bottom:144.5,right:256.5,top:190.5}},{unicode:55,advance:.5615234375,planeBounds:{left:.018010134969224725,bottom:-.02169206718177056,right:.5376539275307752,top:.7326295671817705},atlasBounds:{left:374.5,bottom:51.5,right:405.5,top:96.5}},{unicode:56,advance:.5615234375,planeBounds:{left:.037702525455081196,bottom:-.030073418674698794,right:.5238209120449189,top:.7410109186746989},atlasBounds:{left:257.5,bottom:144.5,right:286.5,top:190.5}},{unicode:57,advance:.5615234375,planeBounds:{left:.029401744205081196,bottom:-.025434746799698794,right:.5155201307949189,top:.7456495905496989},atlasBounds:{left:287.5,bottom:144.5,right:316.5,top:190.5}},{unicode:58,advance:.2421875,planeBounds:{left:.046394008438645884,bottom:-.029431286627488215,right:.19725833531135412,top:.5572633178774882},atlasBounds:{left:439.5,bottom:61.5,right:448.5,top:96.5}},{unicode:59,advance:.21142578125,planeBounds:{left:.001066852327789419,bottom:-.16459733294591408,right:.1854565851722106,top:.556198895445914},atlasBounds:{left:406.5,bottom:53.5,right:417.5,top:96.5}},{unicode:60,advance:.50830078125,planeBounds:{left:.016948142433865897,bottom:.0726146348300812,right:.4527784200661341,top:.5587330214199189},atlasBounds:{left:394.5,bottom:21.5,right:420.5,top:50.5}},{unicode:61,advance:.548828125,planeBounds:{left:.051535540940937666,bottom:.17620354038436353,right:.5041285215590624,top:.49469489711563647},atlasBounds:{left:477.5,bottom:31.5,right:504.5,top:50.5}},{unicode:62,advance:.5224609375,planeBounds:{left:.047629290940937666,bottom:.0731029160800812,right:.5002222715590624,top:.5592213026699189},atlasBounds:{left:421.5,bottom:21.5,right:448.5,top:50.5}},{unicode:63,advance:.47216796875,planeBounds:{left:.016704001808865897,bottom:-.027876153049698794,right:.4525342794411341,top:.7432081842996989},atlasBounds:{left:317.5,bottom:144.5,right:343.5,top:190.5}},{unicode:64,advance:.89794921875,planeBounds:{left:.034064457306783605,bottom:-.23896750384690937,right:.8721996065996072,top:.7165065663469093},atlasBounds:{left:155.5,bottom:198.5,right:205.5,top:255.5}},{unicode:65,advance:.65234375,planeBounds:{left:-.008838044092129387,bottom:-.02169206718177056,right:.6616700753421295,top:.7326295671817705},atlasBounds:{left:237.5,bottom:51.5,right:277.5,top:96.5}},{unicode:66,advance:.62255859375,planeBounds:{left:.06464099434422473,bottom:-.02169206718177056,right:.5842847869057752,top:.7326295671817705},atlasBounds:{left:205.5,bottom:51.5,right:236.5,top:96.5}},{unicode:67,advance:.65087890625,planeBounds:{left:.038439807122511785,bottom:-.030073418674698794,right:.6251344116274882,top:.7410109186746989},atlasBounds:{left:344.5,bottom:144.5,right:379.5,top:190.5}},{unicode:68,advance:.65576171875,planeBounds:{left:.06301501010836826,bottom:-.02169206718177056,right:.6161842086416317,top:.7326295671817705},atlasBounds:{left:162.5,bottom:51.5,right:195.5,top:96.5}},{unicode:69,advance:.568359375,planeBounds:{left:.0652904160800812,bottom:-.02169206718177056,right:.5514088026699189,top:.7326295671817705},atlasBounds:{left:132.5,bottom:51.5,right:161.5,top:96.5}},{unicode:70,advance:.552734375,planeBounds:{left:.059675181705081196,bottom:-.02169206718177056,right:.5457935682949189,top:.7326295671817705},atlasBounds:{left:102.5,bottom:51.5,right:131.5,top:96.5}},{unicode:71,advance:.68115234375,planeBounds:{left:.040148791497511785,bottom:-.030073418674698794,right:.6268433960024882,top:.7410109186746989},atlasBounds:{left:380.5,bottom:144.5,right:415.5,top:190.5}},{unicode:72,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:30.5,bottom:51.5,right:65.5,top:96.5}},{unicode:73,advance:.27197265625,planeBounds:{left:.06917965680657412,bottom:-.02169206718177056,right:.20328128069342588,top:.7326295671817705},atlasBounds:{left:196.5,bottom:51.5,right:204.5,top:96.5}},{unicode:74,advance:.5517578125,planeBounds:{left:.007184947330081194,bottom:-.02657487968177056,right:.4933033339199188,top:.7277467546817705},atlasBounds:{left:.5,bottom:51.5,right:29.5,top:96.5}},{unicode:75,advance:.626953125,planeBounds:{left:.061633166497511785,bottom:-.02169206718177056,right:.6483277710024882,top:.7326295671817705},atlasBounds:{left:452.5,bottom:97.5,right:487.5,top:142.5}},{unicode:76,advance:.5380859375,planeBounds:{left:.06341786132300943,bottom:-.02169206718177056,right:.5327735449269906,top:.7326295671817705},atlasBounds:{left:423.5,bottom:97.5,right:451.5,top:142.5}},{unicode:77,advance:.873046875,planeBounds:{left:.05911847969322944,bottom:-.02169206718177056,right:.8134401140567705,top:.7326295671817705},atlasBounds:{left:377.5,bottom:97.5,right:422.5,top:142.5}},{unicode:78,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:341.5,bottom:97.5,right:376.5,top:142.5}},{unicode:79,advance:.6875,planeBounds:{left:.033395854136655315,bottom:-.030073418674698794,right:.6536158646133446,top:.7410109186746989},atlasBounds:{left:416.5,bottom:144.5,right:453.5,top:190.5}},{unicode:80,advance:.630859375,planeBounds:{left:.061550166358368255,bottom:-.02169206718177056,right:.6147193648916317,top:.7326295671817705},atlasBounds:{left:273.5,bottom:97.5,right:306.5,top:142.5}},{unicode:81,advance:.6875,planeBounds:{left:.030466166636655315,bottom:-.14391866037519643,right:.6506861771133446,top:.7445045978751964},atlasBounds:{left:214.5,bottom:202.5,right:251.5,top:255.5}},{unicode:82,advance:.61572265625,planeBounds:{left:.06350329135836826,bottom:-.02169206718177056,right:.6166724898916317,top:.7326295671817705},atlasBounds:{left:186.5,bottom:97.5,right:219.5,top:142.5}},{unicode:83,advance:.59326171875,planeBounds:{left:.020778681983368255,bottom:-.030073418674698794,right:.5739478805166317,top:.7410109186746989},atlasBounds:{left:454.5,bottom:144.5,right:487.5,top:190.5}},{unicode:84,advance:.5966796875,planeBounds:{left:.005480822747511787,bottom:-.02169206718177056,right:.5921754272524882,top:.7326295671817705},atlasBounds:{left:112.5,bottom:97.5,right:147.5,top:142.5}},{unicode:85,advance:.6484375,planeBounds:{left:.049098994483368255,bottom:-.02657487968177056,right:.6022681930166317,top:.7277467546817705},atlasBounds:{left:78.5,bottom:97.5,right:111.5,top:142.5}},{unicode:86,advance:.63623046875,planeBounds:{left:-.008269192599201152,bottom:-.02169206718177056,right:.6454762238492011,top:.7326295671817705},atlasBounds:{left:38.5,bottom:97.5,right:77.5,top:142.5}},{unicode:87,advance:.88720703125,planeBounds:{left:.011923628617731797,bottom:-.02169206718177056,right:.8835841838822683,top:.7326295671817705},atlasBounds:{left:220.5,bottom:97.5,right:272.5,top:142.5}},{unicode:88,advance:.626953125,planeBounds:{left:.004098979136655316,bottom:-.02169206718177056,right:.6243189896133446,top:.7326295671817705},atlasBounds:{left:.5,bottom:97.5,right:37.5,top:142.5}},{unicode:89,advance:.6005859375,planeBounds:{left:-.010793598988344685,bottom:-.02169206718177056,right:.6094264114883446,top:.7326295671817705},atlasBounds:{left:148.5,bottom:97.5,right:185.5,top:142.5}},{unicode:90,advance:.5986328125,planeBounds:{left:.024196650733368255,bottom:-.02169206718177056,right:.5773658492666317,top:.7326295671817705},atlasBounds:{left:307.5,bottom:97.5,right:340.5,top:142.5}},{unicode:91,advance:.26513671875,planeBounds:{left:.05437250871693295,bottom:-.17280296457569408,right:.27228764753306706,top:.8329592145756942},atlasBounds:{left:59.5,bottom:195.5,right:72.5,top:255.5}},{unicode:92,advance:.41015625,planeBounds:{left:.0014037126767941326,bottom:-.08573505127848349,right:.4204712873232059,top:.7356373950284835},atlasBounds:{left:278.5,bottom:206.5,right:303.5,top:255.5}},{unicode:93,advance:.26513671875,planeBounds:{left:-.020659233400995285,bottom:-.17280296457569408,right:.2140186084009953,top:.8329592145756942},atlasBounds:{left:94.5,bottom:195.5,right:108.5,top:255.5}},{unicode:94,advance:.41796875,planeBounds:{left:.006855376669722368,bottom:.33229482979472236,right:.40916024833027764,top:.7345997014552776},atlasBounds:{left:486.5,bottom:231.5,right:510.5,top:255.5}},{unicode:95,advance:.451171875,planeBounds:{left:-.017473255794918804,bottom:-.09553469482549765,right:.4686451307949188,top:.021804226075497646},atlasBounds:{left:70.5,bottom:7.5,right:99.5,top:14.5}},{unicode:96,advance:.30908203125,planeBounds:{left:.00391839948107648,bottom:.5860277898277895,right:.2553589442689235,top:.7704175226722105},atlasBounds:{left:36.5,bottom:3.5,right:51.5,top:14.5}},{unicode:97,advance:.5439453125,planeBounds:{left:.028181041080081196,bottom:-.029187146002488215,right:.5142994276699189,top:.5575074585024882},atlasBounds:{left:30.5,bottom:15.5,right:59.5,top:50.5}},{unicode:98,advance:.56103515625,planeBounds:{left:.048932994205081196,bottom:-.032187684160555265,right:.5350513807949189,top:.7724220591605554},atlasBounds:{left:304.5,bottom:207.5,right:333.5,top:255.5}},{unicode:99,advance:.5234375,planeBounds:{left:.024518931705081196,bottom:-.029187146002488215,right:.5106373182949189,top:.5575074585024882},atlasBounds:{left:.5,bottom:15.5,right:29.5,top:50.5}},{unicode:100,advance:.56396484375,planeBounds:{left:.026227916080081196,bottom:-.032187684160555265,right:.5123463026699189,top:.7724220591605554},atlasBounds:{left:334.5,bottom:207.5,right:363.5,top:255.5}},{unicode:101,advance:.52978515625,planeBounds:{left:.026472056705081196,bottom:-.029187146002488215,right:.5125904432949189,top:.5575074585024882},atlasBounds:{left:468.5,bottom:61.5,right:497.5,top:96.5}},{unicode:102,advance:.34716796875,planeBounds:{left:.004575110905578838,bottom:-.022177918535555265,right:.3733545765944212,top:.7824318247855554},atlasBounds:{left:364.5,bottom:207.5,right:386.5,top:255.5}},{unicode:103,advance:.56103515625,planeBounds:{left:.026960337955081196,bottom:-.22888445766762702,right:.5130787245449189,top:.558962582667627},atlasBounds:{left:28.5,bottom:143.5,right:57.5,top:190.5}},{unicode:104,advance:.55078125,planeBounds:{left:.049826556565937666,bottom:-.01892352016762703,right:.5024195371840624,top:.768923520167627},atlasBounds:{left:.5,bottom:143.5,right:27.5,top:190.5}},{unicode:105,advance:.24267578125,planeBounds:{left:.046882289688645884,bottom:-.01680925468177056,right:.19774661656135412,top:.7375123796817705},atlasBounds:{left:498.5,bottom:145.5,right:507.5,top:190.5}},{unicode:106,advance:.23876953125,planeBounds:{left:-.048979545900995285,bottom:-.2324562772148376,right:.1856982959009953,top:.7397804959648377},atlasBounds:{left:140.5,bottom:197.5,right:154.5,top:255.5}},{unicode:107,advance:.5068359375,planeBounds:{left:.044294322330081196,bottom:-.01892352016762703,right:.5304127089199189,top:.768923520167627},atlasBounds:{left:58.5,bottom:143.5,right:87.5,top:190.5}},{unicode:108,advance:.24267578125,planeBounds:{left:.05428707868157412,bottom:-.01892352016762703,right:.18838870256842588,top:.768923520167627},atlasBounds:{left:477.5,bottom:208.5,right:485.5,top:255.5}},{unicode:109,advance:.87646484375,planeBounds:{left:.04430890170737297,bottom:-.024304333502488215,right:.832155942042627,top:.5623902710024882},atlasBounds:{left:116.5,bottom:15.5,right:163.5,top:50.5}},{unicode:110,advance:.5517578125,planeBounds:{left:.049826556565937666,bottom:-.024304333502488215,right:.5024195371840624,top:.5623902710024882},atlasBounds:{left:60.5,bottom:15.5,right:87.5,top:50.5}},{unicode:111,advance:.5703125,planeBounds:{left:.025090213094224725,bottom:-.029187146002488215,right:.5447340056557752,top:.5575074585024882},atlasBounds:{left:193.5,bottom:15.5,right:224.5,top:50.5}},{unicode:112,advance:.56103515625,planeBounds:{left:.048444712955081196,bottom:-.22644305141762702,right:.5345630995449189,top:.561403988917627},atlasBounds:{left:447.5,bottom:208.5,right:476.5,top:255.5}},{unicode:113,advance:.568359375,planeBounds:{left:.025983775455081196,bottom:-.22644305141762702,right:.5121021620449189,top:.561403988917627},atlasBounds:{left:417.5,bottom:208.5,right:446.5,top:255.5}},{unicode:114,advance:.33837890625,planeBounds:{left:.045180595002291775,bottom:-.024304333502488215,right:.34690924874770823,top:.5623902710024882},atlasBounds:{left:449.5,bottom:61.5,right:467.5,top:96.5}},{unicode:115,advance:.515625,planeBounds:{left:.021669814448009427,bottom:-.029187146002488215,right:.4910254980519906,top:.5575074585024882},atlasBounds:{left:164.5,bottom:15.5,right:192.5,top:50.5}},{unicode:116,advance:.32666015625,planeBounds:{left:-.019433670483564695,bottom:-.02877457520298586,right:.3158203892335647,top:.675258950202986},atlasBounds:{left:418.5,bottom:54.5,right:438.5,top:96.5}},{unicode:117,advance:.55126953125,planeBounds:{left:.048117572190937666,bottom:-.034069958502488215,right:.5007105528090624,top:.5526246460024882},atlasBounds:{left:88.5,bottom:15.5,right:115.5,top:50.5}},{unicode:118,advance:.484375,planeBounds:{left:-.002092396419918806,bottom:-.02080579450955998,right:.4840259901699188,top:.5491261070095601},atlasBounds:{left:331.5,bottom:16.5,right:360.5,top:50.5}},{unicode:119,advance:.75146484375,planeBounds:{left:-.002649098431770561,bottom:-.02080579450955998,right:.7516725359317705,top:.5491261070095601},atlasBounds:{left:225.5,bottom:16.5,right:270.5,top:50.5}},{unicode:120,advance:.49560546875,planeBounds:{left:-.0046143729128470395,bottom:-.02080579450955998,right:.4982667166628471,top:.5491261070095601},atlasBounds:{left:300.5,bottom:16.5,right:330.5,top:50.5}},{unicode:121,advance:.47314453125,planeBounds:{left:-.007219349544918806,bottom:-.23645281704262702,right:.4788990370449188,top:.551394223292627},atlasBounds:{left:387.5,bottom:208.5,right:416.5,top:255.5}},{unicode:122,advance:.49560546875,planeBounds:{left:.018007705073009427,bottom:-.02080579450955998,right:.4873633886769906,top:.5491261070095601},atlasBounds:{left:271.5,bottom:16.5,right:299.5,top:50.5}},{unicode:123,advance:.33837890625,planeBounds:{left:.011572188891435306,bottom:-.20234398020069408,right:.3468262486085647,top:.8034181989506942},atlasBounds:{left:73.5,bottom:195.5,right:93.5,top:255.5}},{unicode:124,advance:.24365234375,planeBounds:{left:.06315671142450235,bottom:-.15466084787519643,right:.18049563232549765,top:.7337624103751964},atlasBounds:{left:206.5,bottom:202.5,right:213.5,top:255.5}},{unicode:125,advance:.33837890625,planeBounds:{left:-.010156326733564695,bottom:-.20234398020069408,right:.3250977329835647,top:.8034181989506942},atlasBounds:{left:38.5,bottom:195.5,right:58.5,top:255.5}},{unicode:126,advance:.68017578125,planeBounds:{left:.046984728997511785,bottom:.1766063915990047,right:.6336793335024882,top:.4112842334009953},atlasBounds:{left:.5,bottom:.5,right:35.5,top:14.5}}],kerning:[]},zu={name:"untitled connectome",nodeColormap:"warm",nodeColormapNegative:"winter",nodeMinColor:0,nodeMaxColor:4,nodeScale:3,edgeColormap:"warm",edgeColormapNegative:"winter",edgeMin:2,edgeMax:6,edgeScale:1,legendLineThickness:0,showLegend:!0},_u=class m6 extends Ma{constructor(t,i){super(new Float32Array([]),new Uint32Array([]),i.name,new Uint8Array([]),1,!0,t,i),B(this,"gl"),B(this,"nodesChanged"),this.gl=t,this.type="connectome",this.nodes&&this.updateLabels(),this.nodesChanged=new EventTarget}static convertLegacyConnectome(t){const i={nodes:[],edges:[],...zu};for(const s in t)if(s in zu){const r=s;i[r]=t[r]}const n=t.nodes;for(let s=0;s<n.names.length;s++)i.nodes.push({name:n.names[s],x:n.X[s],y:n.Y[s],z:n.Z[s],colorValue:n.Color[s],sizeValue:n.Size[s]});for(let s=0;s<n.names.length-1;s++)for(let r=s+1;r<n.names.length;r++){const a=t.edges[s*n.names.length+r];i.edges.push({first:s,second:r,colorValue:a})}return i}static convertFreeSurferConnectome(t,i="warm"){let n=!0;if("data_type"in t?t.data_type!=="fs_pointset"&&(n=!1):n=!1,"points"in t||(n=!1),!n)throw Error("not a valid FreeSurfer json pointset");const s=t.points.map(a=>({name:Array.isArray(a.comments)&&a.comments.length>0&&"text"in a.comments[0]?a.comments[0].text:"",x:a.coordinates.x,y:a.coordinates.y,z:a.coordinates.z,colorValue:1,sizeValue:1,metadata:a.comments}));return{...zu,nodeColormap:i,edgeColormap:i,nodes:s,edges:[]}}updateLabels(){const t=this.nodes;if(t&&t.length>0){const i=t.reduce((c,u)=>c.sizeValue>u.sizeValue?c:u).sizeValue;let n,s;if(typeof this.nodeMinColor<"u"&&isFinite(this.nodeMinColor))n=this.nodeMinColor;else{n=t[0].colorValue;for(let c=1;c<t.length;c++)t[c].colorValue<n&&(n=t[c].colorValue)}if(typeof this.nodeMaxColor<"u"&&isFinite(this.nodeMaxColor))s=this.nodeMaxColor;else{s=t[0].colorValue;for(let c=1;c<t.length;c++)t[c].colorValue>s&&(s=t[c].colorValue)}const r=Ve.colormap(this.nodeColormap,this.colormapInvert),a=Ve.colormap(this.nodeColormapNegative,this.colormapInvert),o="nodeColormapNegative"in this;let l=this.legendLineThickness?this.legendLineThickness:0;this.showLegend===!1&&(l=0);for(let c=0;c<t.length;c++){let u=t[c].colorValue,h=!1;if(o&&u<0&&(h=!0,u=-u),n<s){if(u<n){P.warn("color value lower than min");continue}u=(u-n)/(s-n)}else u=1;u=Math.round(Math.max(Math.min(255,u*255)))*4;let f=[r[u],r[u+1],r[u+2],255];h&&(f=[a[u],a[u+1],a[u+2],255]),f=f.map(d=>d/255),P.debug("adding label for ",t[c]),t[c].label=new m2(t[c].name,{textColor:f,bulletScale:t[c].sizeValue/i,bulletColor:f,lineWidth:l,lineColor:f,textScale:1,textAlignment:"left",lineTerminator:"none"},[t[c].x,t[c].y,t[c].z]),P.debug("label for node:",t[c].label)}}}addConnectomeNode(t){if(P.debug("adding node",t),!this.nodes)throw new Error("nodes not defined");this.nodes.push(t),this.updateLabels(),this.nodesChanged.dispatchEvent(new CustomEvent("nodeAdded",{detail:{node:t}}))}deleteConnectomeNode(t){const i=this.nodes.indexOf(t),n=this.edges;n&&(this.edges=n.filter(s=>s.first!==i&&s.second!==i)),this.nodes=this.nodes.filter(s=>s!==t),this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeDeleted",{detail:{node:t}}))}updateConnectomeNodeByIndex(t,i){this.nodes[t]=i,this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeChanged",{detail:{node:i}}))}updateConnectomeNodeByPoint(t,i){const n=this.nodes;if(!n)throw new Error("Node to update does not exist");const s=n.find(a=>ae.arraysAreEqual([a.x,a.y,a.z],t));if(!s)throw new Error(`Node with point ${t} to update does not exist`);const r=n.findIndex(a=>a===s);this.updateConnectomeNodeByIndex(r,i)}addConnectomeEdge(t,i,n){const s=this.edges;let r=s.find(a=>(a.first===t||a.second===t)&&a.first+a.second===t+i);return r||(r={first:t,second:i,colorValue:n},s.push(r),this.updateConnectome(this.gl),r)}deleteConnectomeEdge(t,i){const n=this.edges,s=n.find(r=>(r.first===t||r.first===i)&&r.first+r.second===t+i);if(s)this.edges=n.filter(r=>r!==s);else throw new Error(`edge between ${t} and ${i} not found`);return this.updateConnectome(this.gl),s}findClosestConnectomeNode(t,i){const n=this.nodes;if(!n||n.length===0)return null;const s=n.map((r,a)=>({node:r,distance:Math.sqrt(Math.pow(r.x-t[0],2)+Math.pow(r.y-t[1],2)+Math.pow(r.z-t[2],2)),index:a})).filter(r=>r.distance<i).sort((r,a)=>r.distance-a.distance);return s.length>0?s[0].node:null}updateConnectome(t){const i=[],n=[],s=[];let r=Ve.colormap(this.nodeColormap,this.colormapInvert),a=Ve.colormap(this.nodeColormapNegative,this.colormapInvert),o="nodeColormapNegative"in this;this.nodeMinColor===void 0&&(this.nodeMinColor=NaN),this.nodeMaxColor===void 0&&(this.nodeMaxColor=NaN),this.edgeMin===void 0&&(this.edgeMin=NaN),this.edgeMax===void 0&&(this.edgeMax=NaN);let l=this.nodeMinColor,c=this.nodeMaxColor;if(!isFinite(l)||!isFinite(l)){const p=this.nodes;l=p[0].colorValue,c=p[0].colorValue;for(let v=0;v<p.length;v++)l=Math.min(l,p[v].colorValue),c=Math.max(c,p[v].colorValue)}const u=this.nodes,h=u.length;for(let p=0;p<h;p++){const v=u[p].sizeValue*this.nodeScale;if(v<=0)continue;let x=u[p].colorValue,y=!1;if(o&&x<0&&(y=!0,x=-x),l<c){if(x<l)continue;x=(x-l)/(c-l)}else x=1;x=Math.round(Math.max(Math.min(255,x*255)))*4;let b=[r[x],r[x+1],r[x+2],255];y&&(b=[a[x],a[x+1],a[x+2],255]);const E=Q(u[p].x,u[p].y,u[p].z);ia.makeColoredSphere(n,i,s,v,E,b)}r=Ve.colormap(this.edgeColormap,this.colormapInvert),a=Ve.colormap(this.edgeColormapNegative,this.colormapInvert),o="edgeColormapNegative"in this;const f=this.edges;if(f!==void 0&&f.length>0){if(l=this.edgeMin,c=this.edgeMax,!isFinite(l)||!isFinite(l)){l=f[0].colorValue,c=f[0].colorValue;for(let p=0;p<f.length;p++)l=Math.min(l,f[p].colorValue),c=Math.max(c,f[p].colorValue)}for(const p of f){let v=p.colorValue;const x=o&&v<0;x&&(v=-v);const y=v*this.edgeScale;if(y<=0)continue;if(l<c){if(v<l)continue;v=(v-l)/(c-l)}else v=1;v=Math.round(Math.max(Math.min(255,v*255)))*4;let b=[r[v],r[v+1],r[v+2],255];x&&(b=[a[v],a[v+1],a[v+2],255]);const E=Q(u[p.first].x,u[p.first].y,u[p.first].z),w=Q(u[p.second].x,u[p.second].y,u[p.second].z);ia.makeColoredCylinder(n,i,s,E,w,y,b)}}const d=new Float32Array(n),g=new Uint32Array(i),m=gr.getExtents(d);this.furthestVertexFromOrigin=m.mxDx,this.extentsMin=m.extentsMin,this.extentsMax=m.extentsMax;const A=this.generatePosNormClr(d,g,new Uint8Array(s));t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(g),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Float32Array.from(A),t.STATIC_DRAW),this.indexCount=i.length}updateMesh(t){this.updateConnectome(t),this.updateLabels()}json(){const t={};for(const i in this)(i in zu||i==="nodes"||i==="edges")&&(t[i]=this[i]);return t}static async loadConnectomeFromUrl(t,i){const s=await(await fetch(i)).json();return new m6(t,s)}};function hj(e,t,i){if(!e.dimsRAS||!e.matRAS||!e.pixDimsRAS||!e.vox2mm)throw new Error("Cannot create NiivueObject3D: Missing required RAS properties or vox2mm access on NVImage.");const n=e.dimsRAS,s=e.matRAS,r=e.pixDimsRAS,a=-.5,o=-.5,l=-.5,c=n[1]-1+.5,u=n[2]-1+.5,h=n[3]-1+.5,f=e.vox2mm,d=f.call(e,[a,o,l],s),g=f.call(e,[a,u,l],s),m=f.call(e,[a,o,h],s),A=f.call(e,[a,u,h],s),p=f.call(e,[c,o,l],s),v=f.call(e,[c,u,l],s),x=f.call(e,[c,o,h],s),y=f.call(e,[c,u,h],s),b=[...m,0,0,1,...x,1,0,1,...y,1,1,1,...A,0,1,1,...d,0,0,0,...g,0,1,0,...v,1,1,0,...p,1,0,0],E=i.createBuffer();if(!E)throw new Error("Failed to create GL index buffer");i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,E);const w=[0,3,2,2,1,0,4,7,6,6,5,4,5,6,2,2,3,5,4,0,1,1,7,4,7,1,2,2,6,7,4,5,3,3,0,4];i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(w),i.STATIC_DRAW);const S=i.createBuffer();if(!S)throw new Error("Failed to create GL vertex buffer");i.bindBuffer(i.ARRAY_BUFFER,S),i.bufferData(i.ARRAY_BUFFER,new Float32Array(b),i.STATIC_DRAW);const M=i.createVertexArray();if(!M)throw new Error("Failed to create GL VAO");i.bindVertexArray(M),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,E),i.bindBuffer(i.ARRAY_BUFFER,S);const T=24;i.enableVertexAttribArray(0),i.vertexAttribPointer(0,3,i.FLOAT,!1,T,0),i.enableVertexAttribArray(1),i.vertexAttribPointer(1,3,i.FLOAT,!1,T,12),i.bindVertexArray(null);const R=new ia(t,S,i.TRIANGLES,w.length,E,M),D=[...m,...x,...y,...A,...d,...g,...v,...p],I=Jk(D);return R.extentsMin=I.min.slice(),R.extentsMax=I.max.slice(),R.furthestVertexFromOrigin=I.furthestVertexFromOrigin,R.originNegate=Yl(I.origin),eP(R.originNegate,R.originNegate),R.fieldOfViewDeObliqueMM=[n[1]*r[1],n[2]*r[2],n[3]*r[3]],R}function fj(e){return new Promise((t,i)=>{let n;e instanceof File?n=Promise.resolve(e):n=new Promise((s,r)=>{e.file(s,r)}),n.then(s=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):i(new Error("Expected a string from FileReader.result"))},r.onerror=()=>{i(r.error??new Error("Unknown FileReader error"))},r.readAsDataURL(s)}).catch(s=>i(s))})}function dj(e){const t=e.hdr.dims,i=e.permRAS,n=t[1]*t[2]*t[3],s=new Int16Array(n),r=[0,0,0];for(let d=0;d<3;d++)for(let g=0;g<3;g++)Math.abs(i[d])-1===g&&(r[g]=d*Math.sign(i[d]));let a=1;const o=[1,1,1],l=[!1,!1,!1];for(let d=0;d<r.length;d++)for(let g=0;g<r.length;g++)Math.abs(r[g])===d&&(o[g]=a,(r[g]<0||Object.is(r[g],-0))&&(l[g]=!0),a*=t[g+1]);let c=ae.range(0,t[1]-1,1);l[0]&&(c=ae.range(t[1]-1,0,-1));for(let d=0;d<t[1];d++)c[d]*=o[0];let u=ae.range(0,t[2]-1,1);l[1]&&(u=ae.range(t[2]-1,0,-1));for(let d=0;d<t[2];d++)u[d]*=o[1];let h=ae.range(0,t[3]-1,1);l[2]&&(h=ae.range(t[3]-1,0,-1));for(let d=0;d<t[3];d++)h[d]*=o[2];let f=0;for(let d=0;d<t[3];d++)for(let g=0;g<t[2];g++)for(let m=0;m<t[1];m++)s[c[m]+u[g]+h[d]]=e.img[f],f++;return s}function Wx(e,t){const i=Math.floor(Math.log(e)/Math.log(10)),n=e/Math.pow(10,i);let s;return t?n<1.5?s=1:n<3?s=2:n<7?s=5:s=10:n<=1?s=1:n<=2?s=2:n<=5?s=5:s=10,s*Math.pow(10,i)}function gl(e,t,i=4){const n=Wx(t-e,!1),s=Wx(n/(i-1),!0),r=Math.floor(e/s)*s,a=Math.ceil(t/s)*s;return[s,r,a,r===e&&a===t]}function Zx(e,t){let i=gl(e,t,3);return i[3]||(i=gl(e,t,5)),i[3]||(i=gl(e,t,4)),i[3]||(i=gl(e,t,3)),i[3]||(i=gl(e,t,5)),[i[0],i[1],i[2]]}function us(e){return e*(Math.PI/180)}function X0(e,t,i,n){let s=-e,r=-t;return isFinite(i)&&isFinite(n)&&(s=i,r=n),s>r&&([s,r]=[r,s]),[s,r]}function Nt(e,t=[0,1,2]){const i=_e();return i[0]=e[t[0]],i[1]=e[t[1]],i[2]=e[t[2]],i}function Jx(e){const t=Ye(1,0,0,0),i=Cn();return bt(i,t,e),i[0]}function mj(e,t,i,n){const s=Ye(e,t,i,1),r=ot(n);ti(r,r),s[0]=s[0]*2-1,s[1]=s[1]*2-1,s[2]=s[2]*2-1;const a=Cn();return bt(a,s,r),a[3]===0||(a[0]/=a[3],a[1]/=a[3],a[2]/=a[3]),a}function gj(e){const t=[5960464477539063e-23,152587890625e-16,.00390625,1];return(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3])/255}function W0(e,t,i){return Math.min(Math.max(e,t),i)}function pj(e){const t=e.length;let i=0;const n=new Uint8Array(t+Math.ceil(.01*t)),s=new Int8Array(n.buffer);let r=0;for(;i<t;){let a=e[i];i++;let o=1;for(;o<129&&i<t&&e[i]===a;)i++,o++;if(o>1){s[r]=-o+1,r++,n[r]=a,r++;continue}for(;i<t&&!(o>127||i+2<t&&a!==e[i]&&e[i+2]===e[i]&&e[i+1]===e[i]);)a=e[i],i++,o++;n[r]=o-1,r++;for(let l=0;l<o;l++)n[r]=e[i-o+l],r++}return P.info("PackBits "+t+" -> "+r+" bytes (x"+t/r+")"),n.slice(0,r)}function $x(e,t){const i=new Uint8Array(e.buffer),n=new Int8Array(i.buffer);let s=0;const r=new Uint8Array(t);let a=0;for(;s<i.length;){const o=n[s];if(s++,o<0){const l=n[s];s++;for(let c=0;c<1-o;c++)r[a]=l,a++}else for(let l=0;l<o+1;l++)r[a]=n[s],s++,a++}return r}function ey(e,t){return e.scl_slope===0&&(e.scl_slope=1),t*e.scl_slope+e.scl_inter}var ur=["ASC","BYU","DFS","FSM","PIAL","ORIG","INFLATED","SMOOTHWM","SPHERE","WHITE","G","GEO","GII","ICO","MZ3","NV","OBJ","OFF","PLY","SRF","STL","TCK","TRACT","TRI","TRK","TT","TRX","VTK","WRL","X3D","JCON","JSON"],ty=0,vj=1,Aj=2,Aa=33984,Gu=33985,Z0=33986,xj=33987,yj=33988,iy=33989,ny=33990,hs=33991,sy=33992,bj=33993,ry=33994,wj=33995,Sj=33996,Cj=33997,Ej=33998,Tj=33999,ay={filename:"",isSaveDrawing:!1,volumeByIndex:0},Mj=class{constructor(e=un){B(this,"loaders",{}),B(this,"dicomLoader",null),B(this,"canvas",null),B(this,"_gl",null),B(this,"isBusy",!1),B(this,"needsRefresh",!1),B(this,"colormapTexture",null),B(this,"colormapLists",[]),B(this,"volumeTexture",null),B(this,"gradientTexture",null),B(this,"gradientTextureAmount",0),B(this,"renderGradientValues",!1),B(this,"drawTexture",null),B(this,"drawUndoBitmaps",[]),B(this,"drawLut",Ve.makeDrawLut("$itksnap")),B(this,"drawOpacity",.8),B(this,"clickToSegmentIsGrowing",!1),B(this,"clickToSegmentGrowingBitmap",null),B(this,"clickToSegmentXY",[0,0]),B(this,"renderDrawAmbientOcclusion",.4),B(this,"colorbarHeight",0),B(this,"drawPenLocation",[NaN,NaN,NaN]),B(this,"drawPenAxCorSag",-1),B(this,"drawFillOverwrites",!0),B(this,"drawPenFillPts",[]),B(this,"overlayTexture",null),B(this,"overlayTextureID",null),B(this,"sliceMMShader"),B(this,"slice2DShader"),B(this,"sliceV1Shader"),B(this,"orientCubeShader"),B(this,"orientCubeShaderVAO",null),B(this,"rectShader"),B(this,"rectOutlineShader"),B(this,"renderShader"),B(this,"lineShader"),B(this,"line3DShader"),B(this,"passThroughShader"),B(this,"renderGradientShader"),B(this,"renderGradientValuesShader"),B(this,"renderSliceShader"),B(this,"renderVolumeShader"),B(this,"pickingMeshShader"),B(this,"pickingImageShader"),B(this,"colorbarShader"),B(this,"fontShader",null),B(this,"fiberShader"),B(this,"fontTexture",null),B(this,"circleShader"),B(this,"matCapTexture",null),B(this,"bmpShader",null),B(this,"bmpTexture",null),B(this,"thumbnailVisible",!1),B(this,"bmpTextureWH",1),B(this,"growCutShader"),B(this,"orientShaderAtlasU",null),B(this,"orientShaderAtlasI",null),B(this,"orientShaderU",null),B(this,"orientShaderI",null),B(this,"orientShaderF",null),B(this,"orientShaderRGBU",null),B(this,"surfaceShader",null),B(this,"blurShader",null),B(this,"sobelBlurShader",null),B(this,"sobelFirstOrderShader",null),B(this,"sobelSecondOrderShader",null),B(this,"genericVAO",null),B(this,"unusedVAO",null),B(this,"crosshairs3D",null),B(this,"DEFAULT_FONT_GLYPH_SHEET",Qx),B(this,"DEFAULT_FONT_METRICS",Xx),B(this,"fontMetrics"),B(this,"fontMets",null),B(this,"backgroundMasksOverlays",0),B(this,"overlayOutlineWidth",0),B(this,"overlayAlphaShader",1),B(this,"position"),B(this,"extentsMin"),B(this,"extentsMax"),B(this,"resizeObserver",null),B(this,"resizeEventListener",null),B(this,"canvasObserver",null),B(this,"syncOpts",{"3d":!1,"2d":!1,zoomPan:!1,cal_min:!1,cal_max:!1,clipPlane:!1,gamma:!1,sliceType:!1,crosshair:!1}),B(this,"readyForSync",!1),B(this,"uiData",{mousedown:!1,touchdown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1,mouseDepthPicker:!1,clickedTile:-1,pan2DxyzmmAtMouseDown:[0,0,0,1],prevX:0,prevY:0,currX:0,currY:0,currentTouchTime:0,lastTouchTime:0,touchTimer:null,doubleTouch:!1,isDragging:!1,dragStart:[0,0],dragEnd:[0,0],dragClipPlaneStartDepthAziElev:[0,0,0],lastTwoTouchDistance:0,multiTouchGesture:!1,windowX:0,windowY:0}),B(this,"back",null),B(this,"overlays",[]),B(this,"deferredVolumes",[]),B(this,"deferredMeshes",[]),B(this,"furthestVertexFromOrigin",100),B(this,"volScale",[]),B(this,"vox",[]),B(this,"mousePos",[0,0]),B(this,"screenSlices",[]),B(this,"cuboidVertexBuffer"),B(this,"otherNV",null),B(this,"volumeObject3D",null),B(this,"pivot3D",[0,0,0]),B(this,"furthestFromPivot",10),B(this,"currentClipPlaneIndex",0),B(this,"lastCalled",new Date().getTime()),B(this,"selectedObjectId",-1),B(this,"CLIP_PLANE_ID",1),B(this,"VOLUME_ID",254),B(this,"DISTANCE_FROM_CAMERA",-.54),B(this,"graph",{LTWH:[0,0,640,480],opacity:0,vols:[0],autoSizeMultiplanar:!1,normalizeValues:!1,isRangeCalMinMax:!1}),B(this,"customLayout",[]),B(this,"meshShaders",[{Name:"Phong",Frag:pL},{Name:"Matte",Frag:AL},{Name:"Harmonic",Frag:yL},{Name:"Hemispheric",Frag:xL},{Name:"Crevice",Frag:gL},{Name:"Edge",Frag:fL},{Name:"Diffuse",Frag:dL},{Name:"Outline",Frag:cL},{Name:"Specular",Frag:mL},{Name:"Toon",Frag:lL},{Name:"Flat",Frag:Yx},{Name:"Matcap",Frag:vL},{Name:"Rim",Frag:uL},{Name:"Silhouette",Frag:hL}]),B(this,"dragModes",{contrast:1,measurement:2,none:0,pan:3,slicer3D:4,callbackOnly:5}),B(this,"sliceTypeAxial",0),B(this,"sliceTypeCoronal",1),B(this,"sliceTypeSagittal",2),B(this,"sliceTypeMultiplanar",3),B(this,"sliceTypeRender",4),B(this,"onDragRelease",()=>{}),B(this,"onMouseUp",()=>{}),B(this,"onLocationChange",()=>{}),B(this,"onIntensityChange",()=>{}),B(this,"onClickToSegment",()=>{}),B(this,"onImageLoaded",()=>{}),B(this,"onMeshLoaded",()=>{}),B(this,"onFrameChange",()=>{}),B(this,"onError",()=>{}),B(this,"onColormapChange",()=>{}),B(this,"onInfo",()=>{}),B(this,"onWarn",()=>{}),B(this,"onDebug",()=>{}),B(this,"onVolumeAddedFromUrl",()=>{}),B(this,"onVolumeWithUrlRemoved",()=>{}),B(this,"onVolumeUpdated",()=>{}),B(this,"onMeshAddedFromUrl",()=>{}),B(this,"onMeshAdded",()=>{}),B(this,"onMeshWithUrlRemoved",()=>{}),B(this,"onZoom3DChange",()=>{}),B(this,"onAzimuthElevationChange",()=>{}),B(this,"onClipPlaneChange",()=>{}),B(this,"onCustomMeshShaderAdded",()=>{}),B(this,"onMeshShaderChanged",()=>{}),B(this,"onMeshPropertyChanged",()=>{}),B(this,"onDicomLoaderFinishedWithImages",()=>{}),B(this,"onDocumentLoaded",()=>{}),B(this,"document",new Q0),B(this,"mediaUrlMap",new Map),B(this,"initialized",!1),B(this,"currentDrawUndoBitmap");for(const t in e)typeof e[t]=="function"?this[t]=e[t]:this.opts[t]=un[t]===void 0?un[t]:e[t];this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,this.opts.drawingEnabled&&this.createEmptyDrawing(),this.opts.thumbnail.length>0&&(this.thumbnailVisible=!0),P.setLogLevel(this.opts.logLevel)}get scene(){return this.document.scene}get opts(){return this.document.opts}get sliceMosaicString(){return this.document.opts.sliceMosaicString||""}set sliceMosaicString(e){this.document.opts.sliceMosaicString=e}get isAlphaClipDark(){return this.document.opts.isAlphaClipDark}set isAlphaClipDark(e){this.document.opts.isAlphaClipDark=e}cleanup(){this.resizeEventListener&&(window.removeEventListener("resize",this.resizeEventListener),this.resizeEventListener=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.canvasObserver&&(this.canvasObserver.disconnect(),this.canvasObserver=null),this.canvas&&this.opts.interactive&&(this.canvas.removeEventListener("mousedown",this.mouseDownListener.bind(this)),this.canvas.removeEventListener("mouseup",this.mouseUpListener.bind(this)),this.canvas.removeEventListener("mousemove",this.mouseMoveListener.bind(this)),this.canvas.removeEventListener("touchstart",this.touchStartListener.bind(this)),this.canvas.removeEventListener("touchend",this.touchEndListener.bind(this)),this.canvas.removeEventListener("touchmove",this.touchMoveListener.bind(this)),this.canvas.removeEventListener("wheel",this.wheelListener.bind(this)),this.canvas.removeEventListener("contextmenu",this.mouseContextMenuListener.bind(this)),this.canvas.removeEventListener("dblclick",this.resetBriCon.bind(this)),this.canvas.removeEventListener("dragenter",this.dragEnterListener.bind(this)),this.canvas.removeEventListener("dragover",this.dragOverListener.bind(this)),this.canvas.removeEventListener("drop",this.dropListener.bind(this)),this.canvas.removeEventListener("keyup",this.keyUpListener.bind(this)),this.canvas.removeEventListener("keydown",this.keyDownListener.bind(this)))}get volumes(){return this.document.volumes}set volumes(e){this.document.volumes=e}get meshes(){return this.document.meshes}set meshes(e){this.document.meshes=e}get drawBitmap(){return this.document.drawBitmap}set drawBitmap(e){this.document.drawBitmap=e}get volScaleMultiplier(){return this.scene.volScaleMultiplier}set volScaleMultiplier(e){this.setScale(e)}async saveScene(e="niivue.png"){function t(n,s){const r=document.createElement("a");document.body.appendChild(r),r.style.display="none";const a=window.URL.createObjectURL(n);r.href=a,r.download=s,r.click(),r.remove()}const i=this.canvas;if(!i)throw new Error("canvas not defined");this.drawScene(),i.toBlob(n=>{n&&(e===""&&(e=`niivue-screenshot-${new Date().toString()}.png`,e=e.replace(/\s/g,"_")),t(n,e))})}async attachTo(e,t=null){return await this.attachToCanvas(document.getElementById(e),t),P.debug("attached to element with id: ",e),this}async attachToCanvas(e,t=null){return this.canvas=e,t===null&&(t=navigator.hardwareConcurrency>6,P.debug("AntiAlias ",t," Threads ",navigator.hardwareConcurrency)),this.gl=this.canvas.getContext("webgl2",{alpha:!0,antialias:t}),this.uiData.max2D=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.uiData.max3D=this.gl.getParameter(this.gl.MAX_3D_TEXTURE_SIZE),P.info("NIIVUE VERSION ",zx),P.debug(`Max texture size 2D: ${this.uiData.max2D} 3D: ${this.uiData.max3D}`),this.canvas.parentElement.style.backgroundColor="black",this.opts.isResizeCanvas&&(this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.resizeEventListener=()=>{requestAnimationFrame(()=>{this.resizeListener()})},window.addEventListener("resize",this.resizeEventListener),this.resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.resizeListener()})}),this.resizeObserver.observe(this.canvas.parentElement),this.canvasObserver=new MutationObserver(i=>{for(const n of i)if(n.type==="childList"&&n.removedNodes.length>0&&Array.from(n.removedNodes).includes(this.canvas)){this.cleanup();break}}),this.canvasObserver.observe(this.canvas.parentElement,{childList:!0})),this.opts.interactive&&this.registerInteractions(),await this.init(),this.drawScene(),this}syncWith(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts={...t}}broadcastTo(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts=t}doSync3d(e){e.scene.renderAzimuth=this.scene.renderAzimuth,e.scene.renderElevation=this.scene.renderElevation,e.scene.volScaleMultiplier=this.scene.volScaleMultiplier}doSync2d(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t),e.scene.pan2Dxyzmm=jn(this.scene.pan2Dxyzmm)}doSyncGamma(e){const t=this.scene.gamma,i=e.scene.gamma;t!==i&&e.setGamma(t)}doSyncZoomPan(e){e.scene.pan2Dxyzmm=jn(this.scene.pan2Dxyzmm)}doSyncCrosshair(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t)}doSyncCalMin(e){this.volumes[0].cal_min!==e.volumes[0].cal_min&&(e.volumes[0].cal_min=this.volumes[0].cal_min,e.updateGLVolume())}doSyncCalMax(e){this.volumes[0].cal_max!==e.volumes[0].cal_max&&(e.volumes[0].cal_max=this.volumes[0].cal_max,e.updateGLVolume())}doSyncSliceType(e){e.setSliceType(this.opts.sliceType)}doSyncClipPlane(e){e.setClipPlane(this.scene.clipPlaneDepthAziElev)}sync(){if(!(!this.gl||!this.otherNV||typeof this.otherNV>"u")&&this.gl.canvas.matches(":focus"))for(let e=0;e<this.otherNV.length;e++)this.otherNV[e]!==this&&(this.syncOpts.gamma&&this.doSyncGamma(this.otherNV[e]),this.syncOpts.crosshair&&this.doSyncCrosshair(this.otherNV[e]),this.syncOpts.zoomPan&&this.doSyncZoomPan(this.otherNV[e]),this.syncOpts.sliceType&&this.doSyncSliceType(this.otherNV[e]),this.syncOpts.cal_min&&this.doSyncCalMin(this.otherNV[e]),this.syncOpts.cal_max&&this.doSyncCalMax(this.otherNV[e]),this.syncOpts.clipPlane&&this.doSyncClipPlane(this.otherNV[e]),this.syncOpts["2d"]&&this.doSync2d(this.otherNV[e]),this.syncOpts["3d"]&&this.doSync3d(this.otherNV[e]),this.otherNV[e].drawScene(),this.otherNV[e].createOnLocationChange())}arrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((i,n)=>i===t[n])}resizeListener(){if(!(!this.canvas||!this.gl)){if(!this.opts.isResizeCanvas){this.opts.forceDevicePixelRatio>=0&&P.warn("this.opts.forceDevicePixelRatio requires isResizeCanvas"),this.drawScene();return}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,P.debug("devicePixelRatio: "+this.uiData.dpr),"width"in this.canvas.parentElement?(this.canvas.width=this.canvas.parentElement.width*this.uiData.dpr,this.canvas.height=this.canvas.parentElement.height*this.uiData.dpr):(this.canvas.width=this.canvas.offsetWidth*this.uiData.dpr,this.canvas.height=this.canvas.offsetHeight*this.uiData.dpr),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.drawScene()}}getRelativeMousePosition(e,t){if(t=t||e.target,!t)return;const i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}getNoPaddingNoBorderCanvasRelativeMousePosition(e,t){return t=t||e.target,this.getRelativeMousePosition(e,t)}mouseContextMenuListener(e){e.preventDefault()}mouseDownListener(e){e.preventDefault(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.uiData.mousedown=!0,this.setDragStart(0,0),this.setDragEnd(0,0),P.debug("mouse down"),P.debug(e);const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const[i,n]=[t.x*this.uiData.dpr,t.y*this.uiData.dpr];this.opts.clickToSegment&&(this.clickToSegmentXY=[i,n]);const s=this.getLabelAtPoint([i,n]);if(s){if(s.onClick){s.onClick(s,e);return}for(const r of this.meshes)if(r.type==="connectome")for(const a of r.nodes)a.label===s&&(this.scene.crosshairPos=this.mm2frac([a.x,a.y,a.z]),this.updateGLVolume(),this.drawScene())}this.uiData.clickedTile=this.tileIndex(i,n),e.button===ty&&e.shiftKey?(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(e)):e.button===ty?(this.uiData.mouseButtonLeftDown=!0,this.mouseLeftButtonHandler(e)):e.button===Aj?(this.uiData.mouseButtonRightDown=!0,this.mouseRightButtonHandler(e)):e.button===vj&&(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(e))}mouseLeftButtonHandler(e){if(e.ctrlKey||this.opts.dragModePrimary===0){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mouseDown(t.x,t.y),this.mouseClick(t.x,t.y)}else this.opts.dragModePrimary===1&&(this.uiData.windowX=e.x,this.uiData.windowY=e.y)}mouseCenterButtonHandler(e){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mousePos=[t.x*this.uiData.dpr,t.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(t.x,t.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=jn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}mouseRightButtonHandler(e){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mousePos=[t.x*this.uiData.dpr,t.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(t.x,t.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=jn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}calculateMinMaxVoxIdx(e){if(e.length>2)throw new Error("array must not contain more than two values");return[Math.floor(Math.min(e[0],e[1])),Math.floor(Math.max(e[0],e[1]))]}calculateNewRange({volIdx:e=0}={}){if(this.opts.sliceType===4&&this.sliceMosaicString.length<1||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;let t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]);if(t[0]<0)return;const i=this.frac2vox(t,e);if(t=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),t[0]<0)return;const n=this.frac2vox(t,e);let s=-Number.MAX_VALUE,r=Number.MAX_VALUE;const a=this.calculateMinMaxVoxIdx([i[0],n[0]]),o=this.calculateMinMaxVoxIdx([i[1],n[1]]),l=this.calculateMinMaxVoxIdx([i[2],n[2]]);i[0]-n[0]===0?a[1]=i[0]+1:i[1]-n[1]===0?o[1]=i[1]+1:i[2]-n[2]===0&&(l[1]=i[2]+1);const c=this.volumes[e].hdr,u=this.volumes[e].img;if(!c||!u)return;const h=c.dims[1],f=c.dims[2];for(let m=l[0];m<l[1];m++){const A=m*h*f;for(let p=o[0];p<o[1];p++){const v=p*h;for(let x=a[0];x<a[1];x++){const y=A+v+x;r>u[y]&&(r=u[y]),s<u[y]&&(s=u[y])}}}if(r>=s)return;const d=ey(c,r),g=ey(c,s);this.volumes[e].cal_min=d,this.volumes[e].cal_max=g,this.onIntensityChange(this.volumes[e])}generateMouseUpCallback(e,t){const i=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]),n=this.tileIndex(this.uiData.dragEnd[0],this.uiData.dragEnd[1]);let s=-1;i===n&&(s=n);let r=-1;s>=0&&(r=this.screenSlices[s].axCorSag);const a=this.frac2mm(e),o=this.frac2mm(t),l=_e();wx(l,Q(a[0],a[1],a[2]),Q(o[0],o[1],o[2]));const c=dc(l),u=this.frac2vox(e),h=this.frac2vox(t);this.onDragRelease({fracStart:e,fracEnd:t,voxStart:u,voxEnd:h,mmStart:a,mmEnd:o,mmLength:c,tileIdx:s,axCorSag:r})}mouseUpListener(){function e(n){return Object.prototype.toString.call(n).indexOf("Function")>-1}const t={mouseButtonRightDown:this.uiData.mouseButtonRightDown,mouseButtonCenterDown:this.uiData.mouseButtonCenterDown,isDragging:this.uiData.isDragging,mousePos:this.mousePos,fracPos:this.canvasPos2frac(this.mousePos)};this.uiData.mousedown=!1,this.uiData.mouseButtonRightDown=!1;const i=this.uiData.mouseButtonCenterDown;if(this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonLeftDown=!1,this.drawPenFillPts.length>0&&this.drawPenFilled(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,e(this.onMouseUp)&&this.onMouseUp(t),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===5&&this.drawScene();const n=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),s=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(this.generateMouseUpCallback(n,s),this.opts.dragMode===6||this.opts.dragMode!==1||i||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;this.calculateNewRange({volIdx:0}),this.refreshLayers(this.volumes[0],0)}this.drawScene()}checkMultitouch(e){if(this.uiData.touchdown&&!this.uiData.multiTouchGesture){const t=this.canvas.getBoundingClientRect();this.mouseDown(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top),this.mouseClick(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top)}}touchStartListener(e){e.preventDefault(),this.uiData.touchTimer||(this.uiData.touchTimer=setTimeout(()=>{this.resetBriCon(e)},this.opts.longTouchTimeout)),this.uiData.touchdown=!0,this.uiData.currentTouchTime=new Date().getTime();const t=this.uiData.currentTouchTime-this.uiData.lastTouchTime;if(t<this.opts.doubleTouchTimeout&&t>0){this.uiData.doubleTouch=!0,this.setDragStart(e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,e.targetTouches[0].clientY-e.target.getBoundingClientRect().top),this.resetBriCon(e),this.uiData.lastTouchTime=this.uiData.currentTouchTime;return}else this.uiData.doubleTouch=!1,this.setDragStart(0,0),this.setDragEnd(0,0),this.uiData.lastTouchTime=this.uiData.currentTouchTime;this.uiData.touchdown&&e.touches.length<2?this.uiData.multiTouchGesture=!1:this.uiData.multiTouchGesture=!0,setTimeout(this.checkMultitouch.bind(this),1,e)}touchEndListener(e){if(e.preventDefault(),this.uiData.touchdown=!1,this.uiData.lastTwoTouchDistance=0,this.uiData.multiTouchGesture=!1,this.uiData.touchTimer&&(clearTimeout(this.uiData.touchTimer),this.uiData.touchTimer=null),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===1&&(this.calculateNewRange(),this.refreshLayers(this.volumes[0],0));const t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),i=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);this.generateMouseUpCallback(t,i)}this.mouseUpListener()}windowingHandler(e,t,i=0){const n=this.uiData.windowX,s=this.uiData.windowY;let r=this.volumes[0].cal_min,a=this.volumes[0].cal_max;const o=this.volumes[0].global_min,l=this.volumes[0].global_max;t<s?(r+=1,a+=1):t>s&&(r-=1,a-=1),e>n?(r-=1,a+=1):e<n&&(r+=1,a-=1),a-r<1&&(a=r+1),r<o&&(r=o),a>l&&(a=l),r>a&&(r=a-1),this.volumes[i].cal_min=r,this.volumes[i].cal_max=a,this.refreshLayers(this.volumes[i],0),this.uiData.windowX=e,this.uiData.windowY=t}mouseLeaveListener(){this.clickToSegmentIsGrowing&&(P.debug("Mouse left canvas, stopping clickToSegment preview."),this.clickToSegmentIsGrowing=!1,this.refreshDrawing(!0,!1)),this.opts.drawingEnabled&&!isNaN(this.drawPenLocation[0])&&(P.debug("Mouse left canvas during drawing, resetting pen state."),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawPenFillPts=[]),this.uiData.isDragging&&(P.debug("Mouse left canvas during drag, resetting drag state."),this.uiData.isDragging=!1,this.uiData.mouseButtonLeftDown=!1,this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonRightDown=!1,this.uiData.mousedown=!1,this.drawScene())}mouseMoveListener(e){if(this.uiData.mousedown){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const i=t.x*this.uiData.dpr,n=t.y*this.uiData.dpr;if(this.tileIndex(i,n)!==this.uiData.clickedTile)return;if(this.uiData.mouseButtonLeftDown){const r=this.opts.dragModePrimary===0,a=this.opts.dragModePrimary===1;e.ctrlKey||r?(this.mouseMove(t.x,t.y),this.mouseClick(t.x,t.y)):a&&this.windowingHandler(e.x,e.y)}else(this.uiData.mouseButtonRightDown||this.uiData.mouseButtonCenterDown)&&this.setDragEnd(t.x,t.y);this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY}else if(!this.uiData.mousedown&&this.opts.clickToSegment){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const i=t.x*this.uiData.dpr,n=t.y*this.uiData.dpr;this.mousePos=[i,n];const s=this.tileIndex(i,n);s>=0&&this.opts.drawingEnabled&&this.screenSlices[s].axCorSag<=2&&(this.clickToSegmentXY=[i,n],this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:i,y:n,tileIndex:s}))}}resetBriCon(e=null){if(this.uiData.isDragging)return;let t=!1;this.opts.sliceType===4&&(t=!0);let i=0,n=0;if(e!==null&&("targetTouches"in e?(i=e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,n=e.targetTouches[0].clientY-e.target.getBoundingClientRect().top):(i=e.offsetX,n=e.offsetY),i*=this.uiData.dpr,n*=this.uiData.dpr,this.inRenderTile(i,n)>=0&&(t=!0)),t){this.uiData.mouseDepthPicker=!0,this.drawScene(),this.drawScene();return}this.opts.dragMode!==4&&(this.volumes.length<1||this.uiData.doubleTouch||(this.volumes[0].cal_min=this.volumes[0].robust_min,this.volumes[0].cal_max=this.volumes[0].robust_max,this.onIntensityChange(this.volumes[0]),this.refreshLayers(this.volumes[0],0),this.drawScene()))}setDragStart(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.uiData.dragStart[0]=e,this.uiData.dragStart[1]=t}setDragEnd(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.uiData.dragEnd[0]=e,this.uiData.dragEnd[1]=t}touchMoveListener(e){if(this.uiData.touchdown&&e.touches.length<2){const t=this.canvas.getBoundingClientRect();if(this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=jn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.doubleTouch&&this.uiData.isDragging){this.setDragEnd(e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,e.targetTouches[0].clientY-e.target.getBoundingClientRect().top),this.drawScene();return}const i=this.opts.dragModePrimary===0,n=this.opts.dragModePrimary===1;i?(this.mouseClick(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top),this.mouseMove(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top)):n&&(this.windowingHandler(e.touches[0].pageX,e.touches[0].pageY),this.drawScene())}else this.handlePinchZoom(e)}handlePinchZoom(e){if(e.targetTouches.length===2&&e.changedTouches.length===2){const t=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),i=this.canvas.getBoundingClientRect();this.mousePos=[e.touches[0].clientX-i.left,e.touches[0].clientY-i.top],t<this.uiData.lastTwoTouchDistance?this.sliceScroll2D(-.01,e.touches[0].clientX-i.left,e.touches[0].clientY-i.top):this.sliceScroll2D(.01,e.touches[0].clientX-i.left,e.touches[0].clientY-i.top),this.uiData.lastTwoTouchDistance=t}}keyUpListener(e){if(e.code===this.opts.clipPlaneHotKey){const t=new Date().getTime();if(t-this.lastCalled>this.opts.keyDebounceTime){switch(this.currentClipPlaneIndex=(this.currentClipPlaneIndex+1)%7,this.currentClipPlaneIndex){case 0:this.scene.clipPlaneDepthAziElev=[2,0,0];break;case 1:this.scene.clipPlaneDepthAziElev=[0,270,0];break;case 2:this.scene.clipPlaneDepthAziElev=[0,90,0];break;case 3:this.scene.clipPlaneDepthAziElev=[0,0,0];break;case 4:this.scene.clipPlaneDepthAziElev=[0,180,0];break;case 5:this.scene.clipPlaneDepthAziElev=[0,0,-90];break;case 6:this.scene.clipPlaneDepthAziElev=[0,0,90];break}this.setClipPlane(this.scene.clipPlaneDepthAziElev)}this.lastCalled=t}else if(e.code===this.opts.viewModeHotKey){const t=new Date().getTime();t-this.lastCalled>this.opts.keyDebounceTime&&(this.setSliceType((this.opts.sliceType+1)%5),this.lastCalled=t)}}keyDownListener(e){e.code==="KeyH"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth-1,this.scene.renderElevation):e.code==="KeyL"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth+1,this.scene.renderElevation):e.code==="KeyJ"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation+1):e.code==="KeyK"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation-1):e.code==="KeyH"&&this.opts.sliceType!==4?this.moveCrosshairInVox(-1,0,0):e.code==="KeyL"&&this.opts.sliceType!==4?this.moveCrosshairInVox(1,0,0):e.code==="KeyU"&&this.opts.sliceType!==4&&e.ctrlKey?this.moveCrosshairInVox(0,0,1):e.code==="KeyD"&&this.opts.sliceType!==4&&e.ctrlKey?this.moveCrosshairInVox(0,0,-1):e.code==="KeyJ"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,-1,0):e.code==="KeyK"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,1,0):e.code==="KeyM"&&this.opts.sliceType!==4?(this.opts.dragMode++,this.opts.dragMode>=4&&(this.opts.dragMode=0),P.info("drag mode changed to ",d6[this.opts.dragMode])):e.code==="ArrowLeft"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D-1):e.code==="ArrowRight"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D+1):e.code==="Slash"&&e.shiftKey&&alert(`NIIVUE VERSION: ${zx}`)}wheelListener(e){if(this.thumbnailVisible||this.opts.sliceMosaicString.length>0)return;e.preventDefault(),e.stopPropagation();const t=this.uiData.dragStart.reduce((l,c)=>l+c,0),i=this.uiData.dragEnd.reduce((l,c)=>l+c,0),n=t>0&&i>0;if(this.opts.dragMode===6&&n){const l=e.deltaY>0?1:-1;this.uiData.dragStart[0]<this.uiData.dragEnd[0]?(this.uiData.dragStart[0]-=l,this.uiData.dragEnd[0]+=l):(this.uiData.dragStart[0]+=l,this.uiData.dragEnd[0]-=l),this.uiData.dragStart[1]<this.uiData.dragEnd[1]?(this.uiData.dragStart[1]-=l,this.uiData.dragEnd[1]+=l):(this.uiData.dragStart[1]+=l,this.uiData.dragEnd[1]-=l),this.uiData.isDragging=!0,this.drawScene(),this.uiData.isDragging=!1;const c=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]);c>=0?this.generateMouseUpCallback(this.screenXY2TextureFrac(this.uiData.dragStart[0],this.uiData.dragStart[1],c),this.screenXY2TextureFrac(this.uiData.dragEnd[0],this.uiData.dragEnd[1],c)):P.warn("Could not generate drag release callback for ROI selection: Invalid tile index.");return}let s=e.deltaY<0?-.01:.01;if(this.opts.invertScrollDirection&&(s=-s),this.opts.clickToSegment){s<0?(this.opts.clickToSegmentPercent-=.01,this.opts.clickToSegmentPercent=Math.max(this.opts.clickToSegmentPercent,0)):(this.opts.clickToSegmentPercent+=.01,this.opts.clickToSegmentPercent=Math.min(this.opts.clickToSegmentPercent,1));const l=this.clickToSegmentXY[0],c=this.clickToSegmentXY[1],u=this.tileIndex(l,c);u>=0&&this.screenSlices[u].axCorSag<=2&&(P.debug(`Adjusting clickToSegment threshold: ${this.opts.clickToSegmentPercent.toFixed(3)}`),this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:l,y:c,tileIndex:u}));return}const r=this.canvas.getBoundingClientRect(),a=e.clientX-r.left,o=e.clientY-r.top;if(this.opts.dragMode===3&&this.inRenderTile(this.uiData.dpr*a,this.uiData.dpr*o)===-1){const l=s<0?1:-1;let c=this.scene.pan2Dxyzmm[3]*(1+10*(.01*l));c=Math.round(c*10)/10;const u=this.scene.pan2Dxyzmm[3]-c;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=c),this.scene.pan2Dxyzmm[3]=c;const h=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=u*h[0],this.scene.pan2Dxyzmm[1]+=u*h[1],this.scene.pan2Dxyzmm[2]+=u*h[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.sliceScroll2D(s,a,o)}registerInteractions(){if(!this.canvas)throw new Error("canvas undefined");this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this)),this.canvas.addEventListener("mouseleave",this.mouseLeaveListener.bind(this)),this.canvas.addEventListener("touchstart",this.touchStartListener.bind(this)),this.canvas.addEventListener("touchend",this.touchEndListener.bind(this)),this.canvas.addEventListener("touchmove",this.touchMoveListener.bind(this)),this.canvas.addEventListener("wheel",this.wheelListener.bind(this)),this.canvas.addEventListener("contextmenu",this.mouseContextMenuListener.bind(this)),this.canvas.addEventListener("dblclick",this.resetBriCon.bind(this)),this.canvas.addEventListener("dragenter",this.dragEnterListener.bind(this),!1),this.canvas.addEventListener("dragover",this.dragOverListener.bind(this),!1),this.canvas.addEventListener("drop",e=>{this.dropListener(e).catch(console.error)},!1),this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("keyup",this.keyUpListener.bind(this),!1),this.canvas.addEventListener("keydown",this.keyDownListener.bind(this),!1)}dragEnterListener(e){e.stopPropagation(),e.preventDefault()}dragOverListener(e){e.stopPropagation(),e.preventDefault()}getFileExt(e,t=!0){P.debug("fullname: ",e);const i=/(?:\.([^.]+))?$/;let n=i.exec(e)[1];if(n=n.toUpperCase(),n==="GZ")n=i.exec(e.slice(0,-3))[1],n=n.toUpperCase();else if(n==="CBOR"){const s=n;n=i.exec(e.slice(0,-5))[1],n=n.toUpperCase(),n=`${n}.${s}`}return t?n:n.toLowerCase()}async addVolumeFromUrl(e){const t=await It.loadFromUrl(e);return this.document.addImageOptions(t,e),t.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(t,e.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(e,t),this.addVolume(t),t}async addVolumesFromUrl(e){const t=e.map(async n=>{const s=this.getFileExt(n.name||n.url);if(s==="DCM")throw new Error("DICOM files must be loaded using useDicomLoader");if(this.loaders[s]){let o=n.url;const l=this.loaders[s].toExt;let c=n.name||n.url;if(c=c.split("/").pop(),typeof n.url=="string"){const h=n.url;try{const f=await fetch(h);if(!f.ok)throw new Error(`Failed to load file: ${f.statusText}`);o=await f.arrayBuffer()}catch(f){throw new Error(`Failed to load url ${h}: ${f}`)}}const u=await this.loaders[s].loader(o);n.url=u,n.name=`${c}.${l}`}const r={url:n.url,headers:n.headers,name:n.name,colormap:n.colormap?n.colormap:n.colorMap,colormapNegative:n.colormapNegative?n.colormapNegative:n.colorMapNegative,opacity:n.opacity,urlImgData:n.urlImgData,cal_min:n.cal_min,cal_max:n.cal_max,trustCalMinMax:this.opts.trustCalMinMax,isManifest:n.isManifest,frame4D:n.frame4D,limitFrames4D:n.limitFrames4D||this.opts.limitFrames4D,colorbarVisible:n.colorbarVisible},a=await It.loadFromUrl(r);return this.document.addImageOptions(a,r),a.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(a,r.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(r,a),a}),i=await Promise.all(t);for(let n=0;n<i.length;n++)this.addVolume(i[n]);return i}getMediaByUrl(e){return[...this.mediaUrlMap.entries()].filter(t=>t[1]===e).map(t=>t[0]).pop()}removeVolumeByUrl(e){const t=this.getMediaByUrl(e);if(t)this.removeVolume(t);else throw new Error("No volume with URL present")}async traverseFileTree(e,t="",i){return new Promise(n=>{if(e.isFile)e.file(s=>{s.fullPath=t+s.name,s._webkitRelativePath=t+s.name,i.push(s),n(i)});else if(e.isDirectory){const s=e.createReader(),r=()=>{s.readEntries(a=>{if(a.length>0){const o=[];for(const l of a)o.push(this.traverseFileTree(l,t+e.name+"/",i));Promise.all(o).then(r).catch(l=>{throw l})}else n(i)})};r()}})}readDirectory(e){const t=e.createReader();let i=[];const n=async r=>{const a=[],o=async l=>new Promise((c,u)=>l.file(c,u));for(let l=0;l<r.length;l++)a.push(await o(r[l])),console.log(a);return a},s=()=>{t.readEntries(r=>{r.length?(i=i.concat(r),s()):n(i).then(async a=>{console.log(a)}).catch(a=>{throw a})})};return s(),i}isMeshExt(e){const t=this.getFileExt(e);return P.debug("dropped ext"),P.debug(t),ur.includes(t)}async loadFromArrayBuffer(e,t){const i=this.getFileExt(t);if(ur.includes(i)){await this.addMeshFromUrl({url:t,buffer:e});return}const n=Ah(t);n.buffer=e,n.name=t,await this.addVolumeFromUrl(n)}async loadFromFile(e){const t=this.getFileExt(e.name);if(ur.includes(t)){await Ma.loadFromFile({file:e,gl:this.gl,name:e.name}).then(i=>{this.addMesh(i)});return}await It.loadFromFile({file:e,name:e.name}).then(i=>{this.addVolume(i)})}useLoader(e,t,i){this.loaders={...this.loaders,[t.toUpperCase()]:{loader:e,toExt:i}}}useDicomLoader(e){this.dicomLoader=e}getDicomLoader(){return this.dicomLoader}async dropListener(e){if(e.stopPropagation(),e.preventDefault(),!this.opts.dragAndDropEnabled)return;const t=[],i=e.dataTransfer;if(!i)return;const n=i.getData("text/uri-list");if(n){const s=Ah(n),r=this.getFileExt(n);P.debug("dropped ext"),P.debug(r),ur.includes(r)?this.addMeshFromUrl({url:n}).catch(a=>{throw a}):r==="NVD"?this.loadDocumentFromUrl(n).catch(a=>{throw a}):this.addVolumeFromUrl(s).catch(a=>{throw a})}else{const s=i.items;if(s.length>0){!e.shiftKey&&!e.altKey&&(this.volumes=[],this.overlays=[],this.meshes=[]),this.closeDrawing();for(const r of Array.from(s)){const a=r.webkitGetAsEntry();if(P.debug(a),!a)throw new Error("could not get entry from file");if(a.isFile){const o=this.getFileExt(a.name);let l;if(a.name.lastIndexOf("HEAD")!==-1)for(const c of Array.from(s)){const u=c.webkitGetAsEntry();if(!u)throw new Error("could not get paired entry");const h=a.name.substring(0,a.name.lastIndexOf("HEAD")),f=u.name.substring(0,u.name.lastIndexOf("BRIK"));h===f&&(l=u)}if(a.name.lastIndexOf("BRIK")!==-1)continue;if(this.loaders[o]){const c=await fj(a);await this.loadImages([{url:c,name:`${a.name}`}]);continue}if(ur.includes(o)){a.file(c=>{(async()=>{try{const u=await Ma.loadFromFile({file:c,gl:this.gl,name:c.name});this.addMesh(u)}catch(u){console.error("Error loading mesh:",u)}})().catch(u=>console.error(u))});continue}else if(o==="NVD"){a.file(c=>{(async()=>{try{const u=await Q0.loadFromFile(c);await this.loadDocument(u),P.debug("loaded document")}catch(u){console.error(u)}})().catch(u=>console.error(u))});break}a.file(c=>{(async()=>{try{if(l)l.file(u=>{(async()=>{try{const h=await It.loadFromFile({file:c,urlImgData:u,limitFrames4D:this.opts.limitFrames4D});this.addVolume(h)}catch(h){console.error(h)}})().catch(console.error)});else{const u=await It.loadFromFile({file:c,urlImgData:l,limitFrames4D:this.opts.limitFrames4D});e.altKey?(P.debug("alt key detected: assuming this is a drawing overlay"),this.drawClearAllUndoBitmaps(),this.loadDrawing(u)):this.addVolume(u)}}catch(u){console.error(u)}})().catch(console.error)})}else a.isDirectory&&this.traverseFileTree(a,"",t).then(o=>{const l=this.getDicomLoader().loader;if(!l)throw new Error("No loader for DICOM files");l(o).then(async c=>{console.log(c);const u=c.map(h=>It.loadFromUrl({url:h.data,name:h.name,limitFrames4D:this.opts.limitFrames4D}));Promise.all(u).then(async h=>{console.log("from dicom loader"),console.log(h),await this.onDicomLoaderFinishedWithImages(h)}).catch(h=>{throw h})}).catch(c=>{console.error("Error loading DICOM files:",c)})}).catch(o=>{throw o})}}}this.drawScene()}setMultiplanarPadPixels(e){this.opts.multiplanarPadPixels=e,this.drawScene()}setMultiplanarLayout(e){typeof e=="string"&&(e=parseInt(e)),this.opts.multiplanarLayout=e,this.drawScene()}setCornerOrientationText(e){this.opts.isCornerOrientationText=e,this.updateGLVolume()}setIsOrientationTextVisible(e){this.opts.isOrientationTextVisible=e,this.drawScene()}setHeroImage(e){this.opts.heroImageFraction=e,this.drawScene()}setCustomLayout(e){for(let t=0;t<e.length;t++){const[i,n,s,r]=e[t].position,a=i+s,o=n+r;for(let l=t+1;l<e.length;l++){const[c,u,h,f]=e[l].position,d=c+h,g=u+f,m=i<d&&a>c,A=n<g&&o>u;if(m&&A)throw new Error(`Custom layout is invalid. Tile ${t} overlaps with tile ${l}.`)}}this.customLayout=e,this.drawScene()}clearCustomLayout(){this.customLayout=null,this.drawScene()}getCustomLayout(){return this.customLayout}setRadiologicalConvention(e){this.opts.isRadiologicalConvention=e,this.updateGLVolume()}setDefaults(e={},t=!1){this.document.opts={...un},this.scene.sceneData={...Dl};for(const i in e)typeof e[i]=="function"?this[i]=e[i]:this.opts[i]=un[i]===void 0?un[i]:e[i];if(this.scene.pan2Dxyzmm=[0,0,0,1],t&&this.volumes&&this.volumes.length>0)for(let i=0;i<this.volumes.length;i++)this.volumes[i].cal_min=this.volumes[i].robust_min,this.volumes[i].cal_max=this.volumes[i].robust_max;this.updateGLVolume()}setMeshThicknessOn2D(e){this.opts.meshThicknessOn2D=e,this.updateGLVolume()}setSliceMosaicString(e){this.sliceMosaicString=e,this.updateGLVolume()}setSliceMM(e){this.opts.isSliceMM=e,this.updateGLVolume()}setAdditiveBlend(e){this.opts.isAdditiveBlend=e,this.updateGLVolume()}getRadiologicalConvention(){return this.opts.isRadiologicalConvention}setHighResolutionCapable(e){typeof e=="boolean"&&(e=e?0:-1),this.opts.forceDevicePixelRatio=e,this.resizeListener(),this.drawScene()}addVolume(e){this.volumes.push(e);const t=this.volumes.length===1?0:this.volumes.length-1;this.setVolume(e,t),this.onImageLoaded(e),P.debug("loaded volume",e.name),P.debug(e)}addMesh(e){this.meshes.push(e);const t=this.meshes.length===1?0:this.meshes.length-1;this.setMesh(e,t),this.onMeshLoaded(e)}getVolumeIndexByID(e){const t=this.volumes.length;for(let i=0;i<t;i++)if(this.volumes[i].id===e)return i;return-1}drawAddUndoBitmap(){if(!this.drawBitmap||this.drawBitmap.length<1){P.debug("drawAddUndoBitmap error: No drawing open");return}this.currentDrawUndoBitmap++,this.currentDrawUndoBitmap>=this.opts.maxDrawUndoBitmaps&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap]=pj(this.drawBitmap)}drawClearAllUndoBitmaps(){if(this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,!(!this.drawUndoBitmaps||this.drawUndoBitmaps.length<1))for(let e=this.drawUndoBitmaps.length-1;e>=0;e--)this.drawUndoBitmaps[e]=new Uint8Array}drawUndo(){if(this.drawUndoBitmaps.length<1){P.debug("undo bitmaps not loaded");return}if(this.currentDrawUndoBitmap--,this.currentDrawUndoBitmap<0&&(this.currentDrawUndoBitmap=this.drawUndoBitmaps.length-1),this.currentDrawUndoBitmap>=this.drawUndoBitmaps.length&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap].length<2){P.debug("drawUndo is misbehaving");return}this.drawBitmap=$x(this.drawUndoBitmaps[this.currentDrawUndoBitmap],this.drawBitmap.length),this.refreshDrawing(!0)}loadDrawing(e){if(this.drawBitmap&&P.debug("Overwriting open drawing!"),!this.back)throw new Error("back undefined");this.drawClearAllUndoBitmaps();const t=e.hdr.dims;if(t[1]!==this.back.hdr.dims[1]||t[2]!==this.back.hdr.dims[2]||t[3]!==this.back.hdr.dims[3])return P.debug("drawing dimensions do not match background image"),!1;e.img.constructor!==Uint8Array&&P.debug("Drawings should be UINT8");const i=e.permRAS,n=t[1]*t[2]*t[3];this.drawBitmap=new Uint8Array(n),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,hs,this.back.dims,!0):this.drawTexture=this.r8Tex(this.drawTexture,hs,this.back.dims,!0);const s=[0,0,0];for(let g=0;g<3;g++)for(let m=0;m<3;m++)Math.abs(i[g])-1===m&&(s[m]=g*Math.sign(i[g]));let r=1;const a=[1,1,1],o=[!1,!1,!1];for(let g=0;g<s.length;g++)for(let m=0;m<s.length;m++)Math.abs(s[m])===g&&(a[m]=r,(s[m]<0||Object.is(s[m],-0))&&(o[m]=!0),r*=t[m+1]);let l=ae.range(0,t[1]-1,1);o[0]&&(l=ae.range(t[1]-1,0,-1));for(let g=0;g<t[1];g++)l[g]*=a[0];let c=ae.range(0,t[2]-1,1);o[1]&&(c=ae.range(t[2]-1,0,-1));for(let g=0;g<t[2];g++)c[g]*=a[1];let u=ae.range(0,t[3]-1,1);o[2]&&(u=ae.range(t[3]-1,0,-1));for(let g=0;g<t[3];g++)u[g]*=a[2];const h=e.img,f=this.drawBitmap;let d=0;for(let g=0;g<t[3];g++)for(let m=0;m<t[2];m++)for(let A=0;A<t[1];A++)f[l[A]+c[m]+u[g]]=h[d],d++;return this.drawAddUndoBitmap(),this.refreshDrawing(!1),this.drawScene(),!0}binarize(e){const t=e.hdr.dims,i=t[1]*t[2]*t[3],n=new Uint8Array(i);for(let s=0;s<i;s++)e.img[s]!==0&&(n[s]=1);e.img=n,e.hdr.datatypeCode=2,e.hdr.cal_min=0,e.hdr.cal_max=1}async loadDrawingFromUrl(e,t=!1){this.drawBitmap&&P.debug("Overwriting open drawing!"),this.drawClearAllUndoBitmaps();let i=!1;try{const n=await It.loadFromUrl(Ah(e));t&&await this.binarize(n),i=this.loadDrawing(n)}catch{P.error("loadDrawingFromUrl() failed to load "+e),this.drawClearAllUndoBitmaps()}return i}findOtsu(e=2){if(this.volumes.length<1)return[];const t=this.volumes[0].img,i=t.length;if(i<1)return[];const n=256,s=n-1,r=new Array(n).fill(0),a=this.volumes[0].cal_min,o=this.volumes[0].cal_max;if(o<=a)return[];const l=(o-a)/n;function c(p){return p*l+a}const u=(n-1)/Math.abs(o-a),h=this.volumes[0].hdr.scl_inter,f=this.volumes[0].hdr.scl_slope;for(let p=0;p<i;p++){let v=t[p]*f+h;v=Math.min(Math.max(v,a),o),v=Math.round((v-a)*u),r[v]++}const d=Array(n).fill(0).map(()=>Array(n).fill(0)),g=Array(n).fill(0).map(()=>Array(n).fill(0));for(let p=1;p<n;++p)d[p][p]=r[p],g[p][p]=p*r[p];for(let p=1;p<n-1;++p)d[1][p+1]=d[1][p]+r[p+1],g[1][p+1]=g[1][p]+(p+1)*r[p+1];for(let p=2;p<n;p++)for(let v=p+1;v<n;v++)d[p][v]=d[1][v]-d[1][p-1],g[p][v]=g[1][v]-g[1][p-1];for(let p=1;p<n;++p)for(let v=p+1;v<n;v++)d[p][v]!==0&&(d[p][v]=g[p][v]*g[p][v]/d[p][v]);let m=0;const A=[1/0,1/0,1/0];if(e>3)for(let p=0;p<n-3;p++)for(let v=p+1;v<n-2;v++)for(let x=v+1;x<n-1;x++){const y=d[0][p]+d[p+1][v]+d[v+1][x]+d[x+1][s];y>m&&(A[0]=p,A[1]=v,A[2]=x,m=y)}else if(e===3)for(let p=0;p<n-2;p++)for(let v=p+1;v<n-1;v++){const x=d[0][p]+d[p+1][v]+d[v+1][s];x>m&&(A[0]=p,A[1]=v,m=x)}else for(let p=0;p<n-1;p++){const v=d[0][p]+d[p+1][s];v>m&&(A[0]=p,m=v)}return[c(A[0]),c(A[1]),c(A[2])]}drawOtsu(e=2){if(this.volumes.length===0)return;const t=this.volumes[0].img.length,i=this.findOtsu(e);if(i.length<3)return;this.drawBitmap||this.createEmptyDrawing();const n=this.drawBitmap,s=this.volumes[0].img;for(let r=0;r<t;r++){if(n[r]!==0)continue;const a=s[r];a>i[0]&&(n[r]=1),a>i[1]&&(n[r]=2),a>i[2]&&(n[r]=3)}this.drawAddUndoBitmap(),this.refreshDrawing(!0)}removeHaze(e=5,t=0){const i=this.volumes[t].img,n=this.volumes[t].hdr,s=i.length;let r=2;(e===5||e===1)&&(r=4),(e===4||e===2)&&(r=3);const a=this.findOtsu(r);if(a.length<3)return;let o=a[0];e===1&&(o=a[2]),e===2&&(o=a[1]);const l=n.scl_inter,c=n.scl_slope,u=this.volumes[t].global_min;for(let h=0;h<s;h++)i[h]*c+l<o&&(i[h]=u);this.refreshLayers(this.volumes[t],0),this.drawScene()}async saveImage(e=ay){var a;const t={...ay,...e},{filename:i,isSaveDrawing:n,volumeByIndex:s}=t;if(P.debug("saveImage",i,n,s),((a=this.back)==null?void 0:a.dims)===void 0)return P.debug("No voxelwise image open"),!1;if(n){if(!this.drawBitmap)return P.debug("No drawing open"),!1;const o=this.volumes[0].permRAS;if(o[0]===1&&o[1]===2&&o[2]===3)return P.debug("saving drawing"),await this.volumes[0].saveToDisk(i,this.drawBitmap);{P.debug("saving drawing");const l=this.volumes[0].hdr.dims,c=[0,0,0];for(let y=0;y<3;y++)for(let b=0;b<3;b++)Math.abs(o[y])-1===b&&(c[b]=y*Math.sign(o[y]));let u=1;const h=[1,1,1],f=[!1,!1,!1];for(let y=0;y<c.length;y++)for(let b=0;b<c.length;b++)Math.abs(c[b])===y&&(h[b]=u,(c[b]<0||Object.is(c[b],-0))&&(f[b]=!0),u*=l[b+1]);let d=ae.range(0,l[1]-1,1);f[0]&&(d=ae.range(l[1]-1,0,-1));for(let y=0;y<l[1];y++)d[y]*=h[0];let g=ae.range(0,l[2]-1,1);f[1]&&(g=ae.range(l[2]-1,0,-1));for(let y=0;y<l[2];y++)g[y]*=h[1];let m=ae.range(0,l[3]-1,1);f[2]&&(m=ae.range(l[3]-1,0,-1));for(let y=0;y<l[3];y++)m[y]*=h[2];const A=new Uint8Array(this.drawBitmap),p=new Uint8Array(l[1]*l[2]*l[3]);let v=0;for(let y=0;y<l[3];y++)for(let b=0;b<l[2];b++)for(let E=0;E<l[1];E++)p[v]=A[d[E]+g[b]+m[y]],v++;return P.debug("saving drawing"),this.volumes[0].saveToDisk(i,p)}}return P.debug("saving image"),this.volumes[s].saveToDisk(i)}getMeshIndexByID(e){if(typeof e=="number")return e>=this.meshes.length?-1:e;const t=this.meshes.length;for(let i=0;i<t;i++)if(this.meshes[i].id===e)return i;return-1}setMeshProperty(e,t,i){const n=this.getMeshIndexByID(e);if(n<0){P.warn("setMeshProperty() id not loaded",e);return}this.meshes[n].setProperty(t,i,this.gl),this.updateGLVolume(),this.onMeshPropertyChanged(n,t,i)}indexNearestXYZmm(e,t,i,n){const s=this.getMeshIndexByID(e);return s<0?(P.warn("indexNearestXYZmm() id not loaded",e),[NaN,NaN]):this.meshes[s].indexNearestXYZmm(t,i,n)}decimateHierarchicalMesh(e,t=3){const i=this.getMeshIndexByID(e);if(i<0){P.warn("reverseFaces() id not loaded",e);return}const n=this.meshes[i].decimateHierarchicalMesh(this.gl,t);return this.updateGLVolume(),n}reverseFaces(e){const t=this.getMeshIndexByID(e);if(t<0){P.warn("reverseFaces() id not loaded",e);return}this.meshes[t].reverseFaces(this.gl),this.updateGLVolume()}async setMeshLayerProperty(e,t,i,n){const s=this.getMeshIndexByID(e);if(s<0){P.warn("setMeshLayerProperty() id not loaded",e);return}await this.meshes[s].setLayerProperty(t,i,n,this.gl),this.updateGLVolume()}setPan2Dxyzmm(e){this.scene.pan2Dxyzmm=e,this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=e[3]),this.drawScene()}setRenderAzimuthElevation(e,t){this.scene.renderAzimuth=e,this.scene.renderElevation=t,this.onAzimuthElevationChange(e,t),this.drawScene()}getOverlayIndexByID(e){const t=this.overlays.length;for(let i=0;i<t;i++)if(this.overlays[i].id===e)return i;return-1}setVolume(e,t=0){const i=this.volumes.length;if(t>i)return;const n=this.getVolumeIndexByID(e.id);t===0?(this.volumes.splice(n,1),this.volumes.unshift(e),this.back=this.volumes[0],this.overlays=this.volumes.slice(1)):t<0?(this.volumes.splice(this.getVolumeIndexByID(e.id),1),this.back=this.volumes[0],this.volumes.length>1?this.overlays=this.volumes.slice(1):this.overlays=[]):(this.volumes.splice(n,1),this.volumes.splice(t,0,e),this.overlays=this.volumes.slice(1),this.back=this.volumes[0]),this.updateGLVolume()}setMesh(e,t=0){this.meshes.forEach(s=>{P.debug("MESH: ",s.name)});const i=this.meshes.length;if(t>i)return;const n=this.getMeshIndexByID(e.id);t===0?(this.meshes.splice(n,1),this.meshes.unshift(e)):t<0?this.meshes.splice(this.getMeshIndexByID(e.id),1):(this.meshes.splice(n,1),this.meshes.splice(t,0,e)),this.updateGLVolume(),this.meshes.forEach(s=>{P.debug(s.name)})}removeVolume(e){if(this.setVolume(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onVolumeWithUrlRemoved(t),this.mediaUrlMap.delete(e)}this.drawScene()}removeVolumeByIndex(e){if(e>=this.volumes.length)throw new Error("Index of volume out of bounds");this.removeVolume(this.volumes[e])}removeMesh(e){if(e.unloadMesh(this.gl),this.setMesh(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onMeshWithUrlRemoved(t),this.mediaUrlMap.delete(e)}}removeMeshByUrl(e){const t=this.getMediaByUrl(e);t&&(this.removeMesh(t),this.mediaUrlMap.delete(t),this.onMeshWithUrlRemoved(e))}moveVolumeToBottom(e){this.setVolume(e,0)}moveVolumeUp(e){const t=this.getVolumeIndexByID(e.id);this.setVolume(e,t+1)}moveVolumeDown(e){const t=this.getVolumeIndexByID(e.id);this.setVolume(e,t-1)}moveVolumeToTop(e){this.setVolume(e,this.volumes.length-1)}mouseDown(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.mousePos=[e,t]}mouseMove(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr;const i=(e-this.mousePos[0])/this.uiData.dpr,n=(t-this.mousePos[1])/this.uiData.dpr;this.mousePos=[e,t],!(this.inRenderTile(e,t)<0)&&(Math.abs(i)<1&&Math.abs(n)<1||(this.scene.renderAzimuth+=i,this.scene.renderElevation+=n,this.drawScene()))}sph2cartDeg(e,t){const i=-t*(Math.PI/180),n=(e-90)%360*(Math.PI/180),s=[Math.cos(i)*Math.cos(n),Math.cos(i)*Math.sin(n),Math.sin(i)],r=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);return r<=0||(s[0]/=r,s[1]/=r,s[2]/=r),s}setClipPlane(e){const t=this.sph2cartDeg(e[1]+180,e[2]);this.scene.clipPlane=[t[0],t[1],t[2],e[0]],this.scene.clipPlaneDepthAziElev=e,this.onClipPlaneChange(this.scene.clipPlane),this.drawScene()}setCrosshairColor(e){this.opts.crosshairColor=e,this.drawScene()}setCrosshairWidth(e){this.opts.crosshairWidth=e,this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN),this.drawScene()}setDrawColormap(e){this.drawLut=Ve.makeDrawLut(e),this.updateGLVolume()}setDrawingEnabled(e){this.opts.drawingEnabled=e,this.opts.drawingEnabled?this.drawBitmap||this.createEmptyDrawing():(this.clickToSegmentIsGrowing&&(this.clickToSegmentIsGrowing=!1,this.refreshDrawing(!0,!1)),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawPenFillPts=[]),this.drawScene()}setPenValue(e,t=!1){this.opts.penValue=e,this.opts.isFilledPen=t,this.drawScene()}setDrawOpacity(e){this.drawOpacity=e,this.drawScene()}setSelectionBoxColor(e){this.opts.selectionBoxColor=e}sliceScroll2D(e,t,i,n=!0){if(this.opts.scrollRequiresFocus&&this.canvas!==document.activeElement){P.warn("Canvas element does not have focus. Scroll events will not be processed.");return}if(this.inGraphTile(t,i)){let s=this.volumes[0].frame4D;e>0&&s++,e<0&&s--,this.setFrame4D(this.volumes[0].id,s);return}if(e!==0&&this.opts.dragMode===3&&this.inRenderTile(this.uiData.dpr*t,this.uiData.dpr*i)===-1){let s=this.scene.pan2Dxyzmm[3]*(1+10*e);s=Math.round(s*10)/10;const r=this.scene.pan2Dxyzmm[3]-s;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=s),this.scene.pan2Dxyzmm[3]=s;const a=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=r*a[0],this.scene.pan2Dxyzmm[1]+=r*a[1],this.scene.pan2Dxyzmm[2]+=r*a[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.mouseClick(t,i,e,n)}setSliceType(e){return this.opts.sliceType=e,this.drawScene(),this}setOpacity(e,t){this.volumes[e].opacity=t,this.updateGLVolume()}setScale(e){this.scene.volScaleMultiplier=e,this.drawScene()}setClipPlaneColor(e){this.opts.clipPlaneColor=e,this.renderShader.use(this.gl),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.drawScene()}setClipPlaneThick(e){this.opts.clipThick=e,this.renderShader.use(this.gl),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.drawScene()}setClipVolume(e,t){this.opts.clipVolumeLow=[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.min(e[2],t[2])],this.opts.clipVolumeHigh=[Math.max(e[0],t[0]),Math.max(e[1],t[1]),Math.max(e[2],t[2])],this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.pickingImageShader.use(this.gl),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.drawScene()}async setVolumeRenderIllumination(e=0){this.renderGradientValues=Number.isNaN(e),this.renderShader=this.renderVolumeShader,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:(this.opts.gradientAmount=e,e>0||this.opts.gradientOpacity>0?this.renderShader=this.renderGradientShader:e<0&&(this.renderShader=this.renderSliceShader)),this.initRenderShader(this.renderShader,e),this.renderShader.use(this.gl),this.setClipPlaneColor(this.opts.clipPlaneColor),Number.isNaN(e)?this.gradientTextureAmount=1:this.gradientTextureAmount=e,!(this.volumes.length<1)&&(this.refreshLayers(this.volumes[0],0),this.drawScene())}async setGradientOpacity(e=0,t=0){this.opts.gradientOpacity=e,this.opts.renderSilhouette=t,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:this.gradientTextureAmount>0||e>0?this.renderShader=this.renderGradientShader:this.gradientTextureAmount<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,this.gradientTextureAmount),this.renderShader.use(this.gl),this.gradientTextureAmount>0&&this.refreshLayers(this.volumes[0],0),this.drawScene()}overlayRGBA(e){const t=e.hdr,i=t.dims[1]*t.dims[2]*t.dims[3],n=new Uint8ClampedArray(i*4),s=.2*Math.min(Math.min(t.dims[1],t.dims[2]),t.dims[3]),r=.5*t.dims[1],a=.5*t.dims[2],o=.5*t.dims[3];let l=0;for(let c=0;c<t.dims[3];c++)for(let u=0;u<t.dims[2];u++)for(let h=0;h<t.dims[1];h++){const f=Math.abs(h-r),d=Math.abs(u-a),g=Math.abs(c-o),m=Math.sqrt(f*f+d*d+g*g);let A=0;m<s&&(A=255),n[l++]=0,n[l++]=A,n[l++]=0,n[l++]=A*.5}return n}vox2mm(e,t){return ae.vox2mm(e,t)}cloneVolume(e){return this.volumes[e].clone()}async loadDocumentFromUrl(e){const t=await Q0.loadFromUrl(e);await this.loadDocument(t)}async loadDocument(e){this.volumes=[],this.meshes=[],this.document=e,this.document.labels=this.document.labels?this.document.labels:[];const t={...un,...e.opts};this.scene.pan2Dxyzmm=e.scene.pan2Dxyzmm?e.scene.pan2Dxyzmm:[0,0,0,1],this.document.opts=t,this.setClipPlane(this.scene.clipPlaneDepthAziElev),P.debug("load document",e),this.mediaUrlMap.clear(),this.createEmptyDrawing();const i=e.encodedImageBlobs;for(let s=0;s<e.imageOptionsArray.length;s++){const r=e.imageOptionsArray[s],a=i[s];if(a){"colorMap"in r&&(r.colormap=r.colorMap);const o=await It.loadFromBase64({base64:a,...r});if(o){if(o.colormapLabel){const l=Object.keys(o.colormapLabel.lut).length,c=new Uint8ClampedArray(l);for(const u in o.colormapLabel.lut)c[u]=o.colormapLabel.lut[u];o.colormapLabel.lut=c}this.addVolume(o)}}}this.volumes.length>0&&(this.back=this.volumes[0]);for(const s of e.meshDataObjects??[]){const r={gl:this.gl,...s};s.offsetPt0&&(r.rgba255[3]=0,r.tris=new Uint32Array(s.offsetPt0)),P.debug(r);const a=new Ma(r.pts,r.tris,r.name,r.rgba255,r.opacity,r.visible,this.gl,r.connectome,r.dpg,r.dps,r.dpv);s.offsetPt0&&(a.fiberGroupColormap=s.fiberGroupColormap,a.fiberColor=s.fiberColor,a.fiberDither=s.fiberDither,a.fiberRadius=s.fiberRadius,a.colormap=s.colormap),a.meshShaderIndex=r.meshShaderIndex,a.layers=r.layers,a.updateMesh(this.gl),P.debug(a),this.addMesh(a)}if(e.data.connectomes)for(const s of e.data.connectomes){const r=JSON.parse(s),a=this.loadConnectomeAsMesh(r);a.updateMesh(this.gl),this.addMesh(a)}this.createEmptyDrawing();const n=e.encodedDrawingBlob;if(n){const s=await ae.b64toUint8(n);if(s){const r=this.back.dims;let a=r[1]*r[2]*r[3];if(s.length-352===a&&(a+=352),s.length!==a)throw new Error(`drawBitmap size does not match the texture dimensions (${r[1]}×${r[2]}×${r[3]}) ${a} != ${r[1]*r[2]*r[3]}.`);this.drawBitmap=s,this.refreshDrawing()}}return await this.setGradientOpacity(this.opts.gradientOpacity),await this.setVolumeRenderIllumination(this.opts.gradientAmount),this.updateGLVolume(),this.drawScene(),this.onDocumentLoaded(e),this}async generateLoadDocumentJavaScript(e,t){const i=this.json(),n=await ae.compressToBase64String(JSON.stringify(i));return`
        ${t}

        async function saveNiivueAsHtml(pageName) {
          //get new docstring
          const docString = nv1.json();
          const html =
          document.getElementsByTagName("html")[0]
              .innerHTML.replace(base64, await NVUtilities.compressToBase64String(JSON.stringify(docString)));
          NVUtilities.download(html, pageName, "application/html");
        }

        var nv1 = new Niivue();
        await nv1.attachTo("${e}");
        var base64 = "${n}";
        NVUtilities.decompressBase64String(base64).then((jsonText) => {
          var json = JSON.parse(jsonText); // string -> JSON
          var doc = NVDocument.loadFromJSON(json);
          nv1.loadDocument(doc);
          nv1.updateGLVolume();
        });

      `}async generateHTML(e="gl1",t){return`<!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width,initial-scale=1.0" />
            <title>Save as HTML</title>
            <style>
            html {
              height: auto;
              min-height: 100%;
              margin: 0;
            }
            body {
              display: flex;
              flex-direction: column;
              margin: 0;
              min-height: 100%;
              width: 100%;
              position: absolute;
              font-family: system-ui, Arial, Helvetica, sans-serif;
              background: #ffffff;
              color: black;
              user-select: none; /* Standard syntax */
            }
            header {
              margin: 10px;
            }
            main {
              flex: 1;
              background: #000000;
              position: relative;
            }
            footer {
              margin: 10px;
            }
            canvas {
              position: absolute;
              cursor: crosshair;
            }
            canvas:focus {
              outline: 0px;
            }
            div {
              display: table-row;
              background-color: blue;
            }
            </style>
          </head>
          <body>
            <noscript>niivue requires JavaScript.</noscript>
            <header>
            Save the current scene as HTML
            <button id="save">Save as HTML</button>
            </header>
            <main>
              <canvas id="gl1"></canvas>
            </main>
            <script type="module" async>
              ${await this.generateLoadDocumentJavaScript(e,t)}
              function saveAsHtml() {
                saveNiivueAsHtml("page.html");
              }
              // assign our event handler
              var button = document.getElementById("save");
              button.onclick = saveAsHtml;
            <\/script>
          </body>
        </html>`}async saveHTML(e="untitled.html",t="gl1",i){const n=await this.generateHTML(t,i);return ae.download(n,e,"application/html")}json(){return this.document.opts=this.opts,this.document.scene=this.scene,this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.json()}async saveDocument(e="untitled.nvd",t=!0,i={}){const{embedImages:n=!0,embedPreview:s=!0}=i;this.document.title=e,this.document.volumes=this.volumes,this.document.meshes=this.meshes,s?(this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL()):this.document.previewImageDataURL="",await this.document.download(e,t,{embedImages:n})}async loadImages(e){const t=[],i=[];for(const n of e)if("url"in n){const s=this.getFileExt(n.name?n.name:n.url);if(this.loaders[s]){const r=this.loaders[s].toExt.toUpperCase();ur.includes(r)?i.push(n):t.push(n);continue}ur.includes(s.toUpperCase())?i.push(n):t.push(n)}return t.length>0&&await this.loadVolumes(t),i.length>0&&await this.loadMeshes(i),this}async loadDicoms(e){if(!this.getDicomLoader())throw new Error("No dicom loader set. Please set a dicom loader before loading dicoms");this.drawScene(),this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const t=e.map(async n=>{let s=null;if(n.isManifest)s=await It.fetchDicomData(n.url);else{const u=await fetch(n.url);if(!u.ok)throw new Error(`Failed to load file: ${u.statusText}`);const h=await u.arrayBuffer();s=[{name:n.url.split("/").pop(),data:h}]}const r=this.getDicomLoader().loader,a=await r(s);console.log(a);const o=a[0].name,l=a[0].data;return await It.loadFromUrl({url:l,name:o})}),i=await Promise.all(t);return i.length===1?this.addVolume(i[0]):this.onDicomLoaderFinishedWithImages(i),this}async loadVolumes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredVolumes=e,this):(this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addVolumesFromUrl(e),this)}async addMeshFromUrl(e){const t=this.getFileExt(e.url);if(t==="JCON"||t==="JSON"){const s=await(await fetch(e.url,{})).json(),r=this.loadConnectomeAsMesh(s);return this.mediaUrlMap.set(r,e.url),this.onMeshAddedFromUrl(e,r),this.addMesh(r),r}const i=await Ma.loadFromUrl({...e,gl:this.gl});return this.mediaUrlMap.set(i,e.url),this.onMeshAddedFromUrl(e,i),this.addMesh(i),i}async addMeshesFromUrl(e){const t=e.map(async n=>{const s=this.getFileExt(n.name||n.url);if(this.loaders[s]){let a=n.url;const o=this.loaders[s].toExt;let l=n.name||n.url;if(l=l.split("/").pop(),typeof n.url=="string"){const d=n.url;try{const g=await fetch(d);if(!g.ok)throw new Error(`Failed to load file: ${g.statusText}`);a=await g.arrayBuffer()}catch(g){throw new Error(`Failed to load url ${d}: ${g}`)}}const{positions:c,indices:u,colors:h=null}=await this.loaders[s].loader(a);n.name=`${l}.${o}`;const f=await gr.createMZ3Async(c,u,!1,h);n.buffer=f}if(s==="JCON"||s==="JSON"){const o=await(await fetch(n.url,{})).json(),l=this.loadConnectomeAsMesh(o);return this.mediaUrlMap.set(l,n.url),this.onMeshAddedFromUrl(n,l),l}const r=await Ma.loadFromUrl({...n,gl:this.gl});return this.mediaUrlMap.set(r,n.url),this.onMeshAddedFromUrl(n,r),r}),i=await Promise.all(t);for(let n=0;n<i.length;n++)this.addMesh(i[n]);return i}async loadMeshes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredMeshes=e,this):(this.initialized,this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addMeshesFromUrl(e),this.updateGLVolume(),this.drawScene(),this)}async loadConnectomeFromUrl(e,t={}){const n=await(await fetch(e,{headers:t})).json();return this.loadConnectome(n)}async loadFreeSurferConnectomeFromUrl(e,t={}){const n=await(await fetch(e,{headers:t})).json();return this.loadFreeSurferConnectome(n)}async loadFreeSurferConnectome(e){const t=_u.convertFreeSurferConnectome(e);return this.loadConnectome(t)}handleNodeAdded(e){const t=e.detail.node,i=[1,1,1,1];this.addLabel(t.name,{textColor:i,bulletScale:1,bulletColor:i,lineWidth:0,lineColor:i,lineTerminator:"none",textScale:1},[t.x,t.y,t.z]),this.drawScene()}loadConnectomeAsMesh(e){let t=e;if("data_type"in e&&e.data_type==="fs_pointset")t=_u.convertFreeSurferConnectome(e),P.warn("converted FreeSurfer connectome",t);else if("nodes"in e){const i=e.nodes;"names"in i&&"X"in i&&"Y"in i&&"Z"in i&&"Color"in i&&"Size"in i&&(t=_u.convertLegacyConnectome(e),P.warn("converted legacy connectome",t))}else throw new Error("not a known connectome format");return new _u(this.gl,t)}loadConnectome(e){this.drawScene(),this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const t=this.loadConnectomeAsMesh(e);return this.addMesh(t),this.drawScene(),this}createEmptyDrawing(){if(this.back===null||!this.back.dims||Math.min(Math.min(this.back.dims[1],this.back.dims[2]),this.back.dims[3])<1)return;const t=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];this.drawBitmap=new Uint8Array(t),this.clickToSegmentGrowingBitmap=new Uint8Array(t),this.drawClearAllUndoBitmaps(),this.drawAddUndoBitmap(),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,hs,this.back.dims):this.drawTexture=this.r8Tex(this.drawTexture,hs,this.back.dims,!0),this.refreshDrawing(!1)}r16Tex(e,t,i,n){e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,i[1],i[2],i[3]);const s=i[1]*i[2]*i[3];return n.length!==s&&(n=new Int16Array(s)),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RED_INTEGER,this.gl.SHORT,n),e}drawGrowCut(){if(!this.back||!this.back.dims)throw new Error("back not defined");const e=this.back.hdr,t=this.gl,i=e.dims[1]*e.dims[2]*e.dims[3];if(!this.drawBitmap||this.drawBitmap.length!==i){P.debug("bitmap dims are wrong");return}const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.disable(t.CULL_FACE),t.viewport(0,0,this.back.dims[1],this.back.dims[2]),t.disable(t.BLEND);let s=dj(this.back);const r=this.r16Tex(null,wj,this.back.dims,s);for(let y=1;y<i;y++)s[y]=this.drawBitmap[y];const a=this.r16Tex(null,Ej,this.back.dims,s),o=this.r16Tex(null,Tj,this.back.dims,s),l=1e4;for(let y=1;y<i;y++)s[y]>0&&(s[y]=l);const c=this.r16Tex(null,Sj,this.back.dims,s),u=this.r16Tex(null,Cj,this.back.dims,s);t.bindVertexArray(this.genericVAO);const h=this.growCutShader;h.use(t);const f=128;t.uniform1i(h.uniforms.finalPass,0),t.uniform1i(h.uniforms.backTex,11);for(let y=0;y<f;y++){t.uniform1i(h.uniforms.labelTex,14),t.uniform1i(h.uniforms.strengthTex,12);for(let b=0;b<this.back.dims[3];b++){const E=1/this.back.dims[3]*(b+.5);t.uniform1f(h.uniforms.coordZ,E),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,0,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,u,0,b),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&P.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}y===f-1&&t.uniform1i(h.uniforms.finalPass,1),t.uniform1i(h.uniforms.labelTex,15),t.uniform1i(h.uniforms.strengthTex,13);for(let b=0;b<this.back.dims[3];b++){const E=1/this.back.dims[3]*(b+.5);t.uniform1f(h.uniforms.coordZ,E),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,a,0,b),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,c,0,b),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&P.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}t.drawBuffers([t.COLOR_ATTACHMENT0]);const d=t.COLOR_ATTACHMENT1,g=a;t.readBuffer(d);const m=t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT),A=t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE);(m!==t.RED_INTEGER||A!==t.SHORT)&&P.debug("readPixels will fail."),s=new Int16Array;const p=this.back.dims[1]*this.back.dims[2],v=new Int16Array(p);for(let y=0;y<this.back.dims[3];y++)t.framebufferTextureLayer(t.FRAMEBUFFER,d,g,0,y),t.readPixels(0,0,this.back.dims[1],this.back.dims[2],m,A,v),s=Int16Array.from([...s,...v]);let x=s[0];for(let y=0;y<s.length;y++)x=Math.max(x,s[y]);for(let y=1;y<i;y++)this.drawBitmap[y]=s[y];t.deleteTexture(r),t.deleteTexture(c),t.deleteTexture(u),t.deleteTexture(a),t.deleteTexture(o),t.bindVertexArray(this.unusedVAO),t.viewport(0,0,t.canvas.width,t.canvas.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}drawPt(e,t,i,n,s=null){var h;if(s===null&&(s=this.drawBitmap),!((h=this.back)!=null&&h.dims))throw new Error("back.dims not set");const r=this.back.dims[1],a=this.back.dims[2],o=this.back.dims[3];e=Math.min(Math.max(e,0),r-1),t=Math.min(Math.max(t,0),a-1),i=Math.min(Math.max(i,0),o-1),s[e+t*r+i*r*a]=n;const l=this.drawPenAxCorSag===0,c=this.drawPenAxCorSag===1,u=this.drawPenAxCorSag===2;if(this.opts.penSize>1){const f=Math.floor(this.opts.penSize/2);for(let d=-f;d<=f;d++)for(let g=-f;g<=f;g++)l?s[e+d+(t+g)*r+i*r*a]=n:c?s[e+d+t*r+(i+g)*r*a]=n:u&&(s[e+(t+g)*r+(i+d)*r*a]=n)}}drawPenLine(e,t,i){const n=Math.abs(e[0]-t[0]),s=Math.abs(e[1]-t[1]),r=Math.abs(e[2]-t[2]);let a=-1,o=-1,l=-1;t[0]>e[0]&&(a=1),t[1]>e[1]&&(o=1),t[2]>e[2]&&(l=1);let c=e[0],u=e[1],h=e[2];const f=t[0],d=t[1],g=t[2];if(n>=s&&n>=r){let m=2*s-n,A=2*r-n;for(;c!==f;)c+=a,m>=0&&(u+=o,m-=2*n),A>=0&&(h+=l,A-=2*n),m+=2*s,A+=2*r,this.drawPt(c,u,h,i)}else if(s>=n&&s>=r){let m=2*n-s,A=2*r-s;for(;u!==d;)u+=o,m>=0&&(c+=a,m-=2*s),A>=0&&(h+=l,A-=2*s),m+=2*n,A+=2*r,this.drawPt(c,u,h,i)}else{let m=2*s-r,A=2*n-r;for(;h!==g;)h+=l,m>=0&&(u+=o,m-=2*r),A>=0&&(c+=a,A-=2*r),m+=2*s,A+=2*n,this.drawPt(c,u,h,i)}}drawingBinaryDilationWithSeed(e,t=6){try{let i=function(A){return A[0]+A[1]*o+A[2]*l};const n=this.drawBitmap,s=this.back.dims[1],r=this.back.dims[2],a=this.back.dims[3],o=s,l=s*r,c=l*a,u=i(e);if(u<0||u>=c)throw new Error("Seed index is out of bounds.");const h=n[u];if(h===0)throw new Error("Seed voxel is not part of a filled cluster.");const f=n.slice();for(let A=0;A<c;A++)f[A]=f[A]===h?1:0;this.drawFloodFillCore(f,u,t);const d=n.slice(),g=[],m=[-l,l,-s,s,-1,1];g.push(...m),t>6&&g.push(-s-1,-s+1,s-1,s+1,-l-s,-l+s,-l-1,-l+1,l-s,l+s,l-1,l+1),t>18&&g.push(-l-s-1,-l-s+1,-l+s-1,-l+s+1,l-s-1,l-s+1,l+s-1,l+s+1);for(let A=0;A<c;A++)if(f[A]===2){const p=A%s,v=Math.floor(A%l/s),x=Math.floor(A/l);for(const y of g){const b=A+y;if(b<0||b>=c)continue;const E=b%s,w=Math.floor(b%l/s),S=Math.floor(b/l);Math.abs(E-p)>1||Math.abs(w-v)>1||Math.abs(S-x)>1||n[b]===0&&(d[b]=h)}}this.drawBitmap=d,this.drawAddUndoBitmap(),this.refreshDrawing(!0)}catch(i){P.error("Error in drawingBinaryDilationWithSeed:",i)}}drawFloodFillCore(e,t,i=6){var c;if(!((c=this.back)!=null&&c.dims))throw new Error("back.dims undefined");const n=[this.back.dims[1],this.back.dims[2],this.back.dims[3]],s=n[0],r=s*n[1];function a(u){return u[0]+u[1]*s+u[2]*r}function o(u){const h=Math.floor(u/r),f=Math.floor((u-h*r)/s);return[Math.floor(u%s),f,h]}const l=[];for(l.push(t),e[t]=2;l.length>0;){let u=function(d){const g=f.slice();if(g[0]+=d[0],g[1]+=d[1],g[2]+=d[2],g[0]<0||g[1]<0||g[2]<0||g[0]>=n[0]||g[1]>=n[1]||g[2]>=n[2])return;const m=a(g);e[m]===1&&(e[m]=2,l.push(m))};const h=l[0];l.shift();const f=o(h);u([0,0,-1]),u([0,0,1]),u([0,-1,0]),u([0,1,0]),u([-1,0,0]),u([1,0,0]),!(i<=6)&&(u([-1,-1,0]),u([1,1,0]),u([-1,1,0]),u([1,1,0]),u([0,-1,-1]),u([0,1,-1]),u([-1,0,-1]),u([1,0,-1]),u([0,-1,1]),u([0,1,1]),u([-1,0,1]),u([1,0,1]),!(i<=18)&&(u([-1,-1,-1]),u([1,-1,-1]),u([-1,1,-1]),u([1,1,-1]),u([-1,-1,1]),u([1,-1,1]),u([-1,1,1]),u([1,1,1])))}}drawFloodFill(e,t=0,i=0,n=NaN,s=NaN,r=6,a=Number.POSITIVE_INFINITY,o=!1,l=null,c=!1){var T;if(!this.drawBitmap&&(P.warn("drawFloodFill called without an initialized drawBitmap."),this.createEmptyDrawing(),!this.drawBitmap)){P.error("Failed to create drawing bitmap.");return}if(this.clickToSegmentIsGrowing&&!this.clickToSegmentGrowingBitmap){if(P.warn("drawFloodFill called in preview mode without initialized clickToSegmentGrowingBitmap."),this.drawBitmap)this.clickToSegmentGrowingBitmap=this.drawBitmap.slice();else{P.error("Cannot initialize growing bitmap as drawBitmap is null.");return}if(!this.clickToSegmentGrowingBitmap){P.error("Failed to create growing bitmap.");return}}if(l===null&&(l=this.drawBitmap),!l){P.error("drawFloodFill targetBitmap is null.");return}if(!((T=this.back)!=null&&T.dims))throw new Error("back.dims undefined");t=Math.abs(t);const u=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];if(e[0]<0||e[1]<0||e[2]<0||e[0]>=u[0]||e[1]>=u[1]||e[2]>=u[2])return;const h=u[0],f=h*u[1],d=f*u[2],g=this.clickToSegmentIsGrowing?this.drawBitmap:l;if(!g){P.error("Could not determine original bitmap state.");return}const m=new Uint8Array(d).fill(0);let A=-1;o&&this.drawPenAxCorSag===0?A=2:o&&this.drawPenAxCorSag===1?A=1:o&&this.drawPenAxCorSag===2&&(A=0);function p(R){const D=Math.floor(R/f),I=Math.floor((R-D*f)/h);return[Math.floor(R%h),I,D]}function v(R){return R[0]+R[1]*h+R[2]*f}const x=R=>this.vox2mm(R,this.back.matRAS),y=x(e),b=a**2;function E(R){const D=p(R);if(A>=0&&D[A]!==e[A])return!1;const I=x(D);return(I[0]-y[0])**2+(I[1]-y[1])**2+(I[2]-y[2])**2<=b}const w=v(e),S=g[w];if(c&&S===0){P.debug("Grow/Erase Cluster tool requires starting on a masked voxel."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&(this.clickToSegmentGrowingBitmap.set(this.drawBitmap),this.refreshDrawing(!0,!0));return}if(i===0&&S===t&&!c&&t!==0&&(P.debug("drawFloodFill selected voxel is already desired color"),!this.clickToSegmentIsGrowing))return;let M=NaN;if(c&&(i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)){const R=g.slice();for(let k=0;k<d;k++)R[k]=R[k]===S&&E(k)?1:0;if(R[w]!==1){P.error("Seed voxel could not be marked for cluster ID.");return}this.drawFloodFillCore(R,w,r);const D=this.volumes[0].img2RAS();let I=0,U=0;for(let k=0;k<d;k++)R[k]===2&&(I+=D[k],U++);M=U>0?I/U:D[w],P.debug(`Grow Cluster using mean intensity: ${M.toFixed(2)} from ${U} voxels.`);let L=-1/0,V=1/0;i===Number.POSITIVE_INFINITY&&(L=M),i===Number.NEGATIVE_INFINITY&&(V=M);for(let k=0;k<d;k++)if(R[k]===2)m[k]=1;else if(g[k]===0){const F=D[k];F>=L&&F<=V&&E(k)&&(m[k]=1)}t=S}else if(i===0)if(c&&t===0){P.debug(`Erase Cluster: Identifying cluster with color ${S}`);for(let R=0;R<d;R++)m[R]=g[R]===S&&E(R)?1:0}else for(let R=0;R<d;R++)g[R]===S&&E(R)&&S!==0&&(m[R]=1);else{const R=this.volumes[0].img2RAS();M=R[w];let D=-1/0,I=1/0;isFinite(n)&&isFinite(s)?(D=n,I=s):i===Number.POSITIVE_INFINITY?D=M:i===Number.NEGATIVE_INFINITY&&(I=M);for(let U=0;U<d;U++){const L=R[U];L>=D&&L<=I&&E(U)&&(m[U]=1)}t=g[w],t===0&&(t=this.opts.penValue,(t<1||!isFinite(t))&&(t=1))}if(m[w]!==1){let R=!1;if(c&&i!==0?S!==0&&(R=!0):(S!==0||t===0)&&(R=!0),R&&E(w))m[w]=1,P.debug("Forcing seed voxel to 1 in working buffer.");else{P.debug("Seed voxel not marked as candidate '1' and not valid originally."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&this.clickToSegmentGrowingBitmap.set(this.drawBitmap);return}}this.drawFloodFillCore(m,w,r);for(let R=0;R<d;R++)m[R]===2?l[R]=t:this.clickToSegmentIsGrowing&&l===this.clickToSegmentGrowingBitmap&&(l[R]=g[R]);this.clickToSegmentIsGrowing?this.refreshDrawing(!0,!0):(this.drawAddUndoBitmap(),this.refreshDrawing(!0,!1))}drawPenFilled(){var p;const e=this.drawPenFillPts.length;if(e<2){this.drawPenFillPts=[];return}const t=this.drawPenAxCorSag;let i=0,n=1;if(t===1&&(n=2),t===2&&(i=1,n=2),!((p=this.back)!=null&&p.dims))throw new Error("back.dims undefined");const s=[this.back.dims[i+1],this.back.dims[n+1]],r=new Uint8Array(s[0]*s[1]);let a=1;function o(v,x){const y=Math.abs(v[0]-x[0]),b=Math.abs(v[1]-x[1]);r[v[0]+v[1]*s[0]]=a,r[x[0]+x[1]*s[0]]=a;let E=-1,w=-1;x[0]>v[0]&&(E=1),x[1]>v[1]&&(w=1);let S=v[0],M=v[1];const T=x[0],R=x[1];if(y>=b){let D=2*b-y;for(;S!==T;)S+=E,D>=0&&(M+=w,D-=2*y),D+=2*b,r[S+M*s[0]]=a}else{let D=2*y-b;for(;M!==R;)M+=w,D>=0&&(S+=E,D-=2*b),D+=2*y,r[S+M*s[0]]=a}}function l(v){const x=Math.min(Math.max(v[0],0),s[0]-1),y=Math.min(Math.max(v[1],0),s[1]-1);return[x,y]}const c=l([this.drawPenFillPts[0][i],this.drawPenFillPts[0][n]]);let u=[...c],h=[...c],f=c;for(let v=1;v<e;v++){let x=[this.drawPenFillPts[v][i],this.drawPenFillPts[v][n]];x=l(x),u=[Math.min(x[0],u[0]),Math.min(x[1],u[1])],h=[Math.max(x[0],h[0]),Math.max(x[1],h[1])],o(f,x),f=x}o(c,f);const d=1;u[0]=Math.max(0,u[0]-d),u[1]=Math.max(0,u[1]-d),h[0]=Math.min(s[0]-1,h[0]+d),h[1]=Math.min(s[1]-1,h[1]+d);for(let v=0;v<s[1];v++)for(let x=0;x<s[0];x++){if(x>=u[0]&&x<h[0]&&v>=u[1]&&v<=h[1])continue;const y=x+v*s[0];r[y]===0&&(r[y]=2)}const g=[];function m(v){if(v[0]<u[0]||v[1]<u[1]||v[0]>h[0]||v[1]>h[1])return;const x=v[0]+v[1]*s[0];r[x]===0&&(g.push(v),r[x]=2)}for(let v=u[0];v<=h[0];v++)m([v,u[1]]),m([v,h[1]]);for(let v=u[1]+1;v<=h[1]-1;v++)m([u[0],v]),m([h[0],v]);for(;g.length>0;){const v=g.shift();m([v[0]-1,v[1]]),m([v[0]+1,v[1]]),m([v[0],v[1]-1]),m([v[0],v[1]+1])}a=this.opts.penValue;const A=this.drawPenFillPts[0][3-(i+n)];if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(t===0){const v=A*s[0]*s[1];for(let x=0;x<s[0]*s[1];x++)r[x]!==2&&(this.drawBitmap[x+v]=a)}else{let v=1;const x=this.back.dims[1]*this.back.dims[2];let y=A*this.back.dims[1];t===2&&(v=this.back.dims[1],y=A);let b=0;for(let E=0;E<s[1];E++)for(let w=0;w<s[0];w++)r[b]!==2&&(this.drawBitmap[w*v+E*x+y]=a),b++}if(!this.drawFillOverwrites&&this.drawUndoBitmaps[this.currentDrawUndoBitmap].length>0){const v=this.drawBitmap.length,x=$x(this.drawUndoBitmaps[this.currentDrawUndoBitmap],v);for(let y=0;y<v;y++)x[y]!==0&&(this.drawBitmap[y]=x[y])}this.drawPenFillPts=[],this.drawAddUndoBitmap(),this.refreshDrawing(!1)}closeDrawing(){this.drawClearAllUndoBitmaps(),this.rgbaTex(this.drawTexture,hs,[2,2,2,2],!0),this.drawBitmap=null,this.clickToSegmentGrowingBitmap=null,this.drawScene()}refreshDrawing(e=!0,t=!1){var a;t&&(!this.opts.drawingEnabled||!this.opts.clickToSegment)&&(P.debug("refreshDrawing: Conditions not met for clickToSegment bitmap, using drawBitmap."),t=!1);const i=t?this.clickToSegmentGrowingBitmap:this.drawBitmap;!i&&!t&&this.clickToSegmentGrowingBitmap?P.warn("refreshDrawing: drawBitmap is null, but clickToSegmentGrowingBitmap exists. Check state."):!i&&t&&this.drawBitmap?(P.warn("refreshDrawing: clickToSegmentGrowingBitmap is null, falling back to drawBitmap."),t=!1):i||P.warn("refreshDrawing: Both bitmaps are null. Uploading empty data.");const n=t?this.clickToSegmentGrowingBitmap:this.drawBitmap;if(!((a=this.back)!=null&&a.dims)){P.warn("refreshDrawing: back.dims undefined, cannot refresh drawing texture yet.");return}const s=this.back.dims.slice(),r=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];if(!n){P.warn(`refreshDrawing: Bitmap data source (${t?"growing":"main"}) is null. Cannot update texture.`),e&&this.drawScene();return}if(n.length===8?(s[1]=2,s[2]=2,s[3]=2):r!==n.length&&P.warn(`Drawing bitmap length (${n.length}) must match the background image (${r})`),this.gl.activeTexture(hs),this.opts.is2DSliceShader){const o=this.frac2vox(this.scene.crosshairPos),l=Math.min(Math.max(o[2],0),s[3]-1),c=s[1]*s[2],u=l*c;P.debug(`refresh huge 2D drawing x×y×z ${s[1]}×${s[2]}×${s[3]} slice ${u}`);const h=n.subarray(u,u+c);this.gl.bindTexture(this.gl.TEXTURE_2D,this.drawTexture),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,s[1],s[2],this.gl.RED,this.gl.UNSIGNED_BYTE,h)}else this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,s[1],s[2],s[3],this.gl.RED,this.gl.UNSIGNED_BYTE,n);if(!this.drawTexture){P.error("refreshDrawing: drawTexture (GPU texture) is null.");return}e&&this.drawScene()}r8Tex2D(e,t,i,n=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.R8,i[1],i[2]),n){const s=new Uint8Array(i[1]*i[2]);this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,i[1],i[2],this.gl.RED,this.gl.UNSIGNED_BYTE,s)}return e}r8Tex(e,t,i,n=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8,i[1],i[2],i[3]),n){const s=new Uint8Array(i[1]*i[2]*i[3]);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RED,this.gl.UNSIGNED_BYTE,s)}return e}rgbaTex2D(e,t,i,n=null,s=!0){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,i[1],i[2]),n){let r=n;const a=i[1],o=i[2];if(s){r=new Uint8Array(n.length);const l=a*4;for(let c=0;c<o;c++){const u=c*l,h=(o-1-c)*l;r.set(n.subarray(u,u+l),h)}}this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,a,o,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}return e}rgbaTex(e,t,i,n=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8,i[1],i[2],i[3]),n){const s=new Uint8Array(i[1]*i[2]*i[3]*4);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RGBA,this.gl.UNSIGNED_BYTE,s)}return e}rgba16Tex(e,t,i,n=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,2),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,2),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA16UI,i[1],i[2],i[3]),n){const s=new Uint16Array(i[1]*i[2]*i[3]*4);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RGBA_INTEGER,this.gl.UNSIGNED_SHORT,s)}return e}requestCORSIfNotSameOrigin(e,t){new URL(t,window.location.href).origin!==window.location.origin&&(e.crossOrigin="")}async loadPngAsTexture(e,t){return new Promise((i,n)=>{const s=new Image;s.onload=()=>{if(!this.bmpShader)return;let r;t===4?(this.bmpTexture!==null&&this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=this.gl.createTexture(),r=this.bmpTexture,this.bmpTextureWH=s.width/s.height,this.gl.activeTexture(yj),this.bmpShader.use(this.gl),this.gl.uniform1i(this.bmpShader.uniforms.bmpTexture,4)):t===5?(this.gl.activeTexture(iy),this.matCapTexture!==null&&this.gl.deleteTexture(this.matCapTexture),this.matCapTexture=this.gl.createTexture(),r=this.matCapTexture):(this.fontShader.use(this.gl),this.gl.activeTexture(xj),this.gl.uniform1i(this.fontShader.uniforms.fontTexture,3),this.fontTexture!==null&&this.gl.deleteTexture(this.fontTexture),this.fontTexture=this.gl.createTexture(),r=this.fontTexture),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s),i(r),t!==4&&this.drawScene()},s.onerror=n,this.requestCORSIfNotSameOrigin(s,e),s.src=e})}async loadFontTexture(e){return this.loadPngAsTexture(e,3)}async loadBmpTexture(e){return this.loadPngAsTexture(e,4)}async loadMatCapTexture(e){return this.loadPngAsTexture(e,5)}initFontMets(){if(!this.fontMetrics)throw new Error("fontMetrics undefined");this.fontMets={distanceRange:this.fontMetrics.atlas.distanceRange,size:this.fontMetrics.atlas.size,mets:{}};for(let i=0;i<256;i++)this.fontMets.mets[i]={xadv:0,uv_lbwh:[0,0,0,0],lbwh:[0,0,0,0]};const e=this.fontMetrics.atlas.width,t=this.fontMetrics.atlas.height;for(let i=0;i<this.fontMetrics.glyphs.length;i++){const n=this.fontMetrics.glyphs[i],s=n.unicode;if(this.fontMets.mets[s].xadv=n.advance,n.planeBounds===void 0)continue;let r=n.atlasBounds.left/e,a=(t-n.atlasBounds.top)/t,o=(n.atlasBounds.right-n.atlasBounds.left)/e,l=(n.atlasBounds.top-n.atlasBounds.bottom)/t;this.fontMets.mets[s].uv_lbwh=[r,a,o,l],r=n.planeBounds.left,a=n.planeBounds.bottom,o=n.planeBounds.right-n.planeBounds.left,l=n.planeBounds.top-n.planeBounds.bottom,this.fontMets.mets[s].lbwh=[r,a,o,l]}}async loadFont(e=Qx,t=Xx){await this.loadFontTexture(e);const i=await fetch(t);if(!i.ok)throw Error(i.statusText);const n=await i.text();this.fontMetrics=JSON.parse(n),this.initFontMets(),this.fontShader.use(this.gl),this.drawScene()}async loadDefaultMatCap(){return this.loadMatCapTexture(uj)}async loadDefaultFont(){await this.loadFontTexture(this.DEFAULT_FONT_GLYPH_SHEET),this.fontMetrics=this.DEFAULT_FONT_METRICS,this.initFontMets()}async initText(){this.fontShader=new De(this.gl,XO,WO),this.fontShader.use(this.gl),await this.loadDefaultFont(),await this.loadDefaultMatCap(),this.drawLoadingText(this.opts.loadingText)}meshShaderNameToNumber(e="Phong"){const t=e.toLowerCase();for(let i=0;i<this.meshShaders.length;i++)if(this.meshShaders[i].Name.toLowerCase()===t)return i}setMeshShader(e,t=2){let i=0;if(typeof t=="number"?i=t:i=this.meshShaderNameToNumber(t),i===void 0)throw new Error("shaderIndex undefined");i=Math.min(i,this.meshShaders.length-1),i=Math.max(i,0);const n=this.getMeshIndexByID(e);if(n>=this.meshes.length){P.debug("Unable to change shader until mesh is loaded (maybe you need async)");return}this.meshes[n].meshShaderIndex=i,this.updateGLVolume(),this.onMeshShaderChanged(n,i)}createCustomMeshShader(e,t="Custom"){if(!e)throw new Error("Need fragment shader");const i=this.meshShaderNameToNumber(t);i>=0&&(this.gl.deleteProgram(this.meshShaders[i].shader.program),this.meshShaders.splice(i,1));const n=new De(this.gl,q0,e);return n.use(this.gl),{Name:t,Frag:e,shader:n}}setCustomMeshShader(e="",t="Custom"){const i=this.createCustomMeshShader(e,t);return this.meshShaders.push(i),this.onCustomMeshShaderAdded(e,t),this.meshShaders.length-1}meshShaderNames(e=!0){const t=[];for(let i=0;i<this.meshShaders.length;i++)t.push(this.meshShaders[i].Name);return e===!0?t.sort():t}initRenderShader(e,t=0){e.use(this.gl),this.gl.uniform1i(e.uniforms.volume,0),this.gl.uniform1i(e.uniforms.colormap,1),this.gl.uniform1i(e.uniforms.overlay,2),this.gl.uniform1i(e.uniforms.drawing,7),this.gl.uniform1fv(e.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.gl.uniform1f(e.uniforms.gradientAmount,t),this.gl.uniform1f(e.uniforms.silhouettePower,this.opts.renderSilhouette);const i=new Float32Array(gh);for(let n=0;n<gh;n++)this.opts.gradientOpacity===0?i[n]=1:i[n]=Math.pow(n/(gh-1),this.opts.gradientOpacity*8);this.gl.uniform1fv(this.gl.getUniformLocation(e.program,"gradientOpacity"),i)}async init(){const e=this.gl.getExtension("WEBGL_debug_renderer_info");if(e){const r=this.gl.getParameter(e.UNMASKED_VENDOR_WEBGL),a=this.gl.getParameter(e.UNMASKED_RENDERER_WEBGL);P.info("renderer vendor: ",r),P.info("renderer: ",a)}else P.info("debug_renderer_info unavailable");const t=this.gl.getParameter(this.gl.RENDERER);P.info("firefox renderer: ",t),this.gl.clearDepth(0),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.volumeTexture=this.rgbaTex(this.volumeTexture,Aa,[2,2,2,2],!0),this.overlayTexture=this.rgbaTex(this.overlayTexture,Z0,[2,2,2,2],!0),this.drawTexture=this.r8Tex(this.drawTexture,hs,[2,2,2,2],!0);const i=[1,1,0,1,0,0,0,1,0,0,0,0],n=this.gl;this.cuboidVertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.cuboidVertexBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(i),n.STATIC_DRAW),this.genericVAO=n.createVertexArray(),n.bindVertexArray(this.genericVAO),n.bindBuffer(n.ARRAY_BUFFER,this.cuboidVertexBuffer),n.enableVertexAttribArray(0),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.bindVertexArray(this.unusedVAO),this.pickingMeshShader=new De(n,q0,oL),this.pickingMeshShader.use(n),this.pickingImageShader=new De(n,dl,wL),this.pickingImageShader.use(n),n.uniform1i(this.pickingImageShader.uniforms.volume,0),n.uniform1i(this.pickingImageShader.uniforms.colormap,1),n.uniform1i(this.pickingImageShader.uniforms.overlay,2),n.uniform1i(this.pickingImageShader.uniforms.drawing,7),this.slice2DShader=new De(n,_0,kO),this.slice2DShader.use(n),n.uniform1i(this.slice2DShader.uniforms.volume,0),n.uniform1i(this.slice2DShader.uniforms.colormap,1),n.uniform1i(this.slice2DShader.uniforms.overlay,2),n.uniform1i(this.slice2DShader.uniforms.drawing,7),n.uniform1f(this.slice2DShader.uniforms.drawOpacity,this.drawOpacity),this.sliceMMShader=new De(n,_0,jO),this.sliceMMShader.use(n),n.uniform1i(this.sliceMMShader.uniforms.volume,0),n.uniform1i(this.sliceMMShader.uniforms.colormap,1),n.uniform1i(this.sliceMMShader.uniforms.overlay,2),n.uniform1i(this.sliceMMShader.uniforms.drawing,7),n.uniform1f(this.sliceMMShader.uniforms.drawOpacity,this.drawOpacity),this.sliceV1Shader=new De(n,_0,zO),this.sliceV1Shader.use(n),n.uniform1i(this.sliceV1Shader.uniforms.volume,0),n.uniform1i(this.sliceV1Shader.uniforms.colormap,1),n.uniform1i(this.sliceV1Shader.uniforms.overlay,2),n.uniform1i(this.sliceV1Shader.uniforms.drawing,7),n.uniform1f(this.sliceV1Shader.uniforms.drawOpacity,this.drawOpacity),this.orientCubeShader=new De(n,SL,CL),this.orientCubeShaderVAO=n.createVertexArray(),n.bindVertexArray(this.orientCubeShaderVAO);const s=n.createBuffer();n.enableVertexAttribArray(0),n.enableVertexAttribArray(1),n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,IL,n.STATIC_DRAW),n.vertexAttribPointer(0,3,n.FLOAT,!1,24,0),n.enableVertexAttribArray(1),n.vertexAttribPointer(1,3,n.FLOAT,!1,24,12),n.bindVertexArray(this.unusedVAO),this.rectShader=new De(n,_x,G0),this.rectShader.use(n),this.rectOutlineShader=new De(n,_x,_O),this.rectOutlineShader.use(n),this.lineShader=new De(n,YO,G0),this.lineShader.use(n),this.line3DShader=new De(n,qO,G0),this.line3DShader.use(n),this.circleShader=new De(n,ZO,JO),this.circleShader.use(n),this.renderVolumeShader=new De(n,dl,PO),this.initRenderShader(this.renderVolumeShader),this.renderSliceShader=new De(n,dl,VO),this.initRenderShader(this.renderSliceShader),this.renderGradientShader=new De(n,dl,OO),this.initRenderShader(this.renderGradientShader,.3),n.uniform1i(this.renderGradientShader.uniforms.matCap,5),n.uniform1i(this.renderGradientShader.uniforms.gradient,6),this.renderGradientValuesShader=new De(n,dl,LO),this.initRenderShader(this.renderGradientValuesShader),n.uniform1i(this.renderGradientValuesShader.uniforms.matCap,5),n.uniform1i(this.renderGradientValuesShader.uniforms.gradient,6),this.renderShader=this.renderVolumeShader,this.colorbarShader=new De(n,GO,HO),this.colorbarShader.use(n),n.uniform1i(this.colorbarShader.uniforms.colormap,1),this.blurShader=new De(n,ju,ML),this.sobelBlurShader=new De(n,ju,DL),this.sobelFirstOrderShader=new De(n,ju,RL),this.sobelSecondOrderShader=new De(n,ju,NL),this.growCutShader=new De(n,tL,iL),this.passThroughShader=new De(n,EL,TL),this.orientShaderAtlasU=new De(n,va,H0.concat(Hx)),this.orientShaderAtlasI=new De(n,va,Gx.concat(Hx)),this.orientShaderU=new De(n,va,H0.concat(Y0)),this.orientShaderI=new De(n,va,Gx.concat(Y0)),this.orientShaderF=new De(n,va,$O.concat(Y0)),this.orientShaderRGBU=new De(n,va,H0.concat(eL)),this.surfaceShader=new De(n,nL,sL),this.surfaceShader.use(n),this.fiberShader=new De(n,rL,aL),this.pickingImageShader.use(n);for(let r=0;r<this.meshShaders.length;r++){const a=this.meshShaders[r];a.Name==="Flat"?a.shader=new De(n,bL,Yx):a.shader=new De(n,q0,a.Frag),a.shader.use(n),a.shader.isMatcap=a.Name==="Matcap",a.shader.isMatcap&&n.uniform1i(a.shader.uniforms.matCap,5)}return this.bmpShader=new De(n,KO,QO),await this.initText(),this.opts.thumbnail.length>0&&(await this.loadBmpTexture(this.opts.thumbnail),this.thumbnailVisible=!0),this.updateGLVolume(),this.initialized=!0,this.resizeListener(),this.drawScene(),this}gradientGL(e){const t=this.gl,i=[0,0,0,0,1,0,1,0,0,1,1,0],n=t.createVertexArray();t.bindVertexArray(n);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,0,0);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.disable(t.CULL_FACE),t.viewport(0,0,e.dims[1],e.dims[2]),t.disable(t.BLEND);const a=this.rgbaTex(null,sy,e.dims,!0),o=this.opts.gradientOrder===2?this.sobelBlurShader:this.blurShader;o.use(t),t.activeTexture(Aa),t.bindTexture(t.TEXTURE_3D,this.volumeTexture);const l=.7;t.uniform1i(o.uniforms.intensityVol,0),t.uniform1f(o.uniforms.dX,l/e.dims[1]),t.uniform1f(o.uniforms.dY,l/e.dims[2]),t.uniform1f(o.uniforms.dZ,l/e.dims[3]),t.bindVertexArray(n);for(let h=0;h<e.dims[3]-1;h++){const f=1/e.dims[3]*(h+.5);t.uniform1f(o.uniforms.coordZ,f),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,a,0,h);const d=t.checkFramebufferStatus(t.FRAMEBUFFER);d!==t.FRAMEBUFFER_COMPLETE&&P.error("framebuffer status: ",d),t.clear(t.DEPTH_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3)}const c=this.opts.gradientOrder===2?this.sobelSecondOrderShader:this.sobelFirstOrderShader;c.use(t),t.activeTexture(sy),t.bindTexture(t.TEXTURE_3D,a),t.uniform1i(c.uniforms.intensityVol,8);const u=.7;t.uniform1f(c.uniforms.dX,u/e.dims[1]),t.uniform1f(c.uniforms.dY,u/e.dims[2]),t.uniform1f(c.uniforms.dZ,u/e.dims[3]),this.opts.gradientOrder===2&&(t.uniform1f(c.uniforms.dX2,2*u/e.dims[1]),t.uniform1f(c.uniforms.dY2,2*u/e.dims[2]),t.uniform1f(c.uniforms.dZ2,2*u/e.dims[3])),t.uniform1f(c.uniforms.coordZ,.5),t.bindVertexArray(n),this.gradientTexture!==null&&t.deleteTexture(this.gradientTexture),this.gradientTexture=this.rgbaTex(this.gradientTexture,ny,e.dims);for(let h=0;h<e.dims[3]-1;h++){const f=1/e.dims[3]*(h+.5);t.uniform1f(c.uniforms.coordZ,f),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,this.gradientTexture,0,h);const d=t.checkFramebufferStatus(t.FRAMEBUFFER);d!==t.FRAMEBUFFER_COMPLETE&&P.error("framebuffer status: ",d),t.clear(t.DEPTH_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3)}t.deleteFramebuffer(r),t.deleteTexture(a),t.deleteBuffer(s),t.bindFramebuffer(t.FRAMEBUFFER,null)}updateGLVolume(){var i;let e=0;const t=this.volumes.length;this.refreshColormaps();for(let n=0;n<t;n++)this.volumes[n].toRAS&&(this.refreshLayers(this.volumes[n],e),e++);if(this.furthestVertexFromOrigin=0,t>0&&(this.furthestVertexFromOrigin=((i=this.volumeObject3D)==null?void 0:i.furthestVertexFromOrigin)??0),this.meshes)for(let n=0;n<this.meshes.length;n++)this.furthestVertexFromOrigin=Math.max(this.furthestVertexFromOrigin,this.meshes[n].furthestVertexFromOrigin);this.onVolumeUpdated&&this.onVolumeUpdated(),this.drawScene()}getDescriptives(e){const{layer:t=0,masks:i=[],drawingIsMask:n=!1,roiIsMask:s=!1,startVox:r=[0,0,0],endVox:a=[0,0,0]}=e;let o=null;const l=this.volumes[t].hdr,c=this.volumes[t].pixDimsRAS;let u=l.scl_slope;isNaN(u)&&(u=1);let h=l.scl_inter;isNaN(h)&&(h=1);const f=this.volumes[t].img,d=f.length,g=new Float32Array(d);for(let D=0;D<d;D++)g[D]=f[D]*u+h;const m=new Uint8Array(d);for(let D=0;D<d;D++)m[D]=1;if(i.length>0)for(let D=0;D<i.length;D++){const I=this.volumes[i[D]].img;if(I.length!==d){P.debug("Mask resolution does not match image. Skipping masking layer "+i[D]);continue}for(let U=0;U<d;U++)(I[U]===0||isNaN(I[U]))&&(m[U]=0)}else if(i.length<1&&n)for(let D=0;D<d;D++)(this.drawBitmap[D]===0||isNaN(this.drawBitmap[D]))&&(m[D]=0);else if(i.length<1&&s){m.fill(0);let D=-1;if(r[0]===a[0])D=0;else if(r[1]===a[1])D=1;else if(r[2]===a[2])D=2;else{console.error("Error: No constant dimension found.");return}const U=[0,1,2].filter(Z=>Z!==D),L=[];L[D]=r[D],L[U[0]]=(r[U[0]]+a[U[0]])/2,L[U[1]]=(r[U[1]]+a[U[1]])/2;const V=Math.abs(a[U[0]]-r[U[0]])/2,k=Math.abs(a[U[1]]-r[U[1]])/2,F=l.dims[1],z=l.dims[2],G=Math.max(0,Math.floor(L[U[0]]-V)),X=Math.min(l.dims[U[0]+1]-1,Math.ceil(L[U[0]]+V)),le=Math.max(0,Math.floor(L[U[1]]-k)),oe=Math.min(l.dims[U[1]+1]-1,Math.ceil(L[U[1]]+k)),ne=L[D];if(ne<0||ne>=l.dims[D+1]){console.error("Error: Constant dimension value is out of bounds.");return}for(let Z=G;Z<=X;Z++)for(let W=le;W<=oe;W++){const ee=[];ee[D]=ne,ee[U[0]]=Z,ee[U[1]]=W;const Fe=(ee[U[0]]-L[U[0]])/V,Oe=(ee[U[1]]-L[U[1]])/k;if(Fe*Fe+Oe*Oe<=1){const Nn=ee[0],In=ee[1],Gi=ee[2]*F*z+In*F+Nn;m[Gi]=1}}const ie=c[U[0]+1]*c[U[1]+1];o=m.reduce((Z,W)=>Z+(W===1?1:0),0)*ie;const K=V*c[U[0]+1],te=k*c[U[1]+1];o=Math.PI*K*te}let A=0,p=0,v=0,x=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,b=0,E=0,w=0;for(let D=0;D<d;D++){if(m[D]<1)continue;const I=g[D];A++;let U=p+(I-p)/A;v=v+(I-p)*(I-U),p=U,I!==0&&(b++,U=E+(I-E)/b,w=w+(I-E)*(I-U),E=U,y=Math.min(I,x),x=Math.max(I,x))}const S=Math.sqrt(v/(A-1)),M=Math.sqrt(w/(b-1)),T=y,R=x;return A!==b&&(y=Math.min(0,x),x=Math.max(0,x)),{mean:p,stdev:S,nvox:A,volumeMM3:A*l.pixDims[1]*l.pixDims[2]*l.pixDims[3],volumeML:A*l.pixDims[1]*l.pixDims[2]*l.pixDims[3]*.001,min:y,max:x,meanNot0:E,stdevNot0:M,nvoxNot0:b,minNot0:T,maxNot0:R,cal_min:this.volumes[t].cal_min,cal_max:this.volumes[t].cal_max,robust_min:this.volumes[t].robust_min,robust_max:this.volumes[t].robust_max,area:o}}refreshLayers(e,t){var E;if(this.volumes.length<1)return;this.refreshColormaps();const i=e.hdr;let n=e.img;e.frame4D>0&&e.frame4D<e.nFrame4D&&(n=e.img.slice(e.frame4D*e.nVox3D,(e.frame4D+1)*e.nVox3D));const s=e.opacity;if(t>1&&s===0)return;let r=null;if(!this.back)throw new Error("back undefined");this.gl.bindVertexArray(this.unusedVAO),this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN);let a=ot(e.toRAS);if(t===0){this.volumeObject3D=hj(e,this.VOLUME_ID,this.gl),ti(a,a),this.back.matRAS=e.matRAS,this.back.dims=e.dimsRAS,this.back.pixDims=e.pixDimsRAS;const{volScale:w,vox:S}=this.sliceScale(!0);this.volScale=w,this.vox=S,this.volumeObject3D.scale=w,(i.dims[1]>this.uiData.max2D||i.dims[2]>this.uiData.max2D)&&P.error("Image dimensions exceed maximum texture size of hardware.");const T=i.dims[1]>this.uiData.max3D||i.dims[2]>this.uiData.max3D||i.dims[3]>this.uiData.max3D;if(T&&i.datatypeCode===2304&&i.dims[3]<2){P.info(`Large RGBA image (>${this.uiData.max3D}) requires Texture2D`),this.opts.is2DSliceShader=!0,r=this.rgbaTex2D(this.volumeTexture,Aa,e.dimsRAS,n);return}if(T){P.info(`Large scalar image (>${this.uiData.max3D}) requires Texture2D (${i.dims[1]}×${i.dims[2]}×${i.dims[3]})`);const D=i.dims[1]*i.dims[2],I=this.frac2vox(this.scene.crosshairPos),L=Math.min(Math.max(I[2],0),i.dims[3]-1)*D,V=new Uint8Array(D*4),k=new Uint32Array(V.buffer),F=Math.floor(e.opacity*255),z=255*i.scl_slope/(e.cal_max-e.cal_min),G=255*(i.scl_inter-e.cal_min)/(e.cal_max-e.cal_min),X=new Uint8Array(this.colormap(e.colormap)),le=new Uint32Array(X.buffer);let oe=-1;for(let ne=0;ne<D;ne++){const ie=n[ne+L]*z+G,me=Math.round(Math.min(255,Math.max(0,ie)));k[ne]=le[me],V[oe+=4]=F}this.opts.is2DSliceShader=!0,r=this.rgbaTex2D(this.volumeTexture,Aa,e.dimsRAS,V,!1);return}if(T&&P.warn(`dimensions exceed 3D limits ${i.dims}`),this.opts.is2DSliceShader=!1,r=this.rgbaTex(this.volumeTexture,Aa,e.dimsRAS),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.texVox,S),this.gl.uniform3fv(this.renderShader.uniforms.volScale,w);const R=this.pickingImageShader;R.use(this.gl),this.gl.uniform1i(R.uniforms.volume,0),this.gl.uniform1i(R.uniforms.colormap,1),this.gl.uniform1i(R.uniforms.overlay,2),this.gl.uniform3fv(R.uniforms.volScale,w),P.debug(this.volumeObject3D)}else{((E=this.back)==null?void 0:E.dims)===void 0&&P.error("Fatal error: Unable to render overlay: background dimensions not defined!");const w=this.mm2frac(e.mm000,0,!0);let S=this.mm2frac(e.mm100,0,!0),M=this.mm2frac(e.mm010,0,!0),T=this.mm2frac(e.mm001,0,!0);S=He(S,S,w),M=He(M,M,w),T=He(T,T,w),a=pi(S[0],M[0],T[0],w[0],S[1],M[1],T[1],w[1],S[2],M[2],T[2],w[2],0,0,0,1),ti(a,a),t===1?(r=this.rgbaTex(this.overlayTexture,Z0,this.back.dims),this.overlayTexture=r,this.overlayTextureID=r):r=this.overlayTextureID}const o=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,o),this.gl.disable(this.gl.CULL_FACE),this.gl.viewport(0,0,this.back.dims[1],this.back.dims[2]),this.gl.disable(this.gl.BLEND);const l=this.gl.createTexture();this.gl.activeTexture(bj),this.gl.bindTexture(this.gl.TEXTURE_3D,l),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1);let c=this.orientShaderU;if(!i)throw new Error("hdr undefined");if(!n)throw new Error("img undefined");if(i.datatypeCode===2)i.intent_code===1002&&(c=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_BYTE,n);else if(i.datatypeCode===4)c=this.orientShaderI,i.intent_code===1002&&(c=this.orientShaderAtlasI),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.SHORT,n);else if(i.datatypeCode===16)this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.FLOAT,n),c=this.orientShaderF;else if(i.datatypeCode===64){let w=new Float32Array;w=Float32Array.from(n),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.FLOAT,w),c=this.orientShaderF}else i.datatypeCode===128?(c=this.orientShaderRGBU,c.use(this.gl),this.gl.uniform1i(c.uniforms.hasAlpha,0),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGB8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RGB_INTEGER,this.gl.UNSIGNED_BYTE,n)):i.datatypeCode===512?(i.intent_code===1002&&(c=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_SHORT,n)):i.datatypeCode===2304&&(c=this.orientShaderRGBU,c.use(this.gl),this.gl.uniform1i(c.uniforms.hasAlpha,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RGBA_INTEGER,this.gl.UNSIGNED_BYTE,n));e.global_min===void 0&&e.calMinMax();let u=null;if(this.gl.bindVertexArray(this.genericVAO),t>1){if(!this.back.dims)throw new Error("back.dims undefined");u=this.rgbaTex(u,ry,this.back.dims),this.gl.bindTexture(this.gl.TEXTURE_3D,u);const w=this.passThroughShader;w.use(this.gl),this.gl.uniform1i(w.uniforms.in3D,2);for(let S=0;S<this.back.dims[3];S++){const M=1/this.back.dims[3]*(S+.5);this.gl.uniform1f(w.uniforms.coordZ,M),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,u,0,S),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}else u=this.rgbaTex(u,ry,[2,2,2,2]);c.use(this.gl),this.gl.activeTexture(Gu);let h=null;if(e.colormapLabel!==null&&e.colormapLabel.lut.length>7){const w=e.colormapLabel.max-e.colormapLabel.min+1;h=this.createColormapTexture(h,1,w),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,w,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e.colormapLabel.lut),this.gl.uniform1f(c.uniforms.cal_min,e.colormapLabel.min-.5),this.gl.uniform1f(c.uniforms.cal_max,e.colormapLabel.max+.5),this.gl.bindTexture(this.gl.TEXTURE_2D,h)}else this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.uniform1f(c.uniforms.cal_min,e.cal_min),this.gl.uniform1f(c.uniforms.cal_max,e.cal_max);"alphaThreshold"in e&&(P.warn("alphaThreshold is deprecated: use colormapType"),e.alphaThreshold===!0&&(e.colormapType=2),e.alphaThreshold===!1&&(e.colormapType=1),delete e.alphaThreshold);const f=e.colormapType!==0?1:0,d=e.colormapType===2?1:0;this.gl.uniform1i(c.uniforms.isAlphaThreshold,d),this.gl.uniform1i(c.uniforms.isColorbarFromZero,f),this.gl.uniform1i(c.uniforms.isAdditiveBlend,this.opts.isAdditiveBlend?1:0);let g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(e.colormapNegative.length>0&&(g=Math.min(-e.cal_min,-e.cal_max),m=Math.max(-e.cal_min,-e.cal_max),isFinite(e.cal_minNeg)&&isFinite(e.cal_maxNeg)&&(g=Math.min(e.cal_minNeg,e.cal_maxNeg),m=Math.max(e.cal_minNeg,e.cal_maxNeg))),t>0&&this.overlayOutlineWidth>0){const w=e.cal_min,S=e.cal_max;let M=Math.min(w,S)<=0&&Math.max(w,S)>=0;!M&&g<m&&(M=g<=0&&m>=0),M&&P.error("issue1139: do not use overlayOutlineWidth when thresholds cross or touch zero")}if(!c)throw new Error("orientShader undefined");this.gl.uniform1f(c.uniforms.layer??null,t),this.gl.uniform1f(c.uniforms.cal_minNeg??null,g),this.gl.uniform1f(c.uniforms.cal_maxNeg??null,m),this.gl.bindTexture(this.gl.TEXTURE_3D,l),this.gl.uniform1i(c.uniforms.intensityVol??null,9),this.gl.uniform1i(c.uniforms.blend3D??null,10),this.gl.uniform1i(c.uniforms.colormap??null,1),this.gl.uniform1f(c.uniforms.scl_inter??null,i.scl_inter),this.gl.uniform1f(c.uniforms.scl_slope??null,i.scl_slope),this.gl.uniform1f(c.uniforms.opacity??null,s),this.gl.uniform1i(c.uniforms.modulationVol??null,7);let A=null;if(e.modulationImage!==null&&e.modulationImage>=0&&e.modulationImage<this.volumes.length){P.debug("modulating",this.volumes);const w=this.volumes[e.modulationImage].hdr;if(w.dims[1]===i.dims[1]&&w.dims[2]===i.dims[2]&&w.dims[3]===i.dims[3]){e.modulateAlpha?(this.gl.uniform1i(c.uniforms.modulation,2),this.gl.uniform1f(c.uniforms.opacity,1)):this.gl.uniform1i(c.uniforms.modulation,1),A=this.r8Tex(A,this.gl.TEXTURE7,i.dims,!0),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_3D,A);const S=i.dims[1]*i.dims[2]*i.dims[3],M=new Uint8Array(S),T=this.volumes[e.modulationImage].cal_min,R=1/(this.volumes[e.modulationImage].cal_max-T),D=this.volumes[e.modulationImage].img.buffer;let I=new Uint8Array(D);switch(w.datatypeCode){case 4:I=new Int16Array(D);break;case 16:I=new Float32Array(D);break;case 64:I=new Float64Array(D);break;case 128:I=new Uint8Array(D);break;case 512:I=new Uint16Array(D);break}P.debug(this.volumes[e.modulationImage]);const U=this.volumes[e.modulationImage].colormapNegative.length>0;let L=this.volumes[e.modulationImage].cal_min,V=this.volumes[e.modulationImage].cal_max;isFinite(this.volumes[e.modulationImage].cal_minNeg)&&isFinite(this.volumes[e.modulationImage].cal_maxNeg)&&(L=this.volumes[e.modulationImage].cal_minNeg,V=this.volumes[e.modulationImage].cal_minNeg),L=Math.abs(L),V=Math.abs(V),L>V&&([L,V]=[V,L]);const k=1/(V-L);let F=Math.abs(e.modulateAlpha);F=Math.max(F,1);const z=this.volumes[e.modulationImage].frame4D*S;for(let G=0;G<S;G++){const X=I[G+z]*w.scl_slope+w.scl_inter;let le=(X-T)*R;U&&X<0&&(le=(Math.abs(X)-L)*k),le=Math.min(Math.max(le,0),1),le=Math.pow(le,F)*255,M[G]=le}this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.UNSIGNED_BYTE,M)}else P.debug("Modulation image dimensions do not match target")}else this.gl.uniform1i(c.uniforms.modulation,0);if(this.gl.uniformMatrix4fv(c.uniforms.mtx,!1,a),!this.back.dims)throw new Error("back.dims undefined");let p=0;i.intent_code===1002&&(p=this.opts.atlasOutline),this.gl.uniform4fv(c.uniforms.xyzaFrac,[1/this.back.dims[1],1/this.back.dims[2],1/this.back.dims[3],p]),P.debug("back dims: ",this.back.dims);for(let w=0;w<this.back.dims[3];w++){const S=1/this.back.dims[3]*(w+.5);this.gl.uniform1f(c.uniforms.coordZ,S),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,r,0,w),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}if(this.gl.bindVertexArray(this.unusedVAO),this.gl.deleteTexture(l),this.gl.deleteTexture(A),this.gl.deleteTexture(u),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(o),t===0&&(this.volumeTexture=r,this.gradientTextureAmount>0?this.gradientGL(i):(this.gradientTexture!==null&&this.gl.deleteTexture(this.gradientTexture),this.gradientTexture=null)),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl);const v=this.sliceScale(!0),x=v.vox,y=v.volScale;if(this.gl.uniform1f(this.renderShader.uniforms.overlays,this.overlays),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.gl.uniform1f(this.renderShader.uniforms.backOpacity,this.volumes[0].opacity),this.gl.uniform1f(this.renderShader.uniforms.renderOverlayBlend,this.opts.renderOverlayBlend),this.gl.uniform4fv(this.renderShader.uniforms.clipPlane,this.scene.clipPlane),this.gl.uniform3fv(this.renderShader.uniforms.texVox,x),this.gl.uniform3fv(this.renderShader.uniforms.volScale,y),!this.pickingImageShader)throw new Error("pickingImageShader undefined");this.pickingImageShader.use(this.gl),this.gl.uniform1f(this.pickingImageShader.uniforms.overlays,this.overlays.length),this.gl.uniform3fv(this.pickingImageShader.uniforms.texVox,x),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh);let b=this.sliceMMShader;if(this.opts.is2DSliceShader&&(b=this.slice2DShader),this.opts.isV1SliceShader&&(b=this.sliceV1Shader),!b)throw new Error("slice shader undefined");b.use(this.gl),this.gl.uniform1f(b.uniforms.overlays,this.overlays.length),this.gl.uniform1f(b.uniforms.drawOpacity,this.drawOpacity),h!==null&&(this.gl.deleteTexture(h),this.gl.activeTexture(Gu),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture)),this.gl.uniform1i(b.uniforms.drawing,7),this.gl.activeTexture(hs),this.opts.is2DSliceShader?this.gl.bindTexture(this.gl.TEXTURE_2D,this.drawTexture):this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.updateInterpolation(t)}colormaps(){return Ve.colormaps()}addColormap(e,t){Ve.addColormap(e,t)}setColormap(e,t){const i=this.getVolumeIndexByID(e);this.volumes[i].colormap=t,this.updateGLVolume()}idx(e,t,i,n){return i*n[0]*n[1]+t*n[0]+e}check_previous_slice(e,t,i,n,s,r,a,o){const l=new Uint32Array(27);let c=0;if(!s)return 0;const u=e[this.idx(i,n,s,r)];if(a>=6){const h=this.idx(i,n,s-1,r);u===e[h]&&(l[c++]=t[h])}if(a>=18){if(i){const h=this.idx(i-1,n,s-1,r);u===e[h]&&(l[c++]=t[h])}if(n){const h=this.idx(i,n-1,s-1,r);u===e[h]&&(l[c++]=t[h])}if(i<r[0]-1){const h=this.idx(i+1,n,s-1,r);u===e[h]&&(l[c++]=t[h])}if(n<r[1]-1){const h=this.idx(i,n+1,s-1,r);u===e[h]&&(l[c++]=t[h])}}if(a===26){if(i&&n){const h=this.idx(i-1,n-1,s-1,r);u===e[h]&&(l[c++]=t[h])}if(i<r[0]-1&&n){const h=this.idx(i+1,n-1,s-1,r);u===e[h]&&(l[c++]=t[h])}if(i&&n<r[1]-1){const h=this.idx(i-1,n+1,s-1,r);u===e[h]&&(l[c++]=t[h])}if(i<r[0]-1&&n<r[1]-1){const h=this.idx(i+1,n+1,s-1,r);u===e[h]&&(l[c++]=t[h])}}return c?(this.fill_tratab(o,l,c),l[0]):0}do_initial_labelling(e,t,i){let n=1;const s=8192;let r=s,a=new Uint32Array(r).fill(0);const o=new Uint32Array(t[0]*t[1]*t[2]).fill(0),l=new Uint32Array(27);for(let c=0;c<t[2];c++)for(let u=0;u<t[1];u++)for(let h=0;h<t[0];h++){let f=0;const d=e[this.idx(h,u,c,t)];if(d!==0){if(l[0]=this.check_previous_slice(e,o,h,u,c,t,i,a),l[0]&&(f+=1),i>=6){if(h){const g=this.idx(h-1,u,c,t);d===e[g]&&(l[f++]=o[g])}if(u){const g=this.idx(h,u-1,c,t);d===e[g]&&(l[f++]=o[g])}}if(i>=18){if(u&&h){const g=this.idx(h-1,u-1,c,t);d===e[g]&&(l[f++]=o[g])}if(u&&h<t[0]-1){const g=this.idx(h+1,u-1,c,t);d===e[g]&&(l[f++]=o[g])}}if(f)o[this.idx(h,u,c,t)]=l[0],this.fill_tratab(a,l,f);else{if(o[this.idx(h,u,c,t)]=n,n>=r){r+=s;const g=new Uint32Array(r);g.set(a),a=g}a[n-1]=n,n++}}}for(let c=0;c<n-1;c++){let u=c;for(;a[u]!==u+1;)u=a[u]-1;a[c]=u+1}return[n-1,a,o]}fill_tratab(e,t,i){let n=0;const s=new Uint32Array(i+5).fill(0);let a=2147483647;for(let o=0;o<i;o++){let l=t[o];for(n=0;e[l-1]!==l;)if(l=e[l-1],n++,n>100){P.info(`
Ooh no!!`);break}s[o]=l,a=Math.min(a,l)}for(let o=0;o<i;o++)e[s[o]-1]=a}translate_labels(e,t,i,n){const s=t[0]*t[1]*t[2];let r=0;const a=new Uint32Array(s).fill(0);for(let c=0;c<n;c++)r=Math.max(r,i[c]);const o=new Uint32Array(r).fill(0);let l=0;for(let c=0;c<s;c++)e[c]&&(o[i[e[c]-1]-1]||(l+=1,o[i[e[c]-1]-1]=l),a[c]=o[i[e[c]-1]-1]);return[l,a]}largest_original_cluster_labels(e,t,i){const n=e.length,s=new Uint32Array(t+1).fill(0),r=new Uint32Array(t+1).fill(0);for(let l=0;l<n;l++){const c=e[l],u=i[l];s[u]=c,r[u]++}let a=0;for(let l=0;l<t+1;l++){const c=s[l];a=Math.max(a,c);for(let u=0;u<t+1;u++)u!==l&&c===s[u]&&(r[l]<r[u]||r[l]===r[u]&&l<u)&&(s[l]=0)}const o=new Uint32Array(n).fill(0);for(let l=0;l<n;l++)o[l]=s[i[l]];return[a,o]}bwlabel(e,t,i=26,n=!1,s=!1){const r=Date.now(),a=t[0]*t[1]*t[2],o=new Uint32Array(a).fill(0);if(![6,18,26].includes(i))return P.info("bwlabel: conn must be 6, 18 or 26."),[0,o];if(t[0]<2||t[1]<2||t[2]<1)return P.info("bwlabel: img must be 2 or 3-dimensional"),[0,o];if(n)for(let d=0;d<a;d++)e[d]!==0&&(o[d]=1);else o.set(e);let[l,c,u]=this.do_initial_labelling(o,t,i);c===void 0&&(c=new Uint32Array);const[h,f]=this.translate_labels(u,t,c,l);if(P.info(i+" neighbor clustering into "+h+" regions in "+(Date.now()-r)+"ms"),s){const[d,g]=this.largest_original_cluster_labels(o,h,f);return[d,g]}return[h,f]}async createConnectedLabelImage(e,t=26,i=!1,n=!1){var u,h;const s=this.getVolumeIndexByID(e),r=Uint32Array.from(((u=this.volumes[s].dims)==null?void 0:u.slice(1,4))??[]),a=Uint32Array.from(((h=this.volumes[s].img)==null?void 0:h.slice())??[]),[o,l]=this.bwlabel(a,r,t,i,n),c=this.volumes[s].clone();c.opacity=.5,c.colormap="random";for(let f=0;f<c.img.length;f++)c.img[f]=l[f];return c.cal_min=0,c.cal_max=o,c}async scalecropUint8(e,t=0,i=255,n,s){const r=e.length,a=new Uint8Array(r);for(let o=0;o<r;o++){let l=e[o];l=t+s*(l-n),l=Math.max(l,t),l=Math.min(l,i),a[o]=l}return a}async scalecropFloat32(e,t=0,i=1,n,s){const r=e.length,a=new Float32Array(r);for(let o=0;o<r;o++){let l=e[o];l=t+s*(l-n),l=Math.max(l,t),l=Math.min(l,i),a[o]=l}return a}getScale(e,t=0,i=255,n=0,s=.999){let r=e.global_min,a=e.global_max;if(e.hdr.datatypeCode===2)return[r,1];if((!isFinite(n)||!isFinite(s))&&isFinite(e.cal_min)&&isFinite(e.cal_max)&&e.cal_max>e.cal_min){r=e.cal_min,a=e.cal_max;const v=(i-t)/(a-r);return P.info(" Robust Rescale:  min: "+r+"  max: "+a+" scale: "+v),console.log("Robust Rescale:  min: "+r+"  max: "+a+" scale: "+v),[r,v]}const o=e.img,l=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0){const v=e.img,x=new Float32Array(e.img.length);for(let y=0;y<l;y++)x[y]=v[y]*e.hdr.scl_slope+e.hdr.scl_inter}if(r<0&&P.warn("WARNING: Input image has value(s) below 0.0 !"),P.info(" Input:    min: "+r+"  max: "+a),n===0&&s===1)return[r,1];let c=0;for(let v=0;v<l;v++)Math.abs(o[v])>=1e-15&&c++;const u=1e3,h=(a-r)/u,f=new Array(u).fill(0);for(let v=0;v<l;v++){const x=o[v];let y=Math.floor((x-r)/h);y=Math.min(y,u-1),f[y]++}const d=new Array(u).fill(0);d[0]=f[0];for(let v=1;v<u;v++)d[v]=d[v-1]+f[v];let g=Math.floor(n*l),m=0;for(;m<u&&!(d[m]>=g);)m++;const A=r;for(r=m*h+A,g=l-Math.floor((1-s)*c),m=0;m<u-1&&!(d[m+1]>=g);)m++;a=m*h+A;let p=1;return r!==a&&(p=(i-t)/(a-r)),P.info(" Rescale:  min: "+r+"  max: "+a+" scale: "+p),[r,p]}conformVox2Vox(e,t,i=256,n=1,s=!1){const r=t.flat(),a=pi(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),o=Ye(e[1]/2,e[2]/2,e[3]/2,1),l=Cn(),c=Se();mi(c,a),bt(l,o,c);const u=Q(l[0],l[1],l[2]),h=Q(n,n,n);let f=pi(-1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);s&&(f=pi(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),mi(f,f);const d=Ye(i,i,i,1),g=Se();yx(g,f,h);const m=Ye(d[0],d[1],d[2],1);bt(m,m,g),sP(m,m,.5);const A=_e();He(A,u,Q(m[0],m[1],m[2]));const p=Se();mi(p,g),p[3]=A[0],p[7]=A[1],p[11]=A[2];const v=Se();ti(v,p);const x=Se();IC(x,a,v);const y=Se();return ti(y,x),[p,x,y]}async createNiftiArray(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],n=2,s=new Uint8Array){return await It.createNiftiArray(e,t,i,n,s)}async niftiArray2NVImage(e=new Uint8Array){return await It.loadFromUrl({url:e})}async loadFromUrl(e){return await It.loadFromUrl({url:e})}async conform(e,t=!1,i=!0,n=!1,s=!1){const o=this.conformVox2Vox(e.hdr.dims,e.hdr.affine.flat(),256,1,t),l=o[0],c=o[2],u=256*256*256,h=new Float32Array(u),f=new Float32Array(e.img),d=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0)for(let T=0;T<d;T++)f[T]=f[T]*e.hdr.scl_slope+e.hdr.scl_inter;const g=e.hdr.dims[1],m=e.hdr.dims[2],A=e.hdr.dims[3],p=g*m;let v=-1;function x(T,R,D){return T+R*g+D*p}const y=c[0],b=c[4],E=c[8];if(i)for(let T=0;T<256;T++)for(let R=0;R<256;R++){const D=R*c[1]+T*c[2]+c[3],I=R*c[5]+T*c[6]+c[7],U=R*c[9]+T*c[10]+c[11];for(let L=0;L<256;L++){const V=L*y+D,k=L*b+I,F=L*E+U,z=Math.floor(V),G=Math.floor(k),X=Math.floor(F);if(v++,z<0||G<0||X<0)continue;const le=Math.ceil(V),oe=Math.ceil(k),ne=Math.ceil(F);if(le>=g||oe>=m||ne>=A)continue;const ie=V-z,me=k-G,K=F-X,te=1-ie,he=1-me,Z=1-K,W=x(z,G,X);let ee=0;ee+=f[W]*te*he*Z,ee+=f[W+p]*te*he*K,ee+=f[W+g]*te*me*Z,ee+=f[W+g+p]*te*me*K,ee+=f[W+1]*ie*he*Z,ee+=f[W+1+p]*ie*he*K,ee+=f[W+1+g]*ie*me*Z,ee+=f[W+1+g+p]*ie*me*K,h[v]=ee}}else for(let T=0;T<256;T++)for(let R=0;R<256;R++){const D=R*c[1]+T*c[2]+c[3],I=R*c[5]+T*c[6]+c[7],U=R*c[9]+T*c[10]+c[11];for(let L=0;L<256;L++){const V=Math.round(L*y+D),k=Math.round(L*b+I),F=Math.round(L*E+U);v++,!(V<0||k<0||F<0)&&(V>=g||k>=m||F>=A||(h[v]=f[x(V,k,F)]))}}let w=0;s&&(w=NaN);let S=new Uint8Array;if(n){const T=await this.getScale(e,0,1,w),R=await this.scalecropFloat32(h,0,1,T[0],T[1]);S=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(l),16,new Uint8Array(R.buffer))}else{const T=await this.getScale(e,0,255,w),R=await this.scalecropUint8(h,0,255,T[0],T[1]);S=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(l),2,R)}return await this.niftiArray2NVImage(S)}setRenderDrawAmbientOcclusion(e){if(!this.renderShader)throw new Error("renderShader undefined");this.renderDrawAmbientOcclusion=e,this.renderShader.use(this.gl),this.gl.uniform1fv(this.renderShader.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.drawScene()}setColorMap(e,t){this.setColormap(e,t)}setColormapNegative(e,t){const i=this.getVolumeIndexByID(e);this.volumes[i].colormapNegative=t,this.updateGLVolume()}setModulationImage(e,t,i=0){const n=this.getVolumeIndexByID(e);let s=null;t.length>0&&(s=this.getVolumeIndexByID(t)),this.volumes[n].modulationImage=s,this.volumes[n].modulateAlpha=i,this.updateGLVolume()}setGamma(e=1){this.scene.gamma=e,Ve.gamma=e,this.updateGLVolume()}async loadDeferred4DVolumes(e){const t=this.getVolumeIndexByID(e),i=this.volumes[t];if(i.nTotalFrame4D<=i.nFrame4D)return;i.nTotalFrame4D=i.nFrame4D;let n;i.fileObject?n=await It.loadFromFile({file:i.fileObject}):n=await It.loadFromUrl({url:i.url}),n&&(i.img=n.img.slice(),i.nTotalFrame4D=n.nTotalFrame4D,i.nFrame4D=n.nFrame4D,this.updateGLVolume())}setFrame4D(e,t){const i=this.getVolumeIndexByID(e),n=this.volumes[i];t>n.nFrame4D-1&&(t=n.nFrame4D-1),t<0&&(t=0),t!==n.frame4D&&(n.frame4D=t,this.updateGLVolume(),this.onFrameChange(n,t),this.createOnLocationChange())}getFrame4D(e){const t=this.getVolumeIndexByID(e);return this.volumes[t].frame4D}colormapFromKey(e){return Ve.colormapFromKey(e)}colormap(e="",t=!1){return Ve.colormap(e,t)}createColormapTexture(e=null,t=0,i=256){return e!==null&&this.gl.deleteTexture(e),t<1||i<1?null:(e=this.gl.createTexture(),this.gl.activeTexture(Gu),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,i,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),e)}addColormapList(e="",t=NaN,i=NaN,n=!1,s=!1,r=!0,a=!1){e.length<1&&(r=!1),this.colormapLists.push({name:e,min:t,max:i,isColorbarFromZero:n,negative:s,visible:r,invert:a})}refreshColormaps(){if(this.colormapLists=[],this.volumes.length<1&&this.meshes.length<1)return;const e=this.volumes.length;if(e>0)for(let r=0;r<e;r++){const a=this.volumes[r],o=X0(a.cal_min,a.cal_max,a.cal_minNeg,a.cal_maxNeg),l=a.colormapType!==0;this.addColormapList(a.colormapNegative,o[0],o[1],l,!0,a.colorbarVisible,a.colormapInvert),this.addColormapList(a.colormap,a.cal_min,a.cal_max,l,!1,a.colorbarVisible,a.colormapInvert)}const t=this.meshes.length;if(t>0)for(let r=0;r<t;r++){const a=this.meshes[r];if(!a.colorbarVisible)continue;const o=a.layers.length;if("edgeColormap"in a&&"edges"in a&&a.edges!==void 0){const l=X0(a.edgeMin,a.edgeMax,NaN,NaN);this.addColormapList(a.edgeColormapNegative,l[0],l[1],!1,!0,!0,a.colormapInvert),this.addColormapList(a.edgeColormap,a.edgeMin,a.edgeMax,!1,!1,!0,a.colormapInvert)}if(!(o<1))for(let l=0;l<o;l++){const c=this.meshes[r].layers[l];if(!c.colorbarVisible||c.colormap.length<1)continue;const u=c.colormapType!==0;if(c.useNegativeCmap){const h=X0(c.cal_min,c.cal_max,c.cal_minNeg,c.cal_maxNeg);this.addColormapList(c.colormapNegative,h[0],h[1],u,!0,!0,c.colormapInvert)}this.addColormapList(c.colormap,c.cal_min,c.cal_max,u,!1,!0,c.colormapInvert)}}const i=this.colormapLists.length;if(i<1)return;this.colormapTexture=this.createColormapTexture(this.colormapTexture,i+1);let n=new Uint8ClampedArray;function s(r){const a=new Uint8ClampedArray(n.length+r.length);a.set(n),a.set(r,n.length),n=a}for(let r=0;r<i;r++)s(Array.from(this.colormap(this.colormapLists[r].name,this.colormapLists[r].invert)));return s(Array.from(this.drawLut.lut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,256,i+1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this}sliceScale(e=!1){var r;let t=this.screenFieldOfViewMM(0);e&&(t=this.screenFieldOfViewVox(0));const i=Math.max(t[0],Math.max(t[1],t[2])),n=[t[0]/i,t[1]/i,t[2]/i];if(!((r=this.back)!=null&&r.dims))throw new Error("back.dims undefined");const s=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];return{volScale:n,vox:s,longestAxis:i,dimsMM:t}}tileIndex(e,t){for(let i=0;i<this.screenSlices.length;i++){const n=this.screenSlices[i].leftTopWidthHeight;if(e>n[0]&&t>n[1]&&e<n[0]+n[2]&&t<n[1]+n[3])return i}return-1}inRenderTile(e,t){const i=this.tileIndex(e,t);return i>=0&&this.screenSlices[i].axCorSag===4?i:-1}sliceScroll3D(e=0){if(e!==0){if(this.volumes.length>0&&this.scene.clipPlaneDepthAziElev[0]<1.8){const t=this.scene.clipPlaneDepthAziElev.slice();return e>0&&(t[0]=Math.min(1.5,t[0]+.025)),e<0&&(t[0]=Math.max(-1.5,t[0]-.025)),t[0]!==this.scene.clipPlaneDepthAziElev[0]?(this.scene.clipPlaneDepthAziElev=t,this.setClipPlane(this.scene.clipPlaneDepthAziElev)):void 0}e>0&&(this.scene.volScaleMultiplier=Math.min(2,this.scene.volScaleMultiplier*1.1)),e<0&&(this.scene.volScaleMultiplier=Math.max(.5,this.scene.volScaleMultiplier*.9)),this.drawScene()}}deleteThumbnail(){this.bmpTexture&&(this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=null,this.thumbnailVisible=!1)}inGraphTile(e,t){if(this.graph.opacity<=0||this.volumes.length<1||this.volumes[0].nFrame4D<1||!this.graph.plotLTWH||this.graph.plotLTWH[2]<1||this.graph.plotLTWH[3]<1)return!1;const i=[(e-this.graph.LTWH[0])/this.graph.LTWH[2],(t-this.graph.LTWH[1])/this.graph.LTWH[3]];return i[0]>0&&i[1]>0&&i[0]<=1&&i[1]<=1}updateBitmapFromClickToSegment(){if(this.clickToSegmentGrowingBitmap===null||this.drawBitmap===null||this.clickToSegmentGrowingBitmap.length!==this.drawBitmap.length)return;const e=this.drawBitmap.length;for(let t=0;t<e;t++)this.drawBitmap[t]=this.clickToSegmentGrowingBitmap[t]}sumBitmap(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}doClickToSegment(e){const{tileIndex:t}=e;if(t<0||t>=this.screenSlices.length){P.warn(`Invalid tileIndex ${t} received in doClickToSegment.`);return}const i=this.screenSlices[t].axCorSag;if(i>2){P.warn("ClickToSegment attempted on non-2D slice tile.");return}const n=this.screenXY2TextureFrac(this.clickToSegmentXY[0],this.clickToSegmentXY[1],t,!1);if(n[0]<0){P.debug("Click location outside valid texture fraction for the tile.");return}const s=this.frac2vox(n),r=this.opts.clickToSegmentPercent;let a=this.back.getValue(s[0],s[1],s[2]);this.opts.clickToSegmentAutoIntensity&&(r!==0&&(a===0&&(a=.01),this.opts.clickToSegmentIntensityMax=a*(1+r),this.opts.clickToSegmentIntensityMin=a*(1-r)),a>(this.back.cal_min+this.back.cal_max)*.5?this.opts.clickToSegmentBright=!0:this.opts.clickToSegmentBright=!1);const o=this.opts.clickToSegmentBright?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;this.drawPenAxCorSag=i;const l=this.clickToSegmentIsGrowing?this.clickToSegmentGrowingBitmap:this.drawBitmap;if(!l){if(P.error("Target bitmap for flood fill is null."),this.clickToSegmentIsGrowing){if(this.drawBitmap||this.createEmptyDrawing(),!this.drawBitmap)return;this.clickToSegmentGrowingBitmap=this.drawBitmap.slice()}else if(this.createEmptyDrawing(),!this.drawBitmap)return;P.warn("Initialized missing bitmap in doClickToSegment.")}if(this.drawFloodFill([s[0],s[1],s[2]],this.opts.penValue,o,this.opts.clickToSegmentIntensityMin,this.opts.clickToSegmentIntensityMax,this.opts.floodFillNeighbors,this.opts.clickToSegmentMaxDistanceMM,this.opts.clickToSegmentIs2D,l),!this.clickToSegmentIsGrowing&&(P.debug("Applying clickToSegment mask to drawBitmap."),this.drawBitmap?(this.refreshDrawing(!1,!1),this.drawScene()):P.error("Cannot refresh drawing after click-to-segment apply, drawBitmap is null."),this.drawBitmap)){const c=this.getDescriptives({layer:0,masks:[],drawingIsMask:!0});this.onClickToSegment({mL:c.volumeML,mm3:c.volumeMM3})}this.createOnLocationChange(i)}mouseClick(e,t,i=0,n=!0){if(e*=this.uiData.dpr,t*=this.uiData.dpr,this.canvas.focus(),this.thumbnailVisible){this.thumbnailVisible=!1,Promise.all([this.loadVolumes(this.deferredVolumes),this.loadMeshes(this.deferredMeshes)]).catch(s=>{throw s});return}if(this.inGraphTile(e,t)){if(!this.graph.plotLTWH)throw new Error("plotLTWH undefined");const s=[(e-this.graph.plotLTWH[0])/this.graph.plotLTWH[2],(t-this.graph.plotLTWH[1])/this.graph.plotLTWH[3]];if(s[0]>0&&s[1]>0&&s[0]<=1&&s[1]<=1){const r=Math.round(s[0]*(this.volumes[0].nFrame4D-1));this.setFrame4D(this.volumes[0].id,r);return}s[0]>.5&&s[1]>1&&this.loadDeferred4DVolumes(this.volumes[0].id).catch(r=>{throw r});return}if(this.inRenderTile(e,t)>=0){this.sliceScroll3D(i),this.drawScene();return}if(!(this.screenSlices.length<1||this.gl.canvas.height<1||this.gl.canvas.width<1))for(let s=0;s<this.screenSlices.length;s++){const r=this.screenSlices[s].axCorSag;if(this.drawPenAxCorSag>=0&&this.drawPenAxCorSag!==r||r>2&&!this.opts.clickToSegment&&i===0)continue;const a=this.screenXY2TextureFrac(e,t,s,!0);if(!(a[0]<0)){if(i!==0||!n){if(!n){r<=2&&(this.scene.crosshairPos[2-r]=i,this.drawScene(),this.createOnLocationChange(r));return}const o=i<0?-1:1,l=[0,0,0];r<=2&&(l[2-r]=o,this.moveCrosshairInVox(l[0],l[1],l[2]));return}if(this.opts.isForceMouseClickToVoxelCenters?this.scene.crosshairPos=Yl(this.vox2frac(this.frac2vox(a))):this.scene.crosshairPos=Yl(a),this.opts.drawingEnabled){const o=this.frac2vox(this.scene.crosshairPos);if(!isFinite(this.opts.penValue)||this.opts.penValue<0||Object.is(this.opts.penValue,-0)){let l=0,c=Math.abs(this.opts.penValue);const u=!0;Object.is(this.opts.penValue,-0)?(l=0,c=0,P.debug("Erase Cluster selected")):(l=this.opts.penValue,P.debug("Intensity Grow selected",l)),this.drawFloodFill(o,c,l,NaN,NaN,this.opts.floodFillNeighbors,Number.POSITIVE_INFINITY,!1,this.drawBitmap,u),this.drawScene(),this.createOnLocationChange(r);return}else if(this.opts.clickToSegment){r<=2&&(this.clickToSegmentIsGrowing=!1,this.doClickToSegment({x:this.clickToSegmentXY[0],y:this.clickToSegmentXY[1],tileIndex:s})),this.createOnLocationChange(r);return}else{if(isNaN(this.drawPenLocation[0]))this.drawPenAxCorSag=r,this.drawPenFillPts=[],this.drawPt(...o,this.opts.penValue);else{if(o[0]===this.drawPenLocation[0]&&o[1]===this.drawPenLocation[1]&&o[2]===this.drawPenLocation[2]){this.drawScene(),this.createOnLocationChange(r);return}this.drawPenLine(o,this.drawPenLocation,this.opts.penValue)}this.drawPenLocation=o,this.opts.isFilledPen&&this.drawPenFillPts.push(o),this.refreshDrawing(!1,!1)}}this.drawScene(),this.createOnLocationChange(r);return}}}drawRuler(){let e=[],t=[];for(let u=0;u<this.screenSlices.length;u++)if(this.screenSlices[u].axCorSag!==4&&this.screenSlices[u].fovMM.length>1){t=this.screenSlices[u].leftTopWidthHeight,e=this.screenSlices[u].fovMM;break}if(t.length<4)return;const n=100/e[0]*t[2],s=Math.max(Math.round(n*.1),2),r=Math.floor(t[0]+.5*t[2]-.5*n),a=Number(this.opts.rulerWidth),o=Math.floor(t[1]+t[3]-s)+.5*a,l=[r,o,r+n,o];let c=[0,0,0,1];this.opts.rulerColor[0]+this.opts.rulerColor[1]+this.opts.rulerColor[2]<.8&&(c=[1,1,1,1]),this.drawRuler10cm(l,c,a+1),this.drawRuler10cm(l,this.opts.rulerColor,a)}drawRuler10cm(e,t,i=1){if(!this.lineShader)throw new Error("lineShader undefined");this.gl.bindVertexArray(this.genericVAO),this.lineShader.use(this.gl),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,i),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const n=-.1*(e[0]-e[2]),s=e[1]-Math.floor(.5*this.opts.rulerWidth),r=Math.floor(s-.35*n),a=Math.floor(s-.7*n);for(let o=0;o<11;o++){let l=e[0]+o*n;l=Math.max(l,e[0]+.5*i),l=Math.min(l,e[2]-.5*i);const c=[l,s,l,r];o%5===0&&(c[3]=a),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,c),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}this.gl.bindVertexArray(this.unusedVAO)}screenXY2mm(e,t,i=-1){let n;for(let s=0;s<this.screenSlices.length;s++){let r=s;if(i>=0&&(r=i),this.screenSlices[r].axCorSag>2)continue;const o=this.screenSlices[r].leftTopWidthHeight;if(e<o[0]||t<o[1]||e>o[0]+o[2]||t>o[1]+o[3]||(n=this.screenXY2TextureFrac(e,t,r,!1),n[0]<0))continue;const l=this.frac2mm(n);return Ye(l[0],l[1],l[2],r)}return Ye(NaN,NaN,NaN,NaN)}dragForPanZoom(e){const t=this.screenXY2mm(e[2],e[3]);if(isNaN(t[0]))return;const i=this.screenXY2mm(e[0],e[1],t[3]);if(isNaN(i[0])||isNaN(t[0])||isNaN(t[3]))return;const n=Cn(),s=this.uiData.pan2DxyzmmAtMouseDown[3];rP(n,t,i),this.scene.pan2Dxyzmm[0]=this.uiData.pan2DxyzmmAtMouseDown[0]+s*n[0],this.scene.pan2Dxyzmm[1]=this.uiData.pan2DxyzmmAtMouseDown[1]+s*n[1],this.scene.pan2Dxyzmm[2]=this.uiData.pan2DxyzmmAtMouseDown[2]+s*n[2],this.canvas.focus()}dragForCenterButton(e){this.dragForPanZoom(e)}dragForSlicer3D(e){let t=this.uiData.pan2DxyzmmAtMouseDown[3];const i=e[3]-e[1];t+=i*.01,t=Math.max(t,.1),t=Math.min(t,10);const s=this.scene.pan2Dxyzmm[3]-t;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=t),this.scene.pan2Dxyzmm[3]=t;const r=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=s*r[0],this.scene.pan2Dxyzmm[1]+=s*r[1],this.scene.pan2Dxyzmm[2]+=s*r[2]}drawMeasurementTool(e){function t(l,c,u,h,f){const d=l-u,g=c-h;if(d===0&&g===0)return{origin:[u+f,h],terminus:[u+f,h]};const m=Math.sqrt(d*d+g*g),A=f*d/m,p=f*g/m;return{origin:[l+A,c+p],terminus:[u-A,h-p]}}const i=this.gl;if(i.bindVertexArray(this.genericVAO),i.depthFunc(i.ALWAYS),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),i.uniform4fv(this.lineShader.uniforms.lineColor,this.opts.rulerColor),i.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[i.canvas.width,i.canvas.height]),i.uniform1f(this.lineShader.uniforms.thickness,this.opts.rulerWidth),i.uniform4fv(this.lineShader.uniforms.startXYendXY,e),i.drawArrays(i.TRIANGLE_STRIP,0,4);const n=this.opts.measureLineColor;n[3]=1,i.uniform4fv(this.lineShader.uniforms.lineColor,n);const s=this.opts.rulerWidth;i.uniform1f(this.lineShader.uniforms.thickness,s*2);let r=[e[0],e[1]-s,e[0],e[1]+s];i.uniform4fv(this.lineShader.uniforms.startXYendXY,r),i.drawArrays(i.TRIANGLE_STRIP,0,4),r=[e[2],e[3]-s,e[2],e[3]+s],i.uniform4fv(this.lineShader.uniforms.startXYendXY,r),i.drawArrays(i.TRIANGLE_STRIP,0,4);let a=this.canvasPos2frac([e[0],e[1]]),o=this.canvasPos2frac([e[2],e[3]]);if(a[0]>=0&&o[0]>=0){const l=this.frac2mm(a);a=Q(l[0],l[1],l[2]);const c=this.frac2mm(o);o=Q(c[0],c[1],c[2]);const u=_e();wx(u,a,o);const h=dc(u);let f=2;h>9&&(f=1),h>99&&(f=0);let d=h.toFixed(f);this.opts.showMeasureUnits&&(d=`${d} mm`);let g=e;const[m,A,p,v]=e,{origin:x,terminus:y}=t(m,A,p,v,30);switch(this.opts.measureTextJustify){case"start":g=[...x,...x.map(b=>b+1)];break;case"end":g=g=[...y,...y.map(b=>b+1)];break;default:g=e;break}this.drawTextBetween(g,d,this.opts.measureTextHeight/this.opts.textHeight,this.opts.measureTextColor)}i.bindVertexArray(this.unusedVAO)}drawRect(e,t=[1,0,0,-1]){if(t[3]<0&&(t=this.opts.crosshairColor),!this.rectShader)throw new Error("rectShader undefined");this.opts.selectionBoxIsOutline?(this.drawCircle(e,t,.1),this.rectOutlineShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform1f(this.rectOutlineShader.uniforms.thickness,this.opts.selectionBoxLineThickness),this.gl.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)):(this.rectShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.rectShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO))}drawCircle(e,t=this.opts.fontColor,i=1){if(!this.circleShader)throw new Error("circleShader undefined");this.circleShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.uniform2fv(this.circleShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.circleShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.uniform1f(this.circleShader.uniforms.fillPercent,i),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawSelectionBox(e){if(this.opts.dragMode===6){this.drawCircle(e,this.opts.selectionBoxColor,.1);return}this.drawRect(e,this.opts.selectionBoxColor)}effectiveCanvasHeight(){return this.gl.canvas.height-this.colorbarHeight}effectiveCanvasWidth(){return this.gl.canvas.width-this.getLegendPanelWidth()}getAllLabels(){const n=this.meshes.filter(r=>r.type==="connectome").flatMap(r=>r.nodes).map(r=>r.label).filter(r=>r!==void 0);return[...this.document.labels,...n]}getConnectomeLabels(){const n=this.meshes.filter(o=>o.type==="connectome"&&o.showLegend!==!1).flatMap(o=>o.nodes).map(o=>o.label).filter(o=>o!==void 0&&o.text!==""),s=this.document.labels.filter(o=>o.anchor==null||o.anchor===0),r=new Set(n);for(const o of s)r.add(o);const a=this.meshes.filter(o=>o.type==="mesh");for(let o=0;o<a.length;o++)for(let l=0;l<a[o].layers.length;l++)if(a[o].layers[l].labels)for(let c=0;c<a[o].layers[l].labels.length;c++)r.add(a[o].layers[l].labels[c]);return Array.from(r)}getBulletMarginWidth(){let e=0;const t=this.getConnectomeLabels();if(t.length===0)return 0;const i=t.length===1?t[0].style.bulletScale:t.reduce((r,a)=>r.style.bulletScale>a.style.bulletScale?r:a).style.bulletScale,n=t.length===1?t[0]:t.reduce((r,a)=>{const o=this.opts.textHeight*this.gl.canvas.height*r.style.textScale,l=this.opts.textHeight*this.gl.canvas.height*a.style.textScale;return this.textHeight(o,r.text)>this.textHeight(l,a.text)?r:a}),s=this.opts.textHeight*this.gl.canvas.height*n.style.textScale;return e=this.textHeight(s,n.text)*i,e+=s,e}getLegendPanelWidth(){const e=this.getConnectomeLabels();if(!this.opts.showLegend||e.length===0)return 0;const i=this.opts.textHeight*this.gl.canvas.height*1;let n=0;const s=e.reduce((l,c)=>{const u=this.opts.textHeight*this.gl.canvas.height*l.style.textScale,h=this.opts.textHeight*this.gl.canvas.height*c.style.textScale;return this.textWidth(u,l.text)>this.textWidth(h,c.text)?l:c}),r=this.opts.textHeight*this.gl.canvas.height*s.style.textScale,a=this.textWidth(r,s.text),o=this.getBulletMarginWidth();return a&&(n=o+a,n+=i*2),n>=this.gl.canvas.width?0:n}getLegendPanelHeight(){const e=this.getConnectomeLabels();let t=0;const i=this.opts.textHeight*this.gl.canvas.height;for(const n of e){const s=this.opts.textHeight*this.gl.canvas.height*n.style.textScale,r=this.textHeight(s,n.text);t+=r}return t&&(t+=i/2*(e.length+1)),t}reserveColorbarPanel(){let e=Math.max(this.opts.textHeight,.01);e=e*Math.min(this.gl.canvas.height,this.gl.canvas.width);const t=3*e,n=(this.opts.colorbarWidth>0&&this.opts.colorbarWidth<=1?this.opts.colorbarWidth:1)*this.gl.canvas.width,s=[(this.gl.canvas.width-n)/2,this.gl.canvas.height-t,n,t];return this.colorbarHeight=s[3]+1,s}drawColorbarCore(e=0,t=[0,0,0,0],i=!1,n=0,s=1,r){if(t[2]<=0||t[3]<=0)return;let a=Math.max(this.opts.textHeight,.01);a=a*Math.min(this.gl.canvas.height,this.gl.canvas.width);let o=a;const l=3*a;let c=a;if(t[3]<l){if(t[3]<3)return;o=1,c=t[3]-2}this.gl.disable(this.gl.DEPTH_TEST),this.colorbarHeight=t[3]+1;const u=[t[0]+o,t[1],t[2]-2*o,c],h=[u[0]-1,u[1]-1,u[2]+2,u[3]+2];if(this.opts.showColorbarBorder&&this.drawRect(h,this.opts.crosshairColor),!this.colorbarShader)throw new Error("colorbarShader undefined");this.colorbarShader.use(this.gl),this.gl.activeTexture(Gu),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);const f=e;if(this.gl.uniform1f(this.colorbarShader.uniforms.layer,f),this.gl.uniform2fv(this.colorbarShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.disable(this.gl.CULL_FACE),i){const E=[u[0]+u[2],u[1],-u[2],u[3]];this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,E)}else this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,u);this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let d=0;if(r&&s<0&&i?(d=s,s=0):r&&n>0&&(d=n,n=0),n===s||a<1)return;const g=Math.abs(s-n);let[m,A]=Zx(n,s);A<n&&(A+=m);function p(E){return E.toFixed(6).replace(/\.?0*$/,"")}let v=A;const x=[0,u[1]+u[3]-a*.5,2,a*.75],y=x[1]+x[3],b=1;for(;v<=s;){x[0]=u[0]+(v-n)/g*u[2],this.drawRect(x);const E=p(b*v);this.drawTextBelow([x[0],y],E),v+=m}if(d!==0){const E=[u[0]+(d-n)/g*u[2],u[1]-u[3]*.25,2,u[3]*1.5];this.drawRect(E)}}drawColorbar(){const e=this.colormapLists,t=e.length;if(t<1)return;let i=0;for(let o=0;o<t;o++)e[o].visible&&i++;if(i<1)return;let n=this.reserveColorbarPanel(),s=Math.max(this.opts.textHeight,.01);s=s*Math.min(this.gl.canvas.height,this.gl.canvas.width);const r=3*s;let a=n[2]/i;(n[2]<=0||n[3]<=0)&&(a=this.gl.canvas.width/i,n=[0,this.gl.canvas.height-r,a,r]),n[2]=a;for(let o=0;o<t;o++)e[o].visible&&(this.drawColorbarCore(o,n,e[o].negative,e[o].min,e[o].max,e[o].isColorbarFromZero),n[0]+=a)}textWidth(e,t){if(!t)return 0;let i=0;const n=new TextEncoder().encode(t);for(let s=0;s<t.length;s++)i+=e*this.fontMets.mets[n[s]].xadv;return i}textHeight(e,t){if(!t)return 0;const i=new Set(Array.from(t)),n=new TextEncoder().encode(Array.from(i).join("")),r=Object.values(this.fontMets.mets).filter((a,o)=>n.includes(o)).reduce((a,o)=>a.lbwh[3]>o.lbwh[3]?a:o).lbwh[3];return e*r}drawChar(e,t,i){if(!this.fontShader)throw new Error("fontShader undefined");const n=this.fontMets.mets[i],s=e[0]+t*n.lbwh[0],r=-(t*n.lbwh[1]),a=t*n.lbwh[2],o=t*n.lbwh[3],l=e[1]+(r-o)+t;return this.gl.uniform4f(this.fontShader.uniforms.leftTopWidthHeight,s,l,a,o),this.gl.uniform4fv(this.fontShader.uniforms.uvLeftTopWidthHeight,n.uv_lbwh),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),t*n.xadv}drawLoadingText(e){if(e){if(!this.canvas)throw new Error("canvas undefined");this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.drawTextBelow([this.canvas.width/2,this.canvas.height/2],e,3)}}drawText(e,t,i=1,n=null){if(this.opts.textHeight<=0)return;if(!this.fontShader)throw new Error("fontShader undefined");this.fontShader.use(this.gl);const s=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*i;this.gl.enable(this.gl.BLEND),this.gl.uniform2f(this.fontShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height),n===null&&(n=this.opts.fontColor),this.gl.uniform4fv(this.fontShader.uniforms.fontColor,n);let r=s/this.fontMets.size*this.fontMets.distanceRange;r=Math.max(r,1),this.gl.uniform1f(this.fontShader.uniforms.screenPxRange,r);const a=new TextEncoder().encode(t);this.gl.bindVertexArray(this.genericVAO);for(let o=0;o<t.length;o++)e[0]+=this.drawChar(e,s,a[o]);this.gl.bindVertexArray(this.unusedVAO)}drawTextRight(e,t,i=1,n=null){this.opts.textHeight<=0||(e[1]-=.5*this.opts.textHeight*this.gl.canvas.height,this.drawText(e,t,i,n))}drawTextLeft(e,t,i=1,n=null){if(this.opts.textHeight<=0)return;const s=this.opts.textHeight*this.gl.canvas.height*i;e[0]-=this.textWidth(s,t),e[1]-=.5*s,this.drawText(e,t,i,n)}drawTextRightBelow(e,t,i=1,n=null){this.opts.textHeight<=0||this.drawText(e,t,i,n)}drawTextBetween(e,t,i=1,n=null){if(this.opts.textHeight<=0)return;const s=[(e[0]+e[2])*.5,(e[1]+e[3])*.5],r=this.opts.textHeight*this.gl.canvas.height*i,a=this.textWidth(r,t);s[0]-=.5*a,s[1]-=.5*r;const o=[s[0]-1,s[1]-1,a+2,r+2];let l=n;l===null&&(l=this.opts.crosshairColor),l&&l[0]+l[1]+l[2]>.8?l=[0,0,0,.5]:l=[1,1,1,.5],this.drawRect(o,l),this.drawText(s,t,i,n)}drawTextBelow(e,t,i=1,n=null){if(this.opts.textHeight<=0)return;if(!this.canvas)throw new Error("canvas undefined");let s=this.opts.textHeight*this.gl.canvas.height*i,r=this.textWidth(s,t);r>this.canvas.width&&(i*=(this.canvas.width-2)/r,s=this.opts.textHeight*this.gl.canvas.height*i,r=this.textWidth(s,t)),e[0]-=.5*this.textWidth(s,t),e[0]=Math.max(e[0],1),e[0]=Math.min(e[0],this.canvas.width-r-1),this.drawText(e,t,i,n)}updateInterpolation(e,t=!1){let i=this.gl.LINEAR;!t&&this.opts.isNearestInterpolation&&(i=this.gl.NEAREST),e===0?this.gl.activeTexture(Aa):this.gl.activeTexture(Z0),this.opts.is2DSliceShader?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,i)):(this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,i),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,i))}setAtlasOutline(e){this.opts.atlasOutline=e,this.updateGLVolume(),this.drawScene()}setInterpolation(e){this.opts.isNearestInterpolation=e;const t=this.volumes.length;if(!(t<1)){for(let i=0;i<t;i++)this.updateInterpolation(i);this.drawScene()}}calculateMvpMatrix2D(e,t,i,n=1/0,s=0,r=0,a=0,o){this.gl.viewport(e[0],this.gl.canvas.height-(e[1]+e[3]),e[2],e[3]);let c=t[0],u=i[0],h=[c,t[1]],f=[u-c,i[1]-t[1]];o&&(h=[i[0],t[1]],f=[t[0]-i[0],i[1]-t[1]],c=-i[0],u=-t[0]);const d=2*Math.max(Math.abs(t[2]),Math.abs(i[2])),g=Se();let m=.01,A=d*8;if(n!==1/0){let E=o;a===0&&(r===0||r===180)&&(E=!E);let w=d*1.8-s;E||(w=d*1.8+s),m=w-n,A=w+n}Ou(g,c,u,t[1],i[1],m,A);const p=Se();p[0]=-1;const v=Q(0,0,-d*1.8);Ea(p,p,v),Vu(p,p,us(270-a)),Pu(p,p,us(r-180));const x=Se();ti(x,p);const y=Se();mi(y,x);const b=Se();return As(b,g,p),{modelViewProjectionMatrix:b,modelMatrix:p,normalMatrix:y,leftTopMM:h,fovMM:f}}swizzleVec3MM(e,t){return t===1?e=Nt(e,[0,2,1]):t===2&&(e=Nt(e,[1,2,0])),e}screenFieldOfViewVox(e=0){const t=Yl(this.volumeObject3D.fieldOfViewDeObliqueMM);return this.swizzleVec3MM(t,e)}screenFieldOfViewMM(e=0,t=!1){if(this.volumes.length<1){let o=Q(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),l=Q(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);o=this.swizzleVec3MM(o,e),l=this.swizzleVec3MM(l,e);const c=_e();return He(c,l,o),c}if(!t&&!this.opts.isSliceMM)return this.screenFieldOfViewVox(e);const i=this.volumeObject3D.extentsMin,n=this.volumeObject3D.extentsMax;let s=Q(i[0],i[1],i[2]),r=Q(n[0],n[1],n[2]);s=this.swizzleVec3MM(s,e),r=this.swizzleVec3MM(r,e);const a=_e();return He(a,r,s),a}screenFieldOfViewExtendedVox(e=0){const t=this.volumes[0].extentsMinOrtho,i=this.volumes[0].extentsMaxOrtho;let n=Q(t[0],t[1],t[2]),s=Q(i[0],i[1],i[2]);const r=Se();n=this.swizzleVec3MM(n,e),s=this.swizzleVec3MM(s,e);const a=_e();return He(a,s,n),{mnMM:n,mxMM:s,rotation:r,fovMM:a}}screenFieldOfViewExtendedMM(e=0){if(this.volumes.length<1){let o=Q(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),l=Q(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);const c=Se();o=this.swizzleVec3MM(o,e),l=this.swizzleVec3MM(l,e);const u=_e();return He(u,l,o),{mnMM:o,mxMM:l,rotation:c,fovMM:u}}if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");const t=this.volumeObject3D.extentsMin,i=this.volumeObject3D.extentsMax;let n=Q(t[0],t[1],t[2]),s=Q(i[0],i[1],i[2]);const r=Se();n=this.swizzleVec3MM(n,e),s=this.swizzleVec3MM(s,e);const a=_e();return He(a,s,n),{mnMM:n,mxMM:s,rotation:r,fovMM:a}}drawSliceOrientationText(e,t,i=[NaN,NaN]){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let n="S";t===0&&(n="A");let s=this.opts.isRadiologicalConvention?"R":"L";if(t===2&&(s=this.opts.sagittalNoseLeft?"A":"P"),this.opts.isCornerOrientationText){this.drawTextRightBelow([e[0],e[1]],s+n);return}let r=!0,a=!0;if(!isNaN(i[0])){const o=this.opts.textHeight*this.gl.canvas.height+2;i[1]>o&&(this.drawTextBelow([e[0]+e[2]*.5,e[1]+i[1]-o],n),r=!1);const l=this.textWidth(o,s)+2;i[0]>l&&(this.drawTextRight([e[0]+i[0]-l,e[1]+e[3]*.5],s),a=!1)}r&&this.drawTextBelow([e[0]+e[2]*.5,e[1]],n),a&&this.drawTextRight([e[0],e[1]+e[3]*.5],s)}xyMM2xyzMM(e,t){let i=2;e===1&&(i=1),e===2&&(i=0);let n=[0,0,0],s=[1,1,0],r=[1,0,1];n[i]=t,s[i]=t,r[i]=t,n=this.frac2mm(n),s=this.frac2mm(s),r=this.frac2mm(r),n=this.swizzleVec3MM(Q(n[0],n[1],n[2]),e),s=this.swizzleVec3MM(Q(s[0],s[1],s[2]),e),r=this.swizzleVec3MM(Q(r[0],r[1],r[2]),e);const a=(s[0]-n[0])*(r[1]-n[1])-(r[0]-n[0])*(s[1]-n[1]);let o=(s[0]-n[0])*(r[2]-n[2])-(r[0]-n[0])*(s[2]-n[2]);o/=a;let l=(s[1]-n[1])*(r[2]-n[2])-(r[1]-n[1])*(s[2]-n[2]);l/=a;const c=[0,0,0,0,0];return c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=l,c[4]=o,c}draw2DMain(e,t,i=NaN){let n=new Float32Array([0,0,0]);this.volumes.length>0&&(n=new Float32Array(this.volumes[0].frac2mm.slice()));let s=this.screenFieldOfViewExtendedMM(t),r=Se();!this.opts.isSliceMM&&this.volumes.length>0&&(n=new Float32Array(this.volumes[0].frac2mmOrtho.slice()),r=ot(this.volumes[0].mm2ortho),s=this.screenFieldOfViewExtendedVox(t));let a=this.opts.isRadiologicalConvention&&t<2;i===1/0||i===-1/0?(a=i!==1/0,t===1&&(a=!a)):this.opts.sagittalNoseLeft&&t===2&&(a=!a);let o=0,l=0;t===2?l=a?90:-90:t===1?l=a?180:0:(l=a?180:0,o=a?-90:90);const c=this.gl;let u=!1;if(e[2]===0||e[3]===0){u=!0;const A=c.canvas.width/s.fovMM[0],p=c.canvas.height/s.fovMM[1],v=Math.min(A,p),x=A/v,y=p/v;s.fovMM[0]*=x,s.fovMM[1]*=y;let b=(s.mnMM[0]+s.mxMM[0])*.5;s.mnMM[0]=b-s.fovMM[0]*.5,s.mxMM[0]=b+s.fovMM[0]*.5,b=(s.mnMM[1]+s.mxMM[1])*.5,s.mnMM[1]=b-s.fovMM[1]*.5,s.mxMM[1]=b+s.fovMM[1]*.5,e=[0,0,c.canvas.width,c.canvas.height]}if(isNaN(i)){const A=this.scene.pan2Dxyzmm,p=this.swizzleVec3MM(Q(A[0],A[1],A[2]),t),v=this.scene.pan2Dxyzmm[3];s.mnMM[0]-=p[0],s.mxMM[0]-=p[0],s.mnMM[1]-=p[1],s.mxMM[1]-=p[1],s.mnMM[0]/=v,s.mxMM[0]/=v,s.mnMM[1]/=v,s.mxMM[1]/=v}let h=2;t===1&&(h=1),t===2&&(h=0);let f=this.scene.crosshairPos[h],d=this.frac2mm(this.scene.crosshairPos);!isNaN(i)&&i!==1/0&&i!==-1/0&&(d=this.frac2mm([.5,.5,.5]),d[h]=i,f=this.mm2frac(d)[h]);const g=d[h];c.clear(c.DEPTH_BUFFER_BIT);let m=this.calculateMvpMatrix2D(e,s.mnMM,s.mxMM,1/0,0,l,o,a);if(i===1/0||i===-1/0){const A=e.slice();this.draw3D(e,m.modelViewProjectionMatrix,m.modelMatrix,m.normalMatrix,l,o);const p=this.screenSlices[this.screenSlices.length-1];p.leftTopWidthHeight=A,p.axCorSag=t,p.sliceFrac=1/0,p.AxyzMxy=this.xyMM2xyzMM(t,f),p.leftTopMM=m.leftTopMM,p.fovMM=m.fovMM;return}if(c.enable(c.DEPTH_TEST),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.disable(c.BLEND),c.depthFunc(c.GREATER),c.disable(c.CULL_FACE),this.volumes.length>0){let A=this.sliceMMShader;if(this.opts.is2DSliceShader&&(A=this.slice2DShader),this.opts.isV1SliceShader&&(A=this.sliceV1Shader),!A)throw new Error("slice Shader undefined");A.use(this.gl),c.uniform1f(A.uniforms.overlayOutlineWidth,this.overlayOutlineWidth),c.uniform1f(A.uniforms.overlayAlphaShader,this.overlayAlphaShader),c.uniform1i(A.uniforms.isAlphaClipDark,this.isAlphaClipDark?1:0),c.uniform1i(A.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),c.uniform1f(A.uniforms.drawOpacity,this.drawOpacity),c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.uniform1f(A.uniforms.opacity,this.volumes[0].opacity),c.uniform1i(A.uniforms.axCorSag,t),c.uniform1f(A.uniforms.slice,f),c.uniformMatrix4fv(A.uniforms.frac2mm,!1,n),c.uniformMatrix4fv(A.uniforms.mvpMtx,!1,m.modelViewProjectionMatrix.slice()),c.bindVertexArray(this.genericVAO),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.bindVertexArray(this.unusedVAO),this.screenSlices.push({leftTopWidthHeight:e,axCorSag:t,sliceFrac:f,AxyzMxy:this.xyMM2xyzMM(t,f),leftTopMM:m.leftTopMM,screen2frac:[],fovMM:m.fovMM})}if(isNaN(i)&&this.drawCrosshairs3D(!0,1,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),this.opts.meshThicknessOn2D>0){this.opts.meshThicknessOn2D!==1/0&&(m=this.calculateMvpMatrix2D(e,s.mnMM,s.mxMM,this.opts.meshThicknessOn2D,g,l,o,a));const A=ot(m.modelViewProjectionMatrix);As(A,A,r),this.drawMesh3D(!0,1,A,m.modelMatrix,m.normalMatrix)}isNaN(i)&&this.drawCrosshairs3D(!1,.15,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),u&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(e,t),this.readyForSync=!0}draw2D(e,t,i=NaN,n=[NaN,NaN]){const s=[NaN,NaN];if(n[0]===1/0){const r=this.sliceScale().volScale;let a=this.scaleSlice(r[0],r[1],[0,0],[e[2],e[3]]);t===1&&(a=this.scaleSlice(r[0],r[2],[0,0],[e[2],e[3]])),t===2&&(a=this.scaleSlice(r[1],r[2],[0,0],[e[2],e[3]])),n[0]=a[2],n[1]=a[3]}if(isNaN(n[0]))this.draw2DMain(e,t,i);else{const r=e.slice();s[0]=Math.floor(.5*(r[2]-n[0])),s[1]=Math.floor(.5*(r[3]-n[1])),r[0]+=s[0],r[1]+=s[1],r[2]=n[0],r[3]=n[1],this.draw2DMain(r,t,i)}i===1/0||i===-1/0||t===4||e[2]!==0&&e[3]!==0&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(e,t,s)}calculateMvpMatrix(e,t=[0,0,0,0],i,n){(t[2]===0||t[3]===0)&&(t=[0,0,this.gl.canvas.width,this.gl.canvas.height]);const s=t[2]/t[3];let r=this.furthestFromPivot;const a=this.pivot3D,o=Se();r=.8*r/this.scene.volScaleMultiplier,s<1?Ou(o,-r,r,-r/s,r/s,r*.01,r*8):Ou(o,-r*s,r*s,-r,r,r*.01,r*8);const l=Se();l[0]=-1;const c=Q(0,0,-r*1.8);Ea(l,l,c),this.position&&Ea(l,l,this.position),Vu(l,l,us(270-n)),Pu(l,l,us(i-180)),Ea(l,l,[-a[0],-a[1],-a[2]]);const u=Se();ti(u,l);const h=Se();mi(h,u);const f=Se();return As(f,o,l),[f,l,h]}calculateModelMatrix(e,t){if(!this.back)throw new Error("back undefined");const i=Se();if(i[0]=-1,Vu(i,i,us(270-t)),Pu(i,i,us(e-180)),this.back.obliqueRAS){const n=ot(this.back.obliqueRAS);As(i,i,n)}return i}calculateRayDirection(e,t){const i=this.calculateModelMatrix(e,t),n=pi(1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1),s=Se();As(s,n,i);const r=Se();ti(r,s);const a=Ye(0,0,-1,1);bt(a,a,r);const o=Q(a[0],a[1],a[2]);Vi(o,o);const l=5e-5;return Math.abs(o[0])<l&&(o[0]=l),Math.abs(o[1])<l&&(o[1]=l),Math.abs(o[2])<l&&(o[2]=l),o}sceneExtentsMinMax(e=!0){let t=Q(0,0,0),i=Q(0,0,0);if(this.volumes.length>0){if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");t=Q(this.volumeObject3D.extentsMin[0],this.volumeObject3D.extentsMin[1],this.volumeObject3D.extentsMin[2]),i=Q(this.volumeObject3D.extentsMax[0],this.volumeObject3D.extentsMax[1],this.volumeObject3D.extentsMax[2]),e||(t=Q(this.volumes[0].extentsMinOrtho[0],this.volumes[0].extentsMinOrtho[1],this.volumes[0].extentsMinOrtho[2]),i=Q(this.volumes[0].extentsMaxOrtho[0],this.volumes[0].extentsMaxOrtho[1],this.volumes[0].extentsMaxOrtho[2]))}if(this.meshes.length>0){if(this.volumes.length<1){const s=this.meshes[0].extentsMin,r=this.meshes[0].extentsMax;t=Q(s[0],s[1],s[2]),i=Q(r[0],r[1],r[2])}for(let s=0;s<this.meshes.length;s++){const r=this.meshes[s].extentsMin,a=this.meshes[s].extentsMax,o=Q(r[0],r[1],r[2]);Wp(t,t,o);const l=Q(a[0],a[1],a[2]);Zp(i,i,l)}}const n=_e();return He(n,i,t),[t,i,n]}setPivot3D(){const[e,t]=this.sceneExtentsMinMax(),i=_e();zr(i,e,t),$V(i,i,.5),this.pivot3D=[i[0],i[1],i[2]],He(i,t,e),this.extentsMin=e,this.extentsMax=t,this.furthestFromPivot=Ws(i)*.5}getMaxVols(){if(this.volumes.length<1)return 0;let e=0;for(let t=0;t<this.volumes.length;t++)e=Math.max(e,this.volumes[t].nFrame4D);return e}detectPartialllyLoaded4D(){if(this.volumes.length<1)return!1;for(let e=0;e<this.volumes.length;e++)if(this.volumes[e].nFrame4D<this.volumes[e].hdr.dims[4])return!0;return!1}drawGraph(){if(this.getMaxVols()<2)return;const e=this.graph;let t=0;if(this.graph.autoSizeMultiplanar&&this.opts.sliceType===3)for(let F=0;F<this.screenSlices.length;F++){const z=this.screenSlices[F].axCorSag;if(z===0&&(t=this.screenSlices[F].leftTopWidthHeight[1]),z!==2)continue;const G=this.screenSlices[F].leftTopWidthHeight.slice();G[1]===t?(e.LTWH[0]=G[0]+G[2],e.LTWH[1]=G[1]):(e.LTWH[0]=G[0],e.LTWH[1]=G[1]+G[3]),e.LTWH[2]=G[2],e.LTWH[3]=G[2]}if(e.opacity<=0||e.LTWH[2]<=5||e.LTWH[3]<=5||Math.floor(e.LTWH[0]+e.LTWH[2])>this.gl.canvas.width||Math.floor(e.LTWH[1]+e.LTWH[3])>this.gl.canvas.height)return;e.backColor=[.15,.15,.15,e.opacity],e.lineColor=[1,1,1,1],this.opts.backColor[0]+this.opts.backColor[1]+this.opts.backColor[2]>1.5&&(e.backColor=[.95,.95,.95,e.opacity],e.lineColor=[0,0,0,1]);const i=.2,n=.3;e.lineColor[3]=i,e.textColor=e.lineColor.slice(),e.textColor[3]=1,e.lineThickness=3,e.gridLineThickness=1,e.lineAlpha=1,e.lines=[];const s=[];if(e.vols.length<1)this.volumes[0]!=null&&s.push(0);else for(let F=0;F<e.vols.length;F++){const z=e.vols[F];this.volumes[z]==null||this.volumes[z].nFrame4D<2||s.push(z)}if(s.length<1)return;const r=this.volumes[s[0]].nFrame4D;if(this.graph.selectedColumn=this.volumes[s[0]].frame4D,r<2){P.debug("Unable to generate a graph: Selected volume is 3D not 4D");return}for(let F=0;F<s.length;F++){e.lines[F]=[];const z=this.frac2vox(this.scene.crosshairPos),G=this.volumes[s[F]];let X=G.nFrame4D;X=Math.min(X,r);for(let le=0;le<X;le++){const oe=G.getValue(z[0],z[1],z[2],le);e.lines[F].push(oe)}}e.lineRGB=[[.8,0,0],[0,.7,0],[0,0,.9],[.7,.7,0],[.8,0,.8],[0,.7,.7],[.6,.6,.6],[0,0,0]];let a=e.lines[0][0],o=e.lines[0][0];for(let F=0;F<e.lines.length;F++)for(let z=0;z<e.lines[F].length;z++){const G=e.lines[F][z];a=Math.min(G,a),o=Math.max(G,o)}const l=this.volumes[s[0]].cal_min,c=this.volumes[s[0]].cal_max;if(e.isRangeCalMinMax&&l<c&&isFinite(l)&&isFinite(c)&&(a=l,o=c),e.normalizeValues&&o>a){const F=o-a;for(let z=0;z<e.lines.length;z++)for(let G=0;G<e.lines[z].length;G++){const X=e.lines[z][G];e.lines[z][G]=(X-a)/F}a=0,o=1}a>=o&&(o=a+1),this.drawRect(e.LTWH,e.backColor);const[u,h,f]=Zx(a,o),d=Math.max(0,-1*Math.floor(Math.log(u)/Math.log(10)));a=Math.min(h,a),o=Math.max(f,o);function g(F){return F.toFixed(6).replace(/\.?0*$/,"")}const m=Math.min(e.LTWH[2],e.LTWH[3]);let x=16*Math.pow(m/480,.5);x<12&&(x=0);const y=x/(this.opts.textHeight*this.gl.canvas.height);let b=0,E=h;if(x>0)for(;E<=o;){const F=E.toFixed(d),z=this.textWidth(x,F);b=Math.max(z,b),E+=u}const w=.05,S=Math.abs(e.LTWH[2]),M=Math.abs(e.LTWH[3]),T=[e.LTWH[0]+w*S+b,e.LTWH[1]+w*M,e.LTWH[2]-b-2*w*S,e.LTWH[3]-x-2.5*w*M];this.graph.LTWH=e.LTWH,this.graph.plotLTWH=T,this.drawRect(T,this.opts.backColor);const R=o-a,D=T[3]/R,I=T[2]/(e.lines[0].length-1),U=T[1]+T[3];E=h+.5*u;const L=e.lineColor.slice();for(L[3]=.5*e.lineColor[3];E<=o;){const F=U-(E-a)*D;this.drawLine([T[0],F,T[0]+T[2],F],e.gridLineThickness,L),E+=u}E=h;const V=.5*e.gridLineThickness;for(;E<=o;){const F=U-(E-a)*D;this.drawLine([T[0]-V,F,T[0]+T[2]+e.gridLineThickness,F],e.gridLineThickness,e.lineColor);const z=E.toFixed(d);x>0&&this.drawTextLeft([T[0]-6,F],z,y,e.textColor),E+=u}let k=1;for(;e.lines[0].length/k>20;)k*=5;for(let F=0;F<e.lines[0].length;F+=k){const z=F*I+T[0];let G=e.gridLineThickness;if(F%2===1)G*=.5,this.drawLine([z,T[1],z,T[1]+T[3]],G,L);else{const X=g(F);x>0&&this.drawTextBelow([z,2+T[1]+T[3]],X,y,e.textColor),this.drawLine([z,T[1],z,T[1]+T[3]],G,e.lineColor)}}for(let F=0;F<e.lines.length;F++){let z=[1,0,0,e.lineAlpha];F<e.lineRGB.length&&(z=[e.lineRGB[F][0],e.lineRGB[F][1],e.lineRGB[F][2],e.lineAlpha]);for(let G=1;G<e.lines[F].length;G++){const X=(G-1)*I,le=G*I,oe=(e.lines[F][G-1]-a)*D,ne=(e.lines[F][G]-a)*D,ie=[T[0]+X,T[1]+T[3]-oe,T[0]+le,T[1]+T[3]-ne];this.drawLine(ie,e.lineThickness,z)}}if(e.selectedColumn>=0&&e.selectedColumn<e.lines[0].length){const F=e.selectedColumn*I+T[0];this.drawLine([F,T[1],F,T[1]+T[3]],e.lineThickness,[e.lineRGB[0][0],e.lineRGB[0][1],e.lineRGB[0][2],n])}x>0&&e.LTWH[1]+e.LTWH[3]>T[1]+T[3]+x*2.4&&this.drawTextBelow([T[0]+.5*T[2],T[1]+T[3]+x*1.2],"Volume",y,e.textColor),this.detectPartialllyLoaded4D()&&this.drawTextBelow([T[0]+T[2],T[1]+T[3]+x*.5],"...",y,e.textColor)}depthPicker(e,t){if(!this.uiData.mouseDepthPicker)return;this.uiData.mouseDepthPicker=!1;const i=this.gl,n=this.mousePos[0]*e[2]/e[2],s=i.canvas.height-this.mousePos[1]*e[3]/e[3]-1,r=new Uint8Array(4);if(i.readPixels(n,s,1,1,i.RGBA,i.UNSIGNED_BYTE,r),this.selectedObjectId=r[3],this.selectedObjectId===this.VOLUME_ID){this.scene.crosshairPos=new Float32Array(r.slice(0,3)).map(h=>h/255);return}const a=gj(r);if(a>1)return;const o=(this.mousePos[0]-e[0])/e[2],l=(i.canvas.height-this.mousePos[1]-e[1])/e[3],c=mj(o,l,a,t),u=this.mm2frac(c,0,!0);u[0]<0||u[0]>1||u[1]<0||u[1]>1||u[2]<0||u[2]>1||(this.scene.crosshairPos=this.mm2frac(c,0,!0))}drawImage3D(e,t,i){if(this.volumes.length===0)return;const n=this.gl,s=this.calculateRayDirection(t,i),r=this.volumeObject3D;if(r){n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.enable(n.CULL_FACE),n.cullFace(n.FRONT);let a=this.renderShader;if(this.uiData.mouseDepthPicker&&(a=this.pickingImageShader),a.use(this.gl),n.uniform1i(a.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),this.gradientTextureAmount>0){n.activeTexture(ny),n.bindTexture(n.TEXTURE_3D,this.gradientTexture);const o=this.calculateModelMatrix(t,i),l=Se();ti(l,o);const c=Se();mi(c,l),n.uniformMatrix4fv(a.uniforms.normMtx,!1,c)}this.drawBitmap&&this.drawBitmap.length>8?n.uniform2f(a.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,this.drawOpacity):n.uniform2f(a.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,0),n.uniformMatrix4fv(a.uniforms.mvpMtx,!1,e),n.uniformMatrix4fv(a.uniforms.matRAS,!1,this.back.matRAS),n.uniform3fv(a.uniforms.rayDir,s),this.gradientTextureAmount<0?n.uniform4fv(a.uniforms.clipPlane,[this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2],30]):n.uniform4fv(a.uniforms.clipPlane,this.scene.clipPlane),n.uniform1f(a.uniforms.drawOpacity,1),n.bindVertexArray(r.vao),n.drawElements(r.mode,r.indexCount,n.UNSIGNED_SHORT,0),n.bindVertexArray(this.unusedVAO)}}drawOrientationCube(e,t=0,i=0){if(!this.opts.isOrientCube)return;const n=.05*Math.min(e[2],e[3]);if(n<5)return;const s=this.gl;s.enable(s.CULL_FACE),s.cullFace(s.BACK),this.orientCubeShader.use(this.gl),s.bindVertexArray(this.orientCubeShaderVAO);const r=Se(),a=Se();Ou(a,0,s.canvas.width,0,s.canvas.height,-10*n,10*n);let o=0;e[1]===0&&(o=s.canvas.height-this.effectiveCanvasHeight()),Ea(r,r,[1.8*n+e[0],o+1.8*n+e[1],0]),yx(r,r,[n,n,n]),Vu(r,r,us(270-i)),Pu(r,r,us(-t));const l=Se();As(l,a,r),s.uniformMatrix4fv(this.orientCubeShader.uniforms.u_matrix,!1,l),s.drawArrays(s.TRIANGLE_STRIP,0,168),s.bindVertexArray(this.unusedVAO),this.gl.disable(this.gl.CULL_FACE)}createOnLocationChange(e=NaN){const[t,i,n]=this.sceneExtentsMinMax(!0),s=Math.max(Math.max(n[0],n[1]),n[2]);function r(h){return Math.max(0,-Math.ceil(Math.log10(Math.abs(h))))}let a=r(s*.001);const o=this.frac2mm(this.scene.crosshairPos,0,!0);function l(h,f=0){return parseFloat(h.toFixed(f))}let c=l(o[0],a)+"×"+l(o[1],a)+"×"+l(o[2],a);if(this.volumes.length>0&&this.volumes[0].nFrame4D>0&&(c+="×"+l(this.volumes[0].frame4D)),this.volumes.length>0){let h=" = ";for(let g=0;g<this.volumes.length;g++){const m=this.volumes[g].mm2vox(o);let A=this.volumes[g].getValue(m[0],m[1],m[2],this.volumes[g].frame4D);if(a=3,this.volumes[g].colormapLabel!==null){const p=Math.round(A);p>=0&&p<this.volumes[g].colormapLabel.labels.length?h+=this.volumes[g].colormapLabel.labels[p]:h+="undefined("+l(A,a)+")"}else h+=l(A,a);this.volumes[g].imaginary&&(A=this.volumes[g].getValue(m[0],m[1],m[2],this.volumes[g].frame4D,!0),A>=0&&(h+="+"),h+=l(A,a)),h+="   "}c+=h;const f=this.back.dimsRAS,d=f[1]*f[2]*f[3];if(this.drawBitmap&&this.drawBitmap.length===d){const g=this.frac2vox(this.scene.crosshairPos),m=g[0]+g[1]*f[1]+g[2]*f[1]*f[2];c+=" "+this.drawLut.labels[this.drawBitmap[m]]}}const u={mm:this.frac2mm(this.scene.crosshairPos,0,!0),axCorSag:e,vox:this.frac2vox(this.scene.crosshairPos),frac:this.scene.crosshairPos,xy:[this.mousePos[0],this.mousePos[1]],values:this.volumes.map(h=>{const f=this.frac2mm(this.scene.crosshairPos,0,!0),d=h.mm2vox(f),g=h.getValue(d[0],d[1],d[2],h.frame4D);return{name:h.name,value:g,id:h.id,mm:f,vox:d}}),string:c};this.onLocationChange(u)}addLabel(e,t,i,n,s){const r={textColor:this.opts.legendTextColor,textScale:1,textAlignment:"left",lineWidth:0,lineColor:this.opts.legendTextColor,lineTerminator:"none",bulletScale:0,bulletColor:this.opts.legendTextColor},a=t?{...r,...t}:{...r},o=new m2(e,{...a},i,n,s);return this.document.labels.push(o),o}calculateScreenPoint(e,t,i){const n=Cn();return bt(n,[...e,1],t),n[3]!==0&&(n[0]=(n[0]/n[3]+1)*.5*i[2],n[1]=(1-n[1]/n[3])*.5*i[3],n[2]/=n[3],n[0]+=i[0],n[1]+=i[1]),n}getLabelAtPoint(e){const i=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,n=this.opts.textHeight*this.gl.canvas.height*1;for(const c of this.document.labels){if(c.anchor==null||c.anchor===0)continue;const u=this.opts.textHeight*this.gl.canvas.height*c.style.textScale,h=this.textHeight(u,c.text),f=this.textWidth(u,c.text);if(!(c.anchor&1&&e[0]>f)&&!(c.anchor&2&&(e[0]<(this.gl.canvas.width-f)/2||e[0]>(this.gl.canvas.width+f)/2))&&!(c.anchor&4&&e[0]<this.gl.canvas.width-f)&&!(c.anchor&8&&(e[1]<n/2||e[1]>h+n/2))&&!(c.anchor&16&&(e[1]<(this.gl.canvas.height-h-n)/2||e[1]>(this.gl.canvas.height+h-n/2)/2))&&!(c.anchor&32&&(e[1]<this.gl.canvas.height-h-n||e[1]>this.gl.canvas.height-n/2)))return c}P.debug("screenPoint",e);const s=this.getLegendPanelHeight(),r=this.getLegendPanelWidth(),a=this.gl.canvas.width-r;let o=(this.canvas.height-s)/2;if(P.debug("panelrect",a,o,a+r,o+s),e[0]<a||e[1]<o||e[0]>a+r||e[1]>o+s)return null;const l=this.getConnectomeLabels();for(const c of l){const u=this.opts.textHeight*this.gl.canvas.height*c.style.textScale,h=this.textHeight(u,c.text);if(e[1]>=o&&e[1]<=o+h+i/2)return c;o+=h,o+=i/2}return null}drawLabelLine(e,t,i,n,s=!1){const r=Array.isArray(e.points)&&Array.isArray(e.points[0])?e.points:[e.points];for(const a of r){const o=this.calculateScreenPoint(a,i,n);s?this.drawDottedLine([...t,o[0],o[1]],e.style.lineWidth,e.style.lineColor):this.draw3DLine(t,[o[0],o[1],o[2]],e.style.lineWidth,e.style.lineColor)}}draw3DLabel(e,t,i,n,s,r,a){const o=e.text,l=t[0],c=t[1],u=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,h=this.textHeight(e.style.textScale,o)*u;if(e.style.lineWidth>0&&Array.isArray(e.points)&&this.drawLabelLine(e,[l,c+h],i,n,a),e.style.bulletScale){const g=e.style.bulletScale*h,m=h-g,A=c+m/2+g/2,p=l+(s-g)/2;this.drawCircle([p,A,g,g],e.style.bulletColor)}let f=l;if(r)if(e.style.textAlignment!=="left"){const g=this.textWidth(e.style.textScale,e.text)*u;if(e.style.textAlignment==="right")f=l+r-u*1.5-g;else{const m=r-(s||u);f+=(m-g)/2}}else f+=s;const d=e.style.textScale;this.drawText([f,c],o,d,e.style.textColor)}draw3DLabels(e,t,i=!1){const n=this.getConnectomeLabels();if(!this.opts.showLegend||n.length===0)return;if(!this.canvas)throw new Error("canvas undefined");const s=this.gl;s.disable(s.CULL_FACE),s.viewport(0,0,this.canvas.width,this.canvas.height);const r=this.getLegendPanelHeight();r>this.canvas.height&&P.debug("Legend may overflow screen size");const a=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width),o=this.getBulletMarginWidth(),l=this.getLegendPanelWidth(),c=s.canvas.width-l;let u=(this.canvas.height-r)/2;this.drawRect([s.canvas.width-l,u,l-a,r],this.opts.legendBackgroundColor);const h=s.getParameter(s.BLEND),f=s.getParameter(s.DEPTH_FUNC);i||(s.disable(s.BLEND),s.depthFunc(s.GREATER));for(const d of n){this.draw3DLabel(d,[c,u],e,t,o,l,i);const g=this.opts.textHeight*this.gl.canvas.height*d.style.textScale,m=this.textHeight(g,d.text);u+=m,u+=a/2}i||(s.depthFunc(f),h&&s.enable(s.BLEND))}drawAnchoredLabels(){const e=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,t=this.document.labels.filter(i=>i.anchor!=null&&i.anchor!==0);for(const i of t){const n=i.text,s=this.textHeight(i.style.textScale,n)*e,r=this.textWidth(i.style.textScale,n)*e;let a,o;const c=this.opts.textHeight*this.gl.canvas.height*1,u=c;let h=c/4,f=0,d=0;i.anchor&1&&(a=0),i.anchor&4&&(a=this.canvas.width-r,f-=c/4),i.anchor&2&&(a=(this.canvas.width-r)/2,f-=c/4,h+=c/4),i.anchor&8&&(o=0),i.anchor&16&&(o=(this.canvas.height-s-c)/2,d-=c/4),i.anchor&32&&(o=this.canvas.height-s-c,d-=c/4),this.drawRect([a+f,o+d,r+h,s+u],i.style.backgroundColor),this.draw3DLabel(i,[a,o])}}draw3D(e=[0,0,0,0],t=null,i=null,n=null,s=null,r=0){const a=s!==null;this.setPivot3D(),a||(s=this.scene.renderAzimuth,r=this.scene.renderElevation);const o=this.gl;t===null&&([t,i,n]=this.calculateMvpMatrix(null,e,s,r));let l=[...e];if(e[2]===0||e[3]===0?(e=[0,0,o.canvas.width,o.canvas.height],l=[...e],this.screenSlices.push({leftTopWidthHeight:e,axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[Jx(i),0]})):(this.screenSlices.push({leftTopWidthHeight:e.slice(),axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[Jx(i),0]}),e[1]=o.canvas.height-e[3]-e[1]),o.enable(o.DEPTH_TEST),o.depthFunc(o.ALWAYS),o.depthMask(!0),o.clearDepth(0),this.draw3DLabels(t,l,!1),o.viewport(e[0],e[1],e[2],e[3]),this.volumes.length>0&&(this.updateInterpolation(0,!0),this.updateInterpolation(1,!0),this.drawImage3D(t,s,r)),this.updateInterpolation(0),this.updateInterpolation(1),a||this.drawCrosshairs3D(!0,1,t),this.drawMesh3D(!0,1,t,i,n),this.uiData.mouseDepthPicker){this.depthPicker(e,t),this.createOnLocationChange(),this.draw3D(e,t,i,n,s,r);return}this.opts.meshXRay>0&&this.drawMesh3D(!1,this.opts.meshXRay,t,i,n),this.draw3DLabels(t,l,!1),o.viewport(e[0],e[1],e[2],e[3]),a||this.drawCrosshairs3D(!1,.15,t),o.viewport(0,0,o.canvas.width,o.canvas.height),this.drawOrientationCube(e,s,r);const c="azimuth: "+this.scene.renderAzimuth.toFixed(0)+" elevation: "+this.scene.renderElevation.toFixed(0);return this.readyForSync=!0,this.sync(),this.draw3DLabels(t,l,!0),c}drawMesh3D(e=!0,t=1,i,n,s){if(this.meshes.length<1)return;const r=this.gl;i||([i,n,s]=this.calculateMvpMatrix(this.volumeObject3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),r.enable(r.DEPTH_TEST),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.disable(r.BLEND),r.depthFunc(r.GREATER),r.disable(r.CULL_FACE),e?r.depthFunc(r.GREATER):(r.enable(r.BLEND),r.depthFunc(r.ALWAYS),r.enable(r.CULL_FACE)),r.cullFace(r.BACK);let a=this.meshShaders[0].shader,o=!1;for(let l=0;l<this.meshes.length;l++){if(this.meshes[l].visible===!1||this.meshes[l].opacity<=0)continue;let c=t;if(e&&(c=this.meshes[l].opacity,r.depthFunc(r.GREATER),r.depthMask(!0),c<1?(r.depthMask(!1),r.enable(r.DEPTH_TEST),r.enable(r.BLEND),r.cullFace(r.BACK),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA)):(r.enable(r.DEPTH_TEST),r.disable(r.BLEND))),a=this.meshShaders[this.meshes[l].meshShaderIndex].shader,this.uiData.mouseDepthPicker&&(a=this.pickingMeshShader),a.use(this.gl),r.uniformMatrix4fv(a.uniforms.mvpMtx,!1,i),r.uniformMatrix4fv(a.uniforms.normMtx,!1,s),r.uniform1f(a.uniforms.opacity,c),!(this.meshes[l].indexCount<3)){if(this.meshes[l].offsetPt0&&(this.meshes[l].fiberSides<3||this.meshes[l].fiberRadius<=0)){o=!0;continue}a.isMatcap&&(r.activeTexture(iy),r.bindTexture(r.TEXTURE_2D,this.matCapTexture)),r.bindVertexArray(this.meshes[l].vao),r.drawElements(r.TRIANGLES,this.meshes[l].indexCount,r.UNSIGNED_INT,0),r.bindVertexArray(this.unusedVAO)}}if(r.depthMask(!0),!o){r.enable(r.BLEND),r.depthFunc(r.ALWAYS);return}a=this.fiberShader,a.use(this.gl),r.uniformMatrix4fv(a.uniforms.mvpMtx,!1,i),r.uniform1f(a.uniforms.opacity,t);for(let l=0;l<this.meshes.length;l++)this.meshes[l].indexCount<3||this.meshes[l].offsetPt0&&(this.meshes[l].fiberSides>=3&&this.meshes[l].fiberRadius>0||(r.bindVertexArray(this.meshes[l].vaoFiber),r.drawElements(r.LINE_STRIP,this.meshes[l].indexCount,r.UNSIGNED_INT,0),r.bindVertexArray(this.unusedVAO)));r.enable(r.BLEND),r.depthFunc(r.ALWAYS),this.readyForSync=!0}drawCrosshairs3D(e=!0,t=1,i=null,n=!1,s=!0){var d,g;if(!this.opts.show3Dcrosshair&&!n||this.opts.crosshairWidth<=0&&n)return;const r=this.gl,a=this.frac2mm(this.scene.crosshairPos,0,s);let o=1;const[l,c,u]=this.sceneExtentsMinMax(s);if(this.volumes.length>0){if(!this.back)throw new Error("back undefined");o=.5*Math.min(Math.min(this.back.pixDims[1],this.back.pixDims[2]),this.back.pixDims[3])}else(u[0]<50||u[0]>1e3)&&(o=u[0]*.02);if(o*=this.opts.crosshairWidth,((d=this.opts)==null?void 0:d.crosshairWidthUnit)==="percent"&&(o=u[0]*this.opts.crosshairWidth*.5*.01),((g=this.opts)==null?void 0:g.crosshairWidthUnit)==="mm"&&(o=this.opts.crosshairWidth*.5),(this.crosshairs3D===null||this.crosshairs3D.mm[0]!==a[0]||this.crosshairs3D.mm[1]!==a[1]||this.crosshairs3D.mm[2]!==a[2])&&(this.crosshairs3D!==null&&(r.deleteBuffer(this.crosshairs3D.indexBuffer),r.deleteBuffer(this.crosshairs3D.vertexBuffer)),this.crosshairs3D=ia.generateCrosshairs(this.gl,1,a,l,c,o,20,this.opts.crosshairGap),this.crosshairs3D.mm=a),!this.surfaceShader)throw new Error("surfaceShader undefined");const h=this.surfaceShader;h.use(this.gl),i==null&&([i]=this.calculateMvpMatrix(this.crosshairs3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),r.uniformMatrix4fv(h.uniforms.mvpMtx,!1,i),r.disable(r.CULL_FACE),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.crosshairs3D.indexBuffer),r.enable(r.DEPTH_TEST);const f=[...this.opts.crosshairColor];e?(r.disable(r.BLEND),r.depthFunc(r.GREATER)):(r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.depthFunc(r.ALWAYS)),f[3]=t,r.uniform4fv(h.uniforms.surfaceColor,f),r.bindVertexArray(this.crosshairs3D.vao),r.drawElements(r.TRIANGLES,this.crosshairs3D.indexCount,r.UNSIGNED_INT,0),r.bindVertexArray(this.unusedVAO)}mm2frac(e,t=0,i=!1){if(this.volumes.length<1){const n=Q(.1,.5,.5),[s,r,a]=this.sceneExtentsMinMax();return n[0]=(e[0]-s[0])/a[0],n[1]=(e[1]-s[1])/a[1],n[2]=(e[2]-s[2])/a[2],isFinite(n)||(isFinite(n[0])||(n[0]=.5),isFinite(n[1])||(n[1]=.5),isFinite(n[2])||(n[2]=.5),this.meshes.length<1&&P.error("mm2frac() not finite: objects not (yet) loaded.")),n}return this.volumes[t].convertMM2Frac(e,i||this.opts.isSliceMM)}vox2frac(e,t=0){return this.volumes[t].convertVox2Frac(e)}frac2vox(e,t=0){return this.volumes.length<=t?[0,0,0]:this.volumes[t].convertFrac2Vox(e)}moveCrosshairInVox(e,t,i){const n=this.frac2vox(this.scene.crosshairPos),s=n[2];n[0]+=e,n[1]+=t,n[2]+=i,n[0]=W0(n[0],0,this.volumes[0].dimsRAS[1]-1),n[1]=W0(n[1],0,this.volumes[0].dimsRAS[2]-1),n[2]=W0(n[2],0,this.volumes[0].dimsRAS[3]-1),this.scene.crosshairPos=this.vox2frac(n),this.createOnLocationChange(),this.opts.is2DSliceShader&&s!==n[2]&&(this.updateGLVolume(),this.refreshDrawing(!1)),this.drawScene()}frac2mm(e,t=0,i=!1){const n=Ye(e[0],e[1],e[2],1);if(this.volumes.length>0)return this.volumes[t].convertFrac2MM(e,i||this.opts.isSliceMM);{const[s,r]=this.sceneExtentsMinMax(),a=(o,l,c)=>o*(1-c)+l*c;n[0]=a(s[0],r[0],e[0]),n[1]=a(s[1],r[1],e[1]),n[2]=a(s[2],r[2],e[2])}return n}screenXY2TextureFrac(e,t,i,n=!0){const s=Q(-1,-1,-1),r=this.screenSlices[i].axCorSag;if(r>2)return s;const a=this.screenSlices[i].leftTopWidthHeight.slice();let o=!1;a[2]<0&&(o=!0,a[0]+=a[2],a[2]=-a[2]);let l=(e-a[0])/a[2];o&&(l=1-l);const c=1-(t-a[1])/a[3];if(l<0||l>1||c<0||c>1||this.screenSlices[i].AxyzMxy.length<4)return s;let u=Q(0,0,0);u[0]=this.screenSlices[i].leftTopMM[0]+l*this.screenSlices[i].fovMM[0],u[1]=this.screenSlices[i].leftTopMM[1]+c*this.screenSlices[i].fovMM[1];const h=this.screenSlices[i].AxyzMxy;u[2]=h[2]+h[4]*(u[1]-h[1])-h[3]*(u[0]-h[0]),r===1&&(u=Nt(u,[0,2,1])),r===2&&(u=Nt(u,[2,0,1]));const f=this.mm2frac(u);return n&&(f[0]<0||f[0]>1||f[1]<0||f[1]>1||f[2]<0||f[2]>1)?s:f}canvasPos2frac(e){for(let t=0;t<this.screenSlices.length;t++){const i=this.screenXY2TextureFrac(e[0],e[1],t);if(i[0]>=0)return i}return[-1,-1,-1]}scaleSlice(e,t,i=[0,0],n=[0,0]){const s=n[0]===0?this.effectiveCanvasWidth()-i[0]:n[0]-i[0],r=n[1]===0?this.effectiveCanvasHeight()-i[1]:n[1]-i[1];let a=s/e;t*a>r&&(a=r/t);const o=e*a,l=t*a;return[(s-o)*.5,(r-l)*.5,o,l,a]}drawThumbnail(){if(!this.bmpShader)throw new Error("bmpShader undefined");this.bmpShader.use(this.gl),this.gl.uniform2f(this.bmpShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height);let e=this.gl.canvas.height,t=this.gl.canvas.height*this.bmpTextureWH;t>this.gl.canvas.width&&(e=this.gl.canvas.width/this.bmpTextureWH,t=this.gl.canvas.width);const i=(this.gl.canvas.width-t)/2,n=(this.gl.canvas.height-e)/2;this.gl.uniform4f(this.bmpShader.uniforms.leftTopWidthHeight,i,n,t,e),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawLine(e,t=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),i[3]<0&&(i=this.opts.crosshairColor),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,i),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}draw3DLine(e,t,i=1,n=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.line3DShader)throw new Error("line3DShader undefined");this.line3DShader.use(this.gl),n[3]<0&&(n=this.opts.crosshairColor),this.gl.uniform4fv(this.line3DShader.uniforms.lineColor,n),this.gl.uniform2fv(this.line3DShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.line3DShader.uniforms.thickness,i),this.gl.uniform2fv(this.line3DShader.uniforms.startXY,e),this.gl.uniform3fv(this.line3DShader.uniforms.endXYZ,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawDottedLine(e,t=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl);const n=i[3]<0?[...this.opts.crosshairColor]:[...i];n[3]=.3;const s=Cx(e[2]-e[0],e[3]-e[1]),r=Ex(s);lP(s,s);const o=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1;oP(s,s,o/2);const l=Ex(s);let c=Math.floor(r/l);r%l&&c++;const u=[e[0],e[1]];this.gl.uniform4fv(this.lineShader.uniforms.lineColor,n),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t);for(let h=0;h<c-1;h++){if(h%2){u[0]+=s[0],u[1]+=s[1];continue}const f=[u[0],u[1],u[0]+s[0],u[1]+s[1]];this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,f),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),u[0]+=s[0],u[1]+=s[1]}this.gl.bindVertexArray(this.unusedVAO)}drawGraphLine(e,t=[1,0,0,.5],i=2){this.drawLine(e,i,t)}drawCrossLinesMM(e,t,i,n,s){if(e<0||this.screenSlices.length<=e)return;const r=this.screenSlices[e];let a=r.sliceFrac;a===1/0&&P.debug("Rendering approximate cross lines in world view mode"),a===1/0&&(a=.5);let l=n.slice(),c=s.slice();const u=Math.max(1,this.opts.crosshairWidth);t===1&&(l=i.slice()),t===2&&(l=i.slice(),c=n.slice());function h(f){const d=Cx(0,0);return d[0]=r.leftTopWidthHeight[0]+(f[0]-r.leftTopMM[0])/r.fovMM[0]*r.leftTopWidthHeight[2],d[1]=r.leftTopWidthHeight[1]+r.leftTopWidthHeight[3]-(f[1]-r.leftTopMM[1])/r.fovMM[1]*r.leftTopWidthHeight[3],d}if(l.length>0&&t===0){const f=a,d=1;for(let g=0;g<l.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=l[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([0,A,f]);p=Nt(p,[0,1,2]);let v=this.frac2mm([1,A,f]);v=Nt(v,[0,1,2]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}if(l.length>0&&t===1){const f=a,d=2;for(let g=0;g<l.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=l[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([0,f,A]);p=Nt(p,[0,2,1]);let v=this.frac2mm([1,f,A]);v=Nt(v,[0,2,1]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}if(l.length>0&&t===2){const f=a,d=2;for(let g=0;g<l.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=l[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([f,0,A]);p=Nt(p,[1,2,0]);let v=this.frac2mm([f,1,A]);v=Nt(v,[1,2,0]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}if(c.length>0&&t===0){const f=a,d=0;for(let g=0;g<c.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=c[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([A,0,f]);p=Nt(p,[0,1,2]);let v=this.frac2mm([A,1,f]);v=Nt(v,[0,1,2]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}if(c.length>0&&t===1){const f=a,d=0;for(let g=0;g<c.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=c[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([A,f,0]);p=Nt(p,[0,2,1]);let v=this.frac2mm([A,f,1]);v=Nt(v,[0,2,1]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}if(c.length>0&&t===2){const f=a,d=1;for(let g=0;g<c.length;g++){const m=this.frac2mm([.5,.5,.5]);m[d]=c[g];let A=this.mm2frac(m);A=A[d];let p=this.frac2mm([f,A,0]);p=Nt(p,[1,2,0]);let v=this.frac2mm([f,A,1]);v=Nt(v,[1,2,0]),p=h(p),v=h(v),this.drawLine([p[0],p[1],v[0],v[1]],u)}}}drawCrossLines(e,t,i,n,s){if(e<0||this.screenSlices.length<=e)return;if(this.opts.isSliceMM)return this.drawCrossLinesMM(e,t,i,n,s);if(this.screenSlices[e].sliceFrac===1/0)return this.drawCrossLinesMM(e,t,i,n,s);const r=this.screenSlices[e];let a=n.slice(),o=s.slice();if(t===1&&(a=i.slice()),t===2&&(a=i.slice(),o=n.slice()),a.length>0){const l=r.leftTopWidthHeight.slice();let c=2;t===0&&(c=1);const u=this.frac2mm([.5,.5,.5]);for(let h=0;h<a.length;h++){u[c]=a[h];const f=this.mm2frac(u);this.drawRect([l[0],l[1]+l[3]-f[c]*l[3],l[2],1])}}if(o.length>0){const l=r.leftTopWidthHeight.slice(),c=r.fovMM[0]<0;let u=0;t===2&&(u=1);const h=this.frac2mm([.5,.5,.5]);for(let f=0;f<o.length;f++){h[u]=o[f];const d=this.mm2frac(h);c?this.drawRect([l[0]+(l[2]-d[u]*l[2]),l[1],1,l[3]]):this.drawRect([l[0]+d[u]*l[2],l[1],1,l[3]])}}}drawMosaic(e){var f;this.screenSlices=[];const t=this.screenFieldOfViewMM(0,!0),i=this.screenFieldOfViewMM(0);e=e.replaceAll(";"," ;").trim();const n=[],s=[],r=[],a=e.split(/\s+/);let o=1;const l=this.opts.textHeight;let c=0,u=0,h=0;(f=this.volumes[0])!=null&&f.dims||(h=Math.ceil(this.opts.tileMargin*.3));for(let d=0;d<2;d++){let g=!1,m=!1;g=!1;let A=0,p=0,v=0,x=0,y=!1,b=0,E=0,w=0,S=0;for(let R=0;R<a.length;R++){const D=a[R];if(D.includes("X")){m=!0;continue}if(D.includes("L")){y=!D.includes("-");continue}if(D.includes("H")){R++,E=Math.max(0,Math.min(1,parseFloat(a[R]))),E=Math.abs(E);continue}if(D.includes("V")){R++;continue}if(D.includes("A")){b=0;continue}if(D.includes("C")){b=1;continue}if(D.includes("S")){b=2;continue}if(D.includes("R")){g=!0;continue}D.includes(";")&&(v+=A,x=Math.max(x,p+w),A=0,p=0),S=w,E>0&&!g&&(S=Math.round(S*(1-E))),P.debug(`slice ${R} width with overlap ${S} pixels`),p+=S,S=0;const I=parseFloat(D);if(isNaN(I))continue;let U=0,L=i;if(g&&(L=t),b===2?S=L[1]:S=L[0],b===0?U=L[1]:U=L[2],d===0)g||(b===0&&n.push(I),b===1&&s.push(I),b===2&&r.push(I));else{const V=[c+o*p,u+o*v,o*S,o*U];if(this.opts.textHeight=y?l:0,g){let k=I<0?-1/0:1/0;Object.is(I,-0)&&(k=-1/0),this.draw2D(V,b,k)}else this.draw2D(V,b,I);m&&this.drawCrossLines(this.screenSlices.length-1,b,n,s,r),g=!1,m=!1}w=S,p+=h,A=Math.max(A,U)}if(v+=A,x=Math.max(x,p+w),x<=0||v<=0)break;const M=(this.gl.canvas.width-2*this.opts.tileMargin-h)/x,T=(this.effectiveCanvasHeight()-2*this.opts.tileMargin)/v;o=Math.min(M,T),this.opts.centerMosaic?(c=Math.floor(.5*(this.gl.canvas.width-x*o)),u=Math.floor(.5*(this.effectiveCanvasHeight()-v*o))):(c=this.opts.tileMargin,u=this.opts.tileMargin)}this.opts.textHeight=l}calculateWidthHeight(e,t,i,n){let s,r;switch(e){case 0:s=t[0],r=t[1];break;case 1:s=t[0],r=t[2];break;case 2:s=t[1],r=t[2];break;default:return[i,n]}const a=s/r,o=i/n;let l,c;return a>o?(l=i,c=i/a):(c=n,l=n*a),[l,c]}drawSceneCore(){var s,r,a;if(!this.initialized)return;if(this.colorbarHeight=0,this.gl.clearColor(this.opts.backColor[0],this.opts.backColor[1],this.opts.backColor[2],this.opts.backColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.bmpTexture&&this.thumbnailVisible){this.drawThumbnail();return}let e="";if(this.volumes.length===0||typeof this.volumes[0].dims>"u"){if(this.meshes.length>0){if(this.sliceMosaicString.length>0){this.opts.isColorbar&&this.reserveColorbarPanel(),this.drawMosaic(this.sliceMosaicString),this.opts.isColorbar&&this.drawColorbar();return}this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.drawLoadingText(this.opts.loadingText);return}if(this.uiData.isDragging&&this.scene.clipPlaneDepthAziElev[0]<1.8&&this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0){const o=this.uiData.dragStart[0]-this.uiData.dragEnd[0],l=this.uiData.dragStart[1]-this.uiData.dragEnd[1],c=this.uiData.dragClipPlaneStartDepthAziElev.slice();if(c[1]-=o,c[1]=c[1]%360,c[2]+=l,c[1]!==this.scene.clipPlaneDepthAziElev[1]||c[2]!==this.scene.clipPlaneDepthAziElev[2])return this.scene.clipPlaneDepthAziElev=c,this.setClipPlane(this.scene.clipPlaneDepthAziElev)}if(this.sliceMosaicString.length<1&&this.opts.sliceType===4){this.opts.isColorbar&&this.reserveColorbarPanel(),this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.opts.isColorbar&&this.reserveColorbarPanel();const t=this.getMaxVols(),i=this.opts.sliceType===3&&t>1&&this.graph.autoSizeMultiplanar&&this.graph.opacity>0;if(this.sliceMosaicString.length>0)this.drawMosaic(this.sliceMosaicString);else{const o=[0,0];let l=!1;if(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.screenSlices=[],this.customLayout&&this.customLayout.length>0){this.screenSlices=[],this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);const{volScale:c}=this.sliceScale(),u=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];for(const h of this.customLayout){const{sliceType:f,position:d,sliceMM:g}=h,m=d.slice();if(d[0]>=0&&d[0]<=1&&d[2]<=1&&(m[0]=d[0]*u[0],m[2]=d[2]*u[0]),d[1]>=0&&d[1]<=1&&d[3]<=1&&(m[1]=d[1]*u[1],m[3]=d[3]*u[1]),m[0]+m[2]>u[0]&&(P.warn("adjusting slice width because it would have been clipped"),m[2]=u[0]-m[0]),m[1]+m[3]>u[1]&&(P.warn("adjusting slice height because it would have been clipped"),m[3]=u[1]-m[1]),f===4)this.draw3D(m);else if(f===0||f===1||f===2){const A=this.calculateWidthHeight(f,c,m[2],m[3]);this.draw2D(m,f,g??NaN,A)}}}else if(this.opts.sliceType===0)this.draw2D([0,0,0,0],0);else if(this.opts.sliceType===1)this.draw2D([0,0,0,0],1);else if(this.opts.sliceType===2)this.draw2D([0,0,0,0],2);else{let c=function(F,z){return[(F-1)*g+F*m,(z-1)*g+z*m]},u=!1;this.opts.multiplanarForceRender?(u=!0,this.opts.multiplanarForceRender?this.opts.multiplanarShowRender=1:this.opts.multiplanarShowRender=2,delete this.opts.multiplanarForceRender):this.opts.multiplanarShowRender===1&&(u=!0);const h=isFinite(this.drawPenLocation[0])&&this.opts.drawingEnabled,{volScale:f}=this.sliceScale(),d=f.slice();this.opts.multiplanarEqualSize&&(f[0]=1,f[1]=1,f[2]=1),typeof this.opts.multiplanarPadPixels!="number"&&P.debug("multiplanarPadPixels must be numeric");const g=parseFloat(`${this.opts.multiplanarPadPixels}`);let m=this.opts.tileMargin;m<0&&(m=2*(2+Math.ceil(Math.max(this.opts.textHeight,.01)*Math.min(this.gl.canvas.height,this.gl.canvas.width))));let A=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];this.opts.heroImageFraction>0&&this.opts.heroImageFraction<1&&(u=!1,l=!0,A[0]>A[1]&&this.opts.multiplanarLayout!==3?o[0]=A[0]*this.opts.heroImageFraction:o[1]=A[1]*this.opts.heroImageFraction,A=[A[0]-o[0],A[1]-o[1]]);const p=this.scaleSlice(f[0]+f[1],f[1]+f[2],c(2,2),A),v=Math.max(Math.max(f[1],f[2]),f[0]),x=this.scaleSlice(f[0]+f[0]+f[1],Math.max(f[1],f[2]),c(3,1),A),y=this.scaleSlice(f[0]+f[0]+f[1]+v,Math.max(f[1],f[2]),c(4,1),A),b=this.scaleSlice(v,f[1]+f[2]+f[2],c(1,3),A),E=this.scaleSlice(v,f[1]+f[2]+f[2]+v,c(1,4),A);let w=!h&&(t<2||!i),S=!1,M=!1,T=!1;this.opts.multiplanarLayout===1?S=!0:this.opts.multiplanarLayout===2?M=!0:this.opts.multiplanarLayout===3?T=!0:b[4]>x[4]&&b[4]>p[4]?S=!0:x[4]>p[4]?T=!0:M=!0;let R=p;if(S?(R=b,!l&&(u||this.opts.multiplanarShowRender===2&&E[4]>=b[4])?R=E:w=!1):T&&(R=x,!l&&(u||this.opts.multiplanarShowRender===2&&y[4]>=x[4])?R=y:w=!1),l){const F=o[0]===0?this.effectiveCanvasWidth():o[0],z=o[1]===0?this.effectiveCanvasHeight():o[1];if(((s=this.opts)==null?void 0:s.heroSliceType)===0||((r=this.opts)==null?void 0:r.heroSliceType)===1||((a=this.opts)==null?void 0:a.heroSliceType)===2)this.draw2D([0,0,F,z],this.opts.heroSliceType,NaN,[1/0,1/0]);else{const G=R.slice(),X=this.effectiveCanvasWidth();F===X&&(G[0]=0),this.draw3D([G[0],0,F,z])}R[0]+=o[0],R[1]+=o[1],w=!1}const D=f[0]*R[4]+m,I=f[1]*R[4]+m,U=f[2]*R[4]+m,L=d[0]*R[4],V=d[1]*R[4],k=d[2]*R[4];if(S){if(this.draw2D([R[0],R[1],D,I],0,NaN,[L,V]),this.draw2D([R[0],R[1]+I+g,D,U],1,NaN,[L,k]),this.draw2D([R[0],R[1]+I+g+U+g,I,U],2,NaN,[V,k]),w){const F=v*R[4];this.draw3D([R[0],R[1]+I+U+U+g*3,F,F])}}else if(T){if(this.draw2D([R[0],R[1],D,I],0,NaN,[L,V]),this.draw2D([R[0]+D+g,R[1],D,U],1,NaN,[L,k]),this.draw2D([R[0]+D+D+g*2,R[1],I,U],2,NaN,[V,k]),w){const F=v*R[4];this.draw3D([R[0]+D+D+I+g*3,R[1],F,F])}}else M&&(u||(w=!1),this.opts.multiplanarShowRender===2&&(w=!0),l&&(w=!1),this.draw2D([R[0],R[1]+U+g,D,I],0,NaN,[L,V]),this.draw2D([R[0],R[1],D,U],1,NaN,[L,k]),this.draw2D([R[0]+D+g,R[1],I,U],2,NaN,[V,k]),w&&this.draw3D([R[0]+D+g,R[1]+U+g,I,I]))}}if(this.opts.isRuler&&this.drawRuler(),this.opts.isColorbar&&this.drawColorbar(),i&&this.drawGraph(),this.uiData.isDragging){if(this.uiData.mouseButtonCenterDown){this.dragForCenterButton([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===4){this.dragForSlicer3D([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===3){this.dragForPanZoom([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0)return;if(this.opts.dragMode===2){this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}const o=Math.abs(this.uiData.dragStart[0]-this.uiData.dragEnd[0]),l=Math.abs(this.uiData.dragStart[1]-this.uiData.dragEnd[1]);this.drawSelectionBox([Math.min(this.uiData.dragStart[0],this.uiData.dragEnd[0]),Math.min(this.uiData.dragStart[1],this.uiData.dragEnd[1]),o,l]);return}const n=this.frac2mm([this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2]]);return e=n[0].toFixed(2)+"×"+n[1].toFixed(2)+"×"+n[2].toFixed(2),this.readyForSync=!0,this.sync(),this.drawAnchoredLabels(),e}drawScene(){if(this.isBusy){this.needsRefresh=!0;return}this.isBusy=!1,this.needsRefresh=!1;let e=this.drawSceneCore();return this._gl!==null&&this.gl.finish(),this.needsRefresh&&(e=this.drawScene()),e}get gl(){if(!this._gl)throw new Error("unable to get WebGL context. Maybe the browser doesn't support WebGL2.");return this._gl}set gl(e){this._gl=e}};function Dj({images:e,sceneId:t,selectedTool:i,niimathOperations:n}){const[s,r]=N.useState(null),a=Fc(),o=Ef({mutationFn:u=>Zc.createAndProcessScene({id:t,requestBody:u}),onSuccess:()=>{r(null)},onError:u=>{console.error("Error processing scene:",u),alert(`Error processing scene: ${u.message}`)},onSettled:()=>{a.invalidateQueries({queryKey:["scenes"]})}}),l=u=>u.length===0?"niimath input.nii output.nii":`niimath input.nii ${u.map(f=>{const d=f.args.filter(g=>g.trim()!=="").join(" ");return d?`${f.operator} ${d}`:f.operator}).join(" ")} output.nii`,c=()=>{const u=e.filter(h=>h.selected);if(u.length===0||!i){alert("Please select at least one image and a processing tool");return}if(console.log("Processing images:",u,i),i==="niimath"&&n.length===0){alert("Please add at least one niimath operation");return}i==="niimath"&&(n.map(h=>({operator:h.operator,args:h.args.filter(f=>f.trim()!==""),description:h.description})),l(n)),o.mutate({tool_name:i,status:"processing"})};return C.jsxs(Yt,{className:"w-full",onClick:c,disabled:!e.some(u=>u.selected)||!i,children:[C.jsx(AI,{className:"mr-2 h-4 w-4"}),"Process Selected Images"]})}function Rj({onUpload:e,onSetSceneId:t,compact:i=!1}){const[n,s]=N.useState(!1),r=N.useRef(null),[a,o]=N.useState("idle"),[l,c]=N.useState(null),u=Ef({mutationFn:async p=>{console.log("Uploading files with generated client:",p.map(v=>v.name));try{return await kN.createSceneWithUploadedFiles({formData:{files:p,scene_title:`Upload Scene - ${new Date().toLocaleString()}`}})}catch(v){console.error("Generated client failed, falling back to fetch:",v)}},onSuccess:p=>{console.log("Scene created with uploaded files:",p),o("processing"),t(p.id)},onError:p=>{console.error("Combined upload error:",p),c(`Upload and scene creation failed: ${p.message||"Unknown error"}`),o("error")}}),h=p=>{o("uploading"),c(null),u.mutate(p)},f=p=>{p.preventDefault(),s(!0)},d=()=>{s(!1)},g=p=>{if(p.preventDefault(),s(!1),p.dataTransfer.files&&p.dataTransfer.files.length>0){const v=Array.from(p.dataTransfer.files);e(v),h(v)}},m=p=>{if(p.target.files&&p.target.files.length>0){console.log("Files selected:",p.target.files);const v=Array.from(p.target.files);e(v),h(v)}},A=()=>{var p;(p=r.current)==null||p.click()};return i?C.jsxs("div",{className:"w-full",children:[C.jsxs(Yt,{variant:"outline",className:"w-full",onClick:A,children:[C.jsx(QA,{className:"mr-2 h-4 w-4"}),"Upload Images"]}),C.jsx("input",{type:"file",ref:r,onChange:m,accept:"image/*",multiple:!0,className:"hidden"})]}):C.jsx("div",{className:Te("border-2 border-dashed rounded-lg p-12 text-center transition-colors",n?"border-primary bg-primary/5":"border-muted-foreground/25","max-w-xl mx-auto w-full"),onDragOver:f,onDragLeave:d,onDrop:g,children:C.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[C.jsx("div",{className:"rounded-full bg-background p-3 shadow-sm",children:C.jsx($7,{className:"h-10 w-10 text-muted-foreground"})}),C.jsxs("div",{className:"grid gap-1 text-center",children:[C.jsx("h3",{className:"text-lg font-semibold",children:"Upload Medical Images"}),C.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop your medical images here or click to browse"}),C.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported formats: NIfTI, GIfTI"})]}),C.jsxs(Yt,{onClick:A,children:[C.jsx(QA,{className:"mr-2 h-4 w-4"}),"Select Files"]}),C.jsx("input",{type:"file",ref:r,onChange:m,multiple:!0,className:"hidden"})]})})}const g6={axial:0,coronal:1,sagittal:2,multi:3,render:4};function Nj({viewMode:e,nvRef:t}){const i=N.useRef(null),n=N.useRef(null),[s,r]=N.useState(!1);N.useEffect(()=>{const l=i.current,c=t;console.log("Niivue attached to canvas",c),l&&c&&(c.attachToCanvas(l),c.setSliceType(g6[e]||0),r(!0))},[]);const a=()=>e!=="multi"?null:C.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 w-full h-full gap-1 absolute top-0 left-0 pointer-events-none",children:[C.jsx("div",{className:"border border-primary/30 bg-black/20 flex items-center justify-center",children:C.jsx("span",{className:"text-white text-xs font-medium",children:"Axial"})}),C.jsx("div",{className:"border border-primary/30 bg-black/20 flex items-center justify-center",children:C.jsx("span",{className:"text-white text-xs font-medium",children:"Coronal"})}),C.jsx("div",{className:"border border-primary/30 bg-black/20 flex items-center justify-center",children:C.jsx("span",{className:"text-white text-xs font-medium",children:"Sagittal"})}),C.jsx("div",{className:"border border-primary/30 bg-black/20 flex items-center justify-center",children:C.jsx("span",{className:"text-white text-xs font-medium",children:"3D"})})]}),o=()=>e==="multi"?null:C.jsxs("div",{className:"absolute top-2 left-2 bg-black/50 text-white px-2 py-1 rounded text-xs font-medium",children:[e.charAt(0).toUpperCase()+e.slice(1)," View"]});return C.jsxs("div",{ref:n,className:"niivue-canvas w-full h-full relative bg-[#111]",children:[C.jsx("canvas",{ref:i}),o(),a(),!s&&C.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:"Loading image..."})]})}function J0({className:e,...t}){return C.jsx("div",{"data-slot":"card",className:Te("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function $0({className:e,...t}){return C.jsx("div",{"data-slot":"card-header",className:Te("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function em({className:e,...t}){return C.jsx("div",{"data-slot":"card-title",className:Te("leading-none font-semibold",e),...t})}function tm({className:e,...t}){return C.jsx("div",{"data-slot":"card-description",className:Te("text-muted-foreground text-sm",e),...t})}function im({className:e,...t}){return C.jsx("div",{"data-slot":"card-content",className:Te("px-6",e),...t})}var[Sd,Cz]=Si("Tooltip",[ud]),Cd=ud(),p6="TooltipProvider",Ij=700,Z1="tooltip.open",[Fj,g2]=Sd(p6),v6=e=>{const{__scopeTooltip:t,delayDuration:i=Ij,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:r}=e,a=N.useRef(!0),o=N.useRef(!1),l=N.useRef(0);return N.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),C.jsx(Fj,{scope:t,isOpenDelayedRef:a,delayDuration:i,onOpen:N.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:N.useCallback(c=>{o.current=c},[]),disableHoverableContent:s,children:r})};v6.displayName=p6;var gc="Tooltip",[Uj,su]=Sd(gc),A6=e=>{const{__scopeTooltip:t,children:i,open:n,defaultOpen:s,onOpenChange:r,disableHoverableContent:a,delayDuration:o}=e,l=g2(gc,e.__scopeTooltip),c=Cd(t),[u,h]=N.useState(null),f=wn(),d=N.useRef(0),g=a??l.disableHoverableContent,m=o??l.delayDuration,A=N.useRef(!1),[p,v]=ji({prop:n,defaultProp:s??!1,onChange:w=>{w?(l.onOpen(),document.dispatchEvent(new CustomEvent(Z1))):l.onClose(),r==null||r(w)},caller:gc}),x=N.useMemo(()=>p?A.current?"delayed-open":"instant-open":"closed",[p]),y=N.useCallback(()=>{window.clearTimeout(d.current),d.current=0,A.current=!1,v(!0)},[v]),b=N.useCallback(()=>{window.clearTimeout(d.current),d.current=0,v(!1)},[v]),E=N.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{A.current=!0,v(!0),d.current=0},m)},[m,v]);return N.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),C.jsx(bS,{...c,children:C.jsx(Uj,{scope:t,contentId:f,open:p,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{l.isOpenDelayedRef.current?E():y()},[l.isOpenDelayedRef,E,y]),onTriggerLeave:N.useCallback(()=>{g?b():(window.clearTimeout(d.current),d.current=0)},[b,g]),onOpen:y,onClose:b,disableHoverableContent:g,children:i})})};A6.displayName=gc;var J1="TooltipTrigger",x6=N.forwardRef((e,t)=>{const{__scopeTooltip:i,...n}=e,s=su(J1,i),r=g2(J1,i),a=Cd(i),o=N.useRef(null),l=Me(t,o,s.onTriggerChange),c=N.useRef(!1),u=N.useRef(!1),h=N.useCallback(()=>c.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),C.jsx(wS,{asChild:!0,...a,children:C.jsx(fe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:ue(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:ue(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:ue(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ue(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:ue(e.onBlur,s.onClose),onClick:ue(e.onClick,s.onClose)})})});x6.displayName=J1;var p2="TooltipPortal",[Bj,Vj]=Sd(p2,{forceMount:void 0}),y6=e=>{const{__scopeTooltip:t,forceMount:i,children:n,container:s}=e,r=su(p2,t);return C.jsx(Bj,{scope:t,forceMount:i,children:C.jsx(oi,{present:i||r.open,children:C.jsx(hd,{asChild:!0,container:s,children:n})})})};y6.displayName=p2;var Bo="TooltipContent",b6=N.forwardRef((e,t)=>{const i=Vj(Bo,e.__scopeTooltip),{forceMount:n=i.forceMount,side:s="top",...r}=e,a=su(Bo,e.__scopeTooltip);return C.jsx(oi,{present:n||a.open,children:a.disableHoverableContent?C.jsx(w6,{side:s,...r,ref:t}):C.jsx(Pj,{side:s,...r,ref:t})})}),Pj=N.forwardRef((e,t)=>{const i=su(Bo,e.__scopeTooltip),n=g2(Bo,e.__scopeTooltip),s=N.useRef(null),r=Me(t,s),[a,o]=N.useState(null),{trigger:l,onClose:c}=i,u=s.current,{onPointerInTransitChange:h}=n,f=N.useCallback(()=>{o(null),h(!1)},[h]),d=N.useCallback((g,m)=>{const A=g.currentTarget,p={x:g.clientX,y:g.clientY},v=jj(p,A.getBoundingClientRect()),x=zj(p,v),y=_j(m.getBoundingClientRect()),b=Hj([...x,...y]);o(b),h(!0)},[h]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(l&&u){const g=A=>d(A,u),m=A=>d(A,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",m)}}},[l,u,d,f]),N.useEffect(()=>{if(a){const g=m=>{const A=m.target,p={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(A))||(u==null?void 0:u.contains(A)),x=!Gj(p,a);v?f():x&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,a,c,f]),C.jsx(w6,{...e,ref:r})}),[Oj,Lj]=Sd(gc,{isInside:!1}),kj=GN("TooltipContent"),w6=N.forwardRef((e,t)=>{const{__scopeTooltip:i,children:n,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:a,...o}=e,l=su(Bo,i),c=Cd(i),{onClose:u}=l;return N.useEffect(()=>(document.addEventListener(Z1,u),()=>document.removeEventListener(Z1,u)),[u]),N.useEffect(()=>{if(l.trigger){const h=f=>{const d=f.target;d!=null&&d.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),C.jsx(ad,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:C.jsxs(SS,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(kj,{children:n}),C.jsx(Oj,{scope:i,isInside:!0,children:C.jsx(k9,{id:l.contentId,role:"tooltip",children:s||n})})]})})});b6.displayName=Bo;var S6="TooltipArrow",C6=N.forwardRef((e,t)=>{const{__scopeTooltip:i,...n}=e,s=Cd(i);return Lj(S6,i).isInside?null:C.jsx(CS,{...s,...n,ref:t})});C6.displayName=S6;function jj(e,t){const i=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),r=Math.abs(t.left-e.x);switch(Math.min(i,n,s,r)){case r:return"left";case s:return"right";case i:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function zj(e,t,i=5){const n=[];switch(t){case"top":n.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":n.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":n.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":n.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return n}function _j(e){const{top:t,right:i,bottom:n,left:s}=e;return[{x:s,y:t},{x:i,y:t},{x:i,y:n},{x:s,y:n}]}function Gj(e,t){const{x:i,y:n}=e;let s=!1;for(let r=0,a=t.length-1;r<t.length;a=r++){const o=t[r],l=t[a],c=o.x,u=o.y,h=l.x,f=l.y;u>n!=f>n&&i<(h-c)*(n-u)/(f-u)+c&&(s=!s)}return s}function Hj(e){const t=e.slice();return t.sort((i,n)=>i.x<n.x?-1:i.x>n.x?1:i.y<n.y?-1:i.y>n.y?1:0),Yj(t)}function Yj(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const r=t[t.length-1],a=t[t.length-2];if((r.x-a.x)*(s.y-a.y)>=(r.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const i=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;i.length>=2;){const r=i[i.length-1],a=i[i.length-2];if((r.x-a.x)*(s.y-a.y)>=(r.y-a.y)*(s.x-a.x))i.pop();else break}i.push(s)}return i.pop(),t.length===1&&i.length===1&&t[0].x===i[0].x&&t[0].y===i[0].y?t:t.concat(i)}var qj=v6,Kj=A6,Qj=x6,Xj=y6,Wj=b6,Zj=C6;function E6({delayDuration:e=0,...t}){return C.jsx(qj,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Jj({...e}){return C.jsx(E6,{children:C.jsx(Kj,{"data-slot":"tooltip",...e})})}function $j({...e}){return C.jsx(Qj,{"data-slot":"tooltip-trigger",...e})}function ez({className:e,sideOffset:t=0,children:i,...n}){return C.jsx(Xj,{children:C.jsxs(Wj,{"data-slot":"tooltip-content",sideOffset:t,className:Te("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...n,children:[i,C.jsx(Zj,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const pl=[{name:"-ceil",description:"Round up to nearest integer",args:[],example:"-ceil"},{name:"-floor",description:"Round down to nearest integer",args:[],example:"-floor"},{name:"-round",description:"Round to nearest integer",args:[],example:"-round"},{name:"-abs",description:"Absolute value",args:[],example:"-abs"},{name:"-bandpass",description:"Temporal bandpass filter",args:["hp","lp","tr"],argDescriptions:["High-pass cutoff (Hz)","Low-pass cutoff (Hz)","TR (seconds)"],example:"-bandpass 0.01 0.1 2.0"},{name:"-smooth",description:"Gaussian smoothing",args:["fwhm"],argDescriptions:["FWHM in mm"],example:"-smooth 6.0"},{name:"-add",description:"Add constant value",args:["value"],argDescriptions:["Value to add"],example:"-add 100"},{name:"-sub",description:"Subtract constant value",args:["value"],argDescriptions:["Value to subtract"],example:"-sub 50"},{name:"-mul",description:"Multiply by constant value",args:["value"],argDescriptions:["Value to multiply by"],example:"-mul 2.0"},{name:"-div",description:"Divide by constant value",args:["value"],argDescriptions:["Value to divide by"],example:"-div 1000"},{name:"-thr",description:"Threshold (set values below threshold to zero)",args:["threshold"],argDescriptions:["Threshold value"],example:"-thr 0.5"},{name:"-uthr",description:"Upper threshold (set values above threshold to zero)",args:["threshold"],argDescriptions:["Upper threshold value"],example:"-uthr 1000"},{name:"-bin",description:"Binarize (set non-zero values to 1)",args:[],example:"-bin"},{name:"-mask",description:"Apply mask",args:["mask_file"],argDescriptions:["Path to mask file"],example:"-mask mask.nii"}];function tz({operations:e,onOperationsChange:t}){var l,c;const[i,n]=N.useState(""),s=()=>{if(!i)return;const u=pl.find(f=>f.name===i);if(!u)return;const h={operator:i,args:new Array(u.args.length).fill(""),description:u.description};t([...e,h]),n("")},r=u=>{const h=e.filter((f,d)=>d!==u);t(h)},a=(u,h,f)=>{const d=[...e];d[u].args[h]=f,t(d)},o=()=>e.length===0?"niimath input.nii output.nii":`niimath input.nii ${e.map(h=>{const f=h.args.filter(d=>d.trim()!=="").join(" ");return f?`${h.operator} ${f}`:h.operator}).join(" ")} output.nii`;return C.jsx(E6,{children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs(J0,{children:[C.jsxs($0,{className:"pb-3",children:[C.jsx(em,{className:"text-base",children:"Add Operation"}),C.jsx(tm,{className:"text-sm",children:"Select a niimath operator to add to the processing pipeline"})]}),C.jsxs(im,{className:"space-y-3",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsxs(lC,{value:i,onValueChange:n,children:[C.jsx(uC,{className:"flex-1 w-20",children:C.jsx(cC,{placeholder:"Select operator..."})}),C.jsx(hC,{children:pl.map(u=>C.jsx(Cl,{value:u.name,children:C.jsxs("div",{className:"flex items-center justify-between w-full",children:[C.jsx("span",{className:"font-mono text-sm",children:u.name}),C.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:u.description})]})},u.name))})]}),C.jsx(Yt,{onClick:s,disabled:!i,size:"sm",children:C.jsx(dI,{className:"h-4 w-4"})})]}),i&&C.jsx("div",{className:"p-3 bg-muted/50 rounded-md",children:C.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.jsx("code",{className:"text-sm font-mono bg-background px-2 py-1 rounded",children:(l=pl.find(u=>u.name===i))==null?void 0:l.example}),C.jsxs(Jj,{children:[C.jsx($j,{children:C.jsx(oI,{className:"h-4 w-4 text-muted-foreground"})}),C.jsx(ez,{children:C.jsx("p",{children:(c=pl.find(u=>u.name===i))==null?void 0:c.description})})]})]})})]})]}),e.length>0&&C.jsxs(J0,{children:[C.jsxs($0,{className:"pb-3",children:[C.jsx(em,{className:"text-base",children:"Processing Pipeline"}),C.jsx(tm,{className:"text-sm",children:"Operations will be applied in the order shown"})]}),C.jsx(im,{className:"space-y-3",children:e.map((u,h)=>{const f=pl.find(d=>d.name===u.operator);return C.jsxs("div",{className:"border rounded-lg p-3 space-y-3",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(vr,{variant:"secondary",className:"font-mono text-xs",children:u.operator}),C.jsx("span",{className:"text-sm text-muted-foreground",children:u.description})]}),C.jsx(Yt,{variant:"ghost",size:"sm",onClick:()=>r(h),className:"h-6 w-6 p-0",children:C.jsx(L3,{className:"h-3 w-3"})})]}),f&&f.args.length>0&&C.jsx("div",{className:"grid gap-2",children:f.args.map((d,g)=>{var m;return C.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[C.jsxs(hf,{className:"text-xs font-medium",children:[d,":"]}),C.jsx(Yw,{placeholder:((m=f.argDescriptions)==null?void 0:m[g])||d,value:u.args[g]||"",onChange:A=>a(h,g,A.target.value),className:"col-span-2 h-8 text-sm"})]},g)})})]},h)})})]}),e.length>0&&C.jsxs(J0,{children:[C.jsxs($0,{className:"pb-3",children:[C.jsx(em,{className:"text-base",children:"Generated Command"}),C.jsx(tm,{className:"text-sm",children:"Preview of the niimath command that will be executed"})]}),C.jsx(im,{children:C.jsx("code",{className:"block p-3 bg-muted rounded-md text-sm font-mono break-all",children:o()})})]})]})})}const hr=new Mj({loadingText:"Drag-drop images",dragAndDropEnabled:!0,textHeight:.02,backColor:[0,0,0,1],crosshairColor:[244,243,238,.5],multiplanarForceRender:!1});function T6(){const[e,t]=N.useState([]),[i,n]=N.useState(null),[s,r]=N.useState(null),[a,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState("axial"),[f,d]=N.useState([]),g=N.useRef(hr),m=[{id:"niimath",name:"Niimath",description:"Perform mathematical operations on images"}];let A=async y=>{if(!g.current)return;const b=g.current;y.forEach(async E=>{const w=await It.loadFromFile({file:E});console.log("nv",b),b.addVolume(w);const S={id:w.id,name:w.name,file:E,selected:!1};t(M=>[...M,S])}),i===null&&y.length>0&&n(e.length)};const p=y=>{t(e.map(b=>b.id===y?{...b,selected:!b.selected}:b))},v=y=>{h(y),g.current&&g.current.setSliceType(g6[y]||0)},x=y=>{n(y),e.map((b,E)=>{console.log("img",b,"index",E,"id",y),E===y?hr.setOpacity(hr.getVolumeIndexByID(b.id),1):hr.setOpacity(hr.getVolumeIndexByID(b.id),0)}),hr.updateGLVolume()};return C.jsxs("div",{className:"flex h-screen flex-col",children:[C.jsx("header",{className:"border-b bg-background px-6 py-3",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h1",{className:"text-xl font-semibold",children:"Medical Image Processing"}),C.jsx("div",{className:"flex items-center gap-2",children:C.jsxs(Yt,{variant:"outline",size:"sm",onClick:()=>o(!a),children:[a?C.jsx(hI,{className:"h-4 w-4"}):C.jsx(cI,{className:"h-4 w-4"}),C.jsx("span",{className:"ml-2 sr-only md:not-sr-only md:inline-block",children:a?"Hide Sidebar":"Show Sidebar"})]})})]})}),C.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[C.jsx("main",{className:"flex-1 overflow-hidden",children:C.jsx("div",{className:"flex h-full flex-col",children:i===null?C.jsx("div",{className:"flex h-full items-center justify-center",children:C.jsx(Rj,{onUpload:A,onSetSceneId:r})}):C.jsxs("div",{className:"relative flex h-full flex-col",children:[C.jsx("div",{className:"flex-1 overflow-hidden",children:C.jsx(Nj,{viewMode:u,nvRef:hr})}),C.jsx("div",{className:"border-t bg-background p-2",children:C.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:C.jsx(YF,{currentView:u,onViewChange:v})})})]})})}),a&&C.jsxs("aside",{className:Te("border-l bg-background w-80 overflow-scroll flex flex-col"),children:[C.jsxs(ZI,{defaultValue:"images",children:[C.jsxs(JI,{className:"w-full justify-start border-b rounded-none px-2 h-12",children:[C.jsx(T0,{value:"images",className:"data-[state=active]:bg-muted",children:"Images"}),C.jsx(T0,{value:"tools",className:"data-[state=active]:bg-muted",children:"Processing Tools"}),C.jsx(T0,{value:"history",className:"data-[state=active]:bg-muted",children:"History"})]}),C.jsx(M0,{value:"images",className:"flex-1 p-0",children:C.jsx("div",{className:"flex flex-col h-full",children:C.jsx(uf,{className:"flex-1",children:e.length>0?C.jsx("div",{className:"grid gap-2 p-4",children:e.map((y,b)=>C.jsxs("div",{className:Te("flex items-center gap-2 p-2 rounded-md cursor-pointer",i===b?"bg-muted":"hover:bg-muted/50"),onClick:()=>x(b),children:[C.jsx("div",{className:"flex-shrink-0",children:C.jsx(ww,{id:`select-${y.id}`,checked:y.selected,onCheckedChange:()=>p(y.id),onClick:E=>E.stopPropagation()})}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx("p",{className:"text-sm font-medium truncate",children:y.name})})]},y.id))}):C.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center text-muted-foreground",children:[C.jsx(rI,{className:"h-8 w-8 mb-2"}),C.jsx("p",{children:"No images uploaded yet"})]})})})}),C.jsx(M0,{value:"tools",className:"flex-1 p-0",children:C.jsx(uf,{className:"h-full",children:C.jsxs("div",{className:"p-4",children:[C.jsx(FF,{value:l||"",onValueChange:c,children:m.map(y=>C.jsxs("div",{className:"flex items-start space-x-2 mb-4",children:[C.jsx(UF,{value:y.id,id:y.id}),C.jsxs("div",{className:"grid gap-1.5",children:[C.jsx(hf,{htmlFor:y.id,className:"font-medium",children:y.name}),C.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})]})]},y.id))}),l==="niimath"&&C.jsx("div",{className:"border-t pt-4",children:C.jsx(tz,{operations:f,onOperationsChange:d})})]})})}),C.jsx(M0,{value:"history",className:"flex-1 p-0",children:C.jsx(qV,{nvRef:g})})]}),C.jsx("div",{className:"border-t p-4 bg-background",children:C.jsx(Dj,{nvRef:g,images:e.filter(y=>y.selected),sceneId:s,selectedTool:l,niimathOperations:f})})]})]})]})}const iz=Dh("/home")({component:T6}),nz=Dh("/")({component:T6}),sz=iz.update({id:"/home",path:"/home",getParentRoute:()=>xp}),rz=nz.update({id:"/",path:"/",getParentRoute:()=>xp}),az={IndexRoute:rz,HomeRoute:sz},oz=xp._addFileChildren(az)._addFileTypes(),M6="/hub",D6="/services/fastapi";Fi.BASE="http://localhost:8000";Fi.TOKEN=async()=>localStorage.getItem("access_token")||"";const oy=e=>{e instanceof A1&&[401,403].includes(e.status)&&(localStorage.removeItem("access_token"),window.location.href="http://localhost:8000/hub/login")},lz=new W6({queryCache:new Fy({onError:oy}),mutationCache:new By({onError:oy})}),v2=new URL(window.location.href),R6=v2.pathname.indexOf("hub")!==-1,N6=R6?M6:D6;console.log("Current URL:",v2.href);console.log("Current pathname:",v2.pathname);console.log("Is hub route:",R6);console.log("APP_BASE_URL:",M6);console.log("API_BASE_URL:",D6);console.log("Selected basepath:",N6);const I6=A8({routeTree:oz,basepath:N6});console.log("Router created with basepath:",I6.basepath);WD.createRoot(document.getElementById("root")).render(C.jsx("div",{className:"app-container",children:C.jsx("div",{className:"main-content",children:C.jsx(pE,{client:lz,children:C.jsx(b8,{router:I6})})})}));
